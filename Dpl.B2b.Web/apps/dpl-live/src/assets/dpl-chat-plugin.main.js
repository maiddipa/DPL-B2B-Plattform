(this["webpackJsonpdpl-chat"]=this["webpackJsonpdpl-chat"]||[]).push([[0],{232:function(e,t,a){e.exports=a(595)},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},481:function(e,t){},590:function(e,t,a){},595:function(e,t,a){"use strict";a.r(t);var n=a(14),s=a.n(n),r=a(208),o=a.n(r),i=(a(237),a(238),a(124)),c=a.n(i),l=a(209),u=a(37),p=a(38),d=a(41),h=a(39),m=a(42),g=(a(239),a(77)),f=a(210),v=a(7),_=a.n(v),y=a(8),b=a.n(y),w=a(9),E=a.n(w),C=a(10),k=a.n(C),M=a(3),S=a.n(M),x=a(11),R=a.n(x),O=a(2),N=a.n(O),j=a(0),L=a.n(j),P=a(1),T=a.n(P),A=a(18),I=a.n(A),F=a(17),U=a.n(F),z=a(4),D=a.n(z),B=a(6),H=a.n(B),q=a(128),W=a.n(q),V=a(214),G=a(46),Z=a(20),Y=a(219),J=a.n(Y),Q=a(220),K=a.n(Q),X=a(221),$=a.n(X),ee=a(222),te=a.n(ee),ae=a(68),ne=a.n(ae),se=a(40),re=a(606),oe=a(79),ie=a(608),ce=a(31),le=a(43),ue=a.n(le),pe=a(33),de=a.n(pe),he=a(223),me=a.n(he),ge=a(131),fe=a.n(ge),ve=a(228),_e=a(16),ye=a.n(_e),be=a(224),we=a.n(be),Ee=a(55),Ce=a(30),ke=a.n(Ce),Me=(a(575),a(69)),Se=a.n(Me),xe=a(63),Re=a.n(xe),Oe=a(64),Ne=a.n(Oe),je=a(84),Le=a.n(je),Pe=a(78),Te=a.n(Pe),Ae=a(133),Ie=a.n(Ae),Fe=a(134),Ue=a.n(Fe),ze=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"state",{errored:!1,loaded:!1}),N()(S()(a),"getInitials",(function(e){return e?e.split(" ").slice(0,1).map((function(e){return e.charAt(0)})):null})),N()(S()(a),"onLoad",(function(){a.setState({loaded:!0})})),N()(S()(a),"onError",(function(){a.setState({errored:!0})})),a}return R()(t,e),b()(t,[{key:"componentDidUpdate",value:function(e){e.image!==this.props.image&&this.setState({loaded:!1,errored:!1})}},{key:"render",value:function(){var e=this.props,t=e.size,a=e.name,n=e.shape,s=e.image,r=this.getInitials(a);return L.a.createElement("div",{className:"str-chat__avatar str-chat__avatar--".concat(n),title:a,style:{width:t,height:t,flexBasis:t,lineHeight:t+"px",fontSize:t/2}},s&&!this.state.errored?L.a.createElement("img",{src:s,alt:r,className:"str-chat__avatar-image"+(this.state.loaded?" str-chat__avatar-image--loaded":""),style:{width:t,height:t,flexBasis:t,objectFit:"cover"},onLoad:this.onLoad,onError:this.onError}):L.a.createElement("div",{className:"str-chat__avatar-fallback"},r))}}]),t}(L.a.PureComponent);N()(ze,"propTypes",{image:T.a.string,name:T.a.string,shape:T.a.oneOf(["circle","rounded","square"]),size:T.a.number}),N()(ze,"defaultProps",{size:32,shape:"circle"});var De=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=Object(V.sanitizeUrl)(this.props.href);return L.a.createElement("a",I()({},this.props,{href:e}),this.props.children)}}]),t}(L.a.PureComponent),Be=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"trimUrl",(function(e){var t;return void 0!==e&&null!==e&&(t=e.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/")[0]),t})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.title_link,n=e.text,s=e.type,r=e.image_url,o=e.thumb_url,i=e.og_scrape_url,c=o||r;return t||a||c?a||i?L.a.createElement("div",{className:"str-chat__message-attachment-card str-chat__message-attachment-card--".concat(s)},c&&L.a.createElement("div",{className:"str-chat__message-attachment-card--header"},L.a.createElement("img",{src:c,alt:c})),L.a.createElement("div",{className:"str-chat__message-attachment-card--content"},L.a.createElement("div",{className:"str-chat__message-attachment-card--flex"},t&&L.a.createElement("div",{className:"str-chat__message-attachment-card--title"},t),n&&L.a.createElement("div",{className:"str-chat__message-attachment-card--text"},n),(a||i)&&L.a.createElement(De,{href:a||i,target:"_blank",rel:"noopener noreferrer",className:"str-chat__message-attachment-card--url"},this.trimUrl(a||i))),"giphy"===s&&L.a.createElement("img",{className:"str-chat__message-attachment-card__giphy-logo",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==",alt:"giphy logo"}))):null:L.a.createElement("div",{className:"str-chat__message-attachment-card str-chat__message-attachment-card--".concat(s)},L.a.createElement("div",{className:"str-chat__message-attachment-card--content"},L.a.createElement("div",{className:"str-chat__message-attachment-card--text"},"this content could not be displayed")))}}]),t}(L.a.PureComponent);N()(Be,"propTypes",{title:T.a.string.isRequired,title_link:T.a.string,og_scrape_url:T.a.string,image_url:T.a.string,thumb_url:T.a.string,text:T.a.string});var He=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"state",{modalIsOpen:!1,currentIndex:0}),N()(S()(a),"toggleModal",(function(){a.setState((function(e){return{modalIsOpen:!e.modalIsOpen}}))})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.image_url,a=e.thumb_url,n=e.fallback,s=[{src:t||a}];return L.a.createElement(L.a.Fragment,null,L.a.createElement("img",{className:"str-chat__message-attachment--img",onClick:this.toggleModal,src:a||t,alt:n}),L.a.createElement(G.b,null,this.state.modalIsOpen?L.a.createElement(G.a,{onClose:this.toggleModal},L.a.createElement(G.c,{views:s})):null))}}]),t}(L.a.PureComponent);N()(He,"propTypes",{image_url:T.a.string,thumb_url:T.a.string,fallback:T.a.string});var qe=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.text,n=t.id,s=t.actions,r=t.actionHandler;return L.a.createElement("div",{className:"str-chat__message-attachment-actions"},L.a.createElement("form",{className:"str-chat__message-attachment-actions-form"},L.a.createElement("span",{key:0},a),s.map((function(t){return L.a.createElement("button",{className:"str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--".concat(t.style),key:"".concat(n,"-").concat(t.value),"data-value":t.value,onClick:r.bind(e,t.name,t.value)},t.text)}))))}}]),t}(L.a.PureComponent);N()(qe,"propTypes",{text:T.a.string,actions:T.a.array.isRequired,actionHandler:T.a.func.isRequired});var We=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"playAudio",(function(){null!==a.audioRef.current&&(a.audioRef.current.pause(),a.updateProgress(),a.setState({playing:!0,updateProgress:setInterval(a.updateProgress,500)}),a.audioRef.current.play())})),N()(S()(a),"pauseAudio",(function(){null!==a.audioRef.current&&a.audioRef.current.pause(),a.setState({playing:!1}),window.clearInterval(a.state.updateProgress)})),N()(S()(a),"updateProgress",(function(){if(null!==a.audioRef.current){var e=a.audioRef.current.currentTime,t=a.audioRef.current.duration,n=100/t*e;a.setState({progress:n}),e===t&&a.pauseAudio()}})),N()(S()(a),"_handleClose",(function(e){a.props.handleClose&&a.props.handleClose(e)})),a.state={open:!1,playing:!1,progress:0,updateProgress:null},a.audioRef=Object(j.createRef)(),a}return R()(t,e),b()(t,[{key:"componentWillUnmount",value:function(){window.clearInterval(this.state.updateProgress)}},{key:"render",value:function(){var e=this,t=this.props.og,a=t.asset_url,n=t.image_url;return Object(j.createElement)("div",{className:"str-chat__audio"},Object(j.createElement)("div",{className:"str-chat__audio__wrapper"},Object(j.createElement)("audio",{ref:this.audioRef},Object(j.createElement)("source",{src:a,type:"audio/mp3"})),Object(j.createElement)("div",{className:"str-chat__audio__image"},Object(j.createElement)("div",{className:"str-chat__audio__image--overlay"},this.state.playing?Object(j.createElement)("div",{onClick:function(){return e.pauseAudio()},className:"str-chat__audio__image--button"},Object(j.createElement)("svg",{width:"40",height:"40",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg"},Object(j.createElement)("path",{d:"M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z",fillRule:"nonzero"}))):Object(j.createElement)("div",{onClick:function(){return e.playAudio()},className:"str-chat__audio__image--button"},Object(j.createElement)("svg",{width:"40",height:"40",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg"},Object(j.createElement)("path",{d:"M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z",fillRule:"nonzero"})))),Object(j.createElement)("img",{src:n,alt:"".concat(t.description)})),Object(j.createElement)("div",{className:"str-chat__audio__content"},Object(j.createElement)("span",{className:"str-chat__audio__content--title"},Object(j.createElement)("strong",null,t.title)),Object(j.createElement)("span",{className:"str-chat__audio__content--subtitle"},t.text),Object(j.createElement)("div",{className:"str-chat__audio__content--progress"},Object(j.createElement)("div",{style:{width:"".concat(this.state.progress,"%")}})))))}}]),t}(j.Component),Ve=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"attachmentRef",L.a.createRef()),N()(S()(a),"renderAttachmentActions",(function(e){return L.a.createElement(qe,I()({key:"key-actions-"+e.id},e,{actionHandler:a.props.actionHandler}))})),N()(S()(a),"renderAttachment",(function(e){return L.a.createElement("div",{className:"str-chat__attachment",key:"key-image-".concat(e.id)},L.a.createElement(Be,I()({},e,{key:"key-card-".concat(e.id)})),a.renderAttachmentActions(e))})),a}return R()(t,e),b()(t,[{key:"attachmentType",value:function(e){var t,a;return e.actions&&e.actions.length>0&&(a="actions"),"giphy"===e.type||"imgur"===e.type?t="card":"image"===e.type&&(e.title_link||e.og_scrape_url)?t="card":"image"===e.type?t="image":"file"===e.type?t="file":"audio"===e.type?t="audio":"video"===e.type?t="media":(t="card",a="no-image"),{type:t,extra:a}}},{key:"render",value:function(){var e=this.props.attachment;if(!e)return null;var t=this.attachmentType(e),a=t.type,n=t.extra;if("card"===a&&!e.title_link&&!e.og_scrape_url)return null;var s=[];return"image"===a?e.actions&&e.actions.length?s.push(L.a.createElement("div",{className:"str-chat__attachment",key:"key-image-".concat(e.id)},L.a.createElement(He,e),this.renderAttachmentActions(e))):s.push(L.a.createElement(He,I()({},e,{key:"key-image-".concat(e.id)}))):"file"===a?e.asset_url&&s.push(L.a.createElement("div",{className:"str-chat__message-attachment-file--item",key:"key-file-".concat(e.id)},L.a.createElement(Z.a,{mimeType:e.mime_type,filename:e.title,big:!0,size:30}),L.a.createElement("div",{className:"str-chat__message-attachment-file--item-text"},L.a.createElement(De,{href:e.asset_url,download:!0},e.title),e.file_size&&L.a.createElement("span",null,J()(e.file_size))))):"audio"===a?s.push(L.a.createElement("div",{className:"str-chat__attachment",key:"key-video-".concat(e.id)},L.a.createElement(We,{og:e}))):"media"===a?e.actions&&e.actions.length?s.push(L.a.createElement("div",{className:"str-chat__attachment",key:"key-video-".concat(e.id)},L.a.createElement("div",{className:"str-chat__player-wrapper"},L.a.createElement(W.a,{className:"react-player",url:e.asset_url,width:"100%",height:"100%",controls:!0})),this.renderAttachmentActions(e))):s.push(L.a.createElement("div",{className:"str-chat__player-wrapper",key:"key-video-".concat(e.id)},L.a.createElement(W.a,{className:"react-player",url:e.asset_url,width:"100%",height:"100%",controls:!0}))):e.actions&&e.actions.length?s.push(this.renderAttachment(e)):s.push(L.a.createElement(Be,I()({},e,{key:"key-card-".concat(e.id)}))),0===s.length?null:L.a.createElement("div",{className:"str-chat__message-attachment str-chat__message-attachment--".concat(a," str-chat__message-attachment--").concat(e.type," str-chat__message-attachment--").concat(a,"--").concat(n),ref:this.attachmentRef},s)}}]),t}(j.PureComponent);function Ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ge(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}N()(Ve,"propTypes",{attachment:T.a.object.isRequired,actionHandler:T.a.func.isRequired}),Ve.propTypes={};var Ye={spriteUrl:"https://getstream.imgix.net/images/emoji-sprite.png",size:20,sheetColumns:2,sheetRows:3,sheetSize:64},Je={emoticons:[],short_names:[],custom:!0},Qe=[Ze({id:"like",name:"like",colons:":+1:",sheet_x:0,sheet_y:0},Je,{},Ye),Ze({id:"love",name:"love",colons:":heart:",sheet_x:1,sheet_y:2},Je,{},Ye),Ze({id:"haha",name:"haha",colons:":joy:",sheet_x:1,sheet_y:0},Je,{},Ye),Ze({id:"wow",name:"wow",colons:":astonished:",sheet_x:0,sheet_y:2},Je,{},Ye),Ze({id:"sad",name:"sad",colons:":pensive:",sheet_x:0,sheet_y:1},Je,{},Ye),Ze({id:"angry",name:"angry",colons:":angry:",sheet_x:1,sheet_y:1},Je,{},Ye)],Ke=Object.assign({},se);Ke.emojis={};var Xe=Ke,$e=function(e){return!!e&&!e.replace($()(),"").replace(/[\s\n]/gm,"")},et=function(e){return e&&"function"===typeof e.then},tt=function(e,t){var a="",n=t.map((function(e){return e.name||e.id})).slice(0,5),s=t.length-n.length,r=e.formatMessage({id:"message_status.and",defaultMessage:"and"}),o=e.formatMessage({id:"message_status.more",defaultMessage:"and {count} more"},{count:s}),i=s>0?" "+o:"";return 1===n.length?a=n[0]+" ":2===n.length?a=n.join(" "+r+" ")+" ":n.length>2&&(a=n.join(", ")+i),a},at=function(e){var t=window.dplChatConfig.language,a="";if(e.translations)switch(t){case"en":a=e.translations.en?e.translations.en:e.text;break;case"de":a=e.translations.de?e.translations.de:e.text;break;case"it":a=e.translations.it?e.translations.it:e.text;break;case"es":a=e.translations.es?e.translations.es:e.text;break;case"pl":a=e.translations.pl?e.translations.pl:e.text;break;case"fr":a=e.translations.fr?e.translations.fr:e.text;break;default:a=e.text}else a=e.text;var n=e.mentioned_users;if(a){var s=K()(a,{list:!0}),r=!0,o=!1,i=void 0;try{for(var c,l=s[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var u=c.value,p=ne()(u.encoded.replace(/^(www\.)/,""),{length:20,omission:"..."}),d="[".concat(p,"](").concat(u.protocol).concat(u.encoded,")");a=a.replace(u.raw,d)}}catch(_){o=!0,i=_}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}var h=a;if(n&&n.length)for(var m=0;m<n.length;m++){var g=n[m].name||n[m].id,f="**@".concat(g,"**"),v=new RegExp("@".concat(g),"g");h=h.replace(v,f)}return L.a.createElement(te.a,{allowedTypes:["html","root","text","break","paragraph","emphasis","strong","link","list","listItem","code","inlineCode","blockquote"],source:h,linkTarget:"_blank",plugins:[],escapeHtml:!0,skipHtml:!1})}};function nt(){return st()+st()+"-"+st()+"-"+st()+"-"+st()+"-"+st()+st()+st()}function st(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var rt=function(e,t,a){if(void 0===e&&(e=a),L.a.isValidElement(e))return e;var n=e;return"string"===typeof n||"number"===typeof n||"boolean"===typeof n||null==n?n:L.a.createElement(n,t)},ot={edit:"edit",delete:"delete",flag:"flag",mute:"mute"},it=new Event("dpl-chat-language-changed"),ct=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"actionsBoxRef",L.a.createRef()),N()(S()(a),"state",{reverse:!1,rect:null}),a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=H()(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.open||!this.props.open){e.next=6;break}if(null!==this.state.rect){e.next=4;break}return e.next=4,this.setState({rect:this.actionsBoxRef.current.getBoundingClientRect()});case 4:a=this.props.messageListRect,this.props.mine?this.setState({reverse:this.state.rect.left<a.left}):this.props.mine||this.setState({reverse:this.state.rect.right+5>a.right});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.handleFlag,a=e.handleMute,n=e.handleEdit,s=e.handleDelete,r=(0,e.getMessageActions)();return L.a.createElement("div",{className:"str-chat__message-actions-box\n          ".concat(this.props.open?"str-chat__message-actions-box--open":"","\n          ").concat(this.props.mine?"str-chat__message-actions-box--mine":"","\n          ").concat(this.state.reverse?"str-chat__message-actions-box--reverse":"","\n        "),ref:this.actionsBoxRef},L.a.createElement("ul",{className:"str-chat__message-actions-list"},r.indexOf(ot.flag)>-1&&L.a.createElement("button",{onClick:t},L.a.createElement("li",{className:"str-chat__message-actions-list-item"},L.a.createElement(re.a,{id:"message_actions.flag",defaultMessage:"Flag"}))),r.indexOf(ot.mute)>-1&&L.a.createElement("button",{onClick:a},L.a.createElement("li",{className:"str-chat__message-actions-list-item"},L.a.createElement(re.a,{id:"message_actions.mute",defaultMessage:"Mute"}))),r.indexOf(ot.edit)>-1&&L.a.createElement("button",{onClick:n},L.a.createElement("li",{className:"str-chat__message-actions-list-item"},L.a.createElement(re.a,{id:"message_actions.edit",defaultMessage:"Edit Message"}))),r.indexOf(ot.delete)>-1&&L.a.createElement("button",{onClick:s},L.a.createElement("li",{className:"str-chat__message-actions-list-item"},L.a.createElement(re.a,{id:"message_actions.delete",defaultMessage:"Delete"})))))}}]),t}(L.a.Component);function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}N()(ct,"propTypes",{open:T.a.bool.isRequired,Message:T.a.oneOfType([T.a.node,T.a.func,T.a.object]).isRequired,mine:T.a.bool,messageListRect:T.a.object}),N()(ct,"defaultProps",{open:!1});var ut=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"_renderReactions",(function(e){var t={};e.map((function(a){return void 0===e[a.type]?t[a.type]=[a]:t[a.type]=[].concat(U()(t[a.type]),[a])}));var n=a.props.reactionOptions.reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,N()({},t.id,t))}),{});return Object.keys(t).map((function(e){return n[e]?L.a.createElement("li",{key:n[e].id},L.a.createElement(ce.a,I()({emoji:n[e]},Ye,{size:16,data:Xe}))," ","\xa0"):null}))})),N()(S()(a),"_getReactionCount",(function(){var e=a.props.reaction_counts,t=null;return null!==e&&void 0!==e&&Object.keys(e).length>0&&(t=0,Object.keys(e).map((function(a){return t+=e[a]}))),t})),a}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement("div",{className:"str-chat__reaction-list ".concat(this.props.reverse?"str-chat__reaction-list--reverse":""),onClick:this.props.onClick,ref:this.reactionList},L.a.createElement("ul",null,this._renderReactions(this.props.reactions),L.a.createElement("li",null,L.a.createElement("span",{className:"str-chat__reaction-list--counter"},this._getReactionCount()))))}}]),t}(L.a.Component);N()(ut,"propTypes",{reactions:T.a.array,reactionOptions:T.a.array,reverse:T.a.bool,reaction_counts:T.a.object}),N()(ut,"defaultProps",{reactionOptions:Qe,emojiSetDef:Ye,reverse:!1});var pt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement("div",{className:"str-chat__tooltip"},this.props.children)}}]),t}(L.a.PureComponent),dt=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"stopRef",L.a.createRef()),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.size,a=e.color;return L.a.createElement("div",{className:"str-chat__loading-indicator "+a,style:{width:t,height:t}},L.a.createElement("svg",{width:t,height:t,viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("defs",null,L.a.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"a"},L.a.createElement("stop",{stopColor:"#FFF",stopOpacity:"0",offset:"0%"}),L.a.createElement("stop",{ref:this.stopRef,offset:"100%",stopColor:a,stopOpacity:"1",style:{stopColor:a}}))),L.a.createElement("path",{d:"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z",fill:"url(#a)",fillRule:"evenodd"})))}}]),t}(L.a.PureComponent);N()(dt,"propTypes",{size:T.a.number,color:T.a.string}),N()(dt,"defaultProps",{size:15,color:"#006CFF"});var ht=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"state",{modalIsOpen:!1,currentIndex:0}),N()(S()(a),"toggleModal",(function(e){a.setState((function(t){return{modalIsOpen:!t.modalIsOpen,currentIndex:e}}))})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this,t=this.props.images,a=t.map((function(e){return{src:e.image_url||e.thumb_url}}));return L.a.createElement("div",{className:"str-chat__gallery"},t.slice(0,3).map((function(t,a){return L.a.createElement("div",{className:"str-chat__gallery-image",key:"gallery-image-".concat(a),onClick:function(){return e.toggleModal(a)}},L.a.createElement("img",{src:t.image_url||t.thumb_url}))})),t.length>3&&L.a.createElement("div",{className:"str-chat__gallery-placeholder",style:{backgroundImage:"url(".concat(t[3].image_url,")")},onClick:function(){return e.toggleModal(3)}},L.a.createElement("p",null,t.length-3," more")),L.a.createElement(G.b,null,this.state.modalIsOpen?L.a.createElement(G.a,{onClose:this.toggleModal,closeOnBackdropClick:!0},L.a.createElement(G.c,{views:a,currentIndex:this.state.currentIndex})):null))}}]),t}(L.a.PureComponent);N()(ht,"propTypes",{images:T.a.array.isRequired});var mt=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"showTooltip",function(){var e=H()(D.a.mark((function e(t,n){var s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.target.getBoundingClientRect(),e.next=3,a.setState((function(){return{showTooltip:!0,users:n}}),H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setTooltipPosition(s);case 2:return e.next=4,a.setArrowPosition(s);case 4:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),N()(S()(a),"hideTooltip",(function(){a.setState((function(){return{showTooltip:!1,users:[],arrowPosition:0,position:0,positionCaculated:!1}}))})),N()(S()(a),"getUsersPerReaction",(function(e,t){return e&&e.filter((function(e){return e.type===t}))})),N()(S()(a),"getLatestUser",(function(e,t){var n=a.getUsersPerReaction(e,t);return n&&n[0]&&n[0].user?n[0].user:"NotFound"})),N()(S()(a),"getUserNames",(function(e,t){var n=a.getUsersPerReaction(e,t);return n&&n.map((function(e){return e.user||"NotFound"}))})),N()(S()(a),"getContainerDimensions",(function(){return a.reactionSelector.current.getBoundingClientRect()})),N()(S()(a),"getToolTipDimensions",(function(){return a.reactionSelectorTooltip.current.getBoundingClientRect()})),N()(S()(a),"setTooltipPosition",function(){var e=H()(D.a.mark((function e(t){var n,s,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getContainerDimensions();case 2:return n=e.sent,e.next=5,a.getToolTipDimensions();case 5:return s=e.sent,r=s.width===n.width||s.x<n.x?0:t.left+t.width/2-n.left-s.width/2,e.next=9,a.setState((function(){return{position:r}}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"setArrowPosition",function(){var e=H()(D.a.mark((function e(t){var n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.reactionSelectorTooltip.current.getBoundingClientRect(),s=t.x-n.x+t.width/2,e.next=4,a.setState((function(){return{arrowPosition:s,positionCaculated:!0}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"renderReactionItems",(function(){var e=a.props,t=e.reaction_counts,n=e.latest_reactions;return a.props.reactionOptions.map((function(e){var s=a.getUserNames(n,e.id),r=a.getLatestUser(n,e.id),o=t&&t[e.id];return L.a.createElement("li",{key:"item-".concat(e.id),className:"str-chat__message-reactions-list-item","data-text":e.id,onClick:a.props.handleReaction.bind(S()(a),e.id)},Boolean(o)&&a.props.detailedView&&L.a.createElement(L.a.Fragment,null,L.a.createElement("div",{className:"latest-user",onMouseEnter:function(e){return a.showTooltip(e,s)},onMouseLeave:a.hideTooltip},"NotFound"!==r?L.a.createElement(ze,{image:r.image,alt:r.id,size:20,name:r.id}):L.a.createElement("div",{className:"latest-user-not-found"}))),L.a.createElement(ce.a,I()({emoji:e},Ye,{data:Xe})),Boolean(o)&&a.props.detailedView&&L.a.createElement("span",{className:"str-chat__message-reactions-list-item__count"},o||""))}))})),N()(S()(a),"renderUsers",(function(e){return e.map((function(t,a){var n=t.name||t.id;return a+1<e.length&&(n+=", "),L.a.createElement("span",{className:"latest-user-username",key:"key-".concat(a,"-").concat(t)},n)}))})),a.state={showTooltip:!1,users:[],position:0,arrowPosition:0,positionCalculated:!1},a.reactionSelector=L.a.createRef(),a.reactionSelectorInner=L.a.createRef(),a.reactionSelectorTooltip=L.a.createRef(),a}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement("div",{className:"str-chat__reaction-selector ".concat(this.props.reverse?"str-chat__reaction-selector--reverse":""),ref:this.reactionSelector},this.props.detailedView&&L.a.createElement("div",{className:"str-chat__reaction-selector-tooltip",ref:this.reactionSelectorTooltip,style:{visibility:this.state.showTooltip?"visible":"hidden",left:this.state.position,opacity:this.state.showTooltip&&this.state.positionCaculated?1:.01}},L.a.createElement("div",{className:"arrow",style:{left:this.state.arrowPosition}}),this.renderUsers(this.state.users)),L.a.createElement("ul",{className:"str-chat__message-reactions-list"},this.renderReactionItems()))}}]),t}(j.PureComponent);N()(mt,"propTypes",{latest_reactions:T.a.array,reaction_counts:T.a.object,handleReaction:T.a.func.isRequired,detailedView:T.a.bool,reactionOptions:T.a.array,reverse:T.a.bool}),N()(mt,"defaultProps",{detailedView:!0,reactionOptions:Qe,reverse:!1,emojiSetDef:Ye});var gt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.reply_count;return e&&0!==e?L.a.createElement("button",{className:"str-chat__message-replies-count-button",onClick:this.props.onClick},L.a.createElement("svg",{width:"18",height:"15",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z",fillRule:"nonzero"})),L.a.createElement(re.a,{id:"message_replies.count_button",defaultMessage:"{count, plural, one {# reply} other {# replies}}",values:{count:e}})):null}}]),t}(L.a.PureComponent);N()(gt,"propTypes",{reply_count:T.a.number,onClick:T.a.func}),N()(gt,"defaultProps",{reply_count:0});var ft=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"innerRef",L.a.createRef()),N()(S()(a),"handleClick",(function(e){a.innerRef.current.contains(e.target)||(a.props.onClose(),document.removeEventListener("keyPress",a.handleEscKey,!1))})),a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyPress",this.handleEscKey,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyPress",this.handleEscKey,!1)}},{key:"handleEscKey",value:function(e){27===e.keyCode&&(this.props.onClose(),document.removeEventListener("keyPress",this.handleEscKey,!1))}},{key:"render",value:function(){var e=this.props.open?"str-chat__modal--open":"str-chat__modal--closed";return L.a.createElement("div",{className:"str-chat__modal ".concat(e),onClick:this.handleClick},L.a.createElement("div",{className:"str-chat__modal__close-button"},L.a.createElement(re.a,{id:"modal.close",defaultMessage:"Close"}),L.a.createElement("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z",fillRule:"evenodd"}))),L.a.createElement("div",{className:"str-chat__modal__inner",ref:this.innerRef},this.props.children))}}]),t}(L.a.PureComponent);function vt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var _t=L.a.createContext({client:null});function yt(e){var t=function(t){return L.a.createElement(_t.Consumer,null,(function(a){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vt(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{},t);return L.a.createElement(e,n)}))};return t.displayName=(t.displayName=e.displayName||e.name||"Component").replace("Base",""),t}var bt=L.a.createContext({});function wt(e){var t=function(t){return L.a.createElement(bt.Consumer,null,(function(a){return L.a.createElement(e,I()({},a,t))}))};return t.displayName=(t.displayName=e.displayName||e.name||"Component").replace("Base",""),t}var Et={ESC:27,UP:38,DOWN:40,ENTER:13,TAB:9,SPACE:32},Ct=new function e(){var t=this;_()(this,e),N()(this,"startListen",(function(){t.refCount||document.addEventListener("keydown",t.f),t.refCount++})),N()(this,"stopListen",(function(){t.refCount--,t.refCount||document.removeEventListener("keydown",t.f)})),N()(this,"add",(function(e,a){var n=e;return"object"!==de()(n)&&(n=[n]),t.listeners[t.index]={keyCode:n,fn:a},t.index+=1,t.index})),N()(this,"remove",(function(e){delete t.listeners[e]})),N()(this,"removeAll",(function(){t.listeners={},t.index=0})),this.index=0,this.listeners={},this.refCount=0,this.f=function(e){var a=e.keyCode||e.which;Object.values(t.listeners).forEach((function(t){var n=t.keyCode,s=t.fn;n.includes(a)&&s(e)}))}},kt=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"selectItem",(function(){var e=a.props,t=e.item;(0,e.onSelectHandler)(t)})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.component,a=e.style,n=e.onClickHandler,s=e.item,r=e.selected,o=e.className,i=e.innerRef;return L.a.createElement("li",{className:"rta__item ".concat(o||""),style:a},L.a.createElement("div",{className:"rta__entity ".concat(!0===r?"rta__entity--selected":""),role:"button",tabIndex:0,onClick:n,onFocus:this.selectItem,onMouseEnter:this.selectItem,ref:i},L.a.createElement(t,{selected:r,entity:s})))}}]),t}(L.a.Component),Mt=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"state",{selectedItem:null}),N()(S()(a),"cachedValues",null),N()(S()(a),"onPressEnter",(function(e){e&&e.preventDefault&&e.preventDefault();var t=a.props.values;a.modifyText(t[a.getPositionInList()])})),N()(S()(a),"getPositionInList",(function(){var e=a.props.values,t=a.state.selectedItem;return t?e.findIndex((function(e){return a.getId(e)===a.getId(t)})):0})),N()(S()(a),"getId",(function(e){var t=a.props.getTextToReplace(e);return t.key?t.key:"string"!==typeof e&&e.key?e.key:t.text})),N()(S()(a),"listeners",[]),N()(S()(a),"itemsRef",{}),N()(S()(a),"modifyText",(function(e){if(e){var t=a.props,n=t.onSelect,s=t.getTextToReplace,r=t.getSelectedItem;n(s(e)),r&&r(e)}})),N()(S()(a),"selectItem",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.setState({selectedItem:e},(function(){t&&a.props.dropdownScroll(a.itemsRef[a.getId(e)])}))})),N()(S()(a),"scroll",(function(e){e&&e.preventDefault&&e.preventDefault();var t,n=a.props.values,s=e.keyCode||e.which,r=a.getPositionInList();switch(s){case Et.DOWN:t=r+1;break;case Et.UP:t=r-1;break;default:t=r}t=(t%n.length+n.length)%n.length,a.selectItem(n[t],[Et.DOWN,Et.UP].includes(s))})),N()(S()(a),"isSelected",(function(e){var t=a.state.selectedItem;return!!t&&a.getId(t)===a.getId(e)})),N()(S()(a),"renderHeader",(function(e){return"/"===e[0]?"Commands matching <strong>".concat(e.replace("/",""),"</strong>"):":"===e[0]?"Emoji matching <strong>".concat(e.replace(":",""),"</strong>"):"@"===e[0]?"Searching for people":void 0})),a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.listeners.push(Ct.add([Et.DOWN,Et.UP],this.scroll),Ct.add([Et.ENTER,Et.TAB],this.onPressEnter));var e=this.props.values;e&&e[0]&&this.selectItem(e[0])}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,a=e.values,n=a.map((function(e){return t.getId(e)})).join("");this.cachedValues!==n&&a&&a[0]&&(this.selectItem(a[0]),this.cachedValues=n)}},{key:"componentWillUnmount",value:function(){for(var e;this.listeners.length;)e=this.listeners.pop(),Ct.remove(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.values,n=t.component,s=t.style,r=t.itemClassName,o=t.className,i=t.itemStyle;return L.a.createElement("ul",{className:"rta__list ".concat(o||""),style:s},L.a.createElement("li",{className:"rta__list-header",dangerouslySetInnerHTML:{__html:this.renderHeader(this.props.value)}}),a.map((function(t){return L.a.createElement(kt,{key:e.getId(t),innerRef:function(a){e.itemsRef[e.getId(t)]=a},selected:e.isSelected(t),item:t,className:r,style:i,onClickHandler:e.onPressEnter,onSelectHandler:e.selectItem,component:n})})))}}]),t}(L.a.Component);function St(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?St(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):St(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Rt="next",Ot=function(e){return console.error("RTA: dataProvider fails: ".concat(e,"\n    \nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues"))},Nt=function(e){function t(e){var a;_()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"getSelectionPosition",(function(){return a.textareaRef?{selectionStart:a.textareaRef.selectionStart,selectionEnd:a.textareaRef.selectionEnd}:null})),N()(S()(a),"getSelectedText",(function(){if(!a.textareaRef)return null;var e=a.textareaRef,t=e.selectionStart,n=e.selectionEnd;return t===n?null:a.state.value.substr(t,n-t)})),N()(S()(a),"setCaretPosition",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a.textareaRef&&(a.textareaRef.focus(),a.textareaRef.setSelectionRange(e,e))})),N()(S()(a),"getCaretPosition",(function(){return a.textareaRef?a.textareaRef.selectionEnd:0})),N()(S()(a),"_onEnter",(function(e){var t=a.state.currentTrigger;a.textareaRef&&(a.textareaRef.matches(":focus")&&!0!==e.shiftKey&&(t||(a._replaceWord(),a.textareaRef&&(a.textareaRef.selectionEnd=0),a.props.handleSubmit(e))))})),N()(S()(a),"_onSpace",(function(){a.props.replaceWord&&(a.textareaRef&&a.textareaRef.matches(":focus")&&a._replaceWord())})),N()(S()(a),"_replaceWord",(function(){var e=a.state.value,t=/([^\s]+)(\s*)$/.exec(e.slice(0,a.getCaretPosition())),n=t&&t[1];if(n){var s=t[2],r=a.props.replaceWord(n);if(null!=r){var o=e.slice(0,a.getCaretPosition()-t[0].length)+r+s+e.slice(a.getCaretPosition(),-1);a.setState({value:o},(function(){var e=new fe.a("change",{bubbles:!0});a.textareaRef.dispatchEvent(e),a.props.onChange&&a.props.onChange(e)}))}}})),N()(S()(a),"_onSelect",(function(e){var t=a.state,n=t.selectionEnd,s=t.currentTrigger,r=t.value,o=a.props,i=o.onChange,c=o.trigger;if(s){var l=r.slice(0,n),u=l.search(new RegExp("\\".concat(s,"[^\\".concat(s).concat(c[s].allowWhitespace?"":"\\s","]"),"*$"))),p="next"===e.caretPosition?"".concat(e.text," "):e.text,d=function(e,t,a){switch(e){case"start":return a;case"next":case"end":return a+t.length;default:if(!Number.isInteger(e))throw new Error('RTA: caretPosition should be "start", "next", "end" or number.');return e}}(e.caretPosition,p,u),h=l.substring(0,u)+p;a.setState({value:r.replace(l,h),dataLoading:!1},(function(){var e=new fe.a("change",{bubbles:!0});a.textareaRef.dispatchEvent(e),i&&i(e),a.setCaretPosition(d)})),a._closeAutocomplete()}})),N()(S()(a),"_getItemOnSelect",(function(){var e=a.state.currentTrigger,t=a._getCurrentTriggerSettings();if(!e||!t)return null;var n=t.callback;return n?function(t){if("function"!==typeof n)throw new Error('Output functor is not defined! You have to define "output" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');return n?n(t,e):null}:null})),N()(S()(a),"_getTextToReplace",(function(){var e=a.state,t=e.currentTrigger,n=e.actualToken,s=a._getCurrentTriggerSettings();if(!t||!s)return null;var r=s.output;return function(e){if("object"===de()(e)&&(!r||"function"!==typeof r))throw new Error('Output functor is not defined! If you are using items as object you have to define "output" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');if(r){var a=r(e,t);if(!a||"number"===typeof a)throw new Error('Output functor should return string or object in shape {text: string, caretPosition: string | number}.\nGot "'.concat(String(a),'". Check the implementation for trigger "').concat(t,'" and its token "').concat(n,'"\n\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\n'));if("string"===typeof a)return{text:a,caretPosition:Rt};if(!a.text)throw new Error('Output "text" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger "'.concat(t,'" and its token "').concat(n,'"\n'));if(!a.caretPosition)throw new Error('Output "caretPosition" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger "'.concat(t,'" and its token "').concat(n,'"\n'));return a}if("string"!==typeof e)throw new Error("Output item should be string\n");return{text:"".concat(t).concat(e).concat(t),caretPosition:Rt}}})),N()(S()(a),"_getCurrentTriggerSettings",(function(){var e=a.state.currentTrigger;return e?a.props.trigger[e]:null})),N()(S()(a),"_getValuesFromProvider",(function(){var e=a.state,t=e.currentTrigger,n=e.actualToken,s=a._getCurrentTriggerSettings();if(t&&s){var r=s.dataProvider,o=s.component;if("function"!==typeof r)throw new Error("Trigger provider has to be a function!");a.setState({dataLoading:!0});var i=r(n,a.state.value);i instanceof Promise||(i=Promise.resolve(i)),i.then((function(e){if(!Array.isArray(e))throw new Error("Trigger provider has to provide an array!");if("function"!==typeof o)throw new Error("Component should be defined!");t===a.state.currentTrigger&&(e.length?a.setState({dataLoading:!1,data:e,component:o}):a._closeAutocomplete())})).catch((function(e){return Ot(e.message)}))}})),N()(S()(a),"_getSuggestions",(function(){var e=a.state,t=e.currentTrigger,n=e.data;return!t||!n||n&&!n.length?null:n})),N()(S()(a),"_createRegExp",(function(){var e=a.props.trigger;a.tokenRegExp=new RegExp("([".concat(Object.keys(e).join(""),"])(?:(?!\\1)[^\\s])*$"))})),N()(S()(a),"_closeAutocomplete",(function(){a.setState({data:null,dataLoading:!1,currentTrigger:null,top:null,left:null})})),N()(S()(a),"_cleanUpProps",(function(){var e=xt({},a.props),t=["loadingComponent","containerStyle","minChar","scrollToItem","ref","innerRef","onChange","onCaretPositionChange","className","value","trigger","listStyle","itemStyle","containerStyle","loaderStyle","className","containerClassName","listClassName","itemClassName","loaderClassName","closeOnClickOutside","dropdownStyle","dropdownClassName","movePopupAsYouType","handleSubmit","replaceWord","grow"];for(var n in e)t.includes(n)&&delete e[n];return e})),N()(S()(a),"_changeHandler",(function(e){var t=a.props,n=t.trigger,s=t.onChange,r=t.minChar,o=t.onCaretPositionChange,i=t.movePopupAsYouType,c=a.state,l=c.top,u=c.left,p=e.target,d=p.selectionEnd,h=p.selectionStart,m=p.value;(s&&(e.persist(),s(e)),o)&&o(a.getCaretPosition());a.setState({value:m});var g=a.tokenRegExp.exec(m.slice(0,d)),f=g&&g[0],v=f&&Object.keys(n).find((function(e){return e===f[0]}))||null;if(f&&!(f.length<=r)||(!a.state.currentTrigger||n[a.state.currentTrigger].allowWhitespace)&&a.state.currentTrigger)if(v&&m[g.index-1]&&n[v].afterWhitespace&&!m[g.index-1].match(/\s/))a._closeAutocomplete();else{if(a.state.currentTrigger&&n[a.state.currentTrigger].allowWhitespace){if(g=new RegExp("\\".concat(a.state.currentTrigger,"[^").concat(a.state.currentTrigger,"]*$")).exec(m.slice(0,d)),!(f=g&&g[0]))return void a._closeAutocomplete();v=Object.keys(n).find((function(e){return e===f[0]}))||null}var _=f.slice(1);if(v){if(i||null===l&&null===u||1===f.length){var y=me()(p,d),b=y.top,w=y.left;a.setState({top:b-a.textareaRef.scrollTop||0,left:w})}a.setState({selectionEnd:d,selectionStart:h,currentTrigger:v,actualToken:_},(function(){try{a._getValuesFromProvider()}catch(e){Ot(e.message)}}))}}else a._closeAutocomplete()})),N()(S()(a),"_selectHandler",(function(e){var t=a.props,n=t.onCaretPositionChange,s=t.onSelect;n&&n(a.getCaretPosition());s&&(e.persist(),s(e))})),N()(S()(a),"_onClickAndBlurHandler",(function(e){var t=a.props,n=t.closeOnClickOutside,s=t.onBlur,r=e.relatedTarget;a.dropdownRef&&r instanceof Node&&a.dropdownRef.contains(r)||(n&&a._closeAutocomplete(),s&&(e.persist(),s(e)))})),N()(S()(a),"_onScrollHandler",(function(){a._closeAutocomplete()})),N()(S()(a),"_dropdownScroll",(function(e){var t=a.props.scrollToItem;if(t)if(!0!==t){if("function"!==typeof t||2!==t.length)throw new Error("`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.");t(a.dropdownRef,e)}else!function(e,t){var a=parseInt(getComputedStyle(t).getPropertyValue("height"),10),n=parseInt(getComputedStyle(e).getPropertyValue("height"),10)-a,s=t.offsetTop,r=e.scrollTop;s<r+n&&r<s||(e.scrollTop=s)}(a.dropdownRef,e)}));var n=a.props,s=n.loadingComponent,r=n.trigger,o=n.value;if(a._createRegExp(),!s)throw new Error("RTA: loadingComponent is not defined");if(!r)throw new Error("RTA: trigger is not defined");return a.state={top:null,left:null,currentTrigger:null,actualToken:"",data:null,value:o||"",dataLoading:!1,selectionEnd:0,selectionStart:0,component:null,listenerIndex:0},a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){var e=this;Ct.add(Et.ESC,(function(){return e._closeAutocomplete()})),Ct.add(Et.SPACE,(function(){return e._onSpace()}));var t=Ct.add(Et.ENTER,(function(t){return e._onEnter(t)}));this.setState({listenerIndex:t}),Ct.startListen()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this._update(e)}},{key:"componentWillUnmount",value:function(){Ct.stopListen(),Ct.remove(this.state.listenerIndex)}},{key:"_update",value:function(e){var t=e.value,a=e.trigger,n=this.state.value,s=this.props.trigger;t===n&&n||this.setState({value:t}),Object.keys(a).join("")!==Object.keys(s).join("")&&this._createRegExp()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loadingComponent,n=t.style,s=t.className,r=t.itemStyle,o=t.listClassName,i=t.itemClassName,c=t.dropdownClassName,l=t.dropdownStyle,u=t.containerStyle,p=t.containerClassName,d=t.loaderStyle,h=t.loaderClassName,m=this.state,g=m.dataLoading,f=m.currentTrigger,v=m.component,_=m.value,y=this._getSuggestions(),b=this._getTextToReplace(),w=this._getItemOnSelect(),E=this.props.maxRows;return this.props.grow||(E=1),L.a.createElement("div",{className:"rta ".concat(!0===g?"rta--loading":""," ").concat(p||""),style:u},(g||y)&&f&&L.a.createElement("div",{ref:function(t){e.dropdownRef=t},style:xt({},l),className:"rta__autocomplete ".concat(c||"")},y&&v&&b&&L.a.createElement(Mt,{value:_,values:y,component:v,className:o,itemClassName:i,itemStyle:r,getTextToReplace:b,getSelectedItem:w,onSelect:this._onSelect,dropdownScroll:this._dropdownScroll}),g&&L.a.createElement("div",{className:"rta__loader ".concat(null!==y?"rta__loader--suggestion-data":"rta__loader--empty-suggestion-data"," ").concat(h||""),style:d},L.a.createElement(a,{data:y}))),L.a.createElement(ve.a,I()({},this._cleanUpProps(),{inputRef:function(t){e.props.innerRef&&e.props.innerRef(t),e.textareaRef=t},maxRows:E,className:"rta__textarea ".concat(s||""),onChange:this._changeHandler,onSelect:this._selectHandler,onScroll:this._onScrollHandler,onClick:this._onClickAndBlurHandler,onBlur:this._onClickAndBlurHandler,onFocus:this.props.onFocus,value:_,style:n})))}}]),t}(L.a.Component);N()(Nt,"defaultProps",{closeOnClickOutside:!0,movePopupAsYouType:!1,value:"",minChar:1,scrollToItem:!0,maxRows:10});Nt.propTypes={loadingComponent:T.a.func.isRequired,minChar:T.a.number,onChange:T.a.func,onSelect:T.a.func,onBlur:T.a.func,onCaretPositionChange:T.a.func,className:T.a.string,containerStyle:T.a.object,containerClassName:T.a.string,closeOnClickOutside:T.a.bool,style:T.a.object,listStyle:T.a.object,itemStyle:T.a.object,loaderStyle:T.a.object,dropdownStyle:T.a.object,listClassName:T.a.string,itemClassName:T.a.string,loaderClassName:T.a.string,dropdownClassName:T.a.string,value:T.a.string,trigger:function(e){var t=e.trigger;if(!t)return Error("Invalid prop trigger. Prop missing.");for(var a=Object.entries(t),n=0;n<a.length;n+=1){var s=ue()(a[n],2),r=s[0],o=s[1];if("string"!==typeof r||1!==r.length)return Error("Invalid prop trigger. Keys of the object has to be string / one character.");var i=o,c=i.component,l=i.dataProvider,u=i.output,p=i.callback,d=i.afterWhitespace,h=i.allowWhitespace;if(!c||"function"!==typeof c)return Error("Invalid prop trigger: component should be defined.");if(!l||"function"!==typeof l)return Error("Invalid prop trigger: dataProvider should be defined.");if(u&&"function"!==typeof u)return Error("Invalid prop trigger: output should be a function.");if(p&&"function"!==typeof p)return Error("Invalid prop trigger: callback should be a function.");if(d&&h)return Error("Invalid prop trigger: afterWhitespace and allowWhitespace can be used together")}return null}};var jt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement("div",{className:"str-chat__emoji-item"},L.a.createElement("span",{className:"str-chat__emoji-item--entity"},this.props.entity.native),L.a.createElement("span",{className:"str-chat__emoji-item--name"},this.props.entity.name),L.a.createElement("span",{className:"str-chat__emoji-item--char"},this.props.entity.char))}}]),t}(j.PureComponent),Lt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.entity;return L.a.createElement("div",{className:"str-chat__user-item"},L.a.createElement(ze,{size:20,image:e.image}),L.a.createElement("div",null,L.a.createElement("strong",null,e.name)," ",e.name?"":e.id))}}]),t}(j.PureComponent),Pt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.entity;return L.a.createElement("div",{className:"str-chat__slash-command"},L.a.createElement("span",{className:"str-chat__slash-command-header"},L.a.createElement("strong",null,e.name)," ",e.args),L.a.createElement("br",null),L.a.createElement("span",{className:"str-chat__slash-command-description"},e.description))}}]),t}(j.PureComponent),Tt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"getTriggers",value:function(){var e=this;return{":":{dataProvider:function(e){return 0===e.length||e.charAt(0).match(/[^a-zA-Z0-9+-]/)?[]:(ce.c.search(e)||[]).slice(0,10)},component:jt,output:function(e){return{key:e.id,text:"".concat(e.native),caretPosition:"next"}}},"@":{dataProvider:function(t){return e.props.users.filter((function(e){return void 0!==e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())||-1!==e.id.toLowerCase().indexOf(t.toLowerCase())})).slice(0,10)},component:Lt,output:function(e){return{key:e.id,text:"@".concat(e.name||e.id),caretPosition:"next"}},callback:function(t){return e.props.onSelectItem(t)}},"/":{dataProvider:function(t,a){if(0!==a.indexOf("/"))return[];var n=e.props.commands.filter((function(e){return-1!==e.name.indexOf(t)}));return n.sort((function(e,a){var n=e.name.toLowerCase(),s=a.name.toLowerCase();return 0===n.indexOf(t)&&(n="0".concat(n)),0===s.indexOf(t)&&(s="0".concat(s)),n<s?-1:n>s?1:0})),n.slice(0,10)},component:Pt,output:function(e){return{key:e.id,text:"/".concat(e.name),caretPosition:"next"}}}}}},{key:"emojiReplace",value:function(e){var t=ce.c.search(e)||[],a=!0,n=!1,s=void 0;try{for(var r,o=t.slice(0,10)[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var i=r.value;if(i.emoticons.includes(e))return i.native}}catch(c){n=!0,s=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw s}}}},{key:"render",value:function(){var e=this.props.innerRef;return L.a.createElement(Nt,{loadingComponent:dt,trigger:this.getTriggers(),replaceWord:this.emojiReplace,minChar:0,maxRows:this.props.maxRows,innerRef:e&&function(t){e.current=t},onFocus:this.props.onFocus,rows:this.props.rows,className:"str-chat__textarea__textarea",containerClassName:"str-chat__textarea",dropdownClassName:"str-chat__emojisearch",listClassName:"str-chat__emojisearch__list",itemClassName:"str-chat__emojisearch__item",placeholder:this.props.placeholder,onChange:this.props.onChange,handleSubmit:this.props.handleSubmit,onPaste:this.props.onPaste,value:this.props.value,grow:this.props.grow,disabled:this.props.disabled})}}]),t}(j.PureComponent);N()(Tt,"propTypes",{rows:T.a.number,grow:T.a.bool,maxRows:T.a.number,disabled:T.a.bool,value:T.a.string,onPaste:T.a.func,handleSubmit:T.a.func,onChange:T.a.func,placeholder:T.a.string,LoadingIndicator:T.a.node,trigger:T.a.func,minChar:T.a.number,users:T.a.array,onSelectItem:T.a.func,commands:T.a.array,onFocus:T.a.object}),N()(Tt,"defaultProps",{rows:3});var At=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"renderUploads",(function(){return L.a.createElement(L.a.Fragment,null,a.props.imageOrder.length>0&&L.a.createElement(Z.e,{imageUploads:a.props.imageOrder.map((function(e){return a.props.imageUploads[e]})),handleRemove:a.props.removeImage,handleRetry:a.props.uploadImage,handleFiles:a.props.uploadNewFiles,multiple:a.props.multipleUploads,disabled:a.props.numberOfUploads>=a.props.maxNumberOfFiles}),a.props.fileOrder.length>0&&L.a.createElement(Z.b,{uploads:a.props.fileOrder.map((function(e){return a.props.fileUploads[e]})),handleRemove:a.props.removeFile,handleRetry:a.props.uploadFile,handleFiles:a.props.uploadNewFiles}))})),N()(S()(a),"renderEmojiPicker",(function(){if(a.props.emojiPickerIsOpen)return L.a.createElement("div",{className:"str-chat__input--emojipicker",ref:a.props.emojiPickerRef},L.a.createElement(ce.b,{native:!0,emoji:"point_up",title:"Pick your emoji\u2026",onSelect:a.props.onSelectEmoji,color:"#006CFF",showPreview:!1}))})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this,t=this.props.intl,a=this.props.SendButton;return L.a.createElement("div",{className:"str-chat__input-large"},L.a.createElement(Z.d,{accept:this.props.acceptedFiles,multiple:this.props.multipleUploads,disabled:this.props.numberOfUploads>=this.props.maxNumberOfFiles,handleFiles:this.props.uploadNewFiles},L.a.createElement("div",{className:"str-chat__input"},this.renderUploads(),this.renderEmojiPicker(),L.a.createElement("div",{className:"str-chat__input--textarea-wrapper"},L.a.createElement(Tt,{users:this.props.getUsers(),commands:this.props.getCommands(),innerRef:this.props.textareaRef,handleSubmit:function(t){return e.props.handleSubmit(t)},onChange:this.props.handleChange,onSelectItem:this.props.onSelectItem,value:this.props.text,rows:1,maxRows:this.props.maxRows,placeholder:t.formatMessage({id:"message_input.placeholder",defaultMessage:"Type your message"}),onPaste:this.props.onPaste,grow:this.props.grow,disabled:this.props.disabled}),L.a.createElement("span",{className:"str-chat__input-emojiselect",onClick:this.props.openEmojiPicker},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z",fillRule:"evenodd"}))),L.a.createElement(Z.c,{multiple:this.props.multipleUploads,disabled:this.props.numberOfUploads>=this.props.maxNumberOfFiles,accepts:this.props.acceptedFiles,handleFiles:this.props.uploadNewFiles},L.a.createElement("span",{className:"str-chat__input-fileupload"},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z",fillRule:"nonzero"})))),a&&L.a.createElement(a,{sendMessage:this.props.handleSubmit}))),L.a.createElement("div",null,L.a.createElement("div",{className:"str-chat__input-footer"},L.a.createElement("span",{className:"str-chat__input-footer--count ".concat(this.props.watcher_count?"":"str-chat__input-footer--count--hidden")},L.a.createElement(re.a,{id:"message_input.watching",defaultMessage:"{count} online",values:{count:this.props.watcher_count}})),L.a.createElement("span",{className:"str-chat__input-footer--typing"},function(e,t){var a=Object.keys(t),n=[];a.forEach((function(e,s){return n.push(t[a[s]].user.name||t[a[s]].user.id)}));var s=e.formatMessage({id:"message_input.and",defaultMessage:"and"}),r=e.formatMessage({id:"message_input.typing",defaultMessage:"{count, plural, one {is typing...} other {are typing...}}"},{count:n.length}),o="";return 1===n.length?o=n[0]+" "+r:2===n.length?o=n.join(" "+s+" ")+" "+r:n.length>2&&(o=n.slice(0,-1).join(", ")+", "+s+" "+n.slice(-1)+" "+r),o}(t,this.props.typing))))))}}]),t}(j.PureComponent);N()(At,"propTypes",{focus:T.a.bool.isRequired,grow:T.a.bool.isRequired,maxRows:T.a.number.isRequired,disabled:T.a.bool,imageOrder:T.a.array,imageUploads:T.a.object,removeImage:T.a.func,uploadImage:T.a.func,uploadNewFiles:T.a.func,numberOfUploads:T.a.number,fileOrder:T.a.array,fileUploads:T.a.object,removeFile:T.a.func,uploadFile:T.a.func,emojiPickerIsOpen:T.a.bool,emojiPickerRef:T.a.object,onSelectEmoji:T.a.func,getUsers:T.a.func,getCommands:T.a.func,textareaRef:T.a.object,handleSubmit:T.a.func,handleChange:T.a.func,onSelectItem:T.a.func,text:T.a.string,onPaste:T.a.func,openEmojiPicker:T.a.func,watcher_count:T.a.number,typing:T.a.object,multipleUploads:T.a.object,maxNumberOfFiles:T.a.object,acceptedFiles:T.a.object}),At=Object(oe.c)(At);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var It=function(e){function t(e){var a;_()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"openEmojiPicker",(function(){a.state.showEmojiPicker||a.setState((function(){return{emojiPickerIsOpen:!0}}),(function(){document.addEventListener("click",a.closeEmojiPicker,!1)}))})),N()(S()(a),"closeEmojiPicker",(function(e){a.emojiPickerRef.current&&!a.emojiPickerRef.current.contains(e.target)&&a.setState({emojiPickerIsOpen:!1},(function(){document.removeEventListener("click",a.closeEmojiPicker,!1)}))})),N()(S()(a),"onSelectEmoji",(function(e){return a.insertText(e.native)})),N()(S()(a),"insertText",function(){var e=H()(D.a.mark((function e(t){var n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState((function(e){var s=e.text,r=a.textareaRef.current;if(!r)return{text:s+t};var o=r.selectionStart,i=r.selectionEnd;return n=o+t.length,{text:s.slice(0,o)+t+s.slice(i)}}));case 2:if((s=a.textareaRef.current)&&null!=n){e.next=5;break}return e.abrupt("return");case 5:s.selectionStart=n,s.selectionEnd=n;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"getCommands",(function(){return a.props.channel.getConfig().commands})),N()(S()(a),"getUsers",(function(){var e=[],t=a.props.channel.state.members,n=a.props.channel.state.watchers;t&&Object.values(t).length&&Object.values(t).forEach((function(t){return e.push(t.user)})),n&&Object.values(n).length&&e.push.apply(e,U()(Object.values(n)));for(var s={},r=0,o=e;r<o.length;r++){var i=o[r];void 0===i||s[i.id]||(s[i.id]=i)}return Object.values(s)})),N()(S()(a),"handleChange",(function(e){if(e.preventDefault(),!e||!e.target)return"";var t=e.target.value;a.setState({text:t}),t&&Object(Ee.a)(a.props.channel.keystroke(),"start typing event")})),N()(S()(a),"handleSubmit",(function(e){e.preventDefault();var t=!!a.props.message,n=a.state.text.trim(),s=""===n||">"===n||"``````"===n||"``"===n||"**"===n||"____"===n||"__"===n||"****"===n,r=a.state.imageOrder.length>0||a.state.fileOrder.length>0;if(!s||r){var o=a.state.text,i=U()(a.state.attachments),c=!0,l=!1,u=void 0;try{for(var p,d=a.state.imageOrder[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var h=p.value,m=a.state.imageUploads[h];if(m&&"failed"!==m.state){if("uploading"===m.state)return;i.push({type:"image",image_url:m.url,fallback:m.file.name})}}}catch(M){l=!0,u=M}finally{try{c||null==d.return||d.return()}finally{if(l)throw u}}var g=!0,f=!1,v=void 0;try{for(var _,y=a.state.fileOrder[Symbol.iterator]();!(g=(_=y.next()).done);g=!0){var b=_.value,w=a.state.fileUploads[b];if(w&&"failed"!==w.state){if("uploading"===w.state)return;i.push({type:"file",asset_url:w.url,title:w.file.name,mime_type:w.file.type,file_size:w.file.size})}}}catch(M){f=!0,v=M}finally{try{g||null==y.return||y.return()}finally{if(f)throw v}}if(t){var E={id:a.props.message.id};E.text=o,E.attachments=i,E.mentioned_users=a.state.mentioned_users,a.props.clearEditingState();var C=a.props.editMessage(E).then(a.props.clearEditingState);Object(Ee.a)(C,"update message")}else{var k=a.props.sendMessage({text:o,attachments:i,mentioned_users:we()(a.state.mentioned_users),parent:a.props.parent});Object(Ee.a)(k,"send message"),a.setState({text:"",mentioned_users:[],imageUploads:ye()({}),imageOrder:[],fileUploads:ye()({}),fileOrder:[]})}Object(Ee.a)(a.props.channel.stopTyping(),"stop typing")}})),N()(S()(a),"_uploadNewFiles",(function(e){var t=!0,n=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;if(i.type.startsWith("image/"))a._uploadNewImage(i);else{if(!(i instanceof File)||a.props.noFiles)return;a._uploadNewFile(i)}}}catch(c){n=!0,s=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw s}}})),N()(S()(a),"_uploadNewImage",function(){var e=H()(D.a.mark((function e(t){var n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nt(),e.next=3,a.setState((function(e){return{numberOfUploads:e.numberOfUploads+1,imageOrder:e.imageOrder.concat(n),imageUploads:e.imageUploads.setIn([n],{id:n,file:t,state:"uploading"})}}));case 3:return FileReader&&((s=new FileReader).onload=function(e){a.setState((function(t){return{imageUploads:t.imageUploads.setIn([n,"previewUri"],e.target.result)}}))},s.readAsDataURL(t)),e.abrupt("return",a._uploadImage(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"_uploadNewFile",function(){var e=H()(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nt(),e.next=3,a.setState((function(e){return{numberOfUploads:e.numberOfUploads+1,fileOrder:e.fileOrder.concat(n),fileUploads:e.fileUploads.setIn([n],{id:n,file:t,state:"uploading"})}}));case 3:return e.abrupt("return",a._uploadFile(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"_uploadImage",function(){var e=H()(D.a.mark((function e(t){var n,s,r,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.imageUploads[t]){e.next=3;break}return e.abrupt("return");case 3:return s=n.file,e.next=6,a.setState((function(e){return{imageUploads:e.imageUploads.setIn([t,"state"],"uploading")}}));case 6:if(r={},r={},e.prev=8,!a.props.doImageUploadRequest){e.next=15;break}return e.next=12,a.props.doImageUploadRequest(s,a.props.channel);case 12:r=e.sent,e.next=18;break;case 15:return e.next=17,a.props.channel.sendImage(s);case 17:r=e.sent;case 18:e.next=28;break;case 20:return e.prev=20,e.t0=e.catch(8),console.warn(e.t0),o=!1,e.next=26,a.setState((function(e){return e.imageUploads[t]?{imageUploads:e.imageUploads.setIn([t,"state"],"failed"),numberOfUploads:e.numberOfUploads-1}:(o=!0,{numberOfUploads:e.numberOfUploads-1})}));case 26:return o||a.props.errorHandler(e.t0,"upload-image",{feedGroup:a.props.feedGroup,userId:a.props.userId}),e.abrupt("return");case 28:a.setState((function(e){return{imageUploads:e.imageUploads.setIn([t,"state"],"finished").setIn([t,"url"],r.file)}}));case 29:case"end":return e.stop()}}),e,null,[[8,20]])})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"_uploadFile",function(){var e=H()(D.a.mark((function e(t){var n,s,r,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.fileUploads[t]){e.next=3;break}return e.abrupt("return");case 3:return s=n.file,e.next=6,a.setState((function(e){return{imageUploads:e.imageUploads.setIn([t,"state"],"uploading")}}));case 6:if(r={},r={},e.prev=8,!a.props.doFileUploadRequest){e.next=15;break}return e.next=12,a.props.doFileUploadRequest(s,a.props.channel);case 12:r=e.sent,e.next=18;break;case 15:return e.next=17,a.props.channel.sendFile(s);case 17:r=e.sent;case 18:e.next=27;break;case 20:return e.prev=20,e.t0=e.catch(8),console.warn(e.t0),o=!1,e.next=26,a.setState((function(e){return e.imageUploads[t]?{numberOfUploads:e.numberOfUploads-1,fileUploads:e.fileUploads.setIn([t,"state"],"failed")}:(o=!0,{numberOfUploads:e.numberOfUploads-1})}));case 26:o||a.props.errorHandler(e.t0,"upload-file",{feedGroup:a.props.feedGroup,userId:a.props.userId});case 27:a.setState((function(e){return{fileUploads:e.fileUploads.setIn([t,"state"],"finished").setIn([t,"url"],r.file)}}));case 28:case"end":return e.stop()}}),e,null,[[8,20]])})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"_removeImage",(function(e){a.setState((function(t){return t.imageUploads[e]?{numberOfUploads:t.numberOfUploads-1,imageUploads:t.imageUploads.set(e,void 0),imageOrder:t.imageOrder.filter((function(t){return e!==t}))}:{}}))})),N()(S()(a),"_removeFile",(function(e){a.setState((function(t){return t.fileUploads[e]?{numberOfUploads:t.numberOfUploads-1,fileUploads:t.fileUploads.set(e,void 0),fileOrder:t.fileOrder.filter((function(t){return e!==t}))}:{}}))})),N()(S()(a),"_onPaste",function(){var e=H()(D.a.mark((function e(t){var n,s,r,o,i,c,l,u,p,d;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.clipboardData.items,Object(Z.g)(n)){e.next=3;break}return e.abrupt("return");case 3:t.preventDefault(),r=!0,o=!1,i=void 0,e.prev=7,c=function(){var e=u.value;if("string"===e.kind&&"text/plain"===e.type)return s=new Promise((function(t){e.getAsString((function(e){t(e)}))})),"break"},l=n[Symbol.iterator]();case 10:if(r=(u=l.next()).done){e.next=17;break}if("break"!==c()){e.next=14;break}return e.abrupt("break",17);case 14:r=!0,e.next=10;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),o=!0,i=e.t0;case 23:e.prev=23,e.prev=24,r||null==l.return||l.return();case 26:if(e.prev=26,!o){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.next=33,Object(Z.h)(n);case 33:if(!(p=e.sent).length){e.next=37;break}return a._uploadNewFiles(p),e.abrupt("return");case 37:if(!s){e.next=42;break}return e.next=40,s;case 40:d=e.sent,a.insertText(d);case 42:case"end":return e.stop()}}),e,null,[[7,19,23,31],[24,,26,30]])})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"_onSelectItem",(function(e){a.setState((function(t){return{mentioned_users:[].concat(U()(t.mentioned_users),[e.id])}}))}));var n=[],s={},r=[],o={},i=[],c=[],l="";if(e.message){l=e.message.text;var u=!0,p=!1,d=void 0;try{for(var h,m=e.message.attachments[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=h.value;if("image"===g.type){var f=nt();n.push(f),s[f]={id:f,url:g.image_url,state:"finished",file:{name:g.fallback}}}else if("file"===g.type){var v=nt();r.push(v),o[v]={id:v,url:g.asset_url,state:"finished",file:{name:g.title,type:g.mime_type,size:g.file_size}}}else i.push(g)}}catch(R){p=!0,d=R}finally{try{u||null==m.return||m.return()}finally{if(p)throw d}}var y=!0,b=!1,w=void 0;try{for(var C,M=e.message.mentioned_users[Symbol.iterator]();!(y=(C=M.next()).done);y=!0){var x=C.value;c.push(x.id)}}catch(R){b=!0,w=R}finally{try{y||null==M.return||M.return()}finally{if(b)throw w}}}return a.state={text:l,attachments:i,imageOrder:n,imageUploads:ye()(s),fileOrder:r,fileUploads:ye()(o),emojiPickerIsOpen:!1,filePanelIsOpen:!1,mentioned_users:c,numberOfUploads:0},a.textareaRef=L.a.createRef(),a.emojiPickerRef=L.a.createRef(),a.panelRef=L.a.createRef(),a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.props.focus&&this.textareaRef.current.focus()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.closeEmojiPicker,!1),document.removeEventListener("click",this.hideFilePanel,!1)}},{key:"render",value:function(){var e=this.props.Input,t={uploadNewFiles:this._uploadNewFiles,removeImage:this._removeImage,uploadImage:this._uploadImage,removeFile:this._removeFile,uploadFile:this._uploadFile,emojiPickerRef:this.emojiPickerRef,panelRef:this.panelRef,textareaRef:this.textareaRef,onSelectEmoji:this.onSelectEmoji,getUsers:this.getUsers,getCommands:this.getCommands,handleSubmit:this.handleSubmit,handleChange:this.handleChange,onPaste:this._onPaste,onSelectItem:this._onSelectItem,openEmojiPicker:this.openEmojiPicker};return L.a.createElement(e,I()({},this.props,this.state,t))}}]),t}(j.PureComponent);N()(It,"propTypes",{focus:T.a.bool.isRequired,disabled:T.a.bool.isRequired,grow:T.a.bool.isRequired,maxRows:T.a.number.isRequired,channel:T.a.object.isRequired,typing:T.a.object.isRequired,parent:T.a.object,Input:T.a.oneOfType([T.a.node,T.a.func]),doImageUploadRequest:T.a.func,doFileUploadRequest:T.a.func,SendButton:T.a.oneOfType([T.a.node,T.a.func])}),N()(It,"defaultProps",{focus:!1,disabled:!1,grow:!0,maxRows:10,Input:At,SendButton:function(e){var t=e.sendMessage;return L.a.createElement("button",{className:"str-chat__send-button",onClick:t})}}),It=wt(It);var Ft=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"renderUploads",(function(){return L.a.createElement(L.a.Fragment,null,a.props.imageOrder.length>0&&L.a.createElement(Z.e,{imageUploads:a.props.imageOrder.map((function(e){return a.props.imageUploads[e]})),handleRemove:a.props.removeImage,handleRetry:a.props.uploadImage,handleFiles:a.props.uploadNewFiles,multiple:a.props.multipleUploads,disabled:a.props.numberOfUploads>=a.props.maxNumberOfFiles}),a.props.fileOrder.length>0&&L.a.createElement(Z.b,{uploads:a.props.fileOrder.map((function(e){return a.props.fileUploads[e]})),handleRemove:a.props.removeFile,handleRetry:a.props.uploadFile,handleFiles:a.props.uploadNewFiles}))})),N()(S()(a),"renderEmojiPicker",(function(){if(a.props.emojiPickerIsOpen)return L.a.createElement("div",{className:"str-chat__small-message-input-emojipicker",ref:a.props.emojiPickerRef},L.a.createElement(ce.b,{native:!0,emoji:"point_up",title:"Pick your emoji\u2026",onSelect:a.props.onSelectEmoji,color:"#006CFF",showPreview:!1}))})),a}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement("div",{className:"str-chat__edit-message-form"},L.a.createElement(Z.d,{accept:this.props.acceptedFiles,multiple:this.props.multipleUploads,disabled:this.props.numberOfUploads>=this.props.maxNumberOfFiles,handleFiles:this.props.uploadNewFiles},L.a.createElement("form",{onSubmit:this.props.handleSubmit},this.renderEmojiPicker(),this.renderUploads(),this.props.emojiPickerIsOpen&&L.a.createElement("div",{className:"str-chat__input--emojipicker",ref:this.props.emojiPickerRef},L.a.createElement(ce.b,{native:!0,emoji:"point_up",title:"Pick your emoji\u2026",onSelect:this.props.onSelectEmoji,color:"#006CFF"})),L.a.createElement(Tt,{users:this.props.getUsers(),commands:this.props.getCommands(),innerRef:this.props.textareaRef,handleSubmit:this.props.handleSubmit,onChange:this.props.handleChange,onSelectItem:this.props.onSelectItem,value:this.props.text,rows:1,maxRows:this.props.maxRows,onPaste:this.props.onPaste,grow:this.props.grow}),L.a.createElement("div",{className:"str-chat__message-team-form-footer"},L.a.createElement("div",{className:"str-chat__edit-message-form-options"},L.a.createElement("span",{className:"str-chat__input-emojiselect",onClick:this.props.openEmojiPicker},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z",fillRule:"evenodd"}))),L.a.createElement(Z.c,{multiple:this.props.multipleUploads,disabled:this.props.numberOfUploads>=this.props.maxNumberOfFiles,accepts:this.props.acceptedFiles,handleFiles:this.props.uploadNewFiles},L.a.createElement("span",{className:"str-chat__input-fileupload"},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z",fillRule:"nonzero"}))))),L.a.createElement("div",null,L.a.createElement("button",{onClick:this.props.clearEditingState},L.a.createElement(re.a,{id:"edit_message.cancel",defaultMessage:"Cancel"})),L.a.createElement("button",{type:"submit"},L.a.createElement(re.a,{id:"edit_message.submit",defaultMessage:"Send"})))))))}}]),t}(L.a.Component);function Ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ut(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ut(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}N()(Ft,"propTypes",{focus:T.a.bool,grow:T.a.bool,maxRows:T.a.number.isRequired,disabled:T.a.bool,imageOrder:T.a.array,imageUploads:T.a.object,removeImage:T.a.func,uploadImage:T.a.func,uploadNewFiles:T.a.func,numberOfUploads:T.a.number,fileOrder:T.a.array,fileUploads:T.a.object,removeFile:T.a.func,uploadFile:T.a.func,emojiPickerIsOpen:T.a.bool,emojiPickerRef:T.a.object,onSelectEmoji:T.a.func,getUsers:T.a.func,getCommands:T.a.func,textareaRef:T.a.object,handleSubmit:T.a.func,handleChange:T.a.func,onSelectItem:T.a.func,text:T.a.string,onPaste:T.a.func,openEmojiPicker:T.a.func,watcher_count:T.a.number,typing:T.a.object,multipleUploads:T.a.object,maxNumberOfFiles:T.a.object,acceptedFiles:T.a.object}),N()(Ft,"defaultProps",{grow:!0,focus:!1,disabled:!1});var Dt=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"_isMounted",!1),N()(S()(a),"state",{isFocused:!1,language:window.dplChatConfig.language,actionsBoxOpen:!1,showDetailedReactions:!1}),N()(S()(a),"onLanguageChanged",(function(){a._isMounted&&a.setState({state:zt({},a.state,{},{language:window.dplChatConfig.language})})})),N()(S()(a),"messageActionsRef",L.a.createRef()),N()(S()(a),"reactionSelectorRef",L.a.createRef()),N()(S()(a),"_onClickOptionsAction",(function(){a.setState({actionsBoxOpen:!0},(function(){return document.addEventListener("click",a.hideOptions,!1)}))})),N()(S()(a),"_hideOptions",(function(){a.setState({actionsBoxOpen:!1}),document.removeEventListener("click",a.hideOptions,!1)})),N()(S()(a),"_clickReactionList",(function(){a.setState((function(){return{showDetailedReactions:!0}}),(function(){document.addEventListener("click",a._closeDetailedReactions),document.addEventListener("touchend",a._closeDetailedReactions)}))})),N()(S()(a),"_closeDetailedReactions",(function(e){if(a.reactionSelectorRef.current.reactionSelector.current.contains(e.target))return{};a.setState((function(){return{showDetailedReactions:!1}}),(function(){document.removeEventListener("click",a._closeDetailedReactions),document.removeEventListener("touchend",a._closeDetailedReactions)}))})),N()(S()(a),"renderStatus",(function(){var e=a.props,t=e.readBy,n=e.client,s=e.message,r=e.threadList,o=e.lastReceivedId,i=e.intl;if(!a.isMine()||"error"===s.type)return null;var c=1===t.length&&t[0].id===n.user.id;if("sending"===s.status)return L.a.createElement("span",{className:"str-chat__message-simple-status"},L.a.createElement(pt,null,L.a.createElement(re.a,{id:"message.status.sending",defaultMessage:"Sending..."})),L.a.createElement(dt,null));if(0===t.length||r||c)return"received"!==s.status||s.id!==o||r?null:L.a.createElement("span",{className:"str-chat__message-simple-status"},L.a.createElement(pt,null,L.a.createElement(re.a,{id:"message.status.delivered",defaultMessage:"Delivered"})),L.a.createElement("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z",fill:"grey",fillRule:"evenodd"})));var l=t.filter((function(e){return e.id!==n.user.id}));l[0];return L.a.createElement("span",{className:"str-chat__message-simple-status"},L.a.createElement(pt,null,tt(i,l)),L.a.createElement("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z",fill:"#3f51b5",fillRule:"evenodd"})),t.length-1>1&&L.a.createElement("span",{className:"str-chat__message-simple-status-number"},t.length-1))})),N()(S()(a),"renderMessageActions",(function(){var e=a.props,t=(e.Message,e.getMessageActions);e.messageListRect,e.handleFlag,e.handleMute,e.handleEdit,e.handleDelete;if(0!==t().length)return L.a.createElement("div",null)})),a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,window.addEventListener("dpl-chat-language-changed",this.onLanguageChanged)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.props.message.deleted_at||(document.removeEventListener("click",this._closeDetailedReactions),document.removeEventListener("touchend",this._closeDetailedReactions)),document.removeEventListener("dpl-chat-language-changed",this.onLanguageChanged)}},{key:"isMine",value:function(){return this.props.isMyMessage(this.props.message)}},{key:"renderOptions",value:function(){var e=this.props,t=e.message,a=e.initialMessage,n=e.channelConfig,s=e.threadList,r=e.handleOpenThread;if("error"!==t.type&&"system"!==t.type&&"ephemeral"!==t.type&&"failed"!==t.status&&"sending"!==t.status&&!a)return this.isMine()?L.a.createElement("div",{className:"str-chat__message-simple__actions"},this.renderMessageActions(),!s&&n&&n.replies&&L.a.createElement("div",{onClick:r,className:"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--thread"},L.a.createElement("svg",{width:"14",height:"10",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z",fillRule:"evenodd"}))),n&&n.reactions&&L.a.createElement("div",{className:"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--reactions",onClick:this._clickReactionList},L.a.createElement("svg",{width:"16",height:"14",viewBox:"0 0 16 14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z",fillRule:"evenodd"})))):L.a.createElement("div",{className:"str-chat__message-simple__actions"},n&&n.reactions&&L.a.createElement("div",{className:"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--reactions",onClick:this._clickReactionList},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z",fillRule:"evenodd"}))),!s&&n&&n.replies&&L.a.createElement("div",{onClick:r,className:"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--thread"},L.a.createElement("svg",{width:"14",height:"10",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z",fillRule:"evenodd"}))),this.renderMessageActions())}},{key:"render",value:function(){var e=this.props,t=e.message,a=e.Attachment,n=e.editing,s=e.clearEditingState,r=e.handleRetry,o=e.updateMessage,i=e.handleReaction,c=e.actionsEnabled,l=e.messageListRect,u=e.handleAction,p=e.onMentionsHoverMessage,d=e.onMentionsClickMessage,h=e.unsafeHTML,m=e.threadList,g=e.handleOpenThread,f=ke()(t.created_at).calendar(),v=this.isMine()?"str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me":"str-chat__message str-chat__message-simple",_=Boolean(t&&t.attachments&&t.attachments.length),y=_&&t.attachments.filter((function(e){return"image"===e.type})),b=Boolean(t.latest_reactions&&t.latest_reactions.length);return"message.read"===t.type||"message.date"===t.type?null:t.deleted_at?L.a.createElement(L.a.Fragment,null,L.a.createElement("div",{key:t.id,className:"".concat(v," str-chat__message--deleted ").concat(t.type," ")},L.a.createElement("div",{className:"str-chat__message--deleted-inner"},L.a.createElement(re.a,{id:"message.deleted",defaultMessage:"This message was deleted..."})))):L.a.createElement(L.a.Fragment,null,n&&L.a.createElement(ft,{open:n,onClose:s},L.a.createElement(It,I()({Input:Ft,message:t,clearEditingState:s,updateMessage:o},this.props.additionalMessageInputProps))),L.a.createElement("div",{key:t.id,className:"\n\t\t\t\t\t\t".concat(v,"\n\t\t\t\t\t\tstr-chat__message--").concat(t.type,"\n\t\t\t\t\t\tstr-chat__message--").concat(t.status,"\n\t\t\t\t\t\t").concat(t.text?"str-chat__message--has-text":"has-no-text","\n\t\t\t\t\t\t").concat(_?"str-chat__message--has-attachment":"","\n\t\t\t\t\t\t").concat(b?"str-chat__message--with-reactions":"","\n\t\t\t\t\t").trim(),onMouseLeave:this._hideOptions,ref:this.messageRef},this.renderStatus(),L.a.createElement(ze,{image:t.user.image,name:t.user.name||t.user.id}),L.a.createElement("div",{className:"str-chat__message-inner",onClick:"failed"===t.status?r.bind(this,t):null},!t.text&&L.a.createElement(L.a.Fragment,null,this.renderOptions(),b&&!this.state.showDetailedReactions&&L.a.createElement(ut,{reactions:t.latest_reactions,reaction_counts:t.reaction_counts,onClick:this._clickReactionList,reverse:!0}),this.state.showDetailedReactions&&L.a.createElement(mt,{handleReaction:i,detailedView:!0,reaction_counts:t.reaction_counts,latest_reactions:t.latest_reactions,messageList:l,ref:this.reactionSelectorRef})),L.a.createElement("div",{className:"str-chat__message-attachment-container"},_&&t.attachments.map((function(e,n){return"image"===e.type&&y.length>1?null:L.a.createElement(a,{key:"".concat(t.id,"-").concat(n),attachment:e,actionHandler:u})}))),y.length>1&&L.a.createElement(ht,{images:y}),t.text&&L.a.createElement("div",{className:"str-chat__message-text"},L.a.createElement("div",{className:"\n\t\t\t\t\t\t\t\t\tstr-chat__message-text-inner str-chat__message-simple-text-inner\n\t\t\t\t\t\t\t\t\t".concat(this.state.isFocused?"str-chat__message-text-inner--focused":"","\n\t\t\t\t\t\t\t\t\t").concat(_?"str-chat__message-text-inner--has-attachment":"","\n\t\t\t\t\t\t\t\t\t").concat($e(t.text)?"str-chat__message-simple-text-inner--is-emoji":"","\n                ").trim(),onMouseOver:p,onClick:d},"error"===t.type&&L.a.createElement("div",{className:"str-chat__simple-message--error-message"},L.a.createElement(re.a,{id:"message.error",defaultMessage:"Error \xb7 Unsent"})),"failed"===t.status&&L.a.createElement("div",{className:"str-chat__simple-message--error-message"},L.a.createElement(re.a,{id:"message.failed",defaultMessage:"Message Failed \xb7 Click to try again"})),h?L.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.html}}):at(t),b&&!this.state.showDetailedReactions&&L.a.createElement(ut,{reactions:t.latest_reactions,reaction_counts:t.reaction_counts,onClick:this._clickReactionList,reverse:!0}),this.state.showDetailedReactions&&L.a.createElement(mt,{mine:this.isMine(),handleReaction:i,actionsEnabled:c,detailedView:!0,reaction_counts:t.reaction_counts,latest_reactions:t.latest_reactions,messageList:l,ref:this.reactionSelectorRef})),t.text&&this.renderOptions()),!m&&0!==t.reply_count&&L.a.createElement("div",{className:"str-chat__message-simple-reply-button"},L.a.createElement(gt,{onClick:g,reply_count:t.reply_count})),L.a.createElement("div",{className:"str-chat__message-data str-chat__message-simple-data"},this.isMine()?null:L.a.createElement("span",{className:"str-chat__message-simple-name"},t.user.name||t.user.id),L.a.createElement("span",{className:"str-chat__message-simple-timestamp"},f)))))}}]),t}(j.PureComponent);N()(Dt,"propTypes",{message:T.a.object,Attachment:T.a.oneOfType([T.a.node,T.a.func]),Message:T.a.oneOfType([T.a.node,T.a.func,T.a.object]).isRequired,unsafeHTML:T.a.bool,client:T.a.object,initialMessage:T.a.bool,channelConfig:T.a.object,threadList:T.a.bool,handleOpenThread:T.a.func,editing:T.a.bool,clearEditingState:T.a.func,isMyMessage:T.a.func,getMessageActions:T.a.func,updateMessage:T.a.func,handleRetry:T.a.func,handleReaction:T.a.func,actionsEnabled:T.a.bool,messageListRect:T.a.object,handleAction:T.a.func,onMentionsHoverMessage:T.a.func,onMentionsClickMessage:T.a.func,additionalMessageInputProps:T.a.object}),N()(Dt,"defaultProps",{Attachment:Ve}),Dt=Object(oe.c)(Dt);var Bt=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"isMyMessage",(function(e){return a.props.client.user.id===e.user.id})),N()(S()(a),"isAdmin",(function(){return"admin"===a.props.client.user.role||a.props.members&&a.props.members[a.props.client.user.id]&&"admin"===a.props.members[a.props.client.user.id].role})),N()(S()(a),"isOwner",(function(){return a.props.members&&a.props.members[a.props.client.user.id]&&"owner"===a.props.members[a.props.client.user.id].role})),N()(S()(a),"isModerator",(function(){return a.props.members&&a.props.members[a.props.client.user.id]&&"moderator"===a.props.members[a.props.client.user.id].role})),N()(S()(a),"canEditMessage",(function(e){return a.isMyMessage(e)||a.isModerator()||a.isOwner()||a.isAdmin()})),N()(S()(a),"canDeleteMessage",(function(e){return a.canEditMessage(e)})),N()(S()(a),"validateAndGetNotificationMessage",(function(e,t){if(!e||"function"!==typeof e)return!1;var a=e.apply(null,t);return"string"===typeof a&&a})),N()(S()(a),"handleFlag",function(){var e=H()(D.a.mark((function e(t){var n,s,r,o,i,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props,s=n.getFlagMessageSuccessNotification,r=n.getFlagMessageErrorNotification,o=n.intl,i=a.props.message,e.prev=3,e.next=6,a.props.client.flagMessage(i.id);case 6:c=a.validateAndGetNotificationMessage(s,[i]),a.props.addNotification(c||o.formatMessage({id:"message.flag.success",defaultMessage:"Message has been successfully flagged"}),"success"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),l=a.validateAndGetNotificationMessage(r,[i]),a.props.addNotification(l||o.formatMessage({id:"message.flag.error",defaultMessage:"Error adding flag: Either the flag already exist or there is issue with network connection ..."}),"error");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"handleMute",function(){var e=H()(D.a.mark((function e(t){var n,s,r,o,i,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props,s=n.getMuteUserSuccessNotification,r=n.getMuteUserErrorNotification,o=n.intl,i=a.props.message,e.prev=3,e.next=6,a.props.client.muteUser(i.user.id);case 6:c=a.validateAndGetNotificationMessage(s,[i.user]),a.props.addNotification(c||o.formatMessage({id:"message.mute.success",defaultMessage:"User with id {id} has been muted"},{id:i.user.id}),"success"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),l=a.validateAndGetNotificationMessage(r,[i.user]),a.props.addNotification(l||o.formatMessage({id:"message.mute.error",defaultMessage:"Error muting a user ..."}),"error");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"handleEdit",(function(e){void 0!==e&&e.preventDefault&&e.preventDefault(),a.props.setEditingState(a.props.message)})),N()(S()(a),"handleDelete",function(){var e=H()(D.a.mark((function e(t){var n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props.message,e.next=4,a.props.client.deleteMessage(n.id);case 4:s=e.sent,a.props.updateMessage(s.message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"handleReaction",function(){var e=H()(D.a.mark((function e(t,n){var s,r,o,i,c,l,u,p,d,h,m,g;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(void 0!==n&&n.preventDefault&&n.preventDefault(),s=null,r=a.props.client.userID,o=!0,i=!1,c=void 0,e.prev=6,l=a.props.message.own_reactions[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)p=u.value,r===p.user.id&&p.type===t?s=p:r!==p.user.id&&console.warn("message.own_reactions contained reactions from a different user, this indicates a bug");e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),i=!0,c=e.t0;case 14:e.prev=14,e.prev=15,o||null==l.return||l.return();case 17:if(e.prev=17,!i){e.next=20;break}throw c;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return d=a.props.message,s?h=a.props.channel.deleteReaction(a.props.message.id,s.type):(m=a.props.message.id,g={type:t},h=a.props.channel.sendReaction(m,g)),e.prev=24,e.next=27,h;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(24),a.props.updateMessage(d);case 32:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21],[24,29]])})));return function(t,a){return e.apply(this,arguments)}}()),N()(S()(a),"handleAction",function(){var e=H()(D.a.mark((function e(t,n,s){var r,o,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),r=a.props.message.id,(o={})[t]=n,e.next=6,a.props.channel.sendAction(r,o);case 6:(i=e.sent)&&i.message?a.props.updateMessage(i.message):a.props.removeMessage(a.props.message);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),N()(S()(a),"handleRetry",function(){var e=H()(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.retrySendMessage(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"onMentionsClick",(function(e){"function"===typeof a.props.onMentionsClick&&a.props.onMentionsClick(e,a.props.message.mentioned_users)})),N()(S()(a),"onMentionsHover",(function(e){"function"===typeof a.props.onMentionsHover&&a.props.onMentionsHover(e,a.props.message.mentioned_users)})),N()(S()(a),"getMessageActions",(function(){var e=a.props,t=e.message,n=e.messageActions,s=[],r=[];if(n&&"boolean"===typeof n)r=Object.keys(ot);else{if(!(n&&n.length>0))return[];r=U()(n)}return a.canEditMessage(t)&&r.indexOf(ot.edit)>-1&&s.push(ot.edit),a.canDeleteMessage(t)&&r.indexOf(ot.delete)>-1&&s.push(ot.delete),!a.isMyMessage(t)&&r.indexOf(ot.flag)>-1&&s.push(ot.flag),!a.isMyMessage(t)&&r.indexOf(ot.mute)>-1&&s.push(ot.mute),s})),a.state={loading:!1},a}return R()(t,e),b()(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.message!==this.props.message;return t||Se()(e.readBy,this.props.readBy)||(t=!0),t||Se()(e.groupStyles,this.props.groupStyles)||(t=!0),t||Se()(e.lastReceivedId,this.props.lastReceivedId)||(t=!0),t||e.editing===this.props.editing||(t=!0),t||e.messageListRect===this.props.messageListRect||(t=!0),t}},{key:"render",value:function(){var e=this.props.channel.getConfig(),t=this.props.message,a="regular"===t.type&&"received"===t.status,n=this.props.Message;return L.a.createElement("div",{id:this.props.message.id},L.a.createElement(n,I()({},this.props,{actionsEnabled:a,Message:this,handleReaction:this.handleReaction,getMessageActions:this.getMessageActions,handleFlag:this.handleFlag,handleMute:this.handleMute,handleAction:this.handleAction,handleDelete:this.handleDelete,handleEdit:this.handleEdit,handleRetry:this.handleRetry,handleOpenThread:this.props.openThread&&this.props.openThread.bind(this,t),isMyMessage:this.isMyMessage,channelConfig:e,onMentionsClickMessage:this.onMentionsClick,onMentionsHoverMessage:this.onMentionsHover})))}}]),t}(j.Component);N()(Bt,"propTypes",{message:T.a.object.isRequired,client:T.a.object.isRequired,channel:T.a.object.isRequired,readBy:T.a.array,groupStyles:T.a.array,editing:T.a.bool,Message:T.a.oneOfType([T.a.node,T.a.func]),Attachment:T.a.oneOfType([T.a.node,T.a.func]),unsafeHTML:T.a.bool,messageActions:T.a.oneOfType([T.a.bool,T.a.array]),getFlagMessageSuccessNotification:T.a.func,getFlagMessageErrorNotification:T.a.func,getMuteUserSuccessNotification:T.a.func,getMuteUserErrorNotification:T.a.func,lastReceivedId:T.a.string,messageListRect:T.a.object,members:T.a.object,addNotification:T.a.func,setEditingState:T.a.func,updateMessage:T.a.func,removeMessage:T.a.func,retrySendMessage:T.a.func,onMentionsClick:T.a.func,onMentionsHover:T.a.func,openThread:T.a.func,additionalMessageInputProps:T.a.object}),N()(Bt,"defaultProps",{Message:Dt,readBy:[],groupStyles:[],Attachment:Ve,editing:!1,messageActions:Object.keys(ot)}),Bt=Object(oe.c)(Bt);var Ht=function(e){var t;switch(e.listType){case"channel":t=L.a.createElement("p",null,"You have no channels currently");break;case"message":t=null;break;default:t=L.a.createElement("p",null,"No items exist")}return t},qt=function(e){function t(e){var a;return _()(this,t),(a=E()(this,k()(t).call(this,e))).scrollListener=a.scrollListener.bind(S()(a)),a.scrollEventCount=0,a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.props.useCapture)}},{key:"getParentElement",value:function(e){return e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){if(this.props.hasMore&&!this.props.isLoading&&this.getParentElement(this.scrollComponent)){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.addEventListener("mousewheel",this.mousewheelListener,this.props.useCapture),e.addEventListener("scroll",this.scrollListener,this.props.useCapture),e.addEventListener("resize",this.scrollListener,this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1===e.deltaY&&e.preventDefault()}},{key:"scrollListener",value:function(){var e,t=this.scrollComponent,a=this.getParentElement(t);this.scrollEventCount+=1;var n=a.scrollTop,s=t.scrollHeight-a.scrollTop-a.clientHeight;e=this.props.isReverse?n:s,this.props.listenToScroll&&this.props.listenToScroll(s,n),this.scrollEventCount<2||this.props.hasMore&&!this.props.isLoading&&e<Number(this.props.threshold)&&t&&null!==t.offsetParent&&"function"===typeof this.props.loadMore&&this.props.loadMore(this.pageLoaded+=1)}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),a=t.children,n=t.element,s=(t.hasMore,t.initialLoad,t.isReverse),r=t.loader,o=(t.loadMore,t.pageStart,t.ref),i=(t.threshold,t.useCapture,t.useWindow,t.listenToScroll,t.isLoading),c=Re()(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","listenToScroll","isLoading"]);c.ref=function(t){e.scrollComponent=t,o&&o(t)};var l=[a];return i&&(r?s?l.unshift(r):l.push(r):this.defaultLoader&&(s?l.unshift(this.defaultLoader):l.push(this.defaultLoader))),L.a.createElement(n,c,l)}}]),t}(j.Component);N()(qt,"propTypes",{children:T.a.node.isRequired,element:T.a.node,hasMore:T.a.bool,initialLoad:T.a.bool,isReverse:T.a.bool,loader:T.a.node,loadMore:T.a.func.isRequired,pageStart:T.a.number,ref:T.a.func,threshold:T.a.number,useCapture:T.a.bool,useWindow:T.a.bool,className:T.a.string,listenToScroll:T.a.func}),N()(qt,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!0,useCapture:!1,loader:null,className:"str-chat__reverse-infinite-scroll"});var Wt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return this.props.showNotification?L.a.createElement("button",{className:"str-chat__message-notification",onClick:this.props.onClick},this.props.children):null}}]),t}(j.PureComponent);N()(Wt,"propTypes",{showNotification:T.a.bool,onClick:T.a.func.isRequired}),N()(Wt,"defaultProps",{showNotification:!0});var Vt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.intl,a=e.position;return Date.parse(this.props.date)?L.a.createElement("div",{className:"str-chat__date-separator"},("right"===a||"center"===a)&&L.a.createElement("hr",{className:"str-chat__date-separator-line"}),L.a.createElement("div",{className:"str-chat__date-separator-date"},this.props.formatDate?this.props.formatDate(this.props.date):ke()(this.props.date.toISOString()).calendar(null,{nextWeek:t.formatMessage({id:"date_separator.next_week",defaultMessage:"dddd"}),nextDay:t.formatMessage({id:"date_separator.tomorrow",defaultMessage:"[Tomorrow]"}),sameDay:t.formatMessage({id:"date_separator.today",defaultMessage:"[Today]"}),lastDay:t.formatMessage({id:"date_separator.yesterday",defaultMessage:"[Yesterday]"}),lastWeek:t.formatMessage({id:"date_separator.last_week",defaultMessage:"[Last] dddd"}),sameElse:t.formatMessage({id:"date_separator.else",defaultMessage:"L"})})),("left"===a||"center"===a)&&L.a.createElement("hr",{className:"str-chat__date-separator-line"})):null}}]),t}(L.a.PureComponent);N()(Vt,"propTypes",{date:T.a.instanceOf(Date),position:T.a.oneOf(["left","center","right"]),formatDate:T.a.func}),N()(Vt,"defaultProps",{position:"right"}),Vt=Object(oe.c)(Vt);var Gt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.message,a=e.intl;if("system"===t.type)return L.a.createElement("div",{className:this.props.message.id},L.a.createElement("div",{className:"str-chat__message--system"},L.a.createElement("div",{className:"str-chat__message--system__text"},L.a.createElement("div",{className:"str-chat__message--system__line"}),L.a.createElement("p",null,t.text),L.a.createElement("div",{className:"str-chat__message--system__line"})),L.a.createElement("div",{className:"str-chat__message--system__date"},L.a.createElement("strong",null,ke()(t.created_at).format("dddd")," "),L.a.createElement("strong",null,ke()(t.created_at).format("L")," "),a.formatMessage({id:"event_at_label",defaultMessage:"at"})," ",ke()(t.created_at).format("HH:mm"))));if("channel.event"===t.type&&("member.removed"===t.event.type||"member.added"===t.event.type)){var n;switch(t.event.type){case"member.removed":n=a.formatMessage({id:"event_component.member_removed",defaultMessage:"{user} was removed from the chat"},{user:t.event.user.name||t.event.user.id});break;case"member.added":n=a.formatMessage({id:"event_component.member_added",defaultMessage:"{user} has joined the chat"},{user:t.event.user.name||t.event.user.id})}return L.a.createElement("div",{className:"str-chat__event-component__channel-event"},L.a.createElement(ze,{image:t.event.user.image,name:t.event.user.name||t.event.user.id}),L.a.createElement("div",{className:"str-chat__event-component__channel-event__content"},L.a.createElement("em",{className:"str-chat__event-component__channel-event__sentence"},n),L.a.createElement("div",{className:"str-chat__event-component__channel-event__date"},ke()(t.created_at).format("HH:mm"))))}return null}}]),t}(L.a.PureComponent);Gt=Object(oe.c)(Gt);var Zt=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"connectionChanged",(function(e){a.state.online!==e.online&&a.setState({online:e.online})})),N()(S()(a),"keypress",(function(e){e.keyCode===Et.ESC&&a.state.editing&&a.clearEditingState()})),N()(S()(a),"scrollToBottom",(function(){a._scrollToRef(a.bottomRef,a.messageList)})),N()(S()(a),"_scrollToRef",(function(e,t){function n(){e&&e.current&&t&&t.current&&this.scrollToTarget(e.current,t.current)}n.call(S()(a)),setTimeout(n.bind(S()(a)),200)})),N()(S()(a),"scrollToTarget",(function(e,t){var a=e&&1===e.nodeType,n="[object Number]"===Object.prototype.toString.call(e);a?t.scrollTop=e.offsetTop-600:n?t.scrollTop=e:"bottom"===e?t.scrollTop=t.scrollHeight-t.offsetHeight:"top"===e&&(t.scrollTop=0)})),N()(S()(a),"setEditingState",(function(e){a.setState({editing:e.id})})),N()(S()(a),"clearEditingState",(function(e){e&&e.preventDefault&&e.preventDefault(),a.setState({editing:""})})),N()(S()(a),"insertDates",(function(e){var t=[],n=!0,s=!1,r=void 0;try{for(var o,i=e.entries()[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=ue()(o.value,2),l=c[0],u=c[1];if("message.read"===u.type||u.deleted_at)t.push(u);else{var p=u.created_at.getDay(),d=p;l>0&&(d=e[l-1].created_at.getDay()),0===l||p!==d?t.push({type:"message.date",date:u.created_at},u):t.push(u);var h=a.props.eventHistory[u.id||"first"];h&&h.length>0&&h.forEach((function(e){t.push({type:"channel.event",event:e})}))}}}catch(m){s=!0,r=m}finally{try{n||null==i.return||i.return()}finally{if(s)throw r}}return t})),N()(S()(a),"insertIntro",(function(e){var t=e||[];if(!a.props.headerPosition)return t.unshift({type:"channel.intro"}),t;if(!t.length)return t.unshift({type:"channel.intro"}),t;var n=!0,s=!1,r=void 0;try{for(var o,i=e.entries()[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=ue()(o.value,2),l=c[0],u=c[1],p=u.created_at?u.created_at.getTime():null,d=e[l+1]&&e[l+1].created_at?e[l+1].created_at.getTime():null,h=a.props.headerPosition;if(p<h){if(d<h){if(e[l+1]&&"message.date"===e[l+1].type)continue;if(!d)return t.push({type:"channel.intro"}),t;continue}return t.splice(l+1,0,{type:"channel.intro"}),t}}}catch(m){s=!0,r=m}finally{try{n||null==i.return||i.return()}finally{if(s)throw r}}return t})),N()(S()(a),"goToNewMessages",H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.scrollToBottom();case 2:a.setState({newMessagesNotification:!1});case 3:case"end":return e.stop()}}),e)})))),N()(S()(a),"getReadStates",(function(e){var t={},n=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){t[o.value.id]=[]}}catch(_){s=!0,r=_}finally{try{n||null==i.return||i.return()}finally{if(s)throw r}}for(var c=0,l=Object.values(a.props.read);c<l.length;c++){var u=l[c];if(null==u.last_read)break;var p=void 0,d=!0,h=!1,m=void 0;try{for(var g,f=e[Symbol.iterator]();!(d=(g=f.next()).done);d=!0){var v=g.value;v.updated_at<u.last_read&&(p=v.id)}}catch(_){h=!0,m=_}finally{try{d||null==f.return||f.return()}finally{if(h)throw m}}null!=p&&(t[p]=[].concat(U()(t[p]),[u.user]))}return t})),N()(S()(a),"userScrolledUp",(function(){return a.scrollOffset>310})),N()(S()(a),"listenToScroll",(function(e){a.scrollOffset=e,a.state.newMessagesNotification&&!a.userScrolledUp()&&a.setState({newMessagesNotification:!1})})),N()(S()(a),"getLastReceived",(function(e){for(var t=null,a=e.length;a>0;a--)if(void 0!==e[a]&&void 0!==e[a].status&&"received"===e[a].status){t=e[a].id;break}return t})),N()(S()(a),"getGroupStyles",(function(e){for(var t=e.length,n={},s=U()(e),r=0;r<t;r++){var o=s[r-1],i=s[r],c=s[r+1],l=[];if("message.date"!==i.type&&("channel.event"!==i.type&&"channel.intro"!==i.type)){var u=i.user.id,p=!o||"channel.intro"===o.type||"message.date"===o.type||"system"===o.type||"channel.event"===o.type||0!==o.attachments.length||u!==o.user.id||"error"===o.type||o.deleted_at,d=!c||"message.date"===c.type||"system"===c.type||"channel.event"===c.type||"channel.intro"===c.type||0!==c.attachments.length||u!==c.user.id||"error"===c.type||c.deleted_at;p&&l.push("top"),d&&(p||i.deleted_at||"error"===i.type?(l.splice(0,l.length),l.push("single")):l.push("bottom")),p||d||(i.deleted_at||"error"===i.type?(l.splice(0,l.length),l.push("single")):(l.splice(0,l.length),l.push("middle"))),0!==i.attachments.length&&(l.splice(0,l.length),l.push("single")),a.props.noGroupByUser&&(l.splice(0,l.length),l.push("single")),n[i.id]=l}}return n})),N()(S()(a),"_onMentionsHoverOrClick",(function(e,t){if(a.props.onMentionsHover&&a.props.onMentionsClick){var n=e.target.tagName.toLowerCase(),s=e.target.innerHTML.replace("*","");if("strong"===n&&"@"===s[0]){var r=s.replace("@",""),o=t.find((function(e){return e.name===r||e.id===r}));a.props.onMentionsHover&&"mouseover"===e.type&&a.props.onMentionsHover(e,o),a.props.onMentionsClick&&"click"===e.type&&a.props.onMentionsHover(e,o)}}})),N()(S()(a),"addNotification",(function(e,t){if("string"===typeof e&&("success"===t||"error"===t)){var n=new Date,s=U()(a.state.notifications);s.push({id:n,text:e,type:t}),a.setState({notifications:s});var r=setTimeout((function(){var e=a.state.notifications.findIndex((function(e){return e.id===n})),t=U()(a.state.notifications);t.splice(e,1),a.setState({notifications:t})}),5e3);a.notificationTimeouts.push(r)}})),N()(S()(a),"_loadMore",(function(){return a.props.messageLimit?a.props.loadMore(a.props.messageLimit):a.props.loadMore()})),N()(S()(a),"hide",{display:"none"}),N()(S()(a),"SearchBar",(function(){var e=a.props.intl;return L.a.createElement("div",{id:"style-search-bar"},L.a.createElement("div",{className:"str-chat__channel-search",id:"style-channel-search"},L.a.createElement("div",{id:"style-channel-search-input"},L.a.createElement("input",{id:"searchInput",className:"searchInput",placeholder:e.formatMessage({id:"channel_search.placeholder",defaultMessage:"Search"}),value:a.state.searchInput||"",type:"text",name:"inputSearch",onChange:a.handleChange,onKeyPress:a.handleSearch.bind(S()(a)),onKeyDown:a.handleSearch.bind(S()(a))}))))})),N()(S()(a),"toggleSearch",(function(){!a.state.open&&a.state.searchInput?(a.setState({open:!0}),a.search(a.state.searchInput,a.props.channel)):(a.messageRefs[a.state.activeSearchResultId]?(void 0!==a.state.activeSearchResultId&&null!==a.messageRefs[a.state.activeSearchResultId].current&&a.messageRefs[a.state.activeSearchResultId].current.classList.remove("search-result"),a.setState((function(){return{open:!1,searchInput:null,activeSearchResultId:void 0,searchResultId:[]}}))):a.setState((function(e){return{open:!1,searchInput:null,activeSearchResultId:void 0,searchResultId:[]}})),a.scrollToBottom())})),N()(S()(a),"Button",(function(e){var t=e.open,a=e.onClick;return L.a.createElement("div",{onClick:a,style:{display:"flex"}},t?L.a.createElement("div",null,L.a.createElement("svg",{id:"style-channel-search-icon",width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M 19.333 2.547 l -1.88 -1.88 L 10 8.12 L 2.547 0.667 l -1.88 1.88 L 8.12 10 L 0.667 17.453 l 1.88 1.88 L 10 11.88 l 7.453 7.453 l 1.88 -1.88 L 11.88 10 Z"}))):L.a.createElement("div",null,L.a.createElement("svg",{id:"style-channel-search-icon",width:"18",height:"17",viewBox:"0 0 18 17",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M18.125,15.804l-4.038-4.037c0.675-1.079,1.012-2.308,1.01-3.534C15.089,4.62,12.199,1.75,8.584,1.75C4.815,1.75,1.982,4.726,2,8.286c0.021,3.577,2.908,6.549,6.578,6.549c1.241,0,2.417-0.347,3.44-0.985l4.032,4.026c0.167,0.166,0.43,0.166,0.596,0l1.479-1.478C18.292,16.234,18.292,15.968,18.125,15.804 M8.578,13.99c-3.198,0-5.716-2.593-5.733-5.71c-0.017-3.084,2.438-5.686,5.74-5.686c3.197,0,5.625,2.493,5.64,5.624C14.242,11.548,11.621,13.99,8.578,13.99 M16.349,16.981l-3.637-3.635c0.131-0.11,0.721-0.695,0.876-0.884l3.642,3.639L16.349,16.981z"}))))})),a.state={newMessagesNotification:!1,editing:"",online:!0,notifications:[],searchInput:"",searchResultId:[],activeSearchResultCount:-1,activeSearchResultId:void 0,open:!1,updatedComponent:!1},a.handleChange=a.handleChange.bind(S()(a)),a.bottomRef=L.a.createRef(),a.messageList=L.a.createRef(),a.messageRefs={},a.notificationTimeouts=[],a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){window.addEventListener("dpl-chat-language-changed",this.onLanguageChanged);var e=this.messageList.current.getBoundingClientRect();this.setState({messageListRect:e}),this.props.search?(this.setState({searchInput:this.props.search,open:!0,updatedComponent:!1},(function(){})),this.search(this.props.search,this.props.channel)):this.scrollToBottom(),this.props.client.on("connection.changed",this.connectionChanged),document.addEventListener("keydown",this.keypress)}},{key:"componentWillUnmount",value:function(){this.props.client.off("connection.changed",this.connectionChanged),document.removeEventListener("keydown",this.keypress),this.notificationTimeouts.forEach((function(e){clearTimeout(e)}))}},{key:"getSnapshotBeforeUpdate",value:function(e){if(this.props.threadList)return null;if(e.messages.length<this.props.messages.length||!Se()(this.props.eventHistory,e.eventHistory)){var t=this.messageList.current;return{offsetTop:t.scrollTop,offsetBottom:t.scrollHeight-t.scrollTop}}return null}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.userScrolledUp(),s=this.props.messages[this.props.messages.length-1],r=e.messages[e.messages.length-1];if(r&&s){var o=s.id!==r.id,i=s.user.id===this.props.client.userID,c=this.messageList.current,l=o&&(i||!n);if(""===this.state.searchInput){if(l)return this.scrollToBottom(),setTimeout(this.scrollToBottom,100),void(this.state.newMessagesNotification&&this.setState({newMessagesNotification:!1}));null!==a&&(o?this.scrollToTarget(a.offsetTop,this.messageList.current):this.scrollToTarget(c.scrollHeight-a.offsetBottom,this.messageList.current))}this.state.activeSearchResultId||this.state.updatedComponent||(this.search(this.state.searchInput,this.props.channel),this.setState({updatedComponent:!0})),this.state.activeSearchResultId&&(this.messageRefs[this.state.activeSearchResultId].current.classList.add("search-result"),this._scrollToRef(this.messageRefs[this.state.activeSearchResultId],this.messageList)),o&&!this.state.newMessagesNotification&&this.setState({newMessagesNotification:!0})}}},{key:"render",value:function(){var e=this,t=U()(this.props.messages),a=this.props.MessageSystem;t=this.insertDates(t),this.props.HeaderComponent&&(t=this.insertIntro(t));var n=this.getGroupStyles(t),s=this.props,r=s.TypingIndicator,o=s.dateSeparator,i=s.HeaderComponent,c=s.EmptyStateIndicator;t.sort((function(e,t){return e.created_at-t.created_at}));var l=this.getReadStates(t),u=this.getLastReceived(t),p=[],d=!0,h=!1,m=void 0;try{for(var g,f=t[Symbol.iterator]();!(d=(g=f.next()).done);d=!0){var v=g.value;if(v.id&&(this.messageRefs[v.id]=L.a.createRef()),"message.date"===v.type){if(this.props.threadList)continue;p.push(L.a.createElement("li",{key:v.date.toISOString()+"-i"},L.a.createElement(o,{date:v.date})))}else if("channel.intro"===v.type)p.push(L.a.createElement("li",{key:"intro"},L.a.createElement(i,null)));else if("channel.event"===v.type||"system"===v.type)a&&p.push(L.a.createElement("li",{className:"systemmessage",key:v.id||"system"===v.type?v.created_at:"channel.event"===v.type?v.event.created_at:"",ref:this.messageRefs[v.id]},L.a.createElement(a,{message:v})));else if("message.read"!==v.type){var _=n[v.id];_||(_=[]);var y=l[v.id]||[];p.push(L.a.createElement("li",{className:"str-chat__li str-chat__li--".concat(_),key:v.id||v.created_at,ref:this.messageRefs[v.id]},L.a.createElement(Bt,{client:this.props.client,openThread:this.props.openThread,members:this.props.members,watchers:this.props.watchers,message:v,groupStyles:_,readBy:y,lastReceivedId:u===v.id?u:null,editing:!(!this.state.editing||this.state.editing!==v.id),clearEditingState:this.clearEditingState,setEditingState:this.setEditingState,messageListRect:this.state.messageListRect,channel:this.props.channel,threadList:this.props.threadList,retrySendMessage:this.props.retrySendMessage,addNotification:this.addNotification,updateMessage:this.props.updateMessage,removeMessage:this.props.removeMessage,Message:this.props.Message,unsafeHTML:this.props.unsafeHTML,Attachment:this.props.Attachment,onMentionsClick:this.props.onMentionsClick,onMentionsHover:this.props.onMentionsHover,messageActions:this.props.messageActions,additionalMessageInputProps:this.props.additionalMessageInputProps,getFlagMessageSuccessNotification:this.props.getFlagMessageSuccessNotification,getFlagMessageErrorNotification:this.props.getFlagMessageErrorNotification,getMuteUserSuccessNotification:this.props.getMuteUserSuccessNotification,getMuteUserErrorNotification:this.props.getMuteUserErrorNotification})))}}}catch(b){h=!0,m=b}finally{try{d||null==f.return||f.return()}finally{if(h)throw m}}return L.a.createElement(L.a.Fragment,null,L.a.createElement("div",{style:{background:"white"}},L.a.createElement("div",{className:"str-chat__header"},L.a.createElement("div",{id:"search"},L.a.createElement(this.SearchBar,null)),L.a.createElement(this.Button,{onClick:this.toggleSearch,open:this.state.open}),this.state.open?L.a.createElement("div",{id:"style-lastResult-button-right"},L.a.createElement("button",{disabled:this.state.activeSearchResultCount>=this.state.searchResultId.length-1||!1===this.state.open,onClick:this.nextSearchResult.bind(this),id:"style-lastResult-button-left"},L.a.createElement("svg",{id:"style-channel-search-arrows",className:"search-arrow-left",width:"18",height:"18",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}))),L.a.createElement("button",{disabled:this.state.activeSearchResultCount<=0||!1===this.state.open,onClick:this.previousSearchResult.bind(this),id:"style-lastResult-button-right"},L.a.createElement("svg",{id:"style-channel-search-arrows",className:"search-arrow-right",width:"18",height:"18",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"})))):L.a.createElement(L.a.Fragment,null))),L.a.createElement("div",{className:"str-chat__list ".concat(this.props.threadList?"str-chat__list--thread":""),ref:this.messageList},p.length?L.a.createElement(qt,{loadMore:this._loadMore,hasMore:this.props.hasMore,isLoading:this.props.loadingMore,listenToScroll:this.listenToScroll,useWindow:!1,loader:L.a.createElement(Yt,{key:"loadingindicator"},L.a.createElement(dt,{size:20}))},L.a.createElement("ul",{className:"str-chat__ul"},p),this.props.TypingIndicator&&L.a.createElement(r,{typing:this.props.typing,client:this.props.client}),L.a.createElement("div",{key:"bottom",ref:this.bottomRef})):L.a.createElement(c,{listType:"message"})),L.a.createElement("div",{className:"str-chat__list-notifications"},this.state.notifications.map((function(e){return L.a.createElement(Jt,{active:!0,key:e.id,type:e.type},e.text)})),L.a.createElement(Jt,{active:!this.state.online,type:"error"},"Connection failure, reconnecting now..."),L.a.createElement(Wt,{showNotification:this.state.newMessagesNotification,onClick:function(){return e.goToNewMessages()}},"New Messages!")))}},{key:"nextSearchResult",value:function(){var e=H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.activeSearchResultCount<this.state.searchResultId.length-1)){e.next=8;break}return e.next=3,this.setState({activeSearchResultCount:this.state.activeSearchResultCount+1},(function(){}));case 3:return e.next=5,this.setState({activeSearchResultId:this.state.searchResultId[this.state.activeSearchResultCount]},(function(){}));case 5:this._scrollToRef(this.messageRefs[this.state.activeSearchResultId],this.messageList),null!==this.messageRefs[this.state.searchResultId[this.state.activeSearchResultCount-1]].current&&this.messageRefs[this.state.searchResultId[this.state.activeSearchResultCount-1]].current.classList.remove("search-result"),this.messageRefs[this.state.activeSearchResultId].current.classList.add("search-result");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"previousSearchResult",value:function(){var e=H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.activeSearchResultCount>0)){e.next=8;break}return e.next=3,this.setState({activeSearchResultCount:this.state.activeSearchResultCount-1});case 3:return e.next=5,this.setState({activeSearchResultId:this.state.searchResultId[this.state.activeSearchResultCount]},(function(){}));case 5:this._scrollToRef(this.messageRefs[this.state.activeSearchResultId],this.messageList),null!==this.messageRefs[this.state.searchResultId[this.state.activeSearchResultCount+1]].current&&this.messageRefs[this.state.searchResultId[this.state.activeSearchResultCount+1]].current.classList.remove("search-result"),this.messageRefs[this.state.activeSearchResultId].current.classList.add("search-result");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(){var e=H()(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cleanSearchResult(),e.next=3,this.setState({searchInput:t.target.value},(function(){}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cleanSearchResult",value:function(){var e=H()(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({open:!1,activeSearchResultCount:void 0,activeSearchResultId:void 0});case 2:for(t in this.messageRefs)null!==this.messageRefs[t].current&&this.messageRefs[t].current.classList.remove("search-result");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSearch",value:function(e){this.cleanSearchResult(),this.setState({activeSearchResultCount:0,open:!0}),13===(e.keyCode||e.which)&&(this.setState({open:!0}),this.search(this.state.searchInput,this.props.channel))}},{key:"search",value:function(){var e=H()(D.a.mark((function e(t,a){var n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(""===t|null|void 0)){e.next=2;break}return e.abrupt("return");case 2:if(n=window.dplChatConfig.language,!(""===this.state.searchInput|null|void 0)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,a.state.messages.filter((function(e){if(!n&&t)return e.text.toLowerCase().includes(t.toLowerCase());if(!e.translations)return!1;var a=e.translations[n];return!!t&&!!a.toLowerCase().includes(t.toLowerCase())})).map((function(e){return e.id}));case 7:return s=e.sent,e.next=10,this.setState({searchResultId:s},(function(){}));case 10:return s.length<1&&(this.setState({resultIdArray:void 0,activeSearchResultCount:void 0}),this.scrollToBottom()),e.next=13,this.setState({activeSearchResultId:s[s.length-1],activeSearchResultCount:s.length-1},(function(){}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),t}(j.PureComponent);N()(Zt,"propTypes",{TypingIndicator:T.a.oneOfType([T.a.node,T.a.func]),dateSeparator:T.a.oneOfType([T.a.node,T.a.func]),noGroupByUser:T.a.bool,unsafeHTML:T.a.bool,messageLimit:T.a.number,messageActions:T.a.oneOfType([T.a.bool,T.a.array]),threadList:T.a.bool,getFlagMessageSuccessNotification:T.a.func,getFlagMessageErrorNotification:T.a.func,getMuteUserSuccessNotification:T.a.func,getMuteUserErrorNotification:T.a.func,client:T.a.object,Attachment:T.a.oneOfType([T.a.node,T.a.func]),Message:T.a.oneOfType([T.a.node,T.a.func]),MessageSystem:T.a.oneOfType([T.a.node,T.a.func]),EmptyStateIndicator:T.a.oneOfType([T.a.node,T.a.func]),HeaderComponent:T.a.oneOfType([T.a.node,T.a.func]),messages:T.a.array.isRequired,channel:T.a.object.isRequired,updateMessage:T.a.func.isRequired,retrySendMessage:T.a.func,removeMessage:T.a.func,onMentionsClick:T.a.func,onMentionsHover:T.a.func,openThread:T.a.func,members:T.a.object,watchers:T.a.object,read:T.a.object,typing:T.a.object,additionalMessageInputProps:T.a.object}),N()(Zt,"defaultProps",{Message:Dt,MessageSystem:Gt,threadList:!1,Attachment:Ve,dateSeparator:Vt,EmptyStateIndicator:Ht,unsafeHTML:!1,noGroupByUser:!1,messageActions:Object.keys(ot)}),Zt=wt(Object(oe.c)(Zt));var Yt=function(e){var t=e.children;return L.a.createElement("div",{className:"str-chat__list__center"},t)},Jt=function(e){var t=e.children,a=e.active,n=e.type;return a?L.a.createElement("div",{className:"str-chat__custom-notification notification-".concat(n)},t):null},Qt={en:{"channel_filter.accounting-record":"accounting record","channel_filter.demand":"demand","channel_filter.empty":"no filter","channel_filter.supply":"supply","channel_filter.voucher":"voucher","channel_header.live":"live","channel_header.members":"{count} members","channel_header.watchers":"{count} online","channel_preview.latest_message.attachment":"Attachment...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Message deleted...","channel_preview.latest_message.empty":"Empty message...","channel_preview.latest_message.none":"Nothing yet...","channel_search.placeholder":"Search...","channel_sort.last":"newest","channel_sort.old":"oldest","chat_down.connection_error":"Connection Error","chat_down.connection_error_text":"Error connecting to chat, refresh the page to try again.","command.error":"<strong>/{command}</strong> is not a valid command","date_separator.else":"L","date_separator.last_week":"[Last] dddd","date_separator.next_week":"dddd","date_separator.today":"[Today]","date_separator.tomorrow":"[Tomorrow]","date_separator.yesterday":"[Yesterday]","edit_message.cancel":"Cancel","edit_message.submit":"Send","event_component.member_added":"{user} has joined the chat","event_component.member_removed":"{user} was removed from the chat","message.deleted":"This message was deleted...","message.error":"Error \xb7 Unsent","message.failed":"Message Failed \xb7 Click to try again","message.flag.error":"Error adding flag: Either the flag already exist or there is issue with network connection ...","message.flag.success":"Message has been successfully flagged","message.mute.error":"Error muting a user ...","message.mute.success":"User with id {id} has been muted","message.status.delivered":"Delivered","message.status.sending":"Sending...","message.title.message_actions":"Message actions","message.title.open_thread":"Start a thread","message.title.reactions":"Reactions","message_actions.delete":"Delete","message_actions.edit":"Edit Message","message_actions.flag":"Flag","message_actions.mute":"Mute","message_input.and":"and","message_input.placeholder":"Type your message","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} online","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"and","message_status.more":"and {count} more","modal.close":"Close"},de:{event_at_label:" um ","channel_filter.accounting-record":"Buchung","channel_filter.demand":"Bedarf","channel_filter.empty":"Nachrichten(Alle)","channel_filter.supply":"Verf\xfcgbarkeit","channel_filter.voucher":"Gutschrift","channel_header.live":"live","channel_header.members":"{count} Mitglieder","channel_header.watchers":"{count} online","channel_preview.latest_message.attachment":"Anhang...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Nachricht gel\xf6scht...","channel_preview.latest_message.empty":"Leere Nachricht...","channel_preview.latest_message.none":"Bis jetzt noch nichts...","channel_search.placeholder":"Suche...","channel_sort.last":"neuste","channel_sort.old":"\xe4lteste","channel_filter.my":"Meine","channel_filter.all":"Alle","channel_filter.me":"Bearbeiter: Ich","channel_filter.no":"Bearbeiter: Kein","channel_filter.other":"Bearbeiter: Andere","channel_preview.responsiveMember.none":"Noch nicht in Bearbeitung","channel_preview.responsiveMember.label":"In Bearbeitung von","channel_filter.responsiveMember.assignMe":"\xdcbernehme Bearbeitung","chat_down.connection_error":"Verbindungs Fehler","chat_down.connection_error_text":"Fehler beim Verbinden zum Chat, erneuere die Site um es nochmal zu versuchen.","command.error":"<strong>/{command}</strong> kein erlaubter Befehl","date_separator.else":"L","date_separator.last_week":"[letzten] dddd","date_separator.next_week":"dddd","date_separator.today":"[heute]","date_separator.tomorrow":"[morgen]","date_separator.yesterday":"[gestern]","edit_message.cancel":"Abgebrochen","edit_message.submit":"Senden","event_component.member_added":"{user} ist dem Chat beigetretten","event_component.member_removed":"{user} hat den Chat verlassen","message.deleted":"Diese Nachricht wurde gel\xf6scht...","message.error":"Fehler \xb7 Nicht gesendet","message.failed":"Nachricht gescheitert \xb7 Klicken um es nochmal zu versuchen","message.flag.error":"Fehler beim markieren: Wahrscheinlich gibt es die Markierung schon oder es besteht ein Problem mit der Internet verbindung ...","message.flag.success":"Die Nachricht wurde erfolgreich markiert","message.mute.error":"Fehler beim Stummschalten des Teilnehmers ...","message.mute.success":"Teilnehmer mit der Nummer {id} wurde Stumm geschaltet","message.status.delivered":"Angekommen","message.status.sending":"am Senden...","message.title.message_actions":"Nachrichten Aktionen","message.title.open_thread":"Starten eines Threads","message.title.reactions":"Reactionen","message_actions.delete":"L\xf6schen","message_actions.edit":"Bearbeiten einer Nachricht","message_actions.flag":"Markierung","message_actions.mute":"Stumm","message_input.and":"und","message_input.placeholder":"Tippe deine Nachricht","message_input.typing":"{count, plural, one {am Tippen...} other {sind am Tippen...}}","message_input.watching":"{count} online","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"und","message_status.more":"und {count} mehr","modal.close":"Geschlossen"},es:{"channel_filter.accounting-record":"registro de contabilidad","channel_filter.demand":"demanda","channel_filter.empty":"sin filtro","channel_filter.supply":"suministro","channel_filter.voucher":"Vale","channel_header.live":"VIVIR","channel_header.members":"{count} miembros","channel_header.watchers":"{count} en l\xednea","channel_preview.latest_message.attachment":"Adjunto archivo...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Mensaje borrado...","channel_preview.latest_message.empty":"Mensaje vac\xedo ...","channel_preview.latest_message.none":"Nada a\xfan...","channel_search.placeholder":"Buscar...","channel_sort.last":"El m\xe1s nuevo","channel_sort.old":"M\xe1s antiguo","chat_down.connection_error":"error de conexi\xf3n","chat_down.connection_error_text":"Error al conectarse al chat, actualice la p\xe1gina para volver a intentarlo.","command.error":"<strong>/{command}</strong> no es un comando v\xe1lido","date_separator.else":"L","date_separator.last_week":"[\xdaltimo] dddd","date_separator.next_week":"dddd","date_separator.today":"[Hoy]","date_separator.tomorrow":"[Ma\xf1ana]","date_separator.yesterday":"[Ayer]","edit_message.cancel":"Cancelar","edit_message.submit":"Enviar","event_component.member_added":"{user} se ha unido al chat","event_component.member_removed":"{user} se elimin\xf3 del chat","message.deleted":"Este mensaje fue eliminado ...","message.error":"Error \xb7 No enviado","message.failed":"Mensaje fallido \xb7 Haga clic para intentarlo de nuevo","message.flag.error":"Error al agregar indicador: O el indicador ya existe o hay un problema con la conexi\xf3n de red ...","message.flag.success":"El mensaje ha sido marcado exitosamente","message.mute.error":"Error al silenciar a un usuario ...","message.mute.success":"El usuario con id {id} ha sido silenciado","message.status.delivered":"Entregado","message.status.sending":"Enviando...","message.title.message_actions":"Acciones del mensaje","message.title.open_thread":"Comience un hilo","message.title.reactions":"Reacciones","message_actions.delete":"Borrar","message_actions.edit":"Editar mensaje","message_actions.flag":"Bandera","message_actions.mute":"Mudo","message_input.and":"y","message_input.placeholder":"escribe tu mensaje","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} en l\xednea","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"y","message_status.more":"y {count} m\xe1s","modal.close":"Cerrar"},it:{"channel_filter.accounting-record":"registrazione contabile","channel_filter.demand":"Richiesta","channel_filter.empty":"Senza filtro","channel_filter.supply":"fornitura","channel_filter.voucher":"Voucher; tagliando","channel_header.live":"Vivere","channel_header.members":"{count} membri","channel_header.watchers":"{count} online","channel_preview.latest_message.attachment":"Allegato ...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Messaggio cancellato...","channel_preview.latest_message.empty":"Messaggio vuoto ...","channel_preview.latest_message.none":"Ancora niente...","channel_search.placeholder":"Ricerca...","channel_sort.last":"i pi\xf9 nuovi","channel_sort.old":"il pi\xf9 vecchio","chat_down.connection_error":"errore di connessione","chat_down.connection_error_text":"Errore durante la connessione alla chat, aggiorna la pagina per riprovare.","command.error":"<strong>/{command}</strong> non \xe8 un comando valido","date_separator.else":"L","date_separator.last_week":"[Ultimo] dddd","date_separator.next_week":"dddd","date_separator.today":"[Oggi]","date_separator.tomorrow":"[Domani]","date_separator.yesterday":"[Ieri]","edit_message.cancel":"Annulla","edit_message.submit":"inviare","event_component.member_added":"{user} si \xe8 unito alla chat","event_component.member_removed":"{user} \xe8 stato rimosso dalla chat","message.deleted":"Questo messaggio \xe8 stato cancellato ...","message.error":"Errore \xb7 Non inviato","message.failed":"Messaggio non riuscito \xb7 Fare clic per riprovare","message.flag.error":"Errore durante l'aggiunta del flag: il flag esiste gi\xe0 o c'\xe8 un problema con la connessione di rete ...","message.flag.success":"Il messaggio \xe8 stato contrassegnato correttamente","message.mute.error":"Errore durante il silenziamento di un utente ...","message.mute.success":"L'utente con ID {id} \xe8 stato disattivato","message.status.delivered":"consegnato","message.status.sending":"Invio ...","message.title.message_actions":"Azioni sui messaggi","message.title.open_thread":"Inizia una discussione","message.title.reactions":"reazioni","message_actions.delete":"Elimina","message_actions.edit":"Modifica messaggio","message_actions.flag":"bandiera","message_actions.mute":"muto","message_input.and":"e","message_input.placeholder":"Scrivi il tuo messaggio","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} online","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"e","message_status.more":"e altri {count} ","modal.close":"Vicino"},pl:{"channel_filter.accounting-record":"Zapis ksi\u0119gowy","channel_filter.demand":"Zadanie","channel_filter.empty":"bez filtra","channel_filter.supply":"Dostawa","channel_filter.voucher":"Talon","channel_header.live":"relacja na \u017cywo","channel_header.members":"{count} cz\u0142onk\xf3w","channel_header.watchers":"{count} online","channel_preview.latest_message.attachment":"Przywi\u0105zanie...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Wiadomo\u015b\u0107 usuni\u0119ta...","channel_preview.latest_message.empty":"Pusta wiadomo\u015b\u0107 ...","channel_preview.latest_message.none":"Jeszcze nic...","channel_search.placeholder":"Szukaj...","channel_sort.last":"Najnowsza","channel_sort.old":"najstarszy","chat_down.connection_error":"b\u0142\u0105d po\u0142\u0105czenia","chat_down.connection_error_text":"B\u0142\u0105d po\u0142\u0105czenia z czatem, od\u015bwie\u017c stron\u0119, aby spr\xf3bowa\u0107 ponownie.","command.error":"<strong>/{command}</strong> nie jest prawid\u0142owym poleceniem","date_separator.else":"L","date_separator.last_week":"[Last] dddd","date_separator.next_week":"dddd","date_separator.today":"[Dzisiaj]","date_separator.tomorrow":"[Jutro]","date_separator.yesterday":"[Wczoraj]","edit_message.cancel":"Anuluj","edit_message.submit":"wys\u0142a\u0107","event_component.member_added":"{user} do\u0142\u0105czy\u0142 do czatu","event_component.member_removed":"{user} zosta\u0142 usuni\u0119ty z czatu","message.deleted":"Ta wiadomo\u015b\u0107 zosta\u0142a usuni\u0119ta ...","message.error":"B\u0142\u0105d \xb7 Niewys\u0142any","message.failed":"Wiadomo\u015b\u0107 nie powiod\u0142a si\u0119 \xb7 Kliknij, aby spr\xf3bowa\u0107 ponownie","message.flag.error":"B\u0142\u0105d podczas dodawania flagi: albo flaga ju\u017c istnieje, albo wyst\u0119puje problem z po\u0142\u0105czeniem sieciowym ...","message.flag.success":"Wiadomo\u015b\u0107 zosta\u0142a pomy\u015blnie oflagowana","message.mute.error":"B\u0142\u0105d wyciszenia u\u017cytkownika ...","message.mute.success":"U\u017cytkownik o identyfikatorze {id} zosta\u0142 wyciszony","message.status.delivered":"Dostarczone","message.status.sending":"Wysy\u0142anie...","message.title.message_actions":"Akcje wiadomo\u015bci","message.title.open_thread":"Rozpocznij w\u0105tek","message.title.reactions":"Reakcje","message_actions.delete":"Kasowa\u0107","message_actions.edit":"Edytuj wiadomo\u015b\u0107","message_actions.flag":"Flaga","message_actions.mute":"Niemy","message_input.and":"i","message_input.placeholder":"Wpisz swoj\u0105 wiadomo\u015b\u0107","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} online","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"i","message_status.more":"i jeszcze {count} ","modal.close":"Blisko"},cs:{"channel_filter.accounting-record":"\xfa\u010detn\xed z\xe1znam","channel_filter.demand":"popt\xe1vka","channel_filter.empty":"\u017d\xe1dn\xfd filtr","channel_filter.supply":"Z\xe1sobov\xe1n\xed","channel_filter.voucher":"poukaz","channel_header.live":"\u017e\xedt","channel_header.members":"{count} \u010dlen\u016f","channel_header.watchers":"{count} online","channel_preview.latest_message.attachment":"P\u0159\xedloha...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Zpr\xe1va smaz\xe1na...","channel_preview.latest_message.empty":"Pr\xe1zdn\xe1 zpr\xe1va ...","channel_preview.latest_message.none":"Zat\xedm nic...","channel_search.placeholder":"Vyhled\xe1v\xe1n\xed...","channel_sort.last":"Nejnov\u011bj\u0161\xed","channel_sort.old":"Nejstar\u0161\xed","chat_down.connection_error":"Chyba p\u0159ipojen\xed","chat_down.connection_error_text":"P\u0159i p\u0159ipojov\xe1n\xed k chatu do\u0161lo k chyb\u011b, obnovte str\xe1nku a zkuste to znovu.","command.error":"<strong>/{command}</strong> nen\xed platn\xfd p\u0159\xedkaz","date_separator.else":"L","date_separator.last_week":"[Posledn\xed] dddd","date_separator.next_week":"dddd","date_separator.today":"[Dnes]","date_separator.tomorrow":"[Z\xedtra]","date_separator.yesterday":"[V\u010dera]","edit_message.cancel":"zru\u0161en\xed","edit_message.submit":"Poslat","event_component.member_added":"{user} se p\u0159ipojil k chatu","event_component.member_removed":"{user} byl odstran\u011bn z chatu","message.deleted":"Tato zpr\xe1va byla smaz\xe1na ...","message.error":"Chyba \xb7 Neodesl\xe1no","message.failed":"Zpr\xe1va se nezda\u0159ila \xb7 Klepnut\xedm to zkuste znovu","message.flag.error":"Chyba p\u0159i p\u0159id\xe1v\xe1n\xed p\u0159\xedznaku: P\u0159\xedznak ji\u017e existuje nebo je probl\xe9m se s\xed\u0165ov\xfdm p\u0159ipojen\xedm ...","message.flag.success":"Zpr\xe1va byla \xfasp\u011b\u0161n\u011b ozna\u010dena","message.mute.error":"Chyba p\u0159i ignorov\xe1n\xed u\u017eivatele ...","message.mute.success":"U\u017eivatel s ID {id} byl ignorov\xe1n","message.status.delivered":"Dod\xe1no","message.status.sending":"Odes\xedl\xe1n\xed ...","message.title.message_actions":"Akce zpr\xe1v","message.title.open_thread":"Za\u010dn\u011bte vl\xe1kno","message.title.reactions":"Reakce","message_actions.delete":"Odstranit","message_actions.edit":"Upravit zpr\xe1vu","message_actions.flag":"Vlajka","message_actions.mute":"Ztlumit","message_input.and":"A","message_input.placeholder":"Napi\u0161te zpr\xe1vu","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} online","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"A","message_status.more":"a {count} dal\u0161\xedch","modal.close":"Zav\u0159\xedt"},da:{"channel_filter.accounting-record":"regnskabspost","channel_filter.demand":"eftersp\xf8rgsel","channel_filter.empty":"intet filter","channel_filter.supply":"levere","channel_filter.voucher":"Rabatkupon","channel_header.live":"Direkte","channel_header.members":"{count} medlemmer","channel_header.watchers":"{count} online","channel_preview.latest_message.attachment":"Vedh\xe6ftet fil...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Beskeden blev slettet ...","channel_preview.latest_message.empty":"Tom besked ...","channel_preview.latest_message.none":"Ingenting endnu...","channel_search.placeholder":"S\xf8g...","channel_sort.last":"nyeste","channel_sort.old":"\xe6ldste","chat_down.connection_error":"Forbindelsesfejl","chat_down.connection_error_text":"Fejl ved forbindelse til chat, opdater siden for at pr\xf8ve igen.","command.error":"<strong>/{command}</strong> er ikke en gyldig kommando","date_separator.else":"L","date_separator.last_week":"[Sidste] dddd","date_separator.next_week":"dddd","date_separator.today":"[I dag]","date_separator.tomorrow":"[I morgen]","date_separator.yesterday":"[I g\xe5r]","edit_message.cancel":"afbestille","edit_message.submit":"Sende","event_component.member_added":"{user} er blevet medlem af chatten","event_component.member_removed":"{user} blev fjernet fra chatten","message.deleted":"Denne meddelelse blev slettet ...","message.error":"Fejl \xb7 Ikke sendt","message.failed":"Beskeden mislykkedes \xb7 Klik for at pr\xf8ve igen","message.flag.error":"Fejl ved tilf\xf8jelse af flag: Enten findes flaget allerede, eller der er problemer med netv\xe6rksforbindelse ...","message.flag.success":"Beskeden er blevet markeret","message.mute.error":"Fejl ved d\xe6mpning af en bruger ...","message.mute.success":"Bruger med id {id} er sl\xe5et fra","message.status.delivered":"leveres","message.status.sending":"Sender ...","message.title.message_actions":"Beskedhandlinger","message.title.open_thread":"Start en tr\xe5d","message.title.reactions":"Reaktioner","message_actions.delete":"Slet","message_actions.edit":"Rediger meddelelse","message_actions.flag":"Flag","message_actions.mute":"Stum","message_input.and":"og","message_input.placeholder":"Skriv din besked","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} online","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"og","message_status.more":"og {count} mere","modal.close":"T\xe6t"},fr:{"channel_filter.accounting-record":"enregistrement comptable","channel_filter.demand":"Demande","channel_filter.empty":"Pas de filtre","channel_filter.supply":"la fourniture","channel_filter.voucher":"Bon","channel_header.live":"Vivre","channel_header.members":"{count} membres","channel_header.watchers":"{count} en ligne","channel_preview.latest_message.attachment":"Attachement...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Message supprim\xe9 ...","channel_preview.latest_message.empty":"Message vide ...","channel_preview.latest_message.none":"Rien pour le moment...","channel_search.placeholder":"Chercher...","channel_sort.last":"Plus r\xe9cent","channel_sort.old":"Le plus ancien","chat_down.connection_error":"Erreur de connexion","chat_down.connection_error_text":"Erreur de connexion au chat, actualisez la page pour r\xe9essayer.","command.error":"<strong>/{command}</strong> n'est pas une commande valide","date_separator.else":"L","date_separator.last_week":"[Dernier] jjjj","date_separator.next_week":"dddd","date_separator.today":"[Aujourd'hui]","date_separator.tomorrow":"[Demain]","date_separator.yesterday":"[Hier]","edit_message.cancel":"annuler","edit_message.submit":"Envoyer","event_component.member_added":"{user} a rejoint le chat","event_component.member_removed":"{user} a \xe9t\xe9 supprim\xe9 du chat","message.deleted":"Ce message a \xe9t\xe9 supprim\xe9 ...","message.error":"Erreur \xb7 Non envoy\xe9","message.failed":"\xc9chec du message \xb7 Cliquez pour r\xe9essayer","message.flag.error":"Erreur lors de l'ajout de l'indicateur: l'indicateur existe d\xe9j\xe0 ou il y a un probl\xe8me avec la connexion r\xe9seau ...","message.flag.success":"Le message a \xe9t\xe9 signal\xe9 avec succ\xe8s","message.mute.error":"Erreur lors de la coupure d'un utilisateur ...","message.mute.success":"L'utilisateur avec l'identifiant {id} a \xe9t\xe9 mis en sourdine","message.status.delivered":"Livr\xe9","message.status.sending":"Envoi...","message.title.message_actions":"Actions de message","message.title.open_thread":"D\xe9marrer un fil","message.title.reactions":"Les r\xe9actions","message_actions.delete":"Effacer","message_actions.edit":"Modifier le message","message_actions.flag":"Drapeau","message_actions.mute":"Muet","message_input.and":"et","message_input.placeholder":"Tapez votre message","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} en ligne","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"et","message_status.more":"et {count} plus","modal.close":"Fermer"},nl:{"channel_filter.accounting-record":"boekhouding","channel_filter.demand":"vraag naar","channel_filter.empty":"Geen filter","channel_filter.supply":"Levering","channel_filter.voucher":"bon","channel_header.live":"LEVEN","channel_header.members":"{count} leden","channel_header.watchers":"{count} online","channel_preview.latest_message.attachment":"Hechting...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Bericht verwijderd...","channel_preview.latest_message.empty":"Leeg bericht ...","channel_preview.latest_message.none":"Nog niets...","channel_search.placeholder":"Zoeken...","channel_sort.last":"nieuwste","channel_sort.old":"oudste","chat_down.connection_error":"Verbindingsfout","chat_down.connection_error_text":"Fout bij verbinden met chat, vernieuw de pagina om het opnieuw te proberen.","command.error":"<strong>/{command}</strong> is geen geldige opdracht","date_separator.else":"L","date_separator.last_week":"[Last] dddd","date_separator.next_week":"dddd","date_separator.today":"[Vandaag]","date_separator.tomorrow":"[Morgen]","date_separator.yesterday":"[Gisteren]","edit_message.cancel":"annuleren","edit_message.submit":"Sturen","event_component.member_added":"{user} neemt deel aan de chat","event_component.member_removed":"{user} is verwijderd uit de chat","message.deleted":"Dit bericht is verwijderd ...","message.error":"Fout \xb7 Niet verzonden","message.failed":"Bericht mislukt \xb7 Klik om het opnieuw te proberen","message.flag.error":"Fout bij het toevoegen van vlag: de vlag bestaat al of er is een probleem met de netwerkverbinding ...","message.flag.success":"Bericht is succesvol gemarkeerd","message.mute.error":"Fout bij het dempen van een gebruiker ...","message.mute.success":"Gebruiker met id {id} is gedempt","message.status.delivered":"Geleverd","message.status.sending":"Bezig met verzenden...","message.title.message_actions":"Bericht acties","message.title.open_thread":"Start een draad","message.title.reactions":"Reacties","message_actions.delete":"Verwijder","message_actions.edit":"Bewerk bericht","message_actions.flag":"Vlag","message_actions.mute":"Dempen","message_input.and":"en","message_input.placeholder":"Schrijf je bericht","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} online","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"en","message_status.more":"en {count} meer","modal.close":"Dichtbij"},pt:{"channel_filter.accounting-record":"Registro cont\xe1bil","channel_filter.demand":"exigem","channel_filter.empty":"Sem filtro","channel_filter.supply":"Fornecem","channel_filter.voucher":"Comprovante","channel_header.live":"Viver","channel_header.members":"{count} membros","channel_header.watchers":"{count} online","channel_preview.latest_message.attachment":"Anexo...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"Mensagem apagada...","channel_preview.latest_message.empty":"Mensagem vazia ...","channel_preview.latest_message.none":"Nada ainda...","channel_search.placeholder":"Procurar...","channel_sort.last":"O mais novo","channel_sort.old":"Mais antigas","chat_down.connection_error":"erro de conex\xe3o","chat_down.connection_error_text":"Erro ao conectar-se ao bate-papo, atualize a p\xe1gina para tentar novamente.","command.error":"<strong>/{command}</strong> n\xe3o \xe9 um comando v\xe1lido","date_separator.else":"Eu","date_separator.last_week":"[Last] dddd","date_separator.next_week":"dddd","date_separator.today":"[Hoje]","date_separator.tomorrow":"[Amanh\xe3]","date_separator.yesterday":"[Ontem]","edit_message.cancel":"Cancelar","edit_message.submit":"Mandar","event_component.member_added":"{user} entrou no chat","event_component.member_removed":"{user} foi removido do chat","message.deleted":"Esta mensagem foi exclu\xedda ...","message.error":"Erro \xb7 N\xe3o enviado","message.failed":"Mensagem falhou \xb7 Clique para tentar novamente","message.flag.error":"Erro ao adicionar sinalizador: o sinalizador j\xe1 existe ou h\xe1 um problema com a conex\xe3o de rede ...","message.flag.success":"A mensagem foi sinalizada com sucesso","message.mute.error":"Erro ao silenciar um usu\xe1rio ...","message.mute.success":"O usu\xe1rio com o ID {id} foi silenciado","message.status.delivered":"Entregue","message.status.sending":"Enviando ...","message.title.message_actions":"A\xe7\xf5es de mensagem","message.title.open_thread":"Iniciar um t\xf3pico","message.title.reactions":"Reac\xe7\xf5es","message_actions.delete":"Excluir","message_actions.edit":"Editar mensagem","message_actions.flag":"Bandeira","message_actions.mute":"Mudo","message_input.and":"e","message_input.placeholder":"Digite sua mensagem","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} online","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"e","message_status.more":"e {count} mais","modal.close":"Perto"},ru:{"channel_filter.accounting-record":"\u0443\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c","channel_filter.demand":"\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0435","channel_filter.empty":"\u043d\u0435\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u0430","channel_filter.supply":"\u041f\u041e\u0421\u0422\u0410\u0412\u041a\u0410","channel_filter.voucher":"\u0432\u0430\u0443\u0447\u0435\u0440","channel_header.live":"\u0416\u0438\u0442\u044c","channel_header.members":"{count} \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432","channel_header.watchers":"{count} \u043e\u043d\u043b\u0430\u0439\u043d","channel_preview.latest_message.attachment":"\u0412\u043b\u043e\u0436\u0435\u043d\u0438\u0435 ...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e...","channel_preview.latest_message.empty":"\u041f\u0443\u0441\u0442\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 ...","channel_preview.latest_message.none":"\u041f\u043e\u043a\u0430 \u043d\u0438\u0447\u0435\u0433\u043e...","channel_search.placeholder":"\u041f\u043e\u0438\u0441\u043a...","channel_sort.last":"\u043d\u043e\u0432\u0435\u0439\u0448\u0438\u0439","channel_sort.old":"\u0441\u0430\u043c\u044b\u0439 \u0441\u0442\u0430\u0440\u0448\u0438\u0439","chat_down.connection_error":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f","chat_down.connection_error_text":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0447\u0430\u0442\u0443, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u043f\u044b\u0442\u043a\u0443.","command.error":"<strong>/{command}</strong> \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439","date_separator.else":"L","date_separator.last_week":"[Last] DDDD","date_separator.next_week":"\u0434\u0434\u0434\u0434","date_separator.today":"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f]","date_separator.tomorrow":"[\u0417\u0430\u0432\u0442\u0440\u0430]","date_separator.yesterday":"[\u0412\u0447\u0435\u0440\u0430]","edit_message.cancel":"\u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","edit_message.submit":"\u043f\u043e\u0441\u043b\u0430\u0442\u044c","event_component.member_added":"{user} \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f \u043a \u0447\u0430\u0442\u0443","event_component.member_removed":"{user} \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d \u0438\u0437 \u0447\u0430\u0442\u0430","message.deleted":"\u042d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e ...","message.error":"\u041e\u0448\u0438\u0431\u043a\u0430 \xb7 \u041d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e","message.failed":"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \xb7 \u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u043f\u044b\u0442\u043a\u0443","message.flag.error":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u043b\u0430\u0433\u0430: \u043b\u0438\u0431\u043e \u0444\u043b\u0430\u0433 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u043b\u0438\u0431\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u0435\u0442\u0435\u0432\u044b\u043c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c ...","message.flag.success":"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u043c\u0435\u0447\u0435\u043d\u043e","message.mute.error":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438\u0433\u043b\u0443\u0448\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ...","message.mute.success":"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u043e\u043c {id} \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d","message.status.delivered":"\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d","message.status.sending":"\u041f\u043e\u0441\u044b\u043b\u043a\u0430 ...","message.title.message_actions":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f","message.title.open_thread":"\u041d\u0430\u0447\u0430\u0442\u044c \u0442\u0435\u043c\u0443","message.title.reactions":"\u0420\u0435\u0430\u043a\u0446\u0438\u0438","message_actions.delete":"\u0443\u0434\u0430\u043b\u044f\u0442\u044c","message_actions.edit":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435","message_actions.flag":"\u0424\u043b\u0430\u0433","message_actions.mute":"\u0431\u0435\u0437\u0433\u043b\u0430\u0441\u043d\u044b\u0439","message_input.and":"\u0430 \u0442\u0430\u043a\u0436\u0435","message_input.placeholder":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":"{count} \u043e\u043d\u043b\u0430\u0439\u043d","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"\u0430 \u0442\u0430\u043a\u0436\u0435","message_status.more":"\u0438 \u0435\u0449\u0435 {count} ","modal.close":"\u0431\u043b\u0438\u0437\u043a\u043e"},zh:{"channel_filter.accounting-record":"\u4f1a\u8ba1\u8bb0\u5f55","channel_filter.demand":"\u9700\u6c42","channel_filter.empty":"\u6ca1\u6709\u8fc7\u6ee4\u5668","channel_filter.supply":"\u4f9b\u5e94","channel_filter.voucher":"\u51ed\u8bc1","channel_header.live":"\u751f\u6d3b","channel_header.members":"{count} \u540d\u6210\u5458","channel_header.watchers":" \u5728\u7ebf{count} ","channel_preview.latest_message.attachment":"\u9644\u4ef6...","channel_preview.latest_message.command":"/{command}","channel_preview.latest_message.deleted":"\u8baf\u606f\u5df2\u5220\u9664...","channel_preview.latest_message.empty":"\u7a7a\u6d88\u606f...","channel_preview.latest_message.none":"\u8fd8\u6ca1\u6709...","channel_search.placeholder":"\u641c\u7d22...","channel_sort.last":"\u6700\u65b0","channel_sort.old":"\u6700\u8001\u7684","chat_down.connection_error":"\u8fde\u63a5\u9519\u8bef","chat_down.connection_error_text":"\u8fde\u63a5\u804a\u5929\u65f6\u51fa\u9519\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u4ee5\u91cd\u8bd5\u3002","command.error":"<strong>/{command}</strong> \u662f\u65e0\u6548\u547d\u4ee4","date_separator.else":"\u5927\u53f7","date_separator.last_week":"[\u6700\u540e] dddd","date_separator.next_week":"dddd","date_separator.today":"[\u4eca\u5929]","date_separator.tomorrow":"[\u660e\u5929]","date_separator.yesterday":"[\u6628\u5929]","edit_message.cancel":"\u53d6\u6d88","edit_message.submit":"\u53d1\u9001","event_component.member_added":"{user} \u5df2\u52a0\u5165\u804a\u5929","event_component.member_removed":"{user} \u5df2\u4ece\u804a\u5929\u4e2d\u5220\u9664","message.deleted":"\u6b64\u6d88\u606f\u5df2\u5220\u9664...","message.error":"\u9519\u8bef\xb7\u672a\u53d1\u9001","message.failed":"\u6d88\u606f\u5931\u8d25\xb7\u5355\u51fb\u4ee5\u91cd\u8bd5","message.flag.error":"\u9519\u8bef\u6dfb\u52a0\u6807\u8bb0\uff1a\u8be5\u6807\u8bb0\u5df2\u7ecf\u5b58\u5728\u6216\u7f51\u7edc\u8fde\u63a5\u6709\u95ee\u9898...","message.flag.success":"\u6d88\u606f\u5df2\u88ab\u6210\u529f\u6807\u8bb0","message.mute.error":"\u5c4f\u853d\u7528\u6237\u65f6\u51fa\u9519...","message.mute.success":"ID\u4e3a {id} \u7684\u7528\u6237\u5df2\u88ab\u9759\u97f3","message.status.delivered":"\u4ea4\u4ed8","message.status.sending":"\u53d1\u9001\u4e2d...","message.title.message_actions":"\u8baf\u606f\u52a8\u4f5c","message.title.open_thread":"\u542f\u52a8\u4e3b\u9898","message.title.reactions":"\u53cd\u5e94","message_actions.delete":"\u5220\u9664","message_actions.edit":"\u7f16\u8f91\u8baf\u606f","message_actions.flag":"\u65d7","message_actions.mute":"\u9759\u97f3","message_input.and":"\u548c","message_input.placeholder":"\u8f93\u5165\u60a8\u7684\u8baf\u606f","message_input.typing":"{count, plural, one {is typing...} other {are typing...}}","message_input.watching":" \u5728\u7ebf{count} ","message_replies.count_button":"{count, plural, one {# reply} other {# replies}}","message_status.and":"\u548c","message_status.more":"\u8fd8\u6709\u53e6\u5916 {count} \u4e2a","modal.close":"\u5173"}},Kt=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"setActiveChannel",function(){var e=H()(D.a.mark((function e(t){var n,s,r=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:{},void 0!==(s=r.length>2?r[2]:void 0)&&s.preventDefault&&s.preventDefault(),!Object.keys(n).length){e.next=6;break}return e.next=6,t.query({watch:!0,watchers:n});case 6:a.state.channel===t&&a.setState((function(){return{channel:{}}})),a.setState((function(){return{channel:t}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"setActiveSearch",function(){var e=H()(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==n&&n.preventDefault&&n.preventDefault(),t?a.setState((function(){return{search:t}})):a.setState((function(){return{search:void 0}}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),N()(S()(a),"getContext",(function(){return{client:a.props.client,channel:a.state.channel,search:a.state.search,setActiveChannel:a.setActiveChannel,setActiveSearch:a.setActiveSearch,theme:a.props.theme}})),a.state={channel:{},search:void 0,error:!1},a}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement(ie.a,{locale:this.props.locale,messages:Qt[this.props.locale]},L.a.createElement(_t.Provider,{value:this.getContext()},this.props.children))}}]),t}(j.PureComponent);N()(Kt,"propTypes",{client:T.a.object.isRequired,theme:T.a.string,locale:T.a.string,messages:T.a.object}),N()(Kt,"defaultProps",{theme:"messaging light",locale:"de"});var Xt=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return this.props.error?L.a.createElement("div",null,"Error: ",this.props.error.message):null}}]),t}(L.a.PureComponent);function $t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ea(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$t(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$t(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}N()(Xt,"propTypes",{error:T.a.oneOfType([T.a.object,T.a.bool])}),N()(Xt,"defaultProps",{error:!1});var ta=function(e){function t(e){var a;return _()(this,t),(a=E()(this,k()(t).call(this,e))).state={error:!1},a}return R()(t,e),b()(t,[{key:"render",value:function(){return void 0===this.props.channel?null:this.props.channel.cid?L.a.createElement(aa,I()({},this.props,{key:this.props.channel.cid})):null}}]),t}(j.PureComponent);N()(ta,"propTypes",{channel:T.a.shape({watch:T.a.func}).isRequired,client:T.a.object.isRequired,LoadingErrorIndicator:T.a.oneOfType([T.a.node,T.a.func]),LoadingIndicator:T.a.oneOfType([T.a.node,T.a.func]),Message:T.a.oneOfType([T.a.node,T.a.func]),Attachment:T.a.oneOfType([T.a.node,T.a.func]),onMentionsClick:T.a.func,onMentionsHover:T.a.func,multipleUploads:T.a.bool,acceptedFiles:T.a.array,maxNumberOfFiles:T.a.number,doSendMessageRequest:T.a.func,doUpdateMessageRequest:T.a.func}),N()(ta,"defaultProps",{LoadingIndicator:dt,LoadingErrorIndicator:Xt,Message:Dt,Attachment:Ve});var aa=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"openThread",(function(e,t){t&&t.preventDefault&&t.preventDefault();var n=a.props.channel.state.threads[e.id]||[];a.setState({thread:e,threadMessages:n})})),N()(S()(a),"loadMoreThread",H()(D.a.mark((function e(){var t,n,s,r,o,i,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.threadLoadingMore){e.next=2;break}return e.abrupt("return");case 2:return a.setState({threadLoadingMore:!0}),t=a.props.channel,n=a.state.thread.id,s=t.state.threads[n]||[],r=s[0]?s[0].id:null,o=50,e.next=10,t.getReplies(n,{limit:o,id_lt:r});case 10:i=e.sent,c=i.messages.length===o,l=t.state.threads[n]||[],a._loadMoreThreadFinishedDebounced(c,l);case 14:case"end":return e.stop()}}),e)})))),N()(S()(a),"loadMoreThreadFinished",(function(e,t){a.setState({threadLoadingMore:!1,threadHasMore:e,threadMessages:t})})),N()(S()(a),"closeThread",(function(e){e&&e.preventDefault&&e.preventDefault(),a.setState({thread:null,threadMessages:[]})})),N()(S()(a),"updateMessage",(function(e,t){var n=a.props.channel;t=t||{},n.state.addMessageSorted(e),a.state.thread&&e.parent_id&&(t.threadMessages=n.state.threads[e.parent_id]||[]),a.setState(ea({messages:n.state.messages},t))})),N()(S()(a),"removeMessage",(function(e){var t=a.props.channel;t.state.removeMessage(e),a.setState({messages:t.state.messages})})),N()(S()(a),"createMessagePreview",(function(e,t,n,s){var r={text:e,html:e,__html:e,id:"".concat(a.props.client.userID,"-")+Ne()(),type:"regular",status:"sending",user:ea({id:a.props.client.userID},a.props.client.user),created_at:new Date,attachments:t,mentioned_users:s,reactions:[]};return n&&n.id&&(r.parent_id=n.id),r})),N()(S()(a),"editMessage",(function(e){return a.props.doUpdateMessageRequest?Promise.resolve(a.props.doUpdateMessageRequest(a.props.channel.cid,e)):a.props.client.updateMessage(e)})),N()(S()(a),"_sendMessage",function(){var e=H()(D.a.mark((function e(t){var n,s,r,o,i,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.text,s=t.attachments,r=t.id,o=t.parent_id,i=t.mentioned_users,c={text:n,attachments:s,mentioned_users:i,id:r,parent_id:o},e.prev=2,!a.props.doSendMessageRequest){e.next=9;break}return e.next=6,a.props.doSendMessageRequest(a.props.channel.cid,c);case 6:l=e.sent,e.next=12;break;case 9:return e.next=11,a.props.channel.sendMessage(c);case 11:l=e.sent;case 12:l.message&&(l.message.status="received",a.updateMessage(l.message)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),t.status="failed",a.updateMessage(t);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"sendMessage",function(){var e=H()(D.a.mark((function e(t){var n,s,r,o,i,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,s=t.attachments,r=void 0===s?[]:s,o=t.mentioned_users,i=void 0===o?[]:o,c=t.parent,a.props.channel.state.filterErrorMessages(),l=a.createMessagePreview(n,r,c,i),a.updateMessage(l,{messageInput:"",commands:[],userAutocomplete:[]}),e.next=6,a._sendMessage(l);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"retrySendMessage",function(){var e=H()(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=t.asMutable()).status="sending",a.updateMessage(t),e.next=5,a._sendMessage(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"handleEvent",(function(e){var t=a.props.channel,n=[],s={};if(a.state.thread&&(n=t.state.threads[a.state.thread.id]||[],s.threadMessages=n),a.state.thread&&e.message&&e.message.id===a.state.thread.id&&(s.thread=t.state.messageToImmutable(e.message)),Object.keys(s).length>0&&a.setState(s),"message.new"===e.type){var r=!0;if(e.message.parent_id&&!e.message.show_in_channel&&(r=!1),r&&e.message.user.id!==a.props.client.userID)if("visible"===Le.a.state())a._markReadThrottled(t);else{var o=t.countUnread(a.lastRead);document.title="(".concat(o,") ").concat(a.originalTitle)}}"member.added"===e.type&&a.addToEventHistory(e),"member.removed"===e.type&&a.addToEventHistory(e),a._setStateThrottled({messages:t.state.messages,watchers:t.state.watchers,read:t.state.read,typing:t.state.typing,watcher_count:t.state.watcher_count})})),N()(S()(a),"addToEventHistory",(function(e){a.setState((function(t){if(t.message&&t.message.length){var a=t.messages[t.messages.length-1].id;return t.eventHistory[a]?ea({},t,{eventHistory:ea({},t.eventHistory,N()({},a,[].concat(U()(t.eventHistory[a]),[e])))}):ea({},t,{eventHistory:ea({},t.eventHistory,N()({},a,[e]))})}}))})),N()(S()(a),"markRead",(function(e){e.getConfig().read_events&&(a.lastRead=new Date,Object(Ee.a)(e.markRead(),"mark read"),a.originalTitle&&(document.title=a.originalTitle))})),N()(S()(a),"loadMore",H()(D.a.mark((function e(){var t,n,s,r,o,i,c=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:100,!a.state.loadingMore){e.next=3;break}return e.abrupt("return");case 3:if(a.setState({loadingMore:!0}),!(n=a.state.messages[0])||"received"===n.status){e.next=8;break}return a.setState({loadingMore:!1}),e.abrupt("return");case 8:return s=n?n.id:null,r=t,e.prev=10,e.next=13,a.props.channel.query({messages:{limit:r,id_lt:s}});case 13:o=e.sent,e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(10),console.warn("message pagination request failed with error",e.t0),a.setState({loadingMore:!1}),e.abrupt("return");case 21:if(!(i=o.messages.length===r)){e.next=28;break}return a.setState({loadingMore:!1,hasMore:i,messages:a.props.channel.state.messages}),e.next=26,a.loadMore();case 26:e.next=29;break;case 28:a._loadMoreFinishedDebounced(i,a.props.channel.state.messages);case 29:case"end":return e.stop()}}),e,null,[[10,16]])})))),N()(S()(a),"_onMentionsHoverOrClick",(function(e,t){if(a.props.onMentionsHover||a.props.onMentionsClick){var n=e.target.tagName.toLowerCase(),s=e.target.innerHTML.replace("*","");if("strong"===n&&"@"===s[0]){var r=s.replace("@",""),o=t.find((function(e){return e.name===r||e.id===r}));a.props.onMentionsHover&&"function"===typeof a.props.onMentionsHover&&"mouseover"===e.type&&a.props.onMentionsHover(e,o),a.props.onMentionsClick&&"click"===e.type&&"function"===typeof a.props.onMentionsClick&&a.props.onMentionsClick(e,o)}}})),N()(S()(a),"loadMoreFinished",(function(e,t){a.setState({loadingMore:!1,hasMore:e,messages:t})})),N()(S()(a),"getContext",(function(){return ea({},a.state,{client:a.props.client,channel:a.props.channel,search:a.props.search,Message:a.props.Message,Attachment:a.props.Attachment,multipleUploads:a.props.multipleUploads,acceptedFiles:a.props.acceptedFiles,maxNumberOfFiles:a.props.maxNumberOfFiles,updateMessage:a.updateMessage,removeMessage:a.removeMessage,sendMessage:a.sendMessage,editMessage:a.editMessage,retrySendMessage:a.retrySendMessage,loadMore:a.loadMore,openThread:a.openThread,closeThread:a.closeThread,loadMoreThread:a.loadMoreThread,onMentionsClick:a._onMentionsHoverOrClick,onMentionsHover:a._onMentionsHoverOrClick})})),N()(S()(a),"renderComponent",(function(){return a.props.children})),a.state={error:!1,loading:!0,loadingMore:!1,hasMore:!0,messages:ye()([]),online:!0,typing:ye()({}),watchers:ye()({}),members:ye()({}),read:ye()({}),eventHistory:{},thread:!1,threadMessages:[],threadLoadingMore:!1,threadHasMore:!0},a._loadMoreFinishedDebounced=Te()(a.loadMoreFinished,2e3,{leading:!0,trailing:!0}),a._loadMoreThreadFinishedDebounced=Te()(a.loadMoreThreadFinished,2e3,{leading:!0,trailing:!0}),a._markReadThrottled=Ie()(a.markRead,500,{leading:!0,trailing:!0}),a._setStateThrottled=Ie()(a.setState,500,{leading:!0,trailing:!0}),a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){var e=H()(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.channel,a=!1,t.initialized){e.next=12;break}return e.prev=3,e.next=6,t.watch();case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),this.setState({error:e.t0}),a=!0;case 12:if(this.originalTitle=document.title,this.lastRead=new Date,a){e.next=19;break}return this.copyChannelState(),this.listenToChanges(),e.next=19,this.loadMore();case 19:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){if(this.state.thread)for(var e=this.state.messages.length-1;e>=0;e--)if(this.state.messages[e].id===this.state.thread.id){this.setState({thread:this.state.messages[e]});break}}},{key:"componentWillUnmount",value:function(){this.props.client.off("connection.recovered",this.handleEvent),this.props.channel.off(this.handleEvent),this._loadMoreFinishedDebounced.cancel(),this._loadMoreThreadFinishedDebounced.cancel(),(this.visibilityListener||0===this.visibilityListener)&&Le.a.unbind(this.visibilityListener)}},{key:"copyChannelState",value:function(){var e=this.props.channel;this.setState({messages:e.state.messages,read:e.state.read,watchers:e.state.watchers,members:e.state.members,watcher_count:e.state.watcher_count,loading:!1,typing:ye()({})}),e.countUnread()>0&&e.markRead()}},{key:"removeEphemeralMessages",value:function(){var e=this.props.channel;e.state.selectRegularMessages(),this.setState({messages:e.state.messages})}},{key:"listenToChanges",value:function(){var e=this;this.props.client.on("connection.recovered",this.handleEvent);var t=this.props.channel;t.on(this.handleEvent),this.boundMarkRead=this.markRead.bind(this,t),this.visibilityListener=Le.a.change((function(t,a){"visible"===a&&e.boundMarkRead()}))}},{key:"render",value:function(){var e,t=this.props.LoadingIndicator,a=this.props.LoadingErrorIndicator;return e=this.state.error?L.a.createElement(a,{error:this.state.error}):this.state.loading?L.a.createElement(t,{size:25,isLoading:!0}):this.props.channel&&this.props.channel.watch?L.a.createElement(bt.Provider,{value:this.getContext()},L.a.createElement("div",{className:"str-chat__container"},this.renderComponent())):L.a.createElement("div",null,"Channel Missing"),L.a.createElement("div",{className:"str-chat str-chat-channel ".concat(this.props.theme)},e)}}]),t}(j.PureComponent);N()(aa,"propTypes",{channel:T.a.shape({watch:T.a.func}).isRequired,client:T.a.object.isRequired,LoadingIndicator:T.a.oneOfType([T.a.node,T.a.func]),LoadingErrorIndicator:T.a.oneOfType([T.a.node,T.a.func])}),ta=yt(ta);var na=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"SetResponsive",H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({isLoading:!0});case 2:return e.next=4,a.props.channel.update({name:a.props.channel.data.name,extraType:a.props.channel.data.extraType,referenceId:a.props.channel.data.referenceId,assignFlag:!0,languages:a.props.channel.data.languages,responsiveMember:a.props.client.user.name},{text:a.props.client.user.name+" ist jetzt der neue Bearbeiter",user_id:a.props.client.user.id});case 4:return e.next=6,a.setState({isLoading:!1});case 6:case"end":return e.stop()}}),e)})))),N()(S()(a),"LanguageSelect",(function(){return L.a.createElement("select",{id:"select",className:"str-chat__channel-list-team__header--button",onChange:a.onLanguageChange,defaultValue:a.props.language},a.languageOptions)})),N()(S()(a),"jumpTo",(function(){var e=a.props.channel.data,t=e.extraType,n=e.referenceId;window.dplChatConfig.goToDetails(t,n)})),N()(S()(a),"languageOptions",window.dplChatConfig.languages.map((function(e,t){return""===e.value?L.a.createElement("option",{key:t,value:e.value},e.label):null!==a.props.channel.data.languages&&a.props.channel.data.languages.find((function(t){return t===e.value}))?L.a.createElement("option",{key:t,value:e.value},e.label):null}))),a.state={isLoading:!1},a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this;this.props.intl;return L.a.createElement("div",{className:"str-chat__header-livestream"},this.props.channel.data.image&&L.a.createElement(ze,{image:this.props.channel.data.image,shape:"rounded",size:"commerce"===this.props.channel.type?60:40}),L.a.createElement("div",{className:"str-chat__header-livestream-left"},L.a.createElement("p",{className:"str-chat__header-livestream-left--title"},L.a.createElement("a",{className:"channel-header-link",onClick:function(){return e.jumpTo()}},this.props.title||this.props.channel.data.name," "),this.props.live&&L.a.createElement("span",{className:"str-chat__header-livestream-left--livelabel"},L.a.createElement(re.a,{id:"channel_header.live",defaultMessage:"live"}))),this.props.channel.data.subtitle&&L.a.createElement("p",{className:"str-chat__header-livestream-left--subtitle"},this.props.channel.data.subtitle),L.a.createElement("p",{className:"str-chat__header-livestream-left--members"},!this.props.live&&this.props.channel.data.member_count>0&&L.a.createElement(L.a.Fragment,null,L.a.createElement(re.a,{id:"channel_header.members",defaultMessage:"{count} members",values:{count:this.props.channel.data.member_count}}),","," "),L.a.createElement(re.a,{id:"channel_header.watchers",defaultMessage:"{count} online",values:{count:this.props.watcher_count}})),L.a.createElement("div",{className:"str-chat__channel_header_responsive_member-label--all"},L.a.createElement("label",null,this.props.channel.data.responsiveMember?"In Bearbeitung  (dies sehen alle)":""))),L.a.createElement("div",{id:"channel_header_responsive_member"},"admin"!==this.props.client.user.role||this.props.client.user.name===this.props.channel.data.responsiveMember||this.state.isLoading?L.a.createElement("label",null):L.a.createElement(L.a.Fragment,null,L.a.createElement("button",{onClick:this.SetResponsive},this.props.channel.data.responsiveMember?"\xdcbernehme Bearbeitung":"Starte Bearbeitung"))),L.a.createElement("div",{id:"channel_header_left_panel"},L.a.createElement(this.LanguageSelect,null)))}},{key:"onLanguageChange",value:function(e){window.dplChatConfig.language=e.target.value,window.dispatchEvent(it),localStorage.setItem("language",window.dplChatConfig.language)}}]),t}(j.PureComponent);N()(na,"propTypes",{title:T.a.string,live:T.a.bool,channel:T.a.object.isRequired,watcher_count:T.a.number,language:T.a.string}),N()(na,"defaultProps",{language:localStorage.getItem("language")}),na=wt(na);var sa=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"renderUploads",(function(){return L.a.createElement(L.a.Fragment,null,a.props.imageOrder.length>0&&L.a.createElement(Z.e,{imageUploads:a.props.imageOrder.map((function(e){return a.props.imageUploads[e]})),handleRemove:a.props.removeImage,handleRetry:a.props.uploadImage,handleFiles:a.props.uploadNewFiles,multiple:a.props.multipleUploads,disabled:a.props.numberOfUploads>=a.props.maxNumberOfFiles}),a.props.fileOrder.length>0&&L.a.createElement("div",{className:"str-chat__file-uploads"},L.a.createElement(Z.b,{uploads:a.props.fileOrder.map((function(e){return a.props.fileUploads[e]})),handleRemove:a.props.removeFile,handleRetry:a.props.uploadFile,handleFiles:a.props.uploadNewFiles})))})),N()(S()(a),"renderEmojiPicker",(function(){if(a.props.emojiPickerIsOpen)return L.a.createElement("div",{className:"str-chat__input-flat--emojipicker",ref:a.props.emojiPickerRef},L.a.createElement(ce.b,{native:!0,emoji:"point_up",title:"Pick your emoji\u2026",onSelect:a.props.onSelectEmoji,color:"#006CFF",showPreview:!1}))})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this,t=this.props.intl,a=this.props.SendButton;return L.a.createElement("div",{className:"str-chat__input-flat ".concat(a?"str-chat__input-flat--send-button-active":null)},L.a.createElement(Z.d,{accept:this.props.acceptedFiles,multiple:this.props.multipleUploads,disabled:this.props.numberOfUploads>=this.props.maxNumberOfFiles,handleFiles:this.props.uploadNewFiles},L.a.createElement("div",{className:"str-chat__input-flat-wrapper"},this.renderUploads(),this.renderEmojiPicker(),L.a.createElement("div",{className:"str-chat__input-flat--textarea-wrapper"},L.a.createElement(Tt,{users:this.props.getUsers(),commands:this.props.getCommands(),innerRef:this.props.textareaRef,handleSubmit:function(t){return e.props.handleSubmit(t)},onSelectItem:this.props.onSelectItem,onChange:this.props.handleChange,value:this.props.text,rows:1,maxRows:this.props.maxRows,placeholder:t.formatMessage({id:"message_input.placeholder",defaultMessage:"Type your message"}),onPaste:this.props.onPaste,grow:this.props.grow,onFocus:this.props.onFocus,disabled:this.props.disabled}),L.a.createElement("span",{className:"str-chat__input-flat-emojiselect",onClick:this.props.openEmojiPicker},L.a.createElement("svg",{width:"28",height:"28",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z",fillRule:"evenodd"}))),L.a.createElement(Z.c,{multiple:this.props.multipleUploads,disabled:this.props.numberOfUploads>=this.props.maxNumberOfFiles,accepts:this.props.acceptedFiles,handleFiles:this.props.uploadNewFiles},L.a.createElement("span",{className:"str-chat__input-flat-fileupload"},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z",fillRule:"nonzero"})))),a&&L.a.createElement(a,{sendMessage:this.props.handleSubmit})))))}}]),t}(j.PureComponent);N()(sa,"propTypes",{focus:T.a.bool,grow:T.a.bool,disabled:T.a.bool,imageOrder:T.a.array,imageUploads:T.a.object,removeImage:T.a.func,uploadImage:T.a.func,uploadNewFiles:T.a.func,numberOfUploads:T.a.number,fileOrder:T.a.array,fileUploads:T.a.object,removeFile:T.a.func,uploadFile:T.a.func,emojiPickerIsOpen:T.a.bool,emojiPickerRef:T.a.object,onSelectEmoji:T.a.func,getUsers:T.a.func,getCommands:T.a.func,textareaRef:T.a.object,handleSubmit:T.a.func,handleChange:T.a.func,onSelectItem:T.a.func,text:T.a.string,onPaste:T.a.func,openEmojiPicker:T.a.func,watcher_count:T.a.number,typing:T.a.object,multipleUploads:T.a.object,maxNumberOfFiles:T.a.object,acceptedFiles:T.a.object}),N()(sa,"defaultProps",{grow:!0,disabled:!1}),sa=Object(oe.c)(sa);var ra=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"renderUploads",(function(){return L.a.createElement(L.a.Fragment,null,a.props.imageOrder.length>0&&L.a.createElement(Z.e,{imageUploads:a.props.imageOrder.map((function(e){return a.props.imageUploads[e]})),handleRemove:a.props.removeImage,handleRetry:a.props.uploadImage,handleFiles:a.props.uploadNewFiles,multiple:a.props.multipleUploads,disabled:a.props.numberOfUploads>=a.props.maxNumberOfFiles}),a.props.fileOrder.length>0&&L.a.createElement(Z.b,{uploads:a.props.fileOrder.map((function(e){return a.props.fileUploads[e]})),handleRemove:a.props.removeFile,handleRetry:a.props.uploadFile,handleFiles:a.props.uploadNewFiles}))})),N()(S()(a),"renderEmojiPicker",(function(){if(a.props.emojiPickerIsOpen)return L.a.createElement("div",{className:"str-chat__small-message-input-emojipicker",ref:a.props.emojiPickerRef},L.a.createElement(ce.b,{native:!0,emoji:"point_up",title:"Pick your emoji\u2026",onSelect:a.props.onSelectEmoji,color:"#006CFF",showPreview:!1}))})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.intl,t=this.props.SendButton;return L.a.createElement("div",{className:"str-chat__small-message-input__wrapper"},L.a.createElement(Z.d,{accept:this.props.acceptedFiles,multiple:this.props.multipleUploads,disabled:this.props.numberOfUploads>=this.props.maxNumberOfFiles,handleFiles:this.props.uploadNewFiles},L.a.createElement("div",{className:"str-chat__small-message-input ".concat(t?"str-chat__small-message-input--send-button-active":null)},this.renderUploads(),this.renderEmojiPicker(),L.a.createElement("div",{className:"str-chat__small-message-input--textarea-wrapper"},L.a.createElement(Tt,{users:this.props.getUsers(),commands:this.props.getCommands(),innerRef:this.props.textareaRef,handleSubmit:this.props.handleSubmit,onChange:this.props.handleChange,value:this.props.text,rows:1,maxRows:this.props.maxRows,onSelectItem:this.props.onSelectItem,placeholder:e.formatMessage({id:"message_input.placeholder",defaultMessage:"Type your message"}),onPaste:this.props.onPaste,grow:this.props.grow,disabled:this.props.disabled}),L.a.createElement("span",{className:"str-chat__small-message-input-emojiselect",onClick:this.props.openEmojiPicker},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z",fillRule:"evenodd"}))),L.a.createElement(Z.c,{multiple:this.props.multipleUploads,disabled:this.props.numberOfUploads>=this.props.maxNumberOfFiles,accepts:this.props.acceptedFiles,handleFiles:this.props.uploadNewFiles},L.a.createElement("span",{className:"str-chat__small-message-input-fileupload",onClick:this.props.openFilePanel},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z",fillRule:"nonzero"})))),t&&L.a.createElement(t,{sendMessage:this.props.handleSubmit})))))}}]),t}(j.PureComponent);N()(ra,"propTypes",{focus:T.a.bool.isRequired,grow:T.a.bool.isRequired,maxRows:T.a.number.isRequired,disabled:T.a.bool,imageOrder:T.a.array,imageUploads:T.a.object,removeImage:T.a.func,uploadImage:T.a.func,uploadNewFiles:T.a.func,numberOfUploads:T.a.number,fileOrder:T.a.array,fileUploads:T.a.object,removeFile:T.a.func,uploadFile:T.a.func,emojiPickerIsOpen:T.a.bool,emojiPickerRef:T.a.object,onSelectEmoji:T.a.func,getUsers:T.a.func,getCommands:T.a.func,textareaRef:T.a.object,handleSubmit:T.a.func,handleChange:T.a.func,onSelectItem:T.a.func,text:T.a.string,onPaste:T.a.func,openEmojiPicker:T.a.func,watcher_count:T.a.number,typing:T.a.object,multipleUploads:T.a.object,maxNumberOfFiles:T.a.object,acceptedFiles:T.a.object}),ra=Object(oe.c)(ra);var oa=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement("div",{className:"str-chat__channel-search"},L.a.createElement("input",{type:"text",placeholder:intl.formatMessage({id:"channel_search.placeholder",defaultMessage:"Search"})}),L.a.createElement("button",{type:"submit"},L.a.createElement("svg",{width:"18",height:"17",viewBox:"0 0 18 17",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z",fillRule:"evenodd"}))))}}]),t}(L.a.PureComponent);oa=Object(oe.c)(oa);var ia=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"channelPreviewButton",L.a.createRef()),N()(S()(a),"onSelectChannel",(function(){a.props.setActiveChannel(a.props.channel,a.props.watchers),a.channelPreviewButton.current.blur()})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.intl,t=this.props.unread_count>=1?"str-chat__channel-preview--unread":"",a=this.props.active?"str-chat__channel-preview--active":"",n=this.props.channel.data.name||this.props.channel.cid;return L.a.createElement("div",{className:"str-chat__channel-preview ".concat(t," ").concat(a)},L.a.createElement("button",{onClick:this.onSelectChannel,ref:this.channelPreviewButton},this.props.unread_count>=1&&L.a.createElement("div",{className:"str-chat__channel-preview--dot"}),L.a.createElement(ze,{image:this.props.channel.data.image}),L.a.createElement("div",{className:"str-chat__channel-preview-info"},L.a.createElement("span",{className:"str-chat__channel-preview-title"},n),L.a.createElement("span",{className:"str-chat__channel-preview-last-message"},this.props.channel.state.messages[0]?this.props.latestMessage:e.formatMessage({id:"channel_preview.latest_message.none",defaultMessage:"Nothing yet..."})),this.props.unread_count>=1&&L.a.createElement("span",{className:"str-chat__channel-preview-unread-count"},this.props.unread_count))))}}]),t}(j.PureComponent);N()(ia,"propTypes",{setActiveChannel:T.a.func,channel:T.a.object,closeMenu:T.a.func,unread_count:T.a.number,active:T.a.bool,latestMessage:T.a.string}),ia=Object(oe.c)(ia);var ca=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.unread>=1?"unread":"",t=this.props.channel.data.name||this.props.channel.cid;return L.a.createElement("div",{className:e},L.a.createElement("button",{onClick:this.props.setActiveChannel.bind(this,this.props.channel)}," ",t," ",L.a.createElement("span",null,this.props.unread)))}}]),t}(j.PureComponent);function la(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}N()(ca,"propTypes",{setActiveChannel:T.a.func,channel:T.a.object,unread:T.a.number});var ua=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"handleEvent",(function(e){var t=a.props.channel;if(a.props.activeChannel.cid===t.cid)a.setState({lastMessage:e.message,unread:0});else{var n=t.countUnread(a.state.lastRead);a.setState({lastMessage:e.message,unread:n})}})),N()(S()(a),"getLatestMessage",(function(){var e=a.props,t=e.channel,n=e.intl,s=t.state.messages[t.state.messages.length-1];return s?s.deleted_at?n.formatMessage({id:"channel_preview.latest_message.deleted",defaultMessage:"Message deleted..."}):s.text?s.text.slice(0,20):s.command?n.formatMessage({id:"channel_preview.latest_message.command",defaultMessage:"/{command}"},{command:s.command}):s.attachments.length?n.formatMessage({id:"channel_preview.latest_message.attachment",defaultMessage:"Attachment..."}):n.formatMessage({id:"channel_preview.latest_message.empty",defaultMessage:"Empty message..."}):n.formatMessage({id:"channel_preview.latest_message.none",defaultMessage:"Nothing yet..."})})),a.state={lastMessage:{},unread:0,lastRead:new Date},a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){var e=this.props.channel,t=e.countUnread();this.setState({unread:t}),e.on("message.new",this.handleEvent)}},{key:"componentWillUnmount",value:function(){this.props.channel.off("message.new",this.handleEvent)}},{key:"componentDidUpdate",value:function(e){this.props.activeChannel.cid!==e.activeChannel.cid&&(this.props.activeChannel.cid===this.props.channel.cid&&this.setState({unread:0,lastRead:new Date}))}},{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?la(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):la(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,{},this.props),t=this.props.Preview;return L.a.createElement(t,I()({},e,{latestMessage:this.getLatestMessage(),active:this.props.activeChannel.cid===this.props.channel.cid}))}}]),t}(j.PureComponent);N()(ua,"propTypes",{channel:T.a.object.isRequired,activeChannel:T.a.object.isRequired,setActiveChannel:T.a.func.isRequired,Preview:T.a.oneOfType([T.a.node,T.a.func]),watchers:T.a.object}),N()(ua,"defaultProps",{Preview:ca}),ua=Object(oe.c)(ua);var pa=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement("div",{className:"str-chat__load-more-button"},L.a.createElement("button",{className:"str-chat__load-more-button__button",onClick:this.props.onClick,disabled:this.props.refreshing},this.props.refreshing?L.a.createElement(Z.f,null):this.props.children))}}]),t}(L.a.PureComponent);N()(pa,"propTypes",{onClick:T.a.func}),N()(pa,"defaultProps",{children:"Load more"});var da=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return Object(j.createElement)(j.Fragment,null,!this.props.reverse&&this.props.children,this.props.hasNextPage?rt(this.props.LoadMoreButton,{refreshing:this.props.refreshing,onClick:this.props.loadNextPage}):null,this.props.reverse&&this.props.children)}}]),t}(j.PureComponent);N()(da,"propTypes",{LoadMoreButton:T.a.oneOfType([T.a.node,T.a.func]),loadNextPage:T.a.func,hasNextPage:T.a.bool,reverse:T.a.bool}),N()(da,"defaultProps",{LoadMoreButton:pa});var ha=function(){return L.a.createElement("div",{className:"str-chat__loading-channels"},L.a.createElement("div",{className:"str-chat__loading-channels-item"},L.a.createElement("div",{className:"str-chat__loading-channels-avatar"}),L.a.createElement("div",{className:"str-chat__loading-channels-meta"},L.a.createElement("div",{className:"str-chat__loading-channels-username"}),L.a.createElement("div",{className:"str-chat__loading-channels-status"}))),L.a.createElement("div",{className:"str-chat__loading-channels-item"},L.a.createElement("div",{className:"str-chat__loading-channels-avatar"}),L.a.createElement("div",{className:"str-chat__loading-channels-meta"},L.a.createElement("div",{className:"str-chat__loading-channels-username"}),L.a.createElement("div",{className:"str-chat__loading-channels-status"}))),L.a.createElement("div",{className:"str-chat__loading-channels-item"},L.a.createElement("div",{className:"str-chat__loading-channels-avatar"}),L.a.createElement("div",{className:"str-chat__loading-channels-meta"},L.a.createElement("div",{className:"str-chat__loading-channels-username"}),L.a.createElement("div",{className:"str-chat__loading-channels-status"}))))},ma=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.image;return L.a.createElement("div",{className:"str-chat__down"},L.a.createElement(ha,null),L.a.createElement("div",{className:"str-chat__down-main"},L.a.createElement("img",{src:e}),L.a.createElement("h1",null,L.a.createElement(re.a,{id:"chat_down.connection_error",defaultMessage:"Connection Error"})),L.a.createElement("h3",null,L.a.createElement(re.a,{id:"chat_down.connection_error_text",defaultMessage:"Error connecting to chat, refresh the page to try again."}))))}}]),t}(L.a.PureComponent);function ga(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ga(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ga(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}N()(ma,"propTypes",{image:T.a.string}),N()(ma,"defaultProps",{image:"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E"});var va=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"SortingSelect",(function(){return L.a.createElement("div",{className:"sortingSelect"},L.a.createElement("select",{className:"str-chat__channel-list-team__header--button",id:"flexgrow",onChange:function(e){return a.onSortChange(e)}},L.a.createElement("option",{value:"last_message_at--new",label:a.props.intl.formatMessage({id:"channel_sort.last",defaultMessage:"newest"})}),L.a.createElement("option",{value:"created_at--old",label:a.props.intl.formatMessage({id:"channel_sort.old",defaultMessage:"oldest"})})))})),N()(S()(a),"filterOptions",window.dplChatConfig.channelTypes.map((function(e,t){return L.a.createElement("option",{key:t,value:e.value},e.label)}))),N()(S()(a),"FilterSelect",(function(){return L.a.createElement("div",{className:"filterselect"},L.a.createElement("select",{className:"str-chat__channel-list-team__header--button",id:"filterselect",onChange:function(e){return a.onFilterChange(e)}},a.filterOptions))})),N()(S()(a),"AdminFilterSelect",(function(){return L.a.createElement("div",{className:"filterselect"},L.a.createElement("select",{className:"str-chat__channel-list-team__header--button",id:"adminfilterselect",onChange:function(e){return a.onAdminFilterChange(e)}},L.a.createElement("option",{value:"my",label:a.props.intl.formatMessage({id:"channel_filter.my",defaultMessage:"my"})}),L.a.createElement("option",{value:"all",label:a.props.intl.formatMessage({id:"channel_filter.all",defaultMessage:"all"})}),L.a.createElement("option",{value:"me",label:a.props.intl.formatMessage({id:"channel_filter.me",defaultMessage:"assgined to: me"})}),L.a.createElement("option",{value:"no",label:a.props.intl.formatMessage({id:"channel_filter.no",defaultMessage:"assgined to: none"})}),L.a.createElement("option",{value:"other",label:a.props.intl.formatMessage({id:"channel_filter.other",defaultMessage:"assgined to: others"})})))})),N()(S()(a),"Button",(function(e){var t=e.open,a=e.onClick;return L.a.createElement("div",{onClick:a},t?L.a.createElement("div",null,L.a.createElement("svg",{id:"style-channel-search-icon",width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M 19.333 2.547 l -1.88 -1.88 L 10 8.12 L 2.547 0.667 l -1.88 1.88 L 8.12 10 L 0.667 17.453 l 1.88 1.88 L 10 11.88 l 7.453 7.453 l 1.88 -1.88 L 11.88 10 Z"}))):L.a.createElement("div",null,L.a.createElement("svg",{id:"style-channel-search-icon",width:"18",height:"17",viewBox:"0 0 18 17",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M18.125,15.804l-4.038-4.037c0.675-1.079,1.012-2.308,1.01-3.534C15.089,4.62,12.199,1.75,8.584,1.75C4.815,1.75,1.982,4.726,2,8.286c0.021,3.577,2.908,6.549,6.578,6.549c1.241,0,2.417-0.347,3.44-0.985l4.032,4.026c0.167,0.166,0.43,0.166,0.596,0l1.479-1.478C18.292,16.234,18.292,15.968,18.125,15.804 M8.578,13.99c-3.198,0-5.716-2.593-5.733-5.71c-0.017-3.084,2.438-5.686,5.74-5.686c3.197,0,5.625,2.493,5.64,5.624C14.242,11.548,11.621,13.99,8.578,13.99 M16.349,16.981l-3.637-3.635c0.131-0.11,0.721-0.695,0.876-0.884l3.642,3.639L16.349,16.981z"}))))})),N()(S()(a),"ChevronButton",(function(e){var t=e.open,a=e.onClick;return L.a.createElement("div",{onClick:a},t?L.a.createElement("div",null,L.a.createElement("svg",{id:"style-channel-admin-control-toggle",width:"16",height:"16",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"}))):L.a.createElement("div",null,L.a.createElement("svg",{id:"style-channel-admin-control-toggle",width:"16",height:"16",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"}))))})),N()(S()(a),"ClearButton",(function(e){var t=e.open,a=e.onClick;return L.a.createElement("div",{onClick:a},t?L.a.createElement("div",null,L.a.createElement("svg",{id:"style-channel-filter-clear-icon",width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M 19.333 2.547 l -1.88 -1.88 L 10 8.12 L 2.547 0.667 l -1.88 1.88 L 8.12 10 L 0.667 17.453 l 1.88 1.88 L 10 11.88 l 7.453 7.453 l 1.88 -1.88 L 11.88 10 Z"}))):L.a.createElement("div",null))})),N()(S()(a),"SearchBar",(function(){var e=a.props.intl;return L.a.createElement("div",{id:"style-search-bar"},L.a.createElement("div",{className:"str-chat__channel-search",id:"style-channel-search"},L.a.createElement("div",{id:"style-channel-search-input"},L.a.createElement("input",{id:"searchbar",className:"searchInput",placeholder:e.formatMessage({id:"channel_search.placeholder",defaultMessage:"Search"}),value:a.state.searchInput||"",type:"text",name:"inputSearch",onChange:a.handleChange,onKeyDown:a.handleSearch.bind(S()(a))}))))})),N()(S()(a),"toggleAdminControl",H()(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.adminControlOpen){e.next=7;break}return e.next=3,a.setState({adminControlOpen:!1,adminFilter:{members:{$in:[a.props.client.user.id]}}});case 3:t=fa({},a.state.filter,{},a.state.adminFilter),a.props.onSelectFilter(t),e.next=8;break;case 7:a.setState({adminControlOpen:!0});case 8:case"end":return e.stop()}}),e)})))),N()(S()(a),"clearFilterControl",H()(D.a.mark((function e(){var t,n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"!==a.props.client.user.role){e.next=6;break}if(!a.state.adminControlOpen){e.next=6;break}return e.next=4,a.setState({adminControlOpen:!1,adminFilter:{members:{$in:[a.props.client.user.id]}}});case 4:t=fa({},a.state.filter,{},a.state.adminFilter),a.props.onSelectFilter(t);case 6:n={members:{$in:[a.props.client.user.id]}},s=fa({},n,{},a.state.filter),a.props.onSelectFilter(s);case 9:case"end":return e.stop()}}),e)})))),N()(S()(a),"toggleChannelSearch",(function(e){a.state.searchOpen?(a.props.setActiveSearch("",e),a.props.resetSearch(),a.setState({searchOpen:!1,searchInput:""})):(a.setState({searchOpen:!0}),window.dplChatConfig.language="",window.dispatchEvent(it),localStorage.setItem("language",window.dplChatConfig.language),a.setState({disableSort:"true",searchOpen:!0}),a.search(a.state.searchInput,a.props.client),a.props.setActiveSearch(a.state.searchInput,e))})),a.state={searchOpen:!1,searchInput:"",filter:{type:"messaging"},adminFilter:{members:{$in:[a.props.client.user.id]}},sort:{},inputMembers:[],inputExtraTypes:[],disableSort:"false",adminControlOpen:!1},a.handleChange=a.handleChange.bind(S()(a)),a}return R()(t,e),b()(t,[{key:"onAdminFilterChange",value:function(){var e=H()(D.a.mark((function e(t){var a,n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,this.setState({searchInput:""}),this.props.setActiveSearch("",t),n={},e.t0=a,e.next="all"===e.t0?7:"my"===e.t0?8:"no"===e.t0?10:"me"===e.t0?12:"other"===e.t0?14:17;break;case 7:return e.abrupt("break",19);case 8:return n.members={$in:[this.props.client.user.id]},e.abrupt("break",19);case 10:return n.assignFlag=!1,e.abrupt("break",19);case 12:return n.responsiveMember={$eq:this.props.client.user.name},e.abrupt("break",19);case 14:return n.assignFlag=!0,n.responsiveMember={$ne:this.props.client.user.name},e.abrupt("break",19);case 17:return n.members={$in:[this.props.client.user.id]},e.abrupt("break",19);case 19:if(s={},this.state.filter==={}){e.next=26;break}return e.next=23,this.setState({adminFilter:n});case 23:s=fa({},this.state.filter,{},this.state.adminFilter),e.next=29;break;case 26:return e.next=28,this.setState(fa({},n,{filter:{type:"messaging"}}));case 28:s=fa({},this.state.filter,{},this.state.adminFilter);case 29:this.props.onSelectFilter(s);case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onFilterChange",value:function(){var e=H()(D.a.mark((function e(t){var a,n,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,this.setState({searchInput:""}),this.props.setActiveSearch("",t),n={},"admin"!==this.props.client.user.role?(n.members={$in:[this.props.client.user.id]},!a||(n.extraType={$eq:a})):!a||(n={extraType:{$eq:a}}),s={},this.state.adminFilter==={}){e.next=12;break}return e.next=9,this.setState({filter:n});case 9:s=fa({},this.state.filter,{},this.state.adminFilter),e.next=15;break;case 12:return e.next=14,this.setState({filter:n,adminFilter:{members:{$in:[this.props.client.user.id]}}});case 14:s=fa({},this.state.filter,{},this.state.adminFilter);case 15:this.props.onSelectFilter(s);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSortChange",value:function(e){this.setState({searchInput:""}),this.props.setActiveSearch("",e);var t={};switch(e.target.value){case"last_message_at--new":t.last_message_at=-1;break;case"created_at--new":t.created_at=-1;break;case"last_message_at--old":t.last_message_at=1;break;case"created_at--old":t.created_at=1;break;default:t.last_message_at=-1}this.setState({sort:t}),this.props.onSelectSort(t)}},{key:"render",value:function(){var e=this.props.showSidebar;return this.props.error?L.a.createElement(ma,null):this.props.loading?L.a.createElement(ha,null):L.a.createElement("div",{className:"str-chat__channel-list-team"},e&&L.a.createElement("div",{className:"str-chat__channel-list-team__sidebar"},L.a.createElement("div",{className:"str-chat__channel-list-team__sidebar--top"},L.a.createElement(ze,{image:"https://cdn.dribbble.com/users/610788/screenshots/5157282/spacex.png",size:50}))),L.a.createElement("div",{className:"str-chat__channel-list-team__main"},L.a.createElement("div",{className:"str-chat__channel-list-team__header"},L.a.createElement("div",{className:"str-chat__channel-list-team__header--left"},L.a.createElement(ze,{source:this.props.client.user.image,name:this.props.client.user.name||this.props.client.user.id,size:40})),L.a.createElement("div",{className:"str-chat__channel-list-team__header--middle"},L.a.createElement("div",{className:"str-chat__channel-list-team__header--title"},this.props.client.user.name||this.props.client.user.id),L.a.createElement("div",{className:"str-chat__channel-list-team__header--status ".concat(this.props.client.user.status)},this.props.client.user.status))),L.a.createElement("div",{id:"style-channellist-first-row"},L.a.createElement("div",{id:"style-channel-selection"},L.a.createElement(this.SortingSelect,null),L.a.createElement(this.FilterSelect,null)),"admin"===this.props.client.user.role?L.a.createElement("div",{className:"channel-list-admin-icons tooltip"},this.state.adminControlOpen?L.a.createElement("span",{className:"tooltiptext"},"Filter f\xfcr Mitarbeiter entfernen"):L.a.createElement("span",{className:"tooltiptext"},"Filter f\xfcr Mitarbeiter anzeigen"),L.a.createElement(this.ChevronButton,{onClick:this.toggleAdminControl,open:this.state.adminControlOpen})):L.a.createElement("div",null)),L.a.createElement("div",{id:"style-channellist-secound-row"},"admin"===this.props.client.user.role&&this.state.adminControlOpen?L.a.createElement("div",{className:"channel-list-admin-filter"},L.a.createElement(this.AdminFilterSelect,null)):L.a.createElement("div",null)),L.a.createElement("div",{id:"style-channel-search-selection"},L.a.createElement(this.SearchBar,null),L.a.createElement(this.Button,{onClick:this.toggleChannelSearch,open:this.state.searchOpen})),L.a.createElement("div",{id:"style-list",className:".str-chat__channel-preview-messenger-list"},this.props.children)))}},{key:"handleSearch",value:function(e){13===(e.keyCode||e.which)&&(window.dplChatConfig.language="",window.dispatchEvent(it),localStorage.setItem("language",window.dplChatConfig.language),this.state.searchInput.replace(/\s/g,"")&&(this.setState({disableSort:"true",searchOpen:!0}),this.props.setActiveSearch(this.state.searchInput.replace(/( +)$/,""),e),this.search(this.state.searchInput.replace(/( +)$/,""),this.props.client)))}},{key:"search",value:function(){var e=H()(D.a.mark((function e(t,a){var n,s,r,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],this.state.filter.hasOwnProperty("extraType")){e.next=4;break}return e.next=4,this.setState({filter:{type:"messaging"}});case 4:if(s=[],r=[],!t){e.next=10;break}return e.next=9,a.search(this.state.filter,t,{limit:1e3,offset:0});case 9:s=e.sent;case 10:return o=[],s&&(o=s.results.filter((function(e){return!!e.message.channel.cid})).map((function(e){return e.message.channel}))),o.length>0&&(n.push(o[0].cid),r.push(o[0])),e.next=15,o.forEach((function(e){n.includes(e.cid)||(n.push(e.cid),r.push(e))}));case 15:r.length>0?this.props.onChannelResult(r):this.props.onChannelResult(null);case 16:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(){var e=H()(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({searchInput:t.target.value});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(j.PureComponent);function _a(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ya(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_a(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_a(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}N()(va,"propTypes",{loading:T.a.bool,error:T.a.bool,client:T.a.object,showSidebar:T.a.bool,onSelectSort:T.a.func,onSelectFilter:T.a.func,onToggleSearchModus:T.a.func,isOn:T.a.bool,onChannelResult:T.a.func,noResult:T.a.bool,resetSearch:T.a.func}),N()(va,"defaultProps",{error:!1}),va=yt(Object(oe.c)(va));var ba=function(e){function t(e){var a;return _()(this,t),a=E()(this,k()(t).call(this,e)),N()(S()(a),"queryChannels",H()(D.a.mark((function e(){var t,n,s,r,o,i,c,l,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.options,n=a.state,s=n.offset,r=n.sort,o=n.filters,a.setState({refreshing:!0}),i=ya({},t),t.limit||(i.limit=30),c=a.props.client.queryChannels(o,r,ya({},i,{offset:s})),e.prev=6,!et(l=c)){e.next=12;break}return e.next=11,c;case 11:l=e.sent;case 12:a.setState((function(e){var t=[].concat(U()(e.channels),U()(l));return{channels:t,loadingChannels:!1,offset:t.length,hasNextPage:l.length>=i.limit,refreshing:!1}})),a.props.customActiveChannel?(u=l.filter((function(e){return e.id===a.props.customActiveChannel}))[0])&&(a.props.setActiveChannel(u,a.props.watchers),a.moveChannelUp(u.cid)):0===s&&a.state.channels.length>=1&&a.props.setActiveChannel(a.state.channels[0],a.props.watchers),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),console.warn(e.t0),a.setState({error:!0,refreshing:!1});case 20:case"end":return e.stop()}}),e,null,[[6,16]])})))),N()(S()(a),"handleEvent",function(){var e=H()(D.a.mark((function e(t){var n,s,r,o,i,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("user.presence.changed"===t.type&&(n=(n=a.state.channels).map((function(e){return e.state.members[t.user.id]?(e.state.members.setIn([t.user.id,"user"],t.user),e):e})),a.setState({channels:U()(n)})),"message.new"===t.type&&!a.props.lockChannelOrder&&a.moveChannelUp(t.cid),"connection.recovered"===t.type&&a.setState((function(e){return{connectionRecoveredCount:e.connectionRecoveredCount+1}})),"notification.message_new"!==t.type){e.next=12;break}if(!a.props.onMessageNew||"function"!==typeof a.props.onMessageNew){e.next=8;break}a.props.onMessageNew(S()(a),t),e.next=12;break;case 8:return e.next=10,a.getChannel(t.channel.type,t.channel.id);case 10:s=e.sent,a.setState((function(e){return{channels:Ue()([s].concat(U()(e.channels)),"cid")}}));case 12:if("notification.added_to_channel"!==t.type){e.next=21;break}if(!a.props.onAddedToChannel||"function"!==typeof a.props.onAddedToChannel){e.next=17;break}a.props.onAddedToChannel(S()(a),t),e.next=21;break;case 17:return e.next=19,a.getChannel(t.channel.type,t.channel.id);case 19:r=e.sent,a.setState((function(e){return{channels:Ue()([r].concat(U()(e.channels)),"cid")}}));case 21:return"notification.removed_from_channel"===t.type&&(a.props.onRemovedFromChannel&&"function"===typeof a.props.onRemovedFromChannel?a.props.onRemovedFromChannel(S()(a),t):a.setState((function(e){return{channels:e.channels.filter((function(e){return e.cid!==t.channel.cid}))}}))),"channel.updated"===t.type&&(o=a.state.channels,i=o.findIndex((function(e){return e.cid===t.channel.cid})),o[i].data=ye()(t.channel),a.setState({channels:U()(o),channelUpdateCount:a.state.channelUpdateCount+1}),a.props.onChannelUpdated&&"function"===typeof a.props.onChannelUpdated&&a.props.onChannelUpdated(S()(a),t)),"channel.deleted"===t.type&&(a.props.onChannelDeleted&&"function"===typeof a.props.onChannelDeleted?a.props.onChannelDeleted(S()(a),t):(c=a.state.channels,l=c.findIndex((function(e){return e.cid===t.channel.cid})),c.splice(l,1),a.setState({channels:U()(c),channelUpdateCount:a.state.channelUpdateCount+1}))),"channel.truncated"===t.type&&(a.setState((function(e){return{channels:U()(e.channels),channelUpdateCount:e.channelUpdateCount+1}})),a.props.onChannelTruncated&&"function"===typeof a.props.onChannelTruncated&&a.props.onChannelTruncated(S()(a),t)),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N()(S()(a),"getChannel",function(){var e=H()(D.a.mark((function e(t,n){var s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.props.client.channel(t,n),e.next=3,s.watch();case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),N()(S()(a),"moveChannelUp",(function(e){var t=a.state.channels,n=a.state.channels.findIndex((function(t){return t.cid===e}));if(!(n<=0)){var s=t[n];t.splice(n,1),t.unshift(s),a.setState({channels:U()(t)})}})),N()(S()(a),"loadNextPage",(function(){a.queryChannels()})),N()(S()(a),"closeMenu",(function(){a.menuButton.current.checked=!1})),N()(S()(a),"_renderChannel",(function(e){var t=a.props,n=t.Preview,s=t.setActiveChannel,r=t.channel,o=t.watchers;if(e){var i={channel:e,activeChannel:r,closeMenu:a.closeMenu,Preview:n,setActiveChannel:s,watchers:o,key:e.id,channelUpdateCount:a.state.channelUpdateCount,connectionRecoveredCount:a.state.connectionRecoveredCount};return rt(ua,ya({},i))}})),a.state={channels:ye()([]),oldChannels:void 0,loadingChannels:!0,refreshing:!1,hasNextPage:!1,offset:0,error:!1,connectionRecoveredCount:0,channelUpdateCount:0,sort:a.props.sort,filters:a.props.filters,searchModus:!1,noResults:!1},a.onSortChange=a.onSortChange.bind(S()(a)),a.onResetSearch=a.onResetSearch.bind(S()(a)),a.onFilterChange=a.onFilterChange.bind(S()(a)),a.onChannelSearchResult=a.onChannelSearchResult.bind(S()(a)),a.menuButton=L.a.createRef(),a}return R()(t,e),b()(t,[{key:"componentDidCatch",value:function(e,t){console.warn(e,t)}},{key:"componentDidMount",value:function(){var e=H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({sort:this.props.sort}),this.setState({filters:this.props.filters}),e.next=4,this.queryChannels();case 4:this.listenToChanges();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.client.off(this.handleEvent)}},{key:"onSortChange",value:function(e){var t=this;this.setState({sort:e,offset:0,hasNextPage:!0,channels:[],oldChannels:void 0},H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.queryChannels();case 2:case"end":return e.stop()}}),e)}))))}},{key:"onFilterChange",value:function(e){var t=this;this.setState({filters:e,offset:0,hasNextPage:!0,channels:[],oldChannels:void 0},H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.queryChannels();case 2:case"end":return e.stop()}}),e)}))))}},{key:"onResetSearch",value:function(){var e=this;this.setState({offset:0,hasNextPage:!0,channels:[],oldChannels:void 0},H()(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryChannels();case 2:case"end":return t.stop()}}),t)}))))}},{key:"listenToChanges",value:function(){this.props.client.on(this.handleEvent)}},{key:"onChannelSearchResult",value:function(){var e=H()(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.state.oldChannels&&this.setState({oldChannels:this.state.channels}),void 0!==this.state.oldChannels&&this.setState({channels:this.state.oldChannels}),a=[],t&&(a=this.state.channels.filter((function(e){return t.find((function(t){return t.cid===e.cid}))}))),n={},n=void 0!==this.state.oldChannels?this.state.oldChannels:this.state.channels,!(a.length>0)){e.next=11;break}return e.next=9,this.setState({channels:a});case 9:e.next=12;break;case 11:this.setState({channels:[]},(function(){}));case 12:this.state.channels.length>0?this.props.setActiveChannel(this.state.channels[0],this.props.watchers):this.props.setActiveChannel(n[0],this.props.watchers);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.List,n=t.Paginator,s=this.state,r=s.channels,o=s.loadingChannels,i=s.refreshing,c=s.hasNextPage,l=s.noResults;return L.a.createElement(L.a.Fragment,null,L.a.createElement("input",{type:"checkbox",id:"str-chat-channel-checkbox",ref:this.menuButton,className:"str-chat-channel-checkbox"}),L.a.createElement("label",{htmlFor:"str-chat-channel-checkbox",className:"str-chat-channel-list-burger"},L.a.createElement("div",null)),L.a.createElement("div",{className:"str-chat str-chat-channel-list ".concat(this.props.theme," ").concat(this.props.open?"str-chat-channel-list--open":""),ref:this.channelList},L.a.createElement(a,{loading:o,error:this.state.error,channels:r,setActiveChannel:this.props.setActiveChannel,setActiveSearch:this.props.setActiveSearch,activeChannel:this.props.channel,showSidebar:this.props.showSidebar,onSelectSort:this.onSortChange,onSelectFilter:this.onFilterChange,onToggleSearchModus:this.onToggleSearchModus,isOn:!1,onChannelResult:this.onChannelSearchResult,noResult:l,resetSearch:this.onResetSearch},r.length?rt(n,{loadNextPage:this.loadNextPage,hasNextPage:c,refreshing:i,children:r.map((function(t){return e._renderChannel(t)}))}):L.a.createElement(Ht,{listType:"channel"}))))}}],[{key:"getDerivedStateFromError",value:function(){return{error:!0}}}]),t}(j.PureComponent);N()(ba,"propTypes",{EmptyStateIndicator:T.a.oneOfType([T.a.node,T.a.func]),Preview:T.a.oneOfType([T.a.node,T.a.func]),LoadingIndicator:T.a.oneOfType([T.a.node,T.a.func]),List:T.a.oneOfType([T.a.node,T.a.func]),Paginator:T.a.oneOfType([T.a.node,T.a.func]),onMessageNew:T.a.func,onAddedToChannel:T.a.func,onRemovedFromChannel:T.a.func,onChannelUpdated:T.a.func,onChannelTruncated:T.a.func,onChannelDeleted:T.a.func,filters:T.a.object,options:T.a.object,sort:T.a.object,watchers:T.a.object,customAciveChannel:T.a.string,lockChannelOrder:T.a.bool}),N()(ba,"defaultProps",{Preview:ia,LoadingIndicator:dt,List:va,Paginator:da,EmptyStateIndicator:Ht,filters:{},options:{},sort:{},watchers:{}}),ba=yt(ba);var wa=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return this.props.error?L.a.createElement(ma,null):this.props.loading?L.a.createElement(ha,null):L.a.createElement("div",{className:"str-chat__channel-list-messenger"},L.a.createElement("div",{className:"str-chat__channel-list-messenger__main"},this.props.children))}}]),t}(j.PureComponent);N()(wa,"propTypes",{loading:T.a.bool,error:T.a.bool}),N()(wa,"defaultProps",{error:!1}),wa=yt(wa);var Ea=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"channelPreviewButton",L.a.createRef()),N()(S()(a),"onSelectChannel",(function(){a.props.setActiveChannel(a.props.channel,a.props.watchers),a.channelPreviewButton.current.blur()})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.unread_count>=1?"str-chat__channel-preview-compact--unread":"",t=this.props.active?"str-chat__channel-preview-compact--active":"",a=this.props.channel.data.name||this.props.channel.cid;return L.a.createElement("button",{onClick:this.onSelectChannel,ref:this.channelPreviewButton,className:"str-chat__channel-preview-compact ".concat(e," ").concat(t)},L.a.createElement("div",{className:"str-chat__channel-preview-compact--left"},L.a.createElement(ze,{image:this.props.channel.data.image,size:20})),L.a.createElement("div",{className:"str-chat__channel-preview-compact--right"},a))}}]),t}(L.a.PureComponent);N()(Ea,"propTypes",{setActiveChannel:T.a.func,channel:T.a.object,closeMenu:T.a.func,unread_count:T.a.number,active:T.a.bool,latestMessage:T.a.string});var Ca=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"channelPreviewButton",L.a.createRef()),N()(S()(a),"onSelectChannel",(function(){a.props.setActiveChannel(a.props.channel,a.props.watchers),a.channelPreviewButton.current.blur(),a.props.closeMenu()})),N()(S()(a),"onDeleteChannel",H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.channel.delete();case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.unread>=1?"str-chat__channel-preview-messenger--unread":"",t=this.props.active?"str-chat__channel-preview-messenger--active":"",a=this.props,n=a.channel,s=a.intl;return L.a.createElement("div",{id:"style-select-channel-list"},L.a.createElement("button",{onClick:this.onSelectChannel,ref:this.channelPreviewButton,className:"str-chat__channel-preview-messenger ".concat(e," ").concat(t)},L.a.createElement("div",{className:"str-chat__channel-preview-messenger--right"},L.a.createElement("div",{className:"str-chat__channel-preview-messenger--name"},L.a.createElement("span",null,ne()(n.data.name,29))),L.a.createElement("div",{id:"style-channel-preview"},L.a.createElement("div",{className:"str-chat__channel-preview-messenger--last-message"},n.state.messages[0]?ne()(this.props.latestMessage,14):s.formatMessage({id:"channel_preview.latest_message.none",defaultMessage:"Nothing yet..."})),"admin"===n._client.user.role?L.a.createElement("div",{className:"str-chat__channel-preview-messenger--responsive-member"},n.data.responsiveMember?L.a.createElement("div",{className:"channel-list-show-responsive-member"},L.a.createElement("div",{className:"str-chat__channel-preview-assigned-to"},s.formatMessage({id:"channel_preview.responsiveMember.label",defaultMessage:"assigned to"})+" "+n.data.responsiveMember," ")):s.formatMessage({id:"channel_preview.responsiveMember.none",defaultMessage:"not assigned"})):L.a.createElement("div",null)))),L.a.createElement("div",{className:"style-unread-icon-section"},"admin"===n._client.user.role?L.a.createElement("div",{className:"channel-delete-tooltip"},L.a.createElement("span",{className:"channel-delete-tooltiptext"},"L\xf6schen des Channels"),L.a.createElement("div",{className:"str-chat__channel-preview-delete-channel-icon",onClick:this.onDeleteChannel},L.a.createElement("svg",{id:"style-channel-delete-icon",width:"14",height:"14",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{stroke:"black",d:"M 19.333 2.547 l -1.88 -1.88 L 10 8.12 L 2.547 0.667 l -1.88 1.88 L 8.12 10 L 0.667 17.453 l 1.88 1.88 L 10 11.88 l 7.453 7.453 l 1.88 -1.88 L 11.88 10 Z"})))):L.a.createElement("div",null),this.showUnread()))}},{key:"showUnread",value:function(){return this.props.unread?L.a.createElement("label",{id:"style-unread-message-button"},this.props.unread?ne()(this.props.unread,5):""):void 0}}]),t}(j.PureComponent);N()(Ca,"propTypes",{setActiveChannel:T.a.func,channel:T.a.object,closeMenu:T.a.func,unread:T.a.number,active:T.a.bool,latestMessage:T.a.string}),Ca=Object(oe.c)(Ca);var ka=function(e){function t(e){var a;return _()(this,t),(a=E()(this,k()(t).call(this,e))).scrollListener=a.scrollListener.bind(S()(a)),a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.props.useCapture)}},{key:"getParentElement",value:function(e){return e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){if(this.props.hasMore&&!this.props.isLoading&&this.getParentElement(this.scrollComponent)){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.addEventListener("mousewheel",this.mousewheelListener,this.props.useCapture),e.addEventListener("scroll",this.scrollListener,this.props.useCapture),e.addEventListener("resize",this.scrollListener,this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1===e.deltaY&&e.preventDefault()}},{key:"scrollListener",value:function(){var e,t=this.scrollComponent,a=window,n=this.getParentElement(t);if(this.props.useWindow){var s=document.documentElement||document.body.parentNode||document.body,r=void 0!==a.pageYOffset?a.pageYOffset:s.scrollTop;e=this.props.isReverse?r:this.calculateOffset(t,r)}else e=this.props.isReverse?n.scrollTop:t.scrollHeight-n.scrollTop-n.clientHeight;e<Number(this.props.threshold)&&t&&null!==t.offsetParent&&(this.detachScrollListener(),"function"===typeof this.props.loadMore&&this.props.loadMore(this.pageLoaded+=1))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),a=t.children,n=t.element,s=(t.hasMore,t.initialLoad,t.isReverse),r=t.loader,o=(t.loadMore,t.pageStart,t.ref),i=(t.threshold,t.useCapture,t.useWindow,t.isLoading),c=Re()(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","isLoading"]);c.ref=function(t){e.scrollComponent=t,o&&o(t)};var l=[a];return i&&(r?s?l.unshift(r):l.push(r):this.defaultLoader&&(s?l.unshift(this.defaultLoader):l.push(this.defaultLoader))),L.a.createElement(n,c,l)}}]),t}(j.Component);N()(ka,"propTypes",{children:T.a.node.isRequired,element:T.a.node,hasMore:T.a.bool,initialLoad:T.a.bool,isReverse:T.a.bool,loader:T.a.node,loadMore:T.a.func.isRequired,pageStart:T.a.number,isLoading:T.a.bool,ref:T.a.func,threshold:T.a.number,useCapture:T.a.bool,useWindow:T.a.bool}),N()(ka,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,isLoading:!1,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null});var Ma=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return L.a.createElement(ka,{loadMore:this.props.loadNextPage,hasMore:this.props.hasNextPage,isLoading:this.props.refreshing,isReverse:this.props.reverse,threshold:this.props.threshold,useWindow:!1,loader:L.a.createElement("div",{className:"str-chat__infinite-scroll-paginator",key:"loadingindicator"},L.a.createElement(Z.f,null))},this.props.children)}}]),t}(L.a.Component);N()(Ma,"propTypes",{loadNextPage:T.a.func,hasNextPage:T.a.bool,refreshing:T.a.bool,reverse:T.a.bool,threshold:T.a.number,LoadingIndicator:T.a.oneOfType([T.a.node,T.a.func])}),N()(Ma,"defaultProps",{LoadingIndicator:L.a.createElement(Z.f,null)});var Sa=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"state",{isFocused:!1,actionsBoxOpen:!1,showDetailedReactions:!1}),N()(S()(a),"messageActionsRef",L.a.createRef()),N()(S()(a),"reactionSelectorRef",L.a.createRef()),N()(S()(a),"_onClickOptionsAction",(function(){a.setState({actionsBoxOpen:!0},(function(){return document.addEventListener("click",a.hideOptions,!1)}))})),N()(S()(a),"_hideOptions",(function(){a.setState({actionsBoxOpen:!1}),document.removeEventListener("click",a.hideOptions,!1)})),N()(S()(a),"_clickReactionList",(function(){a.setState((function(){return{showDetailedReactions:!0}}),(function(){document.addEventListener("click",a._closeDetailedReactions)}))})),N()(S()(a),"_closeDetailedReactions",(function(e){if(a.reactionSelectorRef.current.reactionSelector.current.contains(e.target))return{};a.setState((function(){return{showDetailedReactions:!1}}),(function(){document.removeEventListener("click",a._closeDetailedReactions)}))})),a}return R()(t,e),b()(t,[{key:"componentWillUnmount",value:function(){this.props.message.deleted_at||document.removeEventListener("click",this._closeDetailedReactions)}},{key:"isMine",value:function(){return!this.props.isMyMessage(this.props.message)}},{key:"renderOptions",value:function(){if("error"!==this.props.message.type&&"system"!==this.props.message.type&&"ephemeral"!==this.props.message.type&&"sending"!==this.props.message.status&&"failed"!==this.props.message.status&&this.props.channelConfig.reactions&&!this.props.initialMessage)return L.a.createElement("div",{className:"str-chat__message-commerce__actions"},L.a.createElement("div",{className:"str-chat__message-commerce__actions__action str-chat__message-commerce__actions__action--reactions",onClick:this._clickReactionList},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z",fillRule:"evenodd"}))))}},{key:"render",value:function(){var e=this.props,t=e.message,a=e.groupStyles,n=e.Attachment,s=e.handleReaction,r=e.handleAction,o=e.actionsEnabled,i=e.onMentionsHoverMessage,c=e.onMentionsClickMessage,l=e.unsafeHTML,u=e.threadList,p=e.handleOpenThread,d=ke()(t.created_at).format("LT"),h=this.isMine()?"str-chat__message-commerce str-chat__message-commerce--left":"str-chat__message-commerce str-chat__message-commerce--right",m=Boolean(t.attachments&&t.attachments.length),g=m&&t.attachments.filter((function(e){return"image"===e.type})),f=Boolean(t.latest_reactions&&t.latest_reactions.length);return"message.read"===t.type||t.deleted_at||"message.date"===t.type?null:t.deleted_at?L.a.createElement(L.a.Fragment,null,L.a.createElement("span",{key:t.id,className:"".concat(h," str-chat__message--deleted")},L.a.createElement(re.a,{id:"message.deleted",defaultMessage:"This message was deleted..."})),L.a.createElement("div",{className:"clearfix"})):L.a.createElement(L.a.Fragment,null,L.a.createElement("div",{key:t.id,className:"\n\t\t\t\t\t\t".concat(h,"\n\t\t\t\t\t\tstr-chat__message-commerce--").concat(t.type,"\n\t\t\t\t\t\t").concat(t.text?"str-chat__message-commerce--has-text":"str-chat__message-commerce--has-no-text","\n\t\t\t\t\t\t").concat(m?"str-chat__message-commerce--has-attachment":"","\n\t\t\t\t\t\t").concat(f?"str-chat__message-commerce--with-reactions":"","\n\t\t\t\t\t\t","str-chat__message-commerce--".concat(a[0]),"\n\t\t\t\t\t").trim(),onMouseLeave:this._hideOptions,ref:this.messageRef},("bottom"===a[0]||"single"===a[0])&&L.a.createElement(ze,{image:t.user.image,size:32,name:t.user.name||t.user.id}),L.a.createElement("div",{className:"str-chat__message-commerce-inner"},!t.text&&L.a.createElement(L.a.Fragment,null,this.renderOptions(),f&&!this.state.showDetailedReactions&&L.a.createElement(ut,{reactions:t.latest_reactions,reaction_counts:t.reaction_counts,onClick:this._clickReactionList}),this.state.showDetailedReactions&&L.a.createElement(mt,{reverse:!1,handleReaction:s,actionsEnabled:o,detailedView:!0,reaction_counts:t.reaction_counts,latest_reactions:t.latest_reactions,ref:this.reactionSelectorRef})),m&&g.length<=1&&t.attachments.map((function(e,a){return L.a.createElement(n,{key:"".concat(t.id,"-").concat(a),attachment:e,actionHandler:r})})),g.length>1&&L.a.createElement(ht,{images:g}),t.text&&L.a.createElement("div",{className:"str-chat__message-commerce-text"},L.a.createElement("div",{className:"str-chat__message-commerce-text-inner\n\t\t\t\t\t\t\t\t\t".concat(m?"str-chat__message-commerce-text-inner--has-attachment":"","\n\t\t\t\t\t\t\t\t\t").concat($e(t.text)?"str-chat__message-commerce-text-inner--is-emoji":"","\n                ").trim(),onMouseOver:i,onClick:c},"error"===t.type&&L.a.createElement("div",{className:"str-chat__commerce-message--error-message"},L.a.createElement(re.a,{id:"message.error",defaultMessage:"Error \xb7 Unsent"})),l?L.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.html}}):at(t),f&&!this.state.showDetailedReactions&&L.a.createElement(ut,{reverse:!0,reactions:t.latest_reactions,reaction_counts:t.reaction_counts,onClick:this._clickReactionList}),this.state.showDetailedReactions&&L.a.createElement(mt,{reverse:!1,handleReaction:s,actionsEnabled:o,detailedView:!0,reaction_counts:t.reaction_counts,latest_reactions:t.latest_reactions,ref:this.reactionSelectorRef})),t.text&&this.renderOptions()),!u&&L.a.createElement("div",{className:"str-chat__message-commerce-reply-button"},L.a.createElement(gt,{onClick:p,reply_count:t.reply_count})),L.a.createElement("div",{className:"str-chat__message-commerce-data"},this.isMine()?L.a.createElement("span",{className:"str-chat__message-commerce-name"},t.user.name||t.user.id):null,L.a.createElement("span",{className:"str-chat__message-commerce-timestamp"},d)))))}}]),t}(j.PureComponent);function xa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}N()(Sa,"propTypes",{message:T.a.object,Attachment:T.a.oneOfType([T.a.node,T.a.func]),Message:T.a.oneOfType([T.a.node,T.a.func,T.a.object]).isRequired,unsafeHTML:T.a.bool,initialMessage:T.a.bool,channelConfig:T.a.object,threadList:T.a.bool,handleOpenThread:T.a.func,isMyMessage:T.a.func,getMessageActions:T.a.func,handleReaction:T.a.func,actionsEnabled:T.a.bool,handleAction:T.a.func,onMentionsHoverMessage:T.a.func,onMentionsClickMessage:T.a.func,groupStyles:T.a.array}),N()(Sa,"defaultProps",{Attachment:Ve});var Ra=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"state",{showTooltip:!1,users:[]}),N()(S()(a),"showTooltip",(function(){a.setState({showTooltip:!0})})),N()(S()(a),"hideTooltip",(function(){a.setState({showTooltip:!1})})),N()(S()(a),"handleReaction",(function(e,t){void 0!==e&&e.preventDefault&&e.preventDefault(),a.props.handleReaction(t),a.setUsernames(t)})),N()(S()(a),"getReactionCount",(function(){var e=a.props.reaction_counts,t=null;return null!==e&&void 0!==e&&Object.keys(e).length>0&&(t=0,Object.keys(e).map((function(a){return t+=e[a]}))),t})),N()(S()(a),"renderUsers",(function(e){return e.map((function(t,a){var n=t;return a+1<e.length&&(n+=", "),L.a.createElement("span",{className:"latest-user-username",key:"key-".concat(a,"-").concat(t)},n)}))})),N()(S()(a),"getReactionsByType",(function(e){var t={};return e.map((function(e){return void 0===t[e.type]?t[e.type]=[e]:t[e.type]=[].concat(U()(t[e.type]),[e])})),t})),N()(S()(a),"renderReactions",(function(e){var t=a.getReactionsByType(e),n=a.props.reactionOptions.reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xa(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xa(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,N()({},t.id,t))}),{});return Object.keys(t).map((function(e,s){return L.a.createElement("li",{className:"str-chat__simple-reactions-list-item",key:"".concat(t[e][0].id,"-").concat(s),onClick:function(t){return a.handleReaction(t,e)}},L.a.createElement("span",{onMouseEnter:function(){return a.setUsernames(e)}},L.a.createElement(ce.a,I()({emoji:n[e]},Ye,{size:13,data:Xe})),"\xa0"))}))})),N()(S()(a),"getUsernames",(function(e){return e.map((function(e){return null!==e.user?e.user.name||e.user.id:"null"}))})),N()(S()(a),"setUsernames",(function(e){var t=a.getReactionsByType(a.props.reactions)[e],n=a.getUsernames(t);a.setState({users:n},(function(){return a.showTooltip()}))})),N()(S()(a),"renderUsernames",(function(e){return e.join(", ")})),a}return R()(t,e),b()(t,[{key:"render",value:function(){var e=this.props.reactions;return e&&0!==e.length?L.a.createElement("ul",{className:"str-chat__simple-reactions-list",onMouseLeave:this.hideTooltip},this.state.showTooltip&&L.a.createElement("div",{className:"str-chat__simple-reactions-list-tooltip",ref:this.reactionSelectorTooltip},L.a.createElement("div",{className:"arrow"}),this.renderUsernames(this.state.users)),this.renderReactions(e),0!==e.length&&L.a.createElement("li",{className:"str-chat__simple-reactions-list-item--last-number"},this.getReactionCount())):null}}]),t}(L.a.PureComponent);N()(Ra,"propTypes",{reactions:T.a.array,reaction_coutns:T.a.object,renderReactions:T.a.func,showTooltip:T.a.bool,reactionOptions:T.a.array}),N()(Ra,"defaultProps",{showTooltip:!0,reactionOptions:Qe,emojiSetDef:Ye});var Oa=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"state",{actionsBoxOpen:!1,reactionSelectorOpen:!1}),N()(S()(a),"reactionSelectorRef",L.a.createRef()),N()(S()(a),"editMessageFormRef",L.a.createRef()),N()(S()(a),"onClickReactionsAction",(function(){a.setState({reactionSelectorOpen:!0},(function(){return document.addEventListener("click",a.hideReactions,!1)}))})),N()(S()(a),"onClickOptionsAction",(function(){a.setState({actionsBoxOpen:!0},(function(){return document.addEventListener("click",a.hideOptions,!1)}))})),N()(S()(a),"hideOptions",(function(){a.setState({actionsBoxOpen:!1}),document.removeEventListener("click",a.hideOptions,!1)})),N()(S()(a),"hideReactions",(function(e){a.reactionSelectorRef.current.reactionSelector.current.contains(e.target)||(a.setState({reactionSelectorOpen:!1}),document.removeEventListener("click",a.hideReactions,!1))})),N()(S()(a),"onMouseLeaveMessage",(function(){a.hideOptions(),a.setState({reactionSelectorOpen:!1},(function(){return document.removeEventListener("click",a.hideReactions,!1)}))})),a}return R()(t,e),b()(t,[{key:"isMine",value:function(){return this.props.isMyMessage(this.props.message)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideOptions,!1),document.removeEventListener("click",this.hideReactions,!1)}},{key:"render",value:function(){var e=this.props,t=e.Attachment,a=e.message,n=e.groupStyles,s=e.editing,r=e.clearEditingState,o=e.updateMessage,i=e.initialMessage,c=e.handleReaction,l=e.actionsEnabled,u=e.messageListRect,p=e.channelConfig,d=e.threadList,h=e.handleOpenThread,m=e.Message,g=e.onMentionsHoverMessage,f=e.onMentionsClickMessage,v=e.unsafeHTML,_=e.handleRetry,y=e.handleAction,b=e.getMessageActions,w=e.isMyMessage,E=e.handleFlag,C=e.handleMute,k=e.handleEdit,M=e.handleDelete,S=Boolean(a.attachments&&a.attachments.length),x=a.attachments.filter((function(e){return"image"===e.type})),R=a.attachments;return x.length>1?R=a.attachments.filter((function(e){return"image"!==e.type})):x=[],"message.read"===a.type?null:"message.date"===a.type?null:a.deleted_at?null:s?L.a.createElement("div",{className:"str-chat__message-team str-chat__message-team--".concat(n[0]," str-chat__message-team--editing"),onMouseLeave:this.onMouseLeaveMessage},("top"===n[0]||"single"===n[0])&&L.a.createElement("div",{className:"str-chat__message-team-meta"},L.a.createElement(ze,{image:a.user.image,name:a.user.name||a.user.id,size:40})),L.a.createElement(It,{Input:Ft,message:a,clearEditingState:r,updateMessage:o})):L.a.createElement(L.a.Fragment,null,L.a.createElement("div",{className:"str-chat__message-livestream str-chat__message-livestream--".concat(n[0]," str-chat__message-livestream--").concat(a.type," str-chat__message-livestream--").concat(a.status," ").concat(i?"str-chat__message-livestream--initial-message":""),onMouseLeave:this.onMouseLeaveMessage},this.state.reactionSelectorOpen&&L.a.createElement(mt,{reverse:!1,handleReaction:c,actionsEnabled:l,detailedView:!0,latest_reactions:a.latest_reactions,reaction_counts:a.reaction_counts,messageList:u,ref:this.reactionSelectorRef}),!i&&"error"!==a.type&&"system"!==a.type&&"ephemeral"!==a.type&&"failed"!==a.status&&"sending"!==a.status&&L.a.createElement("div",{className:"str-chat__message-livestream-actions"},L.a.createElement("span",{className:"str-chat__message-livestream-time"},ke()(a.created_at).format("h:mmA")),p&&p.reactions&&L.a.createElement("span",{onClick:this.onClickReactionsAction},L.a.createElement("span",{dangerouslySetInnerHTML:{__html:'<svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z" fillRule="evenodd"/></svg>'}})),!d&&p&&p.replies&&L.a.createElement("span",{dangerouslySetInnerHTML:{__html:'<svg width="14" height="10" xmlns="http://www.w3.org/2000/svg"><path d="M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z" fillRule="evenodd" /></svg>'},onClick:function(e){return h(e,a)}}),b().length>0&&L.a.createElement("span",{onClick:this.onClickOptionsAction},L.a.createElement("span",{dangerouslySetInnerHTML:{__html:'<svg width="11" height="3" viewBox="0 0 11 3" xmlns="http://www.w3.org/2000/svg"><path d="M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fillRule="nonzero" /></svg>'}}),L.a.createElement(ct,{getMessageActions:b,open:this.state.actionsBoxOpen,Message:m,message:a,messageListRect:u,mine:w(a),handleFlag:E,handleMute:C,handleEdit:k,handleDelete:M}))),L.a.createElement("div",{className:"str-chat__message-livestream-left"},L.a.createElement(ze,{image:a.user.image,name:a.user.name||a.user.id,size:30})),L.a.createElement("div",{className:"str-chat__message-livestream-right"},L.a.createElement("div",{className:"str-chat__message-livestream-content"},L.a.createElement("div",{className:"str-chat__message-livestream-author"},L.a.createElement("strong",null,a.user.name||a.user.id),"error"===a.type&&L.a.createElement("div",{className:"str-chat__message-team-error-header"},"O",L.a.createElement(re.a,{id:"message.error_header",defaultMessage:"Only visible to you"}))),L.a.createElement("div",{className:$e(a.text)?"str-chat__message-livestream-text--is-emoji":"",onMouseOver:g,onClick:f},"error"!==a.type&&"failed"!==a.status&&!v&&at(a),"error"!==a.type&&"failed"!==a.status&&v&&L.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.html}}),"error"===a.type&&!a.command&&L.a.createElement("p",null,L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z",fill:"#EA152F",fillRule:"evenodd"})),a.text),"error"===a.type&&a.command&&L.a.createElement("p",null,L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z",fill:"#EA152F",fillRule:"evenodd"})),L.a.createElement(re.a,{id:"command.error",defaultMessage:"<strong>/{command}</strong> is not a valid command",values:{command:a.command,strong:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return L.a.createElement("strong",null,t)}}})),"failed"===a.status&&L.a.createElement("p",{onClick:_.bind(this,a)},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z",fill:"#EA152F",fillRule:"evenodd"})),L.a.createElement(re.a,{id:"message.failed",defaultMessage:"Message Failed \xb7 Click to try again"}))),S&&R.map((function(e,n){return L.a.createElement(t,{key:"".concat(a.id,"-").concat(n),attachment:e,actionHandler:y})})),0!==x.length&&L.a.createElement(ht,{images:x}),L.a.createElement(Ra,{reaction_counts:a.reaction_counts,reactions:a.latest_reactions,handleReaction:c}),!i&&L.a.createElement(gt,{onClick:h,reply_count:a.reply_count})))))}}]),t}(L.a.PureComponent);N()(Oa,"propTypes",{message:T.a.object,Attachment:T.a.oneOfType([T.a.node,T.a.func]),Message:T.a.oneOfType([T.a.node,T.a.func,T.a.object]).isRequired,unsafeHTML:T.a.bool,initialMessage:T.a.bool,channelConfig:T.a.object,threadList:T.a.bool,handleOpenThread:T.a.func,editing:T.a.bool,clearEditingState:T.a.func,isMyMessage:T.a.func,getMessageActions:T.a.func,updateMessage:T.a.func,handleRetry:T.a.func,handleReaction:T.a.func,actionsEnabled:T.a.bool,messageListRect:T.a.object,handleAction:T.a.func,onMentionsHoverMessage:T.a.func,onMentionsClickMessage:T.a.func}),N()(Oa,"defaultProps",{Attachment:Ve});var Na=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return a=E()(this,(e=k()(t)).call.apply(e,[this].concat(s))),N()(S()(a),"state",{actionsBoxOpen:!1,reactionSelectorOpen:!1}),N()(S()(a),"reactionSelectorRef",L.a.createRef()),N()(S()(a),"editMessageFormRef",L.a.createRef()),N()(S()(a),"onClickReactionsAction",(function(){a.setState({reactionSelectorOpen:!0},(function(){return document.addEventListener("click",a.hideReactions,!1)}))})),N()(S()(a),"onClickOptionsAction",(function(){a.setState({actionsBoxOpen:!0},(function(){return document.addEventListener("click",a.hideOptions,!1)}))})),N()(S()(a),"hideOptions",(function(){a.setState({actionsBoxOpen:!1}),document.removeEventListener("click",a.hideOptions,!1)})),N()(S()(a),"hideReactions",(function(e){a.reactionSelectorRef.current.reactionSelector.current.contains(e.target)||(a.setState({reactionSelectorOpen:!1}),document.removeEventListener("click",a.hideReactions,!1))})),N()(S()(a),"onMouseLeaveMessage",(function(){a.hideOptions(),a.setState({reactionSelectorOpen:!1},(function(){return document.removeEventListener("click",a.hideReactions,!1)}))})),N()(S()(a),"renderStatus",(function(){var e=a.props,t=e.readBy,n=e.message,s=e.threadList,r=e.client,o=e.lastReceivedId,i=e.intl;if(!a.isMine()||"error"===n.type)return null;var c=1===t.length&&t[0].id===r.user.id;if("sending"===n.status)return L.a.createElement("span",{className:"str-chat__message-team-status"},L.a.createElement(pt,null,L.a.createElement(re.a,{id:"message.status.sending",defaultMessage:"Sending..."})),L.a.createElement(dt,{isLoading:!0}));if(0===t.length||s||c)return"received"!==n.status||n.id!==o||s?null:L.a.createElement("span",{className:"str-chat__message-team-status"},L.a.createElement(pt,null,L.a.createElement(re.a,{id:"message.status.delivered",defaultMessage:"Delivered"})),L.a.createElement("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z",fill:"#006CFF",fillRule:"evenodd"})));var l=t.filter((function(e){return e.id!==r.user.id})),u=l[0];return L.a.createElement("span",{className:"str-chat__message-team-status"},L.a.createElement(pt,null,tt(i,l)),L.a.createElement(ze,{name:u.name||u.id,image:u.image,size:15}),t.length-1>1&&L.a.createElement("span",{className:"str-chat__message-team-status-number"},t.length-1))})),a}return R()(t,e),b()(t,[{key:"isMine",value:function(){return this.props.isMyMessage(this.props.message)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideOptions,!1),document.removeEventListener("click",this.hideReactions,!1)}},{key:"renderAttachments",value:function(e){var t=this.props,a=t.Attachment,n=t.message,s=t.handleAction;return e.map((function(e,t){return L.a.createElement(a,{key:"".concat(n.id,"-").concat(t),attachment:e,actionHandler:s})}))}},{key:"render",value:function(){var e=this.props,t=e.message,a=e.groupStyles,n=e.editing,s=e.clearEditingState,r=e.updateMessage,o=e.threadList,i=e.initialMessage,c=e.handleReaction,l=e.channelConfig,u=e.handleOpenThread,p=e.Message,d=e.messageListRect,h=e.onMentionsHoverMessage,m=e.onMentionsClickMessage,g=e.unsafeHTML,f=e.handleRetry,v=e.getMessageActions,_=e.isMyMessage,y=e.handleFlag,b=e.handleMute,w=e.handleEdit,E=e.handleDelete,C=e.intl;if("message.read"===t.type)return null;var k=Boolean(t.attachments&&t.attachments.length);if(t.deleted_at)return null;var M=t.attachments&&t.attachments.filter((function(e){return"image"===e.type})),S=t.attachments;M&&M.length>1?S=t.attachments.filter((function(e){return"image"!==e.type})):M=[];return n?L.a.createElement("div",{className:"str-chat__message-team str-chat__message-team--".concat(a[0]," str-chat__message-team--editing"),onMouseLeave:this.onMouseLeaveMessage},("top"===a[0]||"single"===a[0])&&L.a.createElement("div",{className:"str-chat__message-team-meta"},L.a.createElement(ze,{image:t.user.image,name:t.user.name||t.user.id,size:40})),L.a.createElement(It,{Input:Ft,message:t,clearEditingState:s,updateMessage:r})):L.a.createElement(L.a.Fragment,null,L.a.createElement("div",{className:"str-chat__message-team str-chat__message-team--".concat(a[0]," str-chat__message-team--").concat(t.type," ").concat(o?"thread-list":""," str-chat__message-team--").concat(t.status),onMouseLeave:this.onMouseLeaveMessage},L.a.createElement("div",{className:"str-chat__message-team-meta"},"top"===a[0]||"single"===a[0]||i?L.a.createElement("div",null,L.a.createElement(ze,{image:t.user.image,name:t.user.name||t.user.id,size:40})):L.a.createElement("div",{style:{width:40,marginRight:0}}),L.a.createElement("time",{dateTime:t.created_at,title:t.created_at},Boolean(Date.parse(t.created_at))&&ke()(t.created_at).format("h:mmA"))),L.a.createElement("div",{className:"str-chat__message-team-group"},("top"===a[0]||"single"===a[0]||i)&&L.a.createElement("div",{className:"str-chat__message-team-author"},L.a.createElement("strong",null,t.user.name||t.user.id),"error"===t.type&&L.a.createElement("div",{className:"str-chat__message-team-error-header"},"Only visible to you")),L.a.createElement("div",{className:"str-chat__message-team-content str-chat__message-team-content--".concat(a[0]," str-chat__message-team-content--").concat(""===t.text?"image":"text")},!i&&"sending"!==t.status&&"failed"!==t.status&&"system"!==t.type&&"ephemeral"!==t.type&&"error"!==t.type&&L.a.createElement("div",{className:"str-chat__message-team-actions"},this.state.reactionSelectorOpen&&L.a.createElement(mt,{handleReaction:c,latest_reactions:t.latest_reactions,reaction_counts:t.reaction_counts,detailedView:!0,direction:"left",ref:this.reactionSelectorRef}),l&&l.reactions&&L.a.createElement("span",{title:C.formatMessage({id:"message.title.reactions",defaultMessage:"Reactions"}),dangerouslySetInnerHTML:{__html:'<svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z" fillRule="evenodd"/></svg>'},onClick:this.onClickReactionsAction}),!o&&l&&l.replies&&L.a.createElement("span",{title:C.formatMessage({id:"message.title.open_thread",defaultMessage:"Start a thread"}),dangerouslySetInnerHTML:{__html:'<svg width="14" height="10" xmlns="http://www.w3.org/2000/svg"><path d="M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z" fillRule="evenodd" /></svg>'},onClick:function(e){return u(e,t)}}),v().length>0&&L.a.createElement("span",{onClick:this.onClickOptionsAction},L.a.createElement("span",{title:C.formatMessage({id:"message.title.message_actions",defaultMessage:"Message actions"}),dangerouslySetInnerHTML:{__html:'<svg width="11" height="3" viewBox="0 0 11 3" xmlns="http://www.w3.org/2000/svg"><path d="M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fillRule="nonzero" /></svg>'}}),L.a.createElement(ct,{getMessageActions:v,Message:p,open:this.state.actionsBoxOpen,message:t,messageListRect:d,mine:_(t),handleFlag:y,handleMute:b,handleEdit:w,handleDelete:E}))),L.a.createElement("span",{className:$e(t.text)?"str-chat__message-team-text--is-emoji":"",onMouseOver:h,onClick:m},g?L.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.html}}):at(t)),0!==M.length&&L.a.createElement(ht,{images:M}),""===t.text&&this.renderAttachments(S),t.latest_reactions&&0!==t.latest_reactions.length&&""!==t.text&&L.a.createElement(Ra,{reaction_counts:t.reaction_counts,handleReaction:c,reactions:t.latest_reactions}),"failed"===t.status&&L.a.createElement("button",{className:"str-chat__message-team-failed",onClick:f.bind(this,t)},L.a.createElement("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z",fill:"#EA152F",fillRule:"evenodd"})),L.a.createElement(re.a,{id:"message.failed",defaultMessage:"Message Failed \xb7 Click to try again"}))),this.renderStatus(),""!==t.text&&k&&this.renderAttachments(S),t.latest_reactions&&0!==t.latest_reactions.length&&""===t.text&&L.a.createElement(Ra,{reaction_counts:t.reaction_counts,handleReaction:c,reactions:t.latest_reactions}),!o&&L.a.createElement(gt,{onClick:u,reply_count:t.reply_count}))))}}]),t}(j.PureComponent);function ja(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}N()(Na,"propTypes",{message:T.a.object,Attachment:T.a.oneOfType([T.a.node,T.a.func]),Message:T.a.oneOfType([T.a.node,T.a.func,T.a.object]).isRequired,unsafeHTML:T.a.bool,client:T.a.object,initialMessage:T.a.bool,channelConfig:T.a.object,threadList:T.a.bool,handleOpenThread:T.a.func,editing:T.a.bool,clearEditingState:T.a.func,isMyMessage:T.a.func,getMessageActions:T.a.func,updateMessage:T.a.func,handleRetry:T.a.func,handleReaction:T.a.func,messageListRect:T.a.object,handleAction:T.a.func,onMentionsHoverMessage:T.a.func,onMentionsClickMessage:T.a.func,groupStyles:T.a.array}),N()(Na,"defaultProps",{Attachment:Ve,groupStyles:["single"]}),Na=Object(oe.c)(Na);var La=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){if(!this.props.thread)return null;var e=this.props.thread.id,t=this.props.channel.cid,a="thread-".concat(e,"-").concat(t);return L.a.createElement(Pa,I()({},this.props,{key:a}))}}]),t}(L.a.PureComponent);N()(La,"propTypes",{fullWidth:T.a.bool,autoFocus:T.a.bool,channel:T.a.object.isRequired,Message:T.a.oneOfType([T.a.node,T.a.func]),thread:T.a.oneOfType([T.a.object,T.a.bool]),threadMessages:T.a.array.isRequired,loadMoreThread:T.a.func.isRequired,threadHasMore:T.a.bool,threadLoadingMore:T.a.bool,additionalParentMessageProps:T.a.object,additionalMessageListProps:T.a.object,additionalMessageInputProps:T.a.object,MessageInput:T.a.oneOfType([T.a.node,T.a.func])}),N()(La,"defaultProps",{threadHasMore:!0,threadLoadingMore:!0,fullWidth:!1,autoFocus:!0,MessageInput:It});var Pa=function(e){function t(e){var a;return _()(this,t),(a=E()(this,k()(t).call(this,e))).messageList=L.a.createRef(),a}return R()(t,e),b()(t,[{key:"componentDidMount",value:function(){var e=H()(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.thread.id||!this.props.thread.reply_count){e.next=4;break}return e.next=4,this.props.loadMoreThread();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSnapshotBeforeUpdate",value:function(e){if(e.threadMessages.length<this.props.threadMessages.length){var t=this.messageList.current;return t.scrollHeight-t.scrollTop}return null}},{key:"componentDidUpdate",value:function(){var e=H()(D.a.mark((function e(t,a,n){var s,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.props.thread.id&&this.props.thread.reply_count>0&&0===this.props.threadMessages.length)){e.next=4;break}return e.next=4,this.props.loadMoreThread();case 4:null!==n&&(s=this.messageList.current,(r=function(){s.scrollTop=s.scrollHeight-n})(),setTimeout(r,100));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.props.thread)return null;return L.a.createElement("div",{className:"str-chat__thread ".concat(this.props.fullWidth?"str-chat__thread--full":"")},L.a.createElement("div",{className:"str-chat__thread-header"},L.a.createElement("div",{className:"str-chat__thread-header-details"},L.a.createElement("strong",null,"Thread"),L.a.createElement("small",null,this.props.thread.reply_count," replies")),L.a.createElement("button",{onClick:function(t){return e.props.closeThread(t)},className:"str-chat__square-button"},L.a.createElement("svg",{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg"},L.a.createElement("path",{d:"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z",fillRule:"evenodd"})))),L.a.createElement("div",{className:"str-chat__thread-list",ref:this.messageList},L.a.createElement(Bt,I()({message:this.props.thread,initialMessage:!0,threadList:!0,Message:this.props.Message},this.props,this.props.additionalParentMessageProps)),L.a.createElement("div",{className:"str-chat__thread-start"},"Start of a new thread"),L.a.createElement(Zt,I()({messages:this.props.threadMessages,read:{},threadList:!0,loadMore:this.props.loadMoreThread,hasMore:this.props.threadHasMore,loadingMore:this.props.threadLoadingMore,Message:this.props.Message},this.props.additionalMessageListProps)),rt(this.props.MessageInput,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ja(a,!0).forEach((function(t){N()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ja(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({MessageInputSmall:ra,parent:this.props.thread,focus:this.props.autoFocus},this.props.additionalMessageInputProps))))}}]),t}(L.a.PureComponent);N()(Pa,"propTypes",{channel:T.a.object.isRequired,thread:T.a.object.isRequired}),La=wt(La);var Ta=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){var e,t=this,a=Object.values(this.props.typing);return e=0!==a.length&&(1!==a.length||a[0].user.id!==this.props.client.user.id),L.a.createElement("div",{className:"str-chat__typing-indicator ".concat(e?"str-chat__typing-indicator--typing":"")},L.a.createElement("div",{className:"str-chat__typing-indicator__avatars"},a.filter((function(e){return e.user.id!==t.props.client.user.id})).map((function(e){var t=e.user;return L.a.createElement(ze,{image:t.image,size:32,name:t.name||t.id,key:t.id})}))),L.a.createElement("div",{className:"str-chat__typing-indicator__dots"},L.a.createElement("span",{className:"str-chat__typing-indicator__dot"}),L.a.createElement("span",{className:"str-chat__typing-indicator__dot"}),L.a.createElement("span",{className:"str-chat__typing-indicator__dot"})))}}]),t}(L.a.PureComponent),Aa=function(e){function t(){return _()(this,t),E()(this,k()(t).apply(this,arguments))}return R()(t,e),b()(t,[{key:"render",value:function(){return this.props.thread&&this.props.hideOnThread?null:L.a.createElement("div",{className:"str-chat__main-panel"},this.props.children)}}]),t}(L.a.PureComponent);N()(Aa,"propTypes",{hideOnThread:T.a.bool,thread:T.a.oneOfType([T.a.bool,T.a.object])}),N()(Aa,"defaultProps",{hideOnThread:!1}),Aa=wt(Aa);a(590);var Ia=a(607),Fa=window;function Ua(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var za=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).filters={type:"messaging",members:{$in:[Fa.dplChatConfig.userId]}},a.sort={last_message_at:-1},a.chat=void 0,a.Button=function(e){var t=e.open,n=e.onClick;return s.a.createElement("div",{onClick:n,className:"button ".concat(t?"button--open":"button--closed")}," ",s.a.createElement(Ia.a,{badgeContent:a.state.totalUnreadCount,color:"secondary"},t?s.a.createElement("svg",{width:"20",height:"20",xmlns:"https://www.w3.org/TR/SVG/"},s.a.createElement("path",{d:"M19.333 2.547l-1.88-1.88L10 8.12 2.547.667l-1.88 1.88L8.12 10 .667 17.453l1.88 1.88L10 11.88l7.453 7.453 1.88-1.88L11.88 10z",fillRule:"evenodd"})):s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},s.a.createElement("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))))},a.client=a.getClient(),a.updateUnreadCountTotal=function(e){a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ua(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ua(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state,{},{totalUnreadCount:e}))},a.subscription=a.client.on((function(e){switch(e.type){case"notification.added_to_channel":case"notification.removed_from_channel":case"notification.message_new":case"notification.mark_read":a.updateUnreadCountTotal(e.total_unread_count)}})),a.toggleDemo=function(){a.state.open?a.setState((function(){return{open:!1}})):a.setState((function(){return{open:!0}}))},a.hide={display:"none"},a.state={open:!1,totalUnreadCount:0,sort:{last_message_at:-1}},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getClient",value:function(){var e=this;"dpl-welcome-bot-7bc598d1-34f8-4882-ad69-47657fa0445e"===Fa.dplChatConfig.userId&&(Fa.dplChatConfig.userName="DPL Welcome Bot"),"dpl_kundenbetreuung_at_dpl_ltms_com"===Fa.dplChatConfig.userId&&(Fa.dplChatConfig.userName="DPL Kundenbetreuung");var t=new f.a(Fa.dplChatConfig.streamKey),a=t.devToken(Fa.dplChatConfig.userId);t.setBaseURL("https://chat-proxy-dublin.stream-io-api.com");return t.setUser({id:Fa.dplChatConfig.userId,name:Fa.dplChatConfig.userName,image:Fa.dplChatConfig.userImage,email:Fa.dplChatConfig.userEmail,userLanguage:Fa.dplChatConfig.userLanguage},a).then((function(t){e.updateUnreadCountTotal(t.me.total_unread_count)})),t}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"wrapper ".concat(this.state.open?"wrapper--open":"")},s.a.createElement("div",{className:"wrapper-chat",style:this.state.open?{}:this.hide},s.a.createElement(Kt,{locale:Fa.dplChatConfig.language||"de",client:this.client,theme:"messaging light",ref:function(t){t&&(e.chat=t)}},s.a.createElement(ba,{filters:this.filters,sort:this.sort,Preview:Ca}),s.a.createElement(ta,null,s.a.createElement(Aa,null,s.a.createElement(na,null),s.a.createElement(Zt,{TypingIndicator:Ta}),s.a.createElement(It,null)),s.a.createElement(La,null)))),s.a.createElement(this.Button,{onClick:this.toggleDemo,open:this.state.open})))}}]),t}(n.Component),Da=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).channelChat=void 0,a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(za,{ref:function(t){t&&(e.channelChat=t)}}))}},{key:"openChannel",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,s,r,o,i,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.referenceId,n=t.channelId,s=t.userIds,r=t.name,o=t.image,i=t.type,l=t.open,this.channelChat){e.next=3;break}return e.abrupt("return");case 3:if(this.channelChat.chat){e.next=5;break}return e.abrupt("return");case 5:u=this.channelChat.chat.props.client.channel("messaging",n,{members:s,image:o,name:r,extraType:i,referenceId:a,assignFlag:!1,languages:["de","en"],responsiveMember:""}),this.channelChat.chat.getContext().setActiveChannel(u),l&&!this.channelChat.state.open&&this.channelChat.setState({open:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hide",value:function(){this.channelChat&&this.channelChat.state.open&&this.channelChat.setState({open:!1})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Fa.addEventListener("dpl-chat-plugin-start",(function(){o.a.render(s.a.createElement(Da,{ref:function(e){e&&(Fa.dplChat=e)}}),document.getElementById("dpl-chat-plugin"))}),!1),Fa.addEventListener("dpl-chat-plugin-remove",(function(){var e=document.getElementById("dpl-chat-plugin");e&&e.parentNode&&e.childNodes.forEach((function(t){return e.removeChild(t)}))}),!1),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[232,1,2]]]);
//# sourceMappingURL=main.598b1b22.chunk.js.map
