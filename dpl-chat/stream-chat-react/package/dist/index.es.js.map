{"version":3,"file":"index.es.js","sources":["../src/components/Avatar.js","../src/components/SafeAnchor.js","../src/assets/Poweredby_100px-White_VertText.png","../src/components/Card.js","../src/components/Image.js","../src/components/AttachmentActions.js","../src/components/Audio.js","../src/components/Attachment.js","../src/utils.js","../src/components/MessageActionsBox.js","../src/components/ReactionsList.js","../src/components/Tooltip.js","../src/components/LoadingIndicator.js","../src/components/Gallery.js","../src/components/ReactionSelector.js","../src/components/MessageRepliesCountButton.js","../src/components/Modal.js","../src/context.js","../src/components/AutoCompleteTextarea/listener.js","../src/components/AutoCompleteTextarea/Item.js","../src/components/AutoCompleteTextarea/List.js","../src/components/AutoCompleteTextarea/utils.js","../src/components/AutoCompleteTextarea/Textarea.js","../src/components/EmoticonItem.js","../src/components/UserItem.js","../src/components/CommandItem.js","../src/components/ChatAutoComplete.js","../src/components/MessageInputLarge.js","../src/components/SendButton.js","../src/components/MessageInput.js","../src/components/EditMessageForm.js","../src/components/MessageSimple.js","../src/components/Message.js","../src/components/EmptyStateIndicator.js","../src/components/ReverseInfiniteScroll.js","../src/components/MessageNotification.js","../src/components/DateSeparator.js","../src/components/EventComponent.js","../src/components/MessageList.js","../src/components/Chat.js","../src/components/LoadingErrorIndicator.js","../src/components/Channel.js","../src/components/ChannelHeader.js","../src/components/MessageInputFlat.js","../src/components/MessageInputSmall.js","../src/components/ChannelSearch.js","../src/components/ChannelPreviewLastMessage.js","../src/components/ChannelPreviewCountOnly.js","../src/components/ChannelPreview.js","../src/components/LoadMoreButton.js","../src/components/LoadMorePaginator.js","../src/components/LoadingChannels.js","../src/assets/str-chat__connection-error.svg","../src/components/ChatDown.js","../src/components/ChannelListTeam.js","../src/components/ChannelList.js","../src/components/ChannelListMessenger.js","../src/components/ChannelPreviewCompact.js","../src/components/ChannelPreviewMessenger.js","../src/components/InfiniteScroll.js","../src/components/InfiniteScrollPaginator.js","../src/components/MessageCommerce.js","../src/components/SimpleReactionsList.js","../src/components/MessageLivestream.js","../src/components/MessageTeam.js","../src/components/Thread.js","../src/components/TypingIndicator.js","../src/components/Window.js","../src/index.js"],"sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * Avatar - A round avatar image with fallback to username's first letter\r\n *\r\n * @example ./docs/Avatar.md\r\n * @extends PureComponent\r\n */\r\nexport class Avatar extends React.PureComponent {\r\n  static propTypes = {\r\n    /** image url */\r\n    image: PropTypes.string,\r\n    /** name of the picture, used for title tag fallback */\r\n    name: PropTypes.string,\r\n    /** shape of the avatar, circle, rounded or square */\r\n    shape: PropTypes.oneOf(['circle', 'rounded', 'square']),\r\n    /** size in pixels */\r\n    size: PropTypes.number,\r\n  };\r\n\r\n  static defaultProps = {\r\n    size: 32,\r\n    shape: 'circle',\r\n  };\r\n\r\n  state = {\r\n    errored: false,\r\n    loaded: false,\r\n  };\r\n\r\n  getInitials = (name) =>\r\n    name\r\n      ? name\r\n          .split(' ')\r\n          .slice(0, 1)\r\n          .map((name) => name.charAt(0))\r\n      : null;\r\n\r\n  onLoad = () => {\r\n    this.setState({ loaded: true });\r\n  };\r\n\r\n  onError = () => {\r\n    this.setState({ errored: true });\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.image !== this.props.image) {\r\n      this.setState({ loaded: false, errored: false });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { size, name, shape, image } = this.props;\r\n    const initials = this.getInitials(name);\r\n    return (\r\n      <div\r\n        className={`str-chat__avatar str-chat__avatar--${shape}`}\r\n        title={name}\r\n        style={{\r\n          width: size,\r\n          height: size,\r\n          flexBasis: size,\r\n          lineHeight: size + 'px',\r\n          fontSize: size / 2,\r\n        }}\r\n      >\r\n        {image && !this.state.errored ? (\r\n          <img\r\n            src={image}\r\n            alt={initials}\r\n            className={\r\n              'str-chat__avatar-image' +\r\n              (this.state.loaded ? ' str-chat__avatar-image--loaded' : '')\r\n            }\r\n            style={{\r\n              width: size,\r\n              height: size,\r\n              flexBasis: size,\r\n              objectFit: 'cover',\r\n            }}\r\n            onLoad={this.onLoad}\r\n            onError={this.onError}\r\n          />\r\n        ) : (\r\n          <div className=\"str-chat__avatar-fallback\">{initials}</div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { sanitizeUrl } from '@braintree/sanitize-url';\r\n\r\n/**\r\n * SafeAnchor - In all ways similar to a regular anchor tag.\r\n * The difference is that it sanitizes the href value and prevents XSS\r\n * @extends PureComponent\r\n */\r\nexport class SafeAnchor extends React.PureComponent {\r\n  render() {\r\n    const href = sanitizeUrl(this.props.href);\r\n    return (\r\n      <a {...this.props} href={href}>\r\n        {this.props.children}\r\n      </a>\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==\"","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { SafeAnchor } from './SafeAnchor';\r\n\r\nimport giphyLogo from '../assets/Poweredby_100px-White_VertText.png';\r\n/**\r\n * Card - Simple Card Layout\r\n *\r\n * @example ./docs/Card.md\r\n * @extends PureComponent\r\n */\r\nexport class Card extends React.PureComponent {\r\n  static propTypes = {\r\n    /** Title returned by the OG scraper */\r\n    title: PropTypes.string.isRequired,\r\n    /** Link returned by the OG scraper */\r\n    title_link: PropTypes.string,\r\n    /** The scraped url, used as a fallback if the OG-data doesn't include a link */\r\n    og_scrape_url: PropTypes.string,\r\n    /** The url of the full sized image */\r\n    image_url: PropTypes.string,\r\n    /** The url for thumbnail sized image*/\r\n    thumb_url: PropTypes.string,\r\n    /** Description returned by the OG scraper */\r\n    text: PropTypes.string,\r\n  };\r\n\r\n  trimUrl = (url) => {\r\n    let trimmedUrl;\r\n    if (url !== undefined && url !== null) {\r\n      trimmedUrl = url\r\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\r\n        .split('/')[0];\r\n    }\r\n    return trimmedUrl;\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      title,\r\n      title_link,\r\n      text,\r\n      type,\r\n      image_url,\r\n      thumb_url,\r\n      og_scrape_url,\r\n    } = this.props;\r\n    const image = thumb_url || image_url;\r\n\r\n    if (!title && !title_link && !image) {\r\n      return (\r\n        <div\r\n          className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\r\n        >\r\n          <div className=\"str-chat__message-attachment-card--content\">\r\n            <div className=\"str-chat__message-attachment-card--text\">\r\n              this content could not be displayed\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!title_link && !og_scrape_url) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\r\n      >\r\n        {image && (\r\n          <div className=\"str-chat__message-attachment-card--header\">\r\n            <img src={image} alt={image} />\r\n          </div>\r\n        )}\r\n        <div className=\"str-chat__message-attachment-card--content\">\r\n          <div className=\"str-chat__message-attachment-card--flex\">\r\n            {title && (\r\n              <div className=\"str-chat__message-attachment-card--title\">\r\n                {title}\r\n              </div>\r\n            )}\r\n            {text && (\r\n              <div className=\"str-chat__message-attachment-card--text\">\r\n                {text}\r\n              </div>\r\n            )}\r\n            {(title_link || og_scrape_url) && (\r\n              <SafeAnchor\r\n                href={title_link || og_scrape_url}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"str-chat__message-attachment-card--url\"\r\n              >\r\n                {this.trimUrl(title_link || og_scrape_url)}\r\n              </SafeAnchor>\r\n            )}\r\n          </div>\r\n          {type === 'giphy' && (\r\n            <img\r\n              className=\"str-chat__message-attachment-card__giphy-logo\"\r\n              src={giphyLogo}\r\n              alt=\"giphy logo\"\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Carousel, { Modal, ModalGateway } from 'react-images';\r\n\r\n/**\r\n * Image - Small wrapper around an image tag, supports thumbnails\r\n *\r\n * @example ./docs/Image.md\r\n * @extends PureComponent\r\n */\r\nexport class Image extends React.PureComponent {\r\n  static propTypes = {\r\n    /** The full size image url */\r\n    image_url: PropTypes.string,\r\n    /** The thumb url */\r\n    thumb_url: PropTypes.string,\r\n    /** The text fallback for the image */\r\n    fallback: PropTypes.string,\r\n  };\r\n  state = {\r\n    modalIsOpen: false,\r\n    currentIndex: 0,\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState((state) => ({\r\n      modalIsOpen: !state.modalIsOpen,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { image_url, thumb_url, fallback } = this.props;\r\n    const formattedArray = [{ src: image_url || thumb_url }];\r\n    return (\r\n      <React.Fragment>\r\n        <img\r\n          className=\"str-chat__message-attachment--img\"\r\n          onClick={this.toggleModal}\r\n          src={thumb_url || image_url}\r\n          alt={fallback}\r\n        />\r\n        <ModalGateway>\r\n          {this.state.modalIsOpen ? (\r\n            <Modal onClose={this.toggleModal}>\r\n              <Carousel views={formattedArray} />\r\n            </Modal>\r\n          ) : null}\r\n        </ModalGateway>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * AttachmentActions - The actions you can take on an attachment\r\n *\r\n * @example ./docs/AttachmentActions.md\r\n * @extends PureComponent\r\n */\r\nexport class AttachmentActions extends React.PureComponent {\r\n  static propTypes = {\r\n    // /** The id of the form input */\r\n    // id: PropTypes.string.isRequired,\r\n    /** The text for the form input */\r\n    text: PropTypes.string,\r\n    /** A list of actions */\r\n    actions: PropTypes.array.isRequired,\r\n    /**\r\n     *\r\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\r\n     *\r\n     * @param name {string} Name of action\r\n     * @param value {string} Value of action\r\n     * @param event Dom event that triggered this handler\r\n     */\r\n    actionHandler: PropTypes.func.isRequired,\r\n  };\r\n\r\n  render() {\r\n    const { text, id, actions, actionHandler } = this.props;\r\n\r\n    return (\r\n      <div className=\"str-chat__message-attachment-actions\">\r\n        <form className=\"str-chat__message-attachment-actions-form\">\r\n          <span key={0}>{text}</span>\r\n          {actions.map((action) => (\r\n            <button\r\n              className={`str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--${action.style}`}\r\n              key={`${id}-${action.value}`}\r\n              data-value={action.value}\r\n              onClick={actionHandler.bind(this, action.name, action.value)}\r\n            >\r\n              {action.text}\r\n            </button>\r\n          ))}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\n\r\nexport class Audio extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n      playing: false,\r\n      progress: 0,\r\n      updateProgress: null,\r\n    };\r\n    this.audioRef = React.createRef();\r\n  }\r\n\r\n  playAudio = () => {\r\n    if (this.audioRef.current !== null) {\r\n      this.audioRef.current.pause();\r\n      this.updateProgress();\r\n      this.setState({\r\n        playing: true,\r\n        updateProgress: setInterval(this.updateProgress, 500),\r\n      });\r\n      //$FlowFixMe\r\n      this.audioRef.current.play();\r\n    }\r\n  };\r\n\r\n  pauseAudio = () => {\r\n    if (this.audioRef.current !== null) {\r\n      this.audioRef.current.pause();\r\n    }\r\n    this.setState({ playing: false });\r\n    window.clearInterval(this.state.updateProgress);\r\n  };\r\n\r\n  updateProgress = () => {\r\n    if (this.audioRef.current !== null) {\r\n      const position = this.audioRef.current.currentTime;\r\n      const duration = this.audioRef.current.duration;\r\n      const progress = (100 / duration) * position;\r\n      this.setState({\r\n        progress,\r\n      });\r\n      if (position === duration) {\r\n        this.pauseAudio();\r\n      }\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.clearInterval(this.state.updateProgress);\r\n  }\r\n\r\n  _handleClose = (e) => {\r\n    if (this.props.handleClose) {\r\n      this.props.handleClose(e);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { og } = this.props;\r\n    const audio = og;\r\n    const url = og.asset_url;\r\n    const image = og.image_url;\r\n    return (\r\n      <div className=\"str-chat__audio\">\r\n        <div className=\"str-chat__audio__wrapper\">\r\n          <audio ref={this.audioRef}>\r\n            <source src={url} type=\"audio/mp3\" />\r\n          </audio>\r\n          <div className=\"str-chat__audio__image\">\r\n            <div className=\"str-chat__audio__image--overlay\">\r\n              {!this.state.playing ? (\r\n                <div\r\n                  onClick={() => this.playAudio()}\r\n                  className=\"str-chat__audio__image--button\"\r\n                >\r\n                  <svg\r\n                    width=\"40\"\r\n                    height=\"40\"\r\n                    viewBox=\"0 0 64 64\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z\"\r\n                      fillRule=\"nonzero\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n              ) : (\r\n                <div\r\n                  onClick={() => this.pauseAudio()}\r\n                  className=\"str-chat__audio__image--button\"\r\n                >\r\n                  <svg\r\n                    width=\"40\"\r\n                    height=\"40\"\r\n                    viewBox=\"0 0 64 64\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z\"\r\n                      fillRule=\"nonzero\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <img src={image} alt={`${og.description}`} />\r\n          </div>\r\n          <div className=\"str-chat__audio__content\">\r\n            <span className=\"str-chat__audio__content--title\">\r\n              <strong>{og.title}</strong>\r\n            </span>\r\n            <span className=\"str-chat__audio__content--subtitle\">\r\n              {og.text}\r\n            </span>\r\n            <div className=\"str-chat__audio__content--progress\">\r\n              <div style={{ width: `${this.state.progress}%` }} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport ReactPlayer from 'react-player';\r\nimport { Card } from './Card';\r\nimport { Image } from './Image';\r\nimport { AttachmentActions } from './AttachmentActions';\r\nimport { FileIcon } from 'react-file-utils';\r\nimport prettybytes from 'pretty-bytes';\r\nimport PropTypes from 'prop-types';\r\nimport { SafeAnchor } from './SafeAnchor';\r\n\r\nimport { Audio } from './Audio';\r\n/**\r\n * Attachment - The message attachment\r\n *\r\n * @example ./docs/Attachment.md\r\n * @extends PureComponent\r\n */\r\nexport class Attachment extends PureComponent {\r\n  attachmentRef = React.createRef();\r\n  static propTypes = {\r\n    /**\r\n     * The attachment to render\r\n     * @see See [Attachment structure](https://getstream.io/chat/docs/#message_format)\r\n     *\r\n     *  */\r\n    attachment: PropTypes.object.isRequired,\r\n    /**\r\n     *\r\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\r\n     *\r\n     * @param name {string} Name of action\r\n     * @param value {string} Value of action\r\n     * @param event Dom event that triggered this handler\r\n     */\r\n    actionHandler: PropTypes.func.isRequired,\r\n  };\r\n\r\n  attachmentType(a) {\r\n    let type, extra;\r\n    if (a.actions && a.actions.length > 0) {\r\n      extra = 'actions';\r\n    }\r\n    if (a.type === 'giphy' || a.type === 'imgur') {\r\n      type = 'card';\r\n    } else if (a.type === 'image' && (a.title_link || a.og_scrape_url)) {\r\n      type = 'card';\r\n    } else if (a.type === 'image') {\r\n      type = 'image';\r\n    } else if (a.type === 'file') {\r\n      type = 'file';\r\n    } else if (a.type === 'audio') {\r\n      type = 'audio';\r\n    } else if (a.type === 'video') {\r\n      type = 'media';\r\n    } else {\r\n      type = 'card';\r\n      extra = 'no-image';\r\n    }\r\n    return { type, extra };\r\n  }\r\n\r\n  renderAttachmentActions = (a) => (\r\n    <AttachmentActions\r\n      key={'key-actions-' + a.id}\r\n      {...a}\r\n      actionHandler={this.props.actionHandler}\r\n    />\r\n  );\r\n\r\n  renderAttachment = (a) => (\r\n    <div className=\"str-chat__attachment\" key={`key-image-${a.id}`}>\r\n      <Card {...a} key={`key-card-${a.id}`} />\r\n      {this.renderAttachmentActions(a)}\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n    const { attachment: a } = this.props;\r\n    if (!a) {\r\n      return null;\r\n    }\r\n\r\n    const { type, extra } = this.attachmentType(a);\r\n    if (type === 'card' && !a.title_link && !a.og_scrape_url) {\r\n      return null;\r\n    }\r\n    const results = [];\r\n    if (type === 'image') {\r\n      if (a.actions && a.actions.length) {\r\n        results.push(\r\n          <div className=\"str-chat__attachment\" key={`key-image-${a.id}`}>\r\n            <Image {...a} />\r\n            {this.renderAttachmentActions(a)}\r\n          </div>,\r\n        );\r\n      } else {\r\n        results.push(<Image {...a} key={`key-image-${a.id}`} />);\r\n      }\r\n    } else if (type === 'file') {\r\n      a.asset_url &&\r\n        results.push(\r\n          <div\r\n            className=\"str-chat__message-attachment-file--item\"\r\n            key={`key-file-${a.id}`}\r\n          >\r\n            <FileIcon\r\n              mimeType={a.mime_type}\r\n              filename={a.title}\r\n              big={true}\r\n              size={30}\r\n            />\r\n            <div className=\"str-chat__message-attachment-file--item-text\">\r\n              <SafeAnchor href={a.asset_url} download>\r\n                {a.title}\r\n              </SafeAnchor>\r\n              {a.file_size && <span>{prettybytes(a.file_size)}</span>}\r\n            </div>\r\n          </div>,\r\n        );\r\n    } else if (type === 'audio') {\r\n      results.push(\r\n        <div className=\"str-chat__attachment\" key={`key-video-${a.id}`}>\r\n          <Audio og={a} />\r\n        </div>,\r\n      );\r\n    } else if (type === 'media') {\r\n      if (a.actions && a.actions.length) {\r\n        results.push(\r\n          <div className=\"str-chat__attachment\" key={`key-video-${a.id}`}>\r\n            <div className=\"str-chat__player-wrapper\">\r\n              <ReactPlayer\r\n                className=\"react-player\"\r\n                url={a.asset_url}\r\n                width=\"100%\"\r\n                height=\"100%\"\r\n                controls\r\n              />\r\n            </div>\r\n            {this.renderAttachmentActions(a)}\r\n          </div>,\r\n        );\r\n      } else {\r\n        results.push(\r\n          <div className=\"str-chat__player-wrapper\" key={`key-video-${a.id}`}>\r\n            <ReactPlayer\r\n              className=\"react-player\"\r\n              url={a.asset_url}\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              controls\r\n            />\r\n          </div>,\r\n        );\r\n      }\r\n    } else {\r\n      if (a.actions && a.actions.length) {\r\n        results.push(this.renderAttachment(a));\r\n      } else {\r\n        results.push(<Card {...a} key={`key-card-${a.id}`} />);\r\n      }\r\n    }\r\n\r\n    if (results.length === 0) return null;\r\n\r\n    return (\r\n      <div\r\n        className={`str-chat__message-attachment str-chat__message-attachment--${type} str-chat__message-attachment--${a.type} str-chat__message-attachment--${type}--${extra}`}\r\n        ref={this.attachmentRef}\r\n      >\r\n        {results}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAttachment.propTypes = {};\r\n","import anchorme from 'anchorme';\r\nimport emojiRegex from 'emoji-regex';\r\nimport ReactMarkdown from 'react-markdown/with-html';\r\nimport truncate from 'lodash/truncate';\r\nimport data from 'emoji-mart/data/all.json';\r\nimport React from 'react';\r\n\r\nexport const emojiSetDef = {\r\n  spriteUrl: 'https://getstream.imgix.net/images/emoji-sprite.png',\r\n  size: 20,\r\n  sheetColumns: 2,\r\n  sheetRows: 3,\r\n  sheetSize: 64,\r\n};\r\n\r\nexport const commonEmoji = {\r\n  emoticons: [],\r\n  short_names: [],\r\n  custom: true,\r\n};\r\n\r\nexport const defaultMinimalEmojis = [\r\n  {\r\n    id: 'like',\r\n    name: 'like',\r\n    colons: ':+1:',\r\n    sheet_x: 0,\r\n    sheet_y: 0,\r\n    ...commonEmoji,\r\n    ...emojiSetDef,\r\n  },\r\n  {\r\n    id: 'love',\r\n    name: 'love',\r\n    colons: ':heart:',\r\n    sheet_x: 1,\r\n    sheet_y: 2,\r\n    ...commonEmoji,\r\n    ...emojiSetDef,\r\n  },\r\n  {\r\n    id: 'haha',\r\n    name: 'haha',\r\n    colons: ':joy:',\r\n    sheet_x: 1,\r\n    sheet_y: 0,\r\n    ...commonEmoji,\r\n    ...emojiSetDef,\r\n  },\r\n  {\r\n    id: 'wow',\r\n    name: 'wow',\r\n    colons: ':astonished:',\r\n    sheet_x: 0,\r\n    sheet_y: 2,\r\n    ...commonEmoji,\r\n    ...emojiSetDef,\r\n  },\r\n  {\r\n    id: 'sad',\r\n    name: 'sad',\r\n    colons: ':pensive:',\r\n    sheet_x: 0,\r\n    sheet_y: 1,\r\n    ...commonEmoji,\r\n    ...emojiSetDef,\r\n  },\r\n  {\r\n    id: 'angry',\r\n    name: 'angry',\r\n    colons: ':angry:',\r\n    sheet_x: 1,\r\n    sheet_y: 1,\r\n    ...commonEmoji,\r\n    ...emojiSetDef,\r\n  },\r\n];\r\n\r\nconst d = Object.assign({}, data);\r\nd.emojis = {};\r\n\r\n// use this only for small lists like in ReactionSelector\r\nexport const emojiData = d;\r\n\r\nexport const isOnlyEmojis = (text) => {\r\n  if (!text) return false;\r\n\r\n  const noEmojis = text.replace(emojiRegex(), '');\r\n  const noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\r\n  return !noSpace;\r\n};\r\n\r\nexport const isPromise = (thing) => thing && typeof thing.then === 'function';\r\n\r\nexport const byDate = (a, b) => a.created_at - b.created_at;\r\n\r\n// https://stackoverflow.com/a/29234240/7625485\r\nexport const formatTypingArray = (intl, dict) => {\r\n  const arr2 = Object.keys(dict);\r\n  const arr3 = [];\r\n  arr2.forEach((item, i) =>\r\n    arr3.push(dict[arr2[i]].user.name || dict[arr2[i]].user.id),\r\n  );\r\n\r\n  const and = intl.formatMessage({\r\n    id: 'message_input.and',\r\n    defaultMessage: 'and',\r\n  });\r\n  const typing = intl.formatMessage(\r\n    {\r\n      id: 'message_input.typing',\r\n      defaultMessage:\r\n        '{count, plural, one {is typing...} other {are typing...}}',\r\n    },\r\n    { count: arr3.length },\r\n  );\r\n\r\n  let outStr = '';\r\n  if (arr3.length === 1) {\r\n    outStr = arr3[0] + ' ' + typing;\r\n  } else if (arr3.length === 2) {\r\n    //joins all with \"and\" but =no commas\r\n    //example: \"bob and sam\"\r\n    outStr = arr3.join(' ' + and + ' ') + ' ' + typing;\r\n  } else if (arr3.length > 2) {\r\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\r\n    //example: \"bob, joe, and sam\"\r\n    outStr =\r\n      arr3.slice(0, -1).join(', ') +\r\n      ', ' +\r\n      and +\r\n      ' ' +\r\n      arr3.slice(-1) +\r\n      ' ' +\r\n      typing;\r\n  }\r\n\r\n  return outStr;\r\n};\r\n\r\n// https://stackoverflow.com/a/29234240/7625485\r\nexport const formatStatusArray = (intl, arr) => {\r\n  let outStr = '';\r\n  const slicedArr = arr.map((item) => item.name || item.id).slice(0, 5);\r\n  const restLength = arr.length - slicedArr.length;\r\n  const and = intl.formatMessage({\r\n    id: 'message_status.and',\r\n    defaultMessage: 'and',\r\n  });\r\n  const more = intl.formatMessage(\r\n    {\r\n      id: 'message_status.more',\r\n      defaultMessage: 'and {count} more',\r\n    },\r\n    { count: restLength },\r\n  );\r\n\r\n  const lastStr = restLength > 0 ? ' ' + more : '';\r\n\r\n  if (slicedArr.length === 1) {\r\n    outStr = slicedArr[0] + ' ';\r\n  } else if (slicedArr.length === 2) {\r\n    //joins all with \"and\" but =no commas\r\n    //example: \"bob and sam\"\r\n    outStr = slicedArr.join(' ' + and + ' ') + ' ';\r\n  } else if (slicedArr.length > 2) {\r\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\r\n    //example: \"bob, joe, and sam\"\r\n    outStr = slicedArr.join(', ') + lastStr;\r\n  }\r\n\r\n  return outStr;\r\n};\r\n\r\nexport const renderText = (message) => {\r\n  // take the @ mentions and turn them into markdown?\r\n  // translate links\r\n\r\n  const language = window.dplChatConfig.language;\r\n  let text = '';\r\n  if (message.translations) {\r\n    switch (language) {\r\n      case 'en':\r\n        text = message.translations.en ? message.translations.en : message.text;\r\n        break;\r\n      case 'de':\r\n        text = message.translations.de ? message.translations.de : message.text;\r\n        break;\r\n      case 'it':\r\n        text = message.translations.it ? message.translations.it : message.text;\r\n        break;\r\n      case 'es':\r\n        text = message.translations.es ? message.translations.es : message.text;\r\n        break;\r\n      case 'pl':\r\n        text = message.translations.pl ? message.translations.pl : message.text;\r\n        break;\r\n      case 'fr':\r\n        text = message.translations.fr ? message.translations.fr : message.text;\r\n        break;\r\n      default:\r\n        text = message.text;\r\n    }\r\n  } else {\r\n    text = message.text;\r\n  }\r\n\r\n  const { mentioned_users } = message;\r\n\r\n  if (!text) {\r\n    return;\r\n  }\r\n\r\n  const allowed = [\r\n    'html',\r\n    'root',\r\n    'text',\r\n    'break',\r\n    'paragraph',\r\n    'emphasis',\r\n    'strong',\r\n    'link',\r\n    'list',\r\n    'listItem',\r\n    'code',\r\n    'inlineCode',\r\n    'blockquote',\r\n  ];\r\n\r\n  const urls = anchorme(text, {\r\n    list: true,\r\n  });\r\n  for (const urlInfo of urls) {\r\n    const displayLink = truncate(urlInfo.encoded.replace(/^(www\\.)/, ''), {\r\n      length: 20,\r\n      omission: '...',\r\n    });\r\n    const mkdown = `[${displayLink}](${urlInfo.protocol}${urlInfo.encoded})`;\r\n    text = text.replace(urlInfo.raw, mkdown);\r\n  }\r\n  let newText = text;\r\n  if (mentioned_users && mentioned_users.length) {\r\n    for (let i = 0; i < mentioned_users.length; i++) {\r\n      const username = mentioned_users[i].name || mentioned_users[i].id;\r\n      const mkdown = `**@${username}**`;\r\n      const re = new RegExp(`@${username}`, 'g');\r\n      newText = newText.replace(re, mkdown);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ReactMarkdown\r\n      allowedTypes={allowed}\r\n      source={newText}\r\n      linkTarget=\"_blank\"\r\n      plugins={[]}\r\n      escapeHtml={true}\r\n      skipHtml={false}\r\n    />\r\n  );\r\n};\r\n\r\n// https://stackoverflow.com/a/6860916/2570866\r\nexport function generateRandomId() {\r\n  // prettier-ignore\r\n  return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\r\n}\r\n\r\nfunction S4() {\r\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n}\r\n\r\nexport const smartRender = (ElementOrComponentOrLiteral, props, fallback) => {\r\n  if (ElementOrComponentOrLiteral === undefined) {\r\n    ElementOrComponentOrLiteral = fallback;\r\n  }\r\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\r\n    // Flow cast through any, to make flow believe it's a React.Element\r\n    const element = ElementOrComponentOrLiteral; // eslint-disable-line\r\n    return element;\r\n  }\r\n\r\n  // Flow cast through any to remove React.Element after previous check\r\n  const ComponentOrLiteral = ElementOrComponentOrLiteral;\r\n\r\n  if (\r\n    typeof ComponentOrLiteral === 'string' ||\r\n    typeof ComponentOrLiteral === 'number' ||\r\n    typeof ComponentOrLiteral === 'boolean' ||\r\n    ComponentOrLiteral == null\r\n  ) {\r\n    return ComponentOrLiteral;\r\n  }\r\n  return <ComponentOrLiteral {...props} />;\r\n};\r\n\r\nexport const MESSAGE_ACTIONS = {\r\n  edit: 'edit',\r\n  delete: 'delete',\r\n  flag: 'flag',\r\n  mute: 'mute',\r\n};\r\n\r\nexport const languageChangedEventName = 'dpl-chat-language-changed';\r\nexport const languageChangedEvent = new Event(languageChangedEventName);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { MESSAGE_ACTIONS } from '../utils';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\n/**\r\n * MessageActionsBox - A component for taking action on a message\r\n *\r\n * @example ./docs/MessageActionsBox.md\r\n * @extends PureComponent\r\n */\r\nexport class MessageActionsBox extends React.Component {\r\n  static propTypes = {\r\n    /** If the message actions box should be open or not */\r\n    open: PropTypes.bool.isRequired,\r\n    /**\r\n     * @deprecated\r\n     *\r\n     *  The message component, most logic is delegated to this component and MessageActionsBox uses the following functions explicitly:\r\n     *  `handleFlag`, `handleMute`, `handleEdit`, `handleDelete`, `canDeleteMessage`, `canEditMessage`, `isMyMessage`, `isAdmin`\r\n     */\r\n    Message: PropTypes.oneOfType([\r\n      PropTypes.node,\r\n      PropTypes.func,\r\n      PropTypes.object,\r\n    ]).isRequired,\r\n    /** If message belongs to current user. */\r\n    mine: PropTypes.bool,\r\n    /** DOMRect object for parent MessageList component */\r\n    messageListRect: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    open: false,\r\n  };\r\n\r\n  actionsBoxRef = React.createRef();\r\n\r\n  state = {\r\n    reverse: false,\r\n    rect: null,\r\n  };\r\n\r\n  componentDidMount() {}\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (!prevProps.open && this.props.open) {\r\n      if (this.state.rect === null) {\r\n        await this.setState({\r\n          rect: this.actionsBoxRef.current.getBoundingClientRect(),\r\n        });\r\n      }\r\n      const ml = this.props.messageListRect;\r\n\r\n      if (this.props.mine) {\r\n        this.setState({\r\n          reverse: this.state.rect.left < ml.left ? true : false,\r\n        });\r\n      } else if (!this.props.mine) {\r\n        this.setState({\r\n          reverse: this.state.rect.right + 5 > ml.right ? true : false,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      handleFlag,\r\n      handleMute,\r\n      handleEdit,\r\n      handleDelete,\r\n      getMessageActions,\r\n    } = this.props;\r\n    const messageActions = getMessageActions();\r\n\r\n    return (\r\n      <div\r\n        className={`str-chat__message-actions-box\r\n          ${this.props.open ? 'str-chat__message-actions-box--open' : ''}\r\n          ${this.props.mine ? 'str-chat__message-actions-box--mine' : ''}\r\n          ${this.state.reverse ? 'str-chat__message-actions-box--reverse' : ''}\r\n        `}\r\n        ref={this.actionsBoxRef}\r\n      >\r\n        <ul className=\"str-chat__message-actions-list\">\r\n          {messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1 && (\r\n            <button onClick={handleFlag}>\r\n              <li className=\"str-chat__message-actions-list-item\">\r\n                <FormattedMessage\r\n                  id=\"message_actions.flag\"\r\n                  defaultMessage=\"Flag\"\r\n                />\r\n              </li>\r\n            </button>\r\n          )}\r\n          {messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 && (\r\n            <button onClick={handleMute}>\r\n              <li className=\"str-chat__message-actions-list-item\">\r\n                <FormattedMessage\r\n                  id=\"message_actions.mute\"\r\n                  defaultMessage=\"Mute\"\r\n                />\r\n              </li>\r\n            </button>\r\n          )}\r\n          {messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1 && (\r\n            <button onClick={handleEdit}>\r\n              <li className=\"str-chat__message-actions-list-item\">\r\n                <FormattedMessage\r\n                  id=\"message_actions.edit\"\r\n                  defaultMessage=\"Edit Message\"\r\n                />\r\n              </li>\r\n            </button>\r\n          )}\r\n          {messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1 && (\r\n            <button onClick={handleDelete}>\r\n              <li className=\"str-chat__message-actions-list-item\">\r\n                <FormattedMessage\r\n                  id=\"message_actions.delete\"\r\n                  defaultMessage=\"Delete\"\r\n                />\r\n              </li>\r\n            </button>\r\n          )}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { NimbleEmoji } from 'emoji-mart';\r\n\r\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\r\n\r\nexport class ReactionsList extends React.Component {\r\n  static propTypes = {\r\n    reactions: PropTypes.array,\r\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\r\n    reactionOptions: PropTypes.array,\r\n    reverse: PropTypes.bool,\r\n    reaction_counts: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    reactionOptions: defaultMinimalEmojis,\r\n    emojiSetDef,\r\n    reverse: false,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  _renderReactions = (reactions) => {\r\n    const reactionsByType = {};\r\n    reactions.map((item) => {\r\n      if (reactions[item.type] === undefined) {\r\n        return (reactionsByType[item.type] = [item]);\r\n      } else {\r\n        return (reactionsByType[item.type] = [\r\n          ...reactionsByType[item.type],\r\n          item,\r\n        ]);\r\n      }\r\n    });\r\n\r\n    const reactionsEmojis = this.props.reactionOptions.reduce(\r\n      (acc, cur) => ({ ...acc, [cur.id]: cur }),\r\n      {},\r\n    );\r\n\r\n    return Object.keys(reactionsByType).map((type) =>\r\n      reactionsEmojis[type] ? (\r\n        <li key={reactionsEmojis[type].id}>\r\n          <NimbleEmoji\r\n            emoji={reactionsEmojis[type]}\r\n            {...emojiSetDef}\r\n            size={16}\r\n            data={emojiData}\r\n          />{' '}\r\n          &nbsp;\r\n        </li>\r\n      ) : null,\r\n    );\r\n  };\r\n\r\n  _getReactionCount = () => {\r\n    const reaction_counts = this.props.reaction_counts;\r\n    let count = null;\r\n    if (\r\n      reaction_counts !== null &&\r\n      reaction_counts !== undefined &&\r\n      Object.keys(reaction_counts).length > 0\r\n    ) {\r\n      count = 0;\r\n      Object.keys(reaction_counts).map(\r\n        (key) => (count += reaction_counts[key]),\r\n      );\r\n    }\r\n    return count;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`str-chat__reaction-list ${\r\n          this.props.reverse ? 'str-chat__reaction-list--reverse' : ''\r\n        }`}\r\n        onClick={this.props.onClick}\r\n        ref={this.reactionList}\r\n      >\r\n        <ul>\r\n          {this._renderReactions(this.props.reactions)}\r\n          <li>\r\n            <span className=\"str-chat__reaction-list--counter\">\r\n              {this._getReactionCount()}\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport class Tooltip extends React.PureComponent {\r\n  render() {\r\n    return <div className=\"str-chat__tooltip\">{this.props.children}</div>;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport svg from '../assets/str-chat__loading-indicator.svg';\r\n\r\n/**\r\n * LoadingIndicator - Just a simple loading spinner..\r\n *\r\n * @example ./docs/LoadingIndicator.md\r\n * @extends PureComponent\r\n */\r\nexport class LoadingIndicator extends React.PureComponent {\r\n  static propTypes = {\r\n    /** The size of the loading icon */\r\n    size: PropTypes.number,\r\n    /** Set the color of the LoadingIndicator */\r\n    color: PropTypes.string,\r\n  };\r\n  static defaultProps = {\r\n    size: 15,\r\n    color: '#006CFF',\r\n  };\r\n\r\n  stopRef = React.createRef();\r\n\r\n  render() {\r\n    const { size, color } = this.props;\r\n    return (\r\n      <div\r\n        className={'str-chat__loading-indicator ' + color}\r\n        style={{ width: size, height: size }}\r\n      >\r\n        <svg\r\n          width={size}\r\n          height={size}\r\n          viewBox={`0 0 30 30`}\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <defs>\r\n            <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"100%\" id=\"a\">\r\n              <stop stopColor=\"#FFF\" stopOpacity=\"0\" offset=\"0%\" />\r\n              <stop\r\n                ref={this.stopRef}\r\n                offset=\"100%\"\r\n                stopColor={color}\r\n                stopOpacity=\"1\"\r\n                style={{ stopColor: color }}\r\n              />\r\n            </linearGradient>\r\n          </defs>\r\n          <path\r\n            d=\"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z\"\r\n            fill=\"url(#a)\"\r\n            fillRule=\"evenodd\"\r\n          />\r\n        </svg>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Carousel, { Modal, ModalGateway } from 'react-images';\r\n\r\n/**\r\n * Gallery - displays up to 6 images in a simple responsive grid with a lightbox to view the images.\r\n * @example ./docs/Gallery.md\r\n * @extends PureComponent\r\n */\r\nexport class Gallery extends React.PureComponent {\r\n  static propTypes = {\r\n    images: PropTypes.array.isRequired,\r\n  };\r\n\r\n  state = {\r\n    modalIsOpen: false,\r\n    currentIndex: 0,\r\n  };\r\n\r\n  toggleModal = (index) => {\r\n    this.setState((state) => ({\r\n      modalIsOpen: !state.modalIsOpen,\r\n      currentIndex: index,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { images } = this.props;\r\n    const formattedArray = images.map((image) => ({\r\n      src: image.image_url || image.thumb_url,\r\n    }));\r\n    return (\r\n      <div className=\"str-chat__gallery\">\r\n        {images.slice(0, 3).map((image, i) => (\r\n          <div\r\n            className=\"str-chat__gallery-image\"\r\n            key={`gallery-image-${i}`}\r\n            onClick={() => this.toggleModal(i)}\r\n          >\r\n            <img src={image.image_url || image.thumb_url} />\r\n          </div>\r\n        ))}\r\n        {images.length > 3 && (\r\n          <div\r\n            className=\"str-chat__gallery-placeholder\"\r\n            style={{\r\n              backgroundImage: `url(${images[3].image_url})`,\r\n            }}\r\n            onClick={() => this.toggleModal(3)}\r\n          >\r\n            <p>{images.length - 3} more</p>\r\n          </div>\r\n        )}\r\n        {/* <Lightbox\r\n          images={formattedArray}\r\n          isOpen={this.state.lightboxIsOpen}\r\n          onClickPrev={this.gotoPrevLightboxImage}\r\n          onClickNext={this.gotoNextLightboxImage}\r\n          onClose={this.closeLightbox}\r\n          backdropClosesModal\r\n          currentImage={this.state.imageIndex}\r\n        /> */}\r\n        <ModalGateway>\r\n          {this.state.modalIsOpen ? (\r\n            <Modal onClose={this.toggleModal} closeOnBackdropClick={true}>\r\n              <Carousel\r\n                views={formattedArray}\r\n                currentIndex={this.state.currentIndex}\r\n              />\r\n            </Modal>\r\n          ) : null}\r\n        </ModalGateway>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { NimbleEmoji } from 'emoji-mart';\r\n\r\nimport { Avatar } from './Avatar';\r\n\r\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\r\n\r\n/**\r\n * ReactionSelector - A component for selecting a reaction. Examples are love, wow, like etc.\r\n *\r\n * @example ./docs/ReactionSelector.md\r\n * @extends PureComponent\r\n */\r\nexport class ReactionSelector extends PureComponent {\r\n  static propTypes = {\r\n    /**\r\n     * Array of latest reactions.\r\n     * Reaction object has following structure:\r\n     *\r\n     * ```json\r\n     * {\r\n     *  \"type\": \"love\",\r\n     *  \"user_id\": \"demo_user_id\",\r\n     *  \"user\": {\r\n     *    ...userObject\r\n     *  },\r\n     *  \"created_at\": \"datetime\";\r\n     * }\r\n     * ```\r\n     * */\r\n    latest_reactions: PropTypes.array,\r\n    /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\r\n    reaction_counts: PropTypes.object,\r\n    /**\r\n     * Callback to handle the reaction\r\n     *\r\n     * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\r\n     * */\r\n    handleReaction: PropTypes.func.isRequired,\r\n    /** Enable the avatar display */\r\n    detailedView: PropTypes.bool,\r\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\r\n    reactionOptions: PropTypes.array,\r\n\r\n    reverse: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    detailedView: true,\r\n    reactionOptions: defaultMinimalEmojis,\r\n    reverse: false,\r\n    emojiSetDef,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showTooltip: false,\r\n      users: [],\r\n      position: 0,\r\n      arrowPosition: 0,\r\n      positionCalculated: false,\r\n    };\r\n    this.reactionSelector = React.createRef();\r\n    this.reactionSelectorInner = React.createRef();\r\n    this.reactionSelectorTooltip = React.createRef();\r\n  }\r\n\r\n  showTooltip = async (e, users) => {\r\n    const target = e.target.getBoundingClientRect();\r\n    await this.setState(\r\n      () => ({\r\n        showTooltip: true,\r\n        users,\r\n      }),\r\n      async () => {\r\n        await this.setTooltipPosition(target);\r\n        await this.setArrowPosition(target);\r\n      },\r\n    );\r\n  };\r\n\r\n  hideTooltip = () => {\r\n    this.setState(() => ({\r\n      showTooltip: false,\r\n      users: [],\r\n      arrowPosition: 0,\r\n      position: 0,\r\n      positionCaculated: false,\r\n    }));\r\n  };\r\n\r\n  getUsersPerReaction = (reactions, type) =>\r\n    reactions && reactions.filter((item) => item.type === type);\r\n\r\n  getLatestUser = (reactions, type) => {\r\n    const filtered = this.getUsersPerReaction(reactions, type);\r\n    if (filtered && filtered[0] && filtered[0].user) {\r\n      return filtered[0].user;\r\n    } else {\r\n      return 'NotFound';\r\n    }\r\n  };\r\n\r\n  getUserNames = (reactions, type) => {\r\n    const filtered = this.getUsersPerReaction(reactions, type);\r\n    return filtered && filtered.map((item) => item.user || 'NotFound');\r\n  };\r\n\r\n  getContainerDimensions = () =>\r\n    this.reactionSelector.current.getBoundingClientRect();\r\n  getToolTipDimensions = () =>\r\n    this.reactionSelectorTooltip.current.getBoundingClientRect();\r\n\r\n  setTooltipPosition = async (target) => {\r\n    const container = await this.getContainerDimensions();\r\n    const tooltip = await this.getToolTipDimensions();\r\n    let position;\r\n\r\n    if (tooltip.width === container.width || tooltip.x < container.x) {\r\n      position = 0;\r\n    } else {\r\n      position =\r\n        target.left + target.width / 2 - container.left - tooltip.width / 2;\r\n    }\r\n\r\n    await this.setState(() => ({\r\n      position,\r\n    }));\r\n  };\r\n\r\n  setArrowPosition = async (target) => {\r\n    const tooltip = this.reactionSelectorTooltip.current.getBoundingClientRect();\r\n    const position = target.x - tooltip.x + target.width / 2;\r\n\r\n    await this.setState(() => ({\r\n      arrowPosition: position,\r\n      positionCaculated: true,\r\n    }));\r\n  };\r\n\r\n  renderReactionItems = () => {\r\n    const { reaction_counts, latest_reactions } = this.props;\r\n    return this.props.reactionOptions.map((reaction) => {\r\n      const users = this.getUserNames(latest_reactions, reaction.id);\r\n      const latestUser = this.getLatestUser(latest_reactions, reaction.id);\r\n\r\n      const count = reaction_counts && reaction_counts[reaction.id];\r\n\r\n      return (\r\n        <li\r\n          key={`item-${reaction.id}`}\r\n          className=\"str-chat__message-reactions-list-item\"\r\n          data-text={reaction.id}\r\n          onClick={this.props.handleReaction.bind(this, reaction.id)}\r\n        >\r\n          {Boolean(count) && this.props.detailedView && (\r\n            <React.Fragment>\r\n              <div\r\n                className=\"latest-user\"\r\n                onMouseEnter={(e) => this.showTooltip(e, users)}\r\n                onMouseLeave={this.hideTooltip}\r\n              >\r\n                {latestUser !== 'NotFound' ? (\r\n                  <Avatar\r\n                    image={latestUser.image}\r\n                    alt={latestUser.id}\r\n                    size={20}\r\n                    name={latestUser.id}\r\n                  />\r\n                ) : (\r\n                  <div className=\"latest-user-not-found\" />\r\n                )}\r\n              </div>\r\n            </React.Fragment>\r\n          )}\r\n          <NimbleEmoji emoji={reaction} {...emojiSetDef} data={emojiData} />\r\n\r\n          {Boolean(count) && this.props.detailedView && (\r\n            <span className=\"str-chat__message-reactions-list-item__count\">\r\n              {count || ''}\r\n            </span>\r\n          )}\r\n        </li>\r\n      );\r\n    });\r\n  };\r\n\r\n  renderUsers = (users) =>\r\n    users.map((user, i) => {\r\n      let text = user.name || user.id;\r\n      if (i + 1 < users.length) {\r\n        text += ', ';\r\n      }\r\n      return (\r\n        <span className=\"latest-user-username\" key={`key-${i}-${user}`}>\r\n          {text}\r\n        </span>\r\n      );\r\n    });\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`str-chat__reaction-selector ${\r\n          this.props.reverse ? 'str-chat__reaction-selector--reverse' : ''\r\n        }`}\r\n        ref={this.reactionSelector}\r\n      >\r\n        {this.props.detailedView && (\r\n          <div\r\n            className=\"str-chat__reaction-selector-tooltip\"\r\n            ref={this.reactionSelectorTooltip}\r\n            style={{\r\n              visibility: this.state.showTooltip ? 'visible' : 'hidden',\r\n              left: this.state.position,\r\n              opacity:\r\n                this.state.showTooltip && this.state.positionCaculated\r\n                  ? 1\r\n                  : 0.01,\r\n            }}\r\n          >\r\n            <div className=\"arrow\" style={{ left: this.state.arrowPosition }} />\r\n            {this.renderUsers(this.state.users)}\r\n          </div>\r\n        )}\r\n\r\n        <ul className=\"str-chat__message-reactions-list\">\r\n          {this.renderReactionItems()}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class MessageRepliesCountButton extends React.PureComponent {\r\n  static propTypes = {\r\n    reply_count: PropTypes.number,\r\n    onClick: PropTypes.func,\r\n  };\r\n  static defaultProps = {\r\n    reply_count: 0,\r\n  };\r\n\r\n  render() {\r\n    const { reply_count } = this.props;\r\n    if (reply_count && reply_count !== 0) {\r\n      return (\r\n        <button\r\n          className=\"str-chat__message-replies-count-button\"\r\n          onClick={this.props.onClick}\r\n        >\r\n          <svg width=\"18\" height=\"15\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n              d=\"M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z\"\r\n              fillRule=\"nonzero\"\r\n            />\r\n          </svg>\r\n          <FormattedMessage\r\n            id=\"message_replies.count_button\"\r\n            defaultMessage=\"{count, plural, one {# reply} other {# replies}}\"\r\n            values={{ count: reply_count }}\r\n          />\r\n        </button>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nexport class Modal extends React.PureComponent {\r\n  innerRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keyPress', this.handleEscKey, false);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keyPress', this.handleEscKey, false);\r\n  }\r\n\r\n  handleEscKey(e) {\r\n    if (e.keyCode === 27) {\r\n      this.props.onClose();\r\n      document.removeEventListener('keyPress', this.handleEscKey, false);\r\n    }\r\n  }\r\n\r\n  handleClick = (e) => {\r\n    if (!this.innerRef.current.contains(e.target)) {\r\n      this.props.onClose();\r\n      document.removeEventListener('keyPress', this.handleEscKey, false);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const openClasses = this.props.open\r\n      ? 'str-chat__modal--open'\r\n      : 'str-chat__modal--closed';\r\n    return (\r\n      <div\r\n        className={`str-chat__modal ${openClasses}`}\r\n        onClick={this.handleClick}\r\n      >\r\n        <div className=\"str-chat__modal__close-button\">\r\n          <FormattedMessage id=\"modal.close\" defaultMessage=\"Close\" />\r\n          <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n              d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\r\n              fillRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        <div className=\"str-chat__modal__inner\" ref={this.innerRef}>\r\n          {this.props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport const ChatContext = React.createContext({ client: null });\r\n\r\nexport function withChatContext(OriginalComponent) {\r\n  const ContextAwareComponent = function ContextComponent(props) {\r\n    return (\r\n      <ChatContext.Consumer>\r\n        {(context) => {\r\n          const mergedProps = { ...context, ...props };\r\n          return <OriginalComponent {...mergedProps} />;\r\n        }}\r\n      </ChatContext.Consumer>\r\n    );\r\n  };\r\n  ContextAwareComponent.displayName =\r\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\r\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\r\n    'Base',\r\n    '',\r\n  );\r\n\r\n  return ContextAwareComponent;\r\n}\r\n\r\nexport const ChannelContext = React.createContext({});\r\n\r\nexport function withChannelContext(OriginalComponent) {\r\n  const ContextAwareComponent = function ContextComponent(props) {\r\n    return (\r\n      <ChannelContext.Consumer>\r\n        {(channelContext) => (\r\n          <OriginalComponent {...channelContext} {...props} />\r\n        )}\r\n      </ChannelContext.Consumer>\r\n    );\r\n  };\r\n  ContextAwareComponent.displayName =\r\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\r\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\r\n    'Base',\r\n    '',\r\n  );\r\n\r\n  return ContextAwareComponent;\r\n}\r\n","export const KEY_CODES = {\r\n  ESC: 27,\r\n  UP: 38,\r\n  DOWN: 40,\r\n  ENTER: 13,\r\n  TAB: 9,\r\n  SPACE: 32,\r\n};\r\n\r\n// This is self-made key shortcuts manager, used for caching key strokes\r\nclass Listener {\r\n  constructor() {\r\n    this.index = 0;\r\n    this.listeners = {};\r\n    this.refCount = 0;\r\n\r\n    this.f = (e) => {\r\n      const code = e.keyCode || e.which;\r\n      Object.values(this.listeners).forEach(({ keyCode, fn }) => {\r\n        if (keyCode.includes(code)) fn(e);\r\n      });\r\n    };\r\n  }\r\n\r\n  startListen = () => {\r\n    if (!this.refCount) {\r\n      // prevent multiple listeners in case of multiple TextareaAutocomplete components on page\r\n      document.addEventListener('keydown', this.f);\r\n    }\r\n    this.refCount++;\r\n  };\r\n\r\n  stopListen = () => {\r\n    this.refCount--;\r\n    if (!this.refCount) {\r\n      // prevent disable listening in case of multiple TextareaAutocomplete components on page\r\n      document.removeEventListener('keydown', this.f);\r\n    }\r\n  };\r\n\r\n  add = (keyCodes, fn) => {\r\n    let keyCode = keyCodes;\r\n\r\n    if (typeof keyCode !== 'object') keyCode = [keyCode];\r\n\r\n    this.listeners[this.index] = {\r\n      keyCode,\r\n      fn,\r\n    };\r\n\r\n    this.index += 1;\r\n\r\n    return this.index;\r\n  };\r\n\r\n  remove = (id) => {\r\n    delete this.listeners[id];\r\n  };\r\n\r\n  removeAll = () => {\r\n    this.listeners = {};\r\n    this.index = 0;\r\n  };\r\n}\r\n\r\nexport default new Listener();\r\n","\r\nimport React from 'react';\r\n\r\nexport default class Item extends React.Component {\r\n  selectItem = () => {\r\n    const { item, onSelectHandler } = this.props;\r\n    onSelectHandler(item);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      component: Component,\r\n      style,\r\n      onClickHandler,\r\n      item,\r\n      selected,\r\n      className,\r\n      innerRef,\r\n    } = this.props;\r\n\r\n    return (\r\n      <li className={`rta__item ${className || ''}`} style={style}>\r\n        <div\r\n          className={`rta__entity ${\r\n            selected === true ? 'rta__entity--selected' : ''\r\n          }`}\r\n          role=\"button\"\r\n          tabIndex={0}\r\n          onClick={onClickHandler}\r\n          onFocus={this.selectItem}\r\n          onMouseEnter={this.selectItem}\r\n          /* $FlowFixMe */\r\n          ref={innerRef}\r\n        >\r\n          <Component selected={selected} entity={item} />\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n","//\r\n\r\nimport React from 'react';\r\n\r\nimport Listeners, { KEY_CODES } from './listener';\r\nimport Item from './Item';\r\n\r\nexport default class List extends React.Component {\r\n  state = {\r\n    selectedItem: null,\r\n  };\r\n\r\n  cachedValues = null;\r\n\r\n  componentDidMount() {\r\n    this.listeners.push(\r\n      Listeners.add([KEY_CODES.DOWN, KEY_CODES.UP], this.scroll),\r\n      Listeners.add([KEY_CODES.ENTER, KEY_CODES.TAB], this.onPressEnter),\r\n    );\r\n\r\n    const { values } = this.props;\r\n    if (values && values[0]) this.selectItem(values[0]);\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps({ values }) {\r\n    const newValues = values.map((val) => this.getId(val)).join('');\r\n\r\n    if (this.cachedValues !== newValues && values && values[0]) {\r\n      this.selectItem(values[0]);\r\n      this.cachedValues = newValues;\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    let listener;\r\n    while (this.listeners.length) {\r\n      listener = this.listeners.pop();\r\n      Listeners.remove(listener);\r\n    }\r\n  }\r\n\r\n  onPressEnter = (e) => {\r\n    if (e && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    const { values } = this.props;\r\n\r\n    this.modifyText(values[this.getPositionInList()]);\r\n  };\r\n\r\n  getPositionInList = () => {\r\n    const { values } = this.props;\r\n    const { selectedItem } = this.state;\r\n\r\n    if (!selectedItem) return 0;\r\n\r\n    return values.findIndex((a) => this.getId(a) === this.getId(selectedItem));\r\n  };\r\n\r\n  getId = (item) => {\r\n    const textToReplace = this.props.getTextToReplace(item);\r\n    if (textToReplace.key) {\r\n      return textToReplace.key;\r\n    }\r\n\r\n    if (typeof item === 'string' || !item.key) {\r\n      return textToReplace.text;\r\n    }\r\n\r\n    return item.key;\r\n  };\r\n\r\n  listeners = [];\r\n\r\n  itemsRef = {};\r\n\r\n  modifyText = (value) => {\r\n    if (!value) return;\r\n\r\n    const { onSelect, getTextToReplace, getSelectedItem } = this.props;\r\n\r\n    onSelect(getTextToReplace(value));\r\n    if (getSelectedItem) {\r\n      getSelectedItem(value);\r\n    }\r\n  };\r\n\r\n  selectItem = (item, keyboard = false) => {\r\n    this.setState({ selectedItem: item }, () => {\r\n      if (keyboard) {\r\n        this.props.dropdownScroll(this.itemsRef[this.getId(item)]);\r\n      }\r\n    });\r\n  };\r\n\r\n  scroll = (e) => {\r\n    if (e && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    const { values } = this.props;\r\n\r\n    const code = e.keyCode || e.which;\r\n\r\n    const oldPosition = this.getPositionInList();\r\n    let newPosition;\r\n    switch (code) {\r\n      case KEY_CODES.DOWN:\r\n        newPosition = oldPosition + 1;\r\n        break;\r\n      case KEY_CODES.UP:\r\n        newPosition = oldPosition - 1;\r\n        break;\r\n      default:\r\n        newPosition = oldPosition;\r\n        break;\r\n    }\r\n\r\n    newPosition =\r\n      ((newPosition % values.length) + values.length) % values.length; // eslint-disable-line\r\n    this.selectItem(\r\n      values[newPosition],\r\n      [KEY_CODES.DOWN, KEY_CODES.UP].includes(code),\r\n    );\r\n  };\r\n\r\n  isSelected = (item) => {\r\n    const { selectedItem } = this.state;\r\n    if (!selectedItem) return false;\r\n\r\n    return this.getId(selectedItem) === this.getId(item);\r\n  };\r\n\r\n  renderHeader = (value) => {\r\n    if (value[0] === '/') {\r\n      return `Commands matching <strong>${value.replace('/', '')}</strong>`;\r\n    }\r\n\r\n    if (value[0] === ':') {\r\n      return `Emoji matching <strong>${value.replace(':', '')}</strong>`;\r\n    }\r\n\r\n    if (value[0] === '@') {\r\n      return `Searching for people`;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      values,\r\n      component,\r\n      style,\r\n      itemClassName,\r\n      className,\r\n      itemStyle,\r\n    } = this.props;\r\n\r\n    return (\r\n      <ul className={`rta__list ${className || ''}`} style={style}>\r\n        <li\r\n          className=\"rta__list-header\"\r\n          dangerouslySetInnerHTML={{\r\n            __html: this.renderHeader(this.props.value),\r\n          }}\r\n        />\r\n        {values.map((item) => (\r\n          <Item\r\n            key={this.getId(item)}\r\n            innerRef={(ref) => {\r\n              this.itemsRef[this.getId(item)] = ref;\r\n            }}\r\n            selected={this.isSelected(item)}\r\n            item={item}\r\n            className={itemClassName}\r\n            style={itemStyle}\r\n            onClickHandler={this.onPressEnter}\r\n            onSelectHandler={this.selectItem}\r\n            component={component}\r\n          />\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","//\r\n\r\nexport function defaultScrollToItem(container, item) {\r\n  const itemHeight = parseInt(\r\n    getComputedStyle(item).getPropertyValue('height'),\r\n    10,\r\n  );\r\n\r\n  const containerHight =\r\n    parseInt(getComputedStyle(container).getPropertyValue('height'), 10) -\r\n    itemHeight;\r\n\r\n  const itemOffsetTop = item.offsetTop;\r\n  const actualScrollTop = container.scrollTop;\r\n\r\n  if (\r\n    itemOffsetTop < actualScrollTop + containerHight &&\r\n    actualScrollTop < itemOffsetTop\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  container.scrollTop = itemOffsetTop;\r\n}\r\n","//\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport getCaretCoordinates from 'textarea-caret';\r\nimport CustomEvent from 'custom-event';\r\n\r\nimport Listeners, { KEY_CODES } from './listener';\r\nimport List from './List';\r\n\r\nimport { defaultScrollToItem } from './utils';\r\n\r\nimport Textarea from 'react-textarea-autosize';\r\n\r\nconst DEFAULT_CARET_POSITION = 'next';\r\n\r\nconst errorMessage = (message) =>\r\n  console.error(\r\n    `RTA: dataProvider fails: ${message}\r\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues`,\r\n  );\r\n\r\nclass ReactTextareaAutocomplete extends React.Component {\r\n  static defaultProps = {\r\n    closeOnClickOutside: true,\r\n    movePopupAsYouType: false,\r\n    value: '',\r\n    minChar: 1,\r\n    scrollToItem: true,\r\n    maxRows: 10,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { loadingComponent, trigger, value } = this.props;\r\n\r\n    // TODO: it would be better to have the parent control state...\r\n    // if (value) this.state.value = value;\r\n\r\n    this._createRegExp();\r\n\r\n    if (!loadingComponent) {\r\n      throw new Error('RTA: loadingComponent is not defined');\r\n    }\r\n\r\n    if (!trigger) {\r\n      throw new Error('RTA: trigger is not defined');\r\n    }\r\n    this.state = {\r\n      top: null,\r\n      left: null,\r\n      currentTrigger: null,\r\n      actualToken: '',\r\n      data: null,\r\n      value: value || '',\r\n      dataLoading: false,\r\n      selectionEnd: 0,\r\n      selectionStart: 0,\r\n      component: null,\r\n      listenerIndex: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    Listeners.add(KEY_CODES.ESC, () => this._closeAutocomplete());\r\n    Listeners.add(KEY_CODES.SPACE, () => this._onSpace());\r\n    const listenerIndex = Listeners.add(KEY_CODES.ENTER, (e) =>\r\n      this._onEnter(e),\r\n    );\r\n    this.setState({\r\n      listenerIndex,\r\n    });\r\n    Listeners.startListen();\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    this._update(nextProps);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Listeners.stopListen();\r\n    Listeners.remove(this.state.listenerIndex);\r\n  }\r\n\r\n  getSelectionPosition = () => {\r\n    if (!this.textareaRef) return null;\r\n\r\n    return {\r\n      selectionStart: this.textareaRef.selectionStart,\r\n      selectionEnd: this.textareaRef.selectionEnd,\r\n    };\r\n  };\r\n\r\n  getSelectedText = () => {\r\n    if (!this.textareaRef) return null;\r\n    const { selectionStart, selectionEnd } = this.textareaRef;\r\n\r\n    if (selectionStart === selectionEnd) return null;\r\n\r\n    return this.state.value.substr(\r\n      selectionStart,\r\n      selectionEnd - selectionStart,\r\n    );\r\n  };\r\n\r\n  setCaretPosition = (position = 0) => {\r\n    if (!this.textareaRef) return;\r\n\r\n    this.textareaRef.focus();\r\n    this.textareaRef.setSelectionRange(position, position);\r\n  };\r\n\r\n  getCaretPosition = () => {\r\n    if (!this.textareaRef) {\r\n      return 0;\r\n    }\r\n\r\n    return this.textareaRef.selectionEnd;\r\n  };\r\n\r\n  // handle the on-enter behaviour\r\n  _onEnter = (event) => {\r\n    const trigger = this.state.currentTrigger;\r\n    if (!this.textareaRef) {\r\n      return;\r\n    }\r\n\r\n    const hasFocus = this.textareaRef.matches(':focus');\r\n\r\n    // don't submit if the element has focus or the shift key is pressed\r\n    if (!hasFocus || event.shiftKey === true) {\r\n      return;\r\n    }\r\n    if (!trigger) {\r\n      // trigger a submit\r\n      this._replaceWord();\r\n      if (this.textareaRef) {\r\n        this.textareaRef.selectionEnd = 0;\r\n      }\r\n      this.props.handleSubmit(event);\r\n    }\r\n  };\r\n\r\n  // handle the on-space behaviour\r\n  _onSpace = () => {\r\n    if (!this.props.replaceWord) {\r\n      return;\r\n    }\r\n\r\n    if (!this.textareaRef) {\r\n      return;\r\n    }\r\n    const hasFocus = this.textareaRef.matches(':focus');\r\n\r\n    // don't change characters if the element doesn't have focus\r\n    if (!hasFocus) {\r\n      return;\r\n    }\r\n    this._replaceWord();\r\n  };\r\n\r\n  _replaceWord = () => {\r\n    const lastWordRegex = /([^\\s]+)(\\s*)$/;\r\n    const { value } = this.state;\r\n    const match = lastWordRegex.exec(value.slice(0, this.getCaretPosition()));\r\n    const lastWord = match && match[1];\r\n    if (!lastWord) {\r\n      return;\r\n    }\r\n    const spaces = match[2];\r\n\r\n    const newWord = this.props.replaceWord(lastWord);\r\n    if (newWord == null) {\r\n      return;\r\n    }\r\n    const textBeforeWord = value.slice(\r\n      0,\r\n      this.getCaretPosition() - match[0].length,\r\n    );\r\n    const textAfterCaret = value.slice(this.getCaretPosition(), -1);\r\n    const newText = textBeforeWord + newWord + spaces + textAfterCaret;\r\n    this.setState(\r\n      {\r\n        value: newText,\r\n      },\r\n      () => {\r\n        // fire onChange event after successful selection\r\n        const e = new CustomEvent('change', { bubbles: true });\r\n        this.textareaRef.dispatchEvent(e);\r\n        if (this.props.onChange) this.props.onChange(e);\r\n      },\r\n    );\r\n  };\r\n\r\n  _onSelect = (newToken) => {\r\n    const { selectionEnd, currentTrigger, value: textareaValue } = this.state;\r\n    const { onChange, trigger } = this.props;\r\n\r\n    if (!currentTrigger) return;\r\n\r\n    const computeCaretPosition = (position, token, startToken) => {\r\n      switch (position) {\r\n        case 'start':\r\n          return startToken;\r\n        case 'next':\r\n        case 'end':\r\n          return startToken + token.length;\r\n        default:\r\n          if (!Number.isInteger(position)) {\r\n            throw new Error(\r\n              'RTA: caretPosition should be \"start\", \"next\", \"end\" or number.',\r\n            );\r\n          }\r\n\r\n          return position;\r\n      }\r\n    };\r\n\r\n    const textToModify = textareaValue.slice(0, selectionEnd);\r\n\r\n    const startOfTokenPosition = textToModify.search(\r\n      /**\r\n       * It's important to escape the currentTrigger char for chars like [, (,...\r\n       */\r\n      new RegExp(\r\n        `\\\\${currentTrigger}${`[^\\\\${currentTrigger}${\r\n          trigger[currentTrigger].allowWhitespace ? '' : '\\\\s'\r\n        }]`}*$`,\r\n      ),\r\n    );\r\n\r\n    // we add space after emoji is selected if a caret position is next\r\n    const newTokenString =\r\n      newToken.caretPosition === 'next' ? `${newToken.text} ` : newToken.text;\r\n\r\n    const newCaretPosition = computeCaretPosition(\r\n      newToken.caretPosition,\r\n      newTokenString,\r\n      startOfTokenPosition,\r\n    );\r\n\r\n    const modifiedText =\r\n      textToModify.substring(0, startOfTokenPosition) + newTokenString;\r\n\r\n    // set the new textarea value and after that set the caret back to its position\r\n    this.setState(\r\n      {\r\n        value: textareaValue.replace(textToModify, modifiedText),\r\n        dataLoading: false,\r\n      },\r\n      () => {\r\n        // fire onChange event after successful selection\r\n        const e = new CustomEvent('change', { bubbles: true });\r\n        this.textareaRef.dispatchEvent(e);\r\n        if (onChange) onChange(e);\r\n\r\n        this.setCaretPosition(newCaretPosition);\r\n      },\r\n    );\r\n    this._closeAutocomplete();\r\n  };\r\n\r\n  _getItemOnSelect = () => {\r\n    const { currentTrigger } = this.state;\r\n    const triggerSettings = this._getCurrentTriggerSettings();\r\n\r\n    if (!currentTrigger || !triggerSettings) return null;\r\n\r\n    const { callback } = triggerSettings;\r\n\r\n    if (!callback) return null;\r\n\r\n    return (item) => {\r\n      if (typeof callback !== 'function') {\r\n        throw new Error(\r\n          'Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\r\n        );\r\n      }\r\n      if (callback) {\r\n        return callback(item, currentTrigger);\r\n      }\r\n      return null;\r\n    };\r\n  };\r\n\r\n  _getTextToReplace = () => {\r\n    const { currentTrigger, actualToken } = this.state;\r\n    const triggerSettings = this._getCurrentTriggerSettings();\r\n\r\n    if (!currentTrigger || !triggerSettings) return null;\r\n\r\n    const { output } = triggerSettings;\r\n\r\n    return (item) => {\r\n      if (\r\n        typeof item === 'object' &&\r\n        (!output || typeof output !== 'function')\r\n      ) {\r\n        throw new Error(\r\n          'Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\r\n        );\r\n      }\r\n\r\n      if (output) {\r\n        const textToReplace = output(item, currentTrigger);\r\n\r\n        if (!textToReplace || typeof textToReplace === 'number') {\r\n          throw new Error(\r\n            `Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \"${String(\r\n              textToReplace,\r\n            )}\". Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n`,\r\n          );\r\n        }\r\n\r\n        if (typeof textToReplace === 'string') {\r\n          return {\r\n            text: textToReplace,\r\n            caretPosition: DEFAULT_CARET_POSITION,\r\n          };\r\n        }\r\n\r\n        if (!textToReplace.text) {\r\n          throw new Error(\r\n            `Output \"text\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\r\n          );\r\n        }\r\n\r\n        if (!textToReplace.caretPosition) {\r\n          throw new Error(\r\n            `Output \"caretPosition\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\r\n          );\r\n        }\r\n\r\n        return textToReplace;\r\n      }\r\n\r\n      if (typeof item !== 'string') {\r\n        throw new Error('Output item should be string\\n');\r\n      }\r\n\r\n      return {\r\n        text: `${currentTrigger}${item}${currentTrigger}`,\r\n        caretPosition: DEFAULT_CARET_POSITION,\r\n      };\r\n    };\r\n  };\r\n\r\n  _getCurrentTriggerSettings = () => {\r\n    const { currentTrigger } = this.state;\r\n\r\n    if (!currentTrigger) return null;\r\n\r\n    return this.props.trigger[currentTrigger];\r\n  };\r\n\r\n  _getValuesFromProvider = () => {\r\n    const { currentTrigger, actualToken } = this.state;\r\n    const triggerSettings = this._getCurrentTriggerSettings();\r\n\r\n    if (!currentTrigger || !triggerSettings) {\r\n      return;\r\n    }\r\n\r\n    const { dataProvider, component } = triggerSettings;\r\n\r\n    if (typeof dataProvider !== 'function') {\r\n      throw new Error('Trigger provider has to be a function!');\r\n    }\r\n\r\n    this.setState({\r\n      dataLoading: true,\r\n    });\r\n\r\n    // Modified: send the full text to support / style commands\r\n    let providedData = dataProvider(actualToken, this.state.value);\r\n\r\n    if (!(providedData instanceof Promise)) {\r\n      providedData = Promise.resolve(providedData);\r\n    }\r\n\r\n    providedData\r\n      .then((data) => {\r\n        if (!Array.isArray(data)) {\r\n          throw new Error('Trigger provider has to provide an array!');\r\n        }\r\n\r\n        if (typeof component !== 'function') {\r\n          throw new Error('Component should be defined!');\r\n        }\r\n\r\n        // throw away if we resolved old trigger\r\n        if (currentTrigger !== this.state.currentTrigger) return;\r\n\r\n        // if we haven't resolved any data let's close the autocomplete\r\n        if (!data.length) {\r\n          this._closeAutocomplete();\r\n          return;\r\n        }\r\n\r\n        this.setState({\r\n          dataLoading: false,\r\n          data,\r\n          component,\r\n        });\r\n      })\r\n      .catch((e) => errorMessage(e.message));\r\n  };\r\n\r\n  _getSuggestions = () => {\r\n    const { currentTrigger, data } = this.state;\r\n\r\n    if (!currentTrigger || !data || (data && !data.length)) return null;\r\n\r\n    return data;\r\n  };\r\n\r\n  _createRegExp = () => {\r\n    const { trigger } = this.props;\r\n\r\n    // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\r\n    // https://stackoverflow.com/a/8057827/2719917\r\n    this.tokenRegExp = new RegExp(\r\n      `([${Object.keys(trigger).join('')}])(?:(?!\\\\1)[^\\\\s])*$`,\r\n    );\r\n  };\r\n\r\n  // TODO: This is an anti pattern in react, should come up with a better way\r\n  _update({ value, trigger }) {\r\n    const { value: oldValue } = this.state;\r\n    const { trigger: oldTrigger } = this.props;\r\n\r\n    if (value !== oldValue || !oldValue) this.setState({ value });\r\n    /**\r\n     * check if trigger chars are changed, if so, change the regexp accordingly\r\n     */\r\n    if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\r\n      this._createRegExp();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close autocomplete, also clean up trigger (to avoid slow promises)\r\n   */\r\n  _closeAutocomplete = () => {\r\n    this.setState({\r\n      data: null,\r\n      dataLoading: false,\r\n      currentTrigger: null,\r\n      top: null,\r\n      left: null,\r\n    });\r\n  };\r\n\r\n  _cleanUpProps = () => {\r\n    const props = { ...this.props };\r\n    const notSafe = [\r\n      'loadingComponent',\r\n      'containerStyle',\r\n      'minChar',\r\n      'scrollToItem',\r\n      'ref',\r\n      'innerRef',\r\n      'onChange',\r\n      'onCaretPositionChange',\r\n      'className',\r\n      'value',\r\n      'trigger',\r\n      'listStyle',\r\n      'itemStyle',\r\n      'containerStyle',\r\n      'loaderStyle',\r\n      'className',\r\n      'containerClassName',\r\n      'listClassName',\r\n      'itemClassName',\r\n      'loaderClassName',\r\n      'closeOnClickOutside',\r\n      'dropdownStyle',\r\n      'dropdownClassName',\r\n      'movePopupAsYouType',\r\n      'handleSubmit',\r\n      'replaceWord',\r\n      'grow',\r\n    ];\r\n\r\n    // eslint-disable-next-line\r\n    for (const prop in props) {\r\n      if (notSafe.includes(prop)) delete props[prop];\r\n    }\r\n\r\n    return props;\r\n  };\r\n\r\n  _changeHandler = (e) => {\r\n    const {\r\n      trigger,\r\n      onChange,\r\n      minChar,\r\n      onCaretPositionChange,\r\n      movePopupAsYouType,\r\n    } = this.props;\r\n    const { top, left } = this.state;\r\n\r\n    const textarea = e.target;\r\n    const { selectionEnd, selectionStart } = textarea;\r\n    const value = textarea.value;\r\n\r\n    if (onChange) {\r\n      e.persist();\r\n      onChange(e);\r\n    }\r\n\r\n    if (onCaretPositionChange) {\r\n      const caretPosition = this.getCaretPosition();\r\n      onCaretPositionChange(caretPosition);\r\n    }\r\n\r\n    this.setState({\r\n      value,\r\n    });\r\n\r\n    let tokenMatch = this.tokenRegExp.exec(value.slice(0, selectionEnd));\r\n    let lastToken = tokenMatch && tokenMatch[0];\r\n\r\n    let currentTrigger =\r\n      (lastToken && Object.keys(trigger).find((a) => a === lastToken[0])) ||\r\n      null;\r\n\r\n    /*\r\n     if we lost the trigger token or there is no following character we want to close\r\n     the autocomplete\r\n    */\r\n    if (\r\n      (!lastToken || lastToken.length <= minChar) &&\r\n      // check if our current trigger disallows whitespace\r\n      ((this.state.currentTrigger &&\r\n        !trigger[this.state.currentTrigger].allowWhitespace) ||\r\n        !this.state.currentTrigger)\r\n    ) {\r\n      this._closeAutocomplete();\r\n      return;\r\n    }\r\n\r\n    /**\r\n     * This code has to be sync that is the reason why we obtain the currentTrigger\r\n     * from currentTrigger not this.state.currentTrigger\r\n     *\r\n     * Check if the currently typed token has to be afterWhitespace, or not.\r\n     */\r\n    if (\r\n      currentTrigger &&\r\n      value[tokenMatch.index - 1] &&\r\n      trigger[currentTrigger].afterWhitespace &&\r\n      !value[tokenMatch.index - 1].match(/\\s/)\r\n    ) {\r\n      this._closeAutocomplete();\r\n      return;\r\n    }\r\n\r\n    /**\r\n      If our current trigger allows whitespace\r\n      get the correct token for DataProvider, so we need to construct new RegExp\r\n     */\r\n    if (\r\n      this.state.currentTrigger &&\r\n      trigger[this.state.currentTrigger].allowWhitespace\r\n    ) {\r\n      tokenMatch = new RegExp(\r\n        `\\\\${this.state.currentTrigger}[^${this.state.currentTrigger}]*$`,\r\n      ).exec(value.slice(0, selectionEnd));\r\n      lastToken = tokenMatch && tokenMatch[0];\r\n\r\n      if (!lastToken) {\r\n        this._closeAutocomplete();\r\n        return;\r\n      }\r\n\r\n      currentTrigger =\r\n        Object.keys(trigger).find((a) => a === lastToken[0]) || null;\r\n    }\r\n\r\n    const actualToken = lastToken.slice(1);\r\n\r\n    // if trigger is not configured step out from the function, otherwise proceed\r\n    if (!currentTrigger) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      movePopupAsYouType ||\r\n      (top === null && left === null) ||\r\n      // if we have single char - trigger it means we want to re-position the autocomplete\r\n      lastToken.length === 1\r\n    ) {\r\n      const { top: newTop, left: newLeft } = getCaretCoordinates(\r\n        textarea,\r\n        selectionEnd,\r\n      );\r\n\r\n      this.setState({\r\n        // make position relative to textarea\r\n        top: newTop - this.textareaRef.scrollTop || 0,\r\n        left: newLeft,\r\n      });\r\n    }\r\n\r\n    this.setState(\r\n      {\r\n        selectionEnd,\r\n        selectionStart,\r\n        currentTrigger,\r\n        actualToken,\r\n      },\r\n      () => {\r\n        try {\r\n          this._getValuesFromProvider();\r\n        } catch (err) {\r\n          errorMessage(err.message);\r\n        }\r\n      },\r\n    );\r\n  };\r\n\r\n  _selectHandler = (e) => {\r\n    const { onCaretPositionChange, onSelect } = this.props;\r\n\r\n    if (onCaretPositionChange) {\r\n      const caretPosition = this.getCaretPosition();\r\n      onCaretPositionChange(caretPosition);\r\n    }\r\n\r\n    if (onSelect) {\r\n      e.persist();\r\n      onSelect(e);\r\n    }\r\n  };\r\n\r\n  _onClickAndBlurHandler = (e) => {\r\n    const { closeOnClickOutside, onBlur } = this.props;\r\n\r\n    // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\r\n    // that was actually clicked. If we clicked inside the autoselect dropdown, then\r\n    // that's not a blur, from the autoselect's point of view, so then do nothing.\r\n    const el = e.relatedTarget;\r\n    if (\r\n      this.dropdownRef &&\r\n      el instanceof Node &&\r\n      this.dropdownRef.contains(el)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (closeOnClickOutside) {\r\n      this._closeAutocomplete();\r\n    }\r\n\r\n    if (onBlur) {\r\n      e.persist();\r\n      onBlur(e);\r\n    }\r\n  };\r\n\r\n  _onScrollHandler = () => {\r\n    this._closeAutocomplete();\r\n  };\r\n\r\n  _dropdownScroll = (item) => {\r\n    const { scrollToItem } = this.props;\r\n\r\n    if (!scrollToItem) return;\r\n\r\n    if (scrollToItem === true) {\r\n      defaultScrollToItem(this.dropdownRef, item);\r\n      return;\r\n    }\r\n\r\n    if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\r\n      throw new Error(\r\n        '`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.',\r\n      );\r\n    }\r\n\r\n    scrollToItem(this.dropdownRef, item);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      loadingComponent: Loader,\r\n      style,\r\n      className,\r\n      itemStyle,\r\n      listClassName,\r\n      itemClassName,\r\n      dropdownClassName,\r\n      dropdownStyle,\r\n      containerStyle,\r\n      containerClassName,\r\n      loaderStyle,\r\n      loaderClassName,\r\n    } = this.props;\r\n    const { dataLoading, currentTrigger, component, value } = this.state;\r\n\r\n    const suggestionData = this._getSuggestions();\r\n    const textToReplace = this._getTextToReplace();\r\n    const selectedItem = this._getItemOnSelect();\r\n\r\n    let maxRows = this.props.maxRows;\r\n    if (!this.props.grow) {\r\n      maxRows = 1;\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={`rta ${\r\n          dataLoading === true ? 'rta--loading' : ''\r\n        } ${containerClassName || ''}`}\r\n        style={containerStyle}\r\n      >\r\n        {(dataLoading || suggestionData) && currentTrigger && (\r\n          <div\r\n            ref={(ref) => {\r\n              // $FlowFixMe\r\n              this.dropdownRef = ref;\r\n            }}\r\n            style={{ ...dropdownStyle }}\r\n            className={`rta__autocomplete ${dropdownClassName || ''}`}\r\n          >\r\n            {suggestionData && component && textToReplace && (\r\n              <List\r\n                value={value}\r\n                values={suggestionData}\r\n                component={component}\r\n                className={listClassName}\r\n                itemClassName={itemClassName}\r\n                itemStyle={itemStyle}\r\n                getTextToReplace={textToReplace}\r\n                getSelectedItem={selectedItem}\r\n                onSelect={this._onSelect}\r\n                dropdownScroll={this._dropdownScroll}\r\n              />\r\n            )}\r\n            {dataLoading && (\r\n              <div\r\n                className={`rta__loader ${\r\n                  suggestionData !== null\r\n                    ? 'rta__loader--suggestion-data'\r\n                    : 'rta__loader--empty-suggestion-data'\r\n                } ${loaderClassName || ''}`}\r\n                style={loaderStyle}\r\n              >\r\n                <Loader data={suggestionData} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        <Textarea\r\n          {...this._cleanUpProps()}\r\n          inputRef={(ref) => {\r\n            this.props.innerRef && this.props.innerRef(ref);\r\n            this.textareaRef = ref;\r\n          }}\r\n          maxRows={maxRows}\r\n          className={`rta__textarea ${className || ''}`}\r\n          onChange={this._changeHandler}\r\n          onSelect={this._selectHandler}\r\n          onScroll={this._onScrollHandler}\r\n          onClick={\r\n            // The textarea itself is outside the autoselect dropdown.\r\n            this._onClickAndBlurHandler\r\n          }\r\n          onBlur={this._onClickAndBlurHandler}\r\n          onFocus={this.props.onFocus}\r\n          value={value}\r\n          style={style}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst triggerPropsCheck = ({ trigger }) => {\r\n  if (!trigger) return Error('Invalid prop trigger. Prop missing.');\r\n\r\n  const triggers = Object.entries(trigger);\r\n\r\n  for (let i = 0; i < triggers.length; i += 1) {\r\n    const [triggerChar, settings] = triggers[i];\r\n\r\n    if (typeof triggerChar !== 'string' || triggerChar.length !== 1) {\r\n      return Error(\r\n        'Invalid prop trigger. Keys of the object has to be string / one character.',\r\n      );\r\n    }\r\n\r\n    // $FlowFixMe\r\n    const triggerSetting = settings;\r\n\r\n    const {\r\n      component,\r\n      dataProvider,\r\n      output,\r\n      callback,\r\n      afterWhitespace,\r\n      allowWhitespace,\r\n    } = triggerSetting;\r\n\r\n    if (!component || typeof component !== 'function') {\r\n      return Error('Invalid prop trigger: component should be defined.');\r\n    }\r\n\r\n    if (!dataProvider || typeof dataProvider !== 'function') {\r\n      return Error('Invalid prop trigger: dataProvider should be defined.');\r\n    }\r\n\r\n    if (output && typeof output !== 'function') {\r\n      return Error('Invalid prop trigger: output should be a function.');\r\n    }\r\n\r\n    if (callback && typeof callback !== 'function') {\r\n      return Error('Invalid prop trigger: callback should be a function.');\r\n    }\r\n\r\n    if (afterWhitespace && allowWhitespace) {\r\n      return Error(\r\n        'Invalid prop trigger: afterWhitespace and allowWhitespace can be used together',\r\n      );\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nReactTextareaAutocomplete.propTypes = {\r\n  loadingComponent: PropTypes.func.isRequired,\r\n  minChar: PropTypes.number,\r\n  onChange: PropTypes.func,\r\n  onSelect: PropTypes.func,\r\n  onBlur: PropTypes.func,\r\n  onCaretPositionChange: PropTypes.func,\r\n  className: PropTypes.string,\r\n  containerStyle: PropTypes.object,\r\n  containerClassName: PropTypes.string,\r\n  closeOnClickOutside: PropTypes.bool,\r\n  style: PropTypes.object,\r\n  listStyle: PropTypes.object,\r\n  itemStyle: PropTypes.object,\r\n  loaderStyle: PropTypes.object,\r\n  dropdownStyle: PropTypes.object,\r\n  listClassName: PropTypes.string,\r\n  itemClassName: PropTypes.string,\r\n  loaderClassName: PropTypes.string,\r\n  dropdownClassName: PropTypes.string,\r\n  value: PropTypes.string,\r\n  trigger: triggerPropsCheck, //eslint-disable-line\r\n};\r\n\r\nexport default ReactTextareaAutocomplete;\r\n","import React, { PureComponent } from 'react';\r\n\r\nexport class EmoticonItem extends PureComponent {\r\n  render() {\r\n    return (\r\n      <div className=\"str-chat__emoji-item\">\r\n        <span className=\"str-chat__emoji-item--entity\">\r\n          {this.props.entity.native}\r\n        </span>\r\n        <span className=\"str-chat__emoji-item--name\">\r\n          {this.props.entity.name}\r\n        </span>\r\n        <span className=\"str-chat__emoji-item--char\">\r\n          {this.props.entity.char}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { Avatar } from './Avatar';\r\n\r\nexport class UserItem extends PureComponent {\r\n  render() {\r\n    const u = this.props.entity;\r\n    return (\r\n      <div className=\"str-chat__user-item\">\r\n        <Avatar size={20} image={u.image} />\r\n        <div>\r\n          <strong>{u.name}</strong> {!u.name ? u.id : ''}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\n\r\nexport class CommandItem extends PureComponent {\r\n  render() {\r\n    const c = this.props.entity;\r\n\r\n    return (\r\n      <div className=\"str-chat__slash-command\">\r\n        <span className=\"str-chat__slash-command-header\">\r\n          <strong>{c.name}</strong> {c.args}\r\n        </span>\r\n        <br />\r\n        <span className=\"str-chat__slash-command-description\">\r\n          {c.description}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport AutoCompleteTextarea from './AutoCompleteTextarea';\r\nimport { LoadingIndicator } from './LoadingIndicator';\r\n\r\n// import '@webscopeio/react-textarea-autocomplete/style.css';\r\nimport { emojiIndex } from 'emoji-mart';\r\n\r\nimport { EmoticonItem } from './EmoticonItem';\r\nimport { UserItem } from './UserItem';\r\nimport { CommandItem } from './CommandItem';\r\n/**\r\n * Textarea component with included autocomplete options. You can set your own commands and\r\n * @example ./docs/ChatAutoComplete.md\r\n */\r\nexport class ChatAutoComplete extends PureComponent {\r\n  static propTypes = {\r\n    /** The number of rows you want the textarea to have */\r\n    rows: PropTypes.number,\r\n    /** Grow the number of rows of the textarea while you're typing */\r\n    grow: PropTypes.bool,\r\n    /** Maximum number of rows */\r\n    maxRows: PropTypes.number,\r\n    /** Make the textarea disabled */\r\n    disabled: PropTypes.bool,\r\n    /** The value of the textarea */\r\n    value: PropTypes.string,\r\n    /** Function to run on pasting within the textarea */\r\n    onPaste: PropTypes.func,\r\n    /** Function that runs on submit */\r\n    handleSubmit: PropTypes.func,\r\n    /** Function that runs on change */\r\n    onChange: PropTypes.func,\r\n    /** Placeholder for the textare */\r\n    placeholder: PropTypes.string,\r\n    /** What loading component to use for the auto complete when loading results. */\r\n    LoadingIndicator: PropTypes.node,\r\n    /** function to set up your triggers for autocomplete(eg. '@' for mentions, '/' for commands) */\r\n    trigger: PropTypes.func,\r\n    /** Minimum number of Character */\r\n    minChar: PropTypes.number,\r\n    /** Array of [user object](https://getstream.io/chat/docs/#chat-doc-set-user). Used for mentions suggestions */\r\n    users: PropTypes.array,\r\n    /**\r\n     * Handler for selecting item from suggestions list\r\n     *\r\n     * @param item Selected item object.\r\n     *  */\r\n    onSelectItem: PropTypes.func,\r\n    /** Array of [commands](https://getstream.io/chat/docs/#channel_commands) */\r\n    commands: PropTypes.array,\r\n    /** Listener for onfocus event on textarea */\r\n    onFocus: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    rows: 3,\r\n  };\r\n\r\n  getTriggers() {\r\n    return {\r\n      ':': {\r\n        dataProvider: (q) => {\r\n          if (q.length === 0 || q.charAt(0).match(/[^a-zA-Z0-9+-]/)) {\r\n            return [];\r\n          }\r\n          const emojis = emojiIndex.search(q) || [];\r\n          return emojis.slice(0, 10);\r\n        },\r\n        component: EmoticonItem,\r\n        output: (entity) => ({\r\n          key: entity.id,\r\n          text: `${entity.native}`,\r\n          caretPosition: 'next',\r\n        }),\r\n      },\r\n      '@': {\r\n        dataProvider: (q) => {\r\n          const matchingUsers = this.props.users.filter((user) => {\r\n            if (\r\n              user.name !== undefined &&\r\n              user.name.toLowerCase().indexOf(q.toLowerCase()) !== -1\r\n            ) {\r\n              return true;\r\n            } else if (user.id.toLowerCase().indexOf(q.toLowerCase()) !== -1) {\r\n              return true;\r\n            } else {\r\n              return false;\r\n            }\r\n          });\r\n          return matchingUsers.slice(0, 10);\r\n        },\r\n        component: UserItem,\r\n        output: (entity) => ({\r\n          key: entity.id,\r\n          text: `@${entity.name || entity.id}`,\r\n          caretPosition: 'next',\r\n        }),\r\n        callback: (item) => this.props.onSelectItem(item),\r\n      },\r\n      '/': {\r\n        dataProvider: (q, text) => {\r\n          if (text.indexOf('/') !== 0) {\r\n            return [];\r\n          }\r\n          const selectedCommands = this.props.commands.filter(\r\n            (c) => c.name.indexOf(q) !== -1,\r\n          );\r\n\r\n          // sort alphabetically unless the you're matching the first char\r\n          selectedCommands.sort((a, b) => {\r\n            let nameA = a.name.toLowerCase();\r\n            let nameB = b.name.toLowerCase();\r\n            if (nameA.indexOf(q) === 0) {\r\n              nameA = `0${nameA}`;\r\n            }\r\n            if (nameB.indexOf(q) === 0) {\r\n              nameB = `0${nameB}`;\r\n            }\r\n            if (nameA < nameB) {\r\n              return -1;\r\n            }\r\n            if (nameA > nameB) {\r\n              return 1;\r\n            }\r\n\r\n            return 0;\r\n          });\r\n\r\n          return selectedCommands.slice(0, 10);\r\n        },\r\n        component: CommandItem,\r\n        output: (entity) => ({\r\n          key: entity.id,\r\n          text: `/${entity.name}`,\r\n          caretPosition: 'next',\r\n        }),\r\n      },\r\n    };\r\n  }\r\n\r\n  emojiReplace(word) {\r\n    const found = emojiIndex.search(word) || [];\r\n    for (const emoji of found.slice(0, 10)) {\r\n      if (emoji.emoticons.includes(word)) {\r\n        return emoji.native;\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { innerRef } = this.props;\r\n    return (\r\n      <AutoCompleteTextarea\r\n        loadingComponent={LoadingIndicator}\r\n        trigger={this.getTriggers()}\r\n        replaceWord={this.emojiReplace}\r\n        minChar={0}\r\n        maxRows={this.props.maxRows}\r\n        innerRef={\r\n          innerRef &&\r\n          ((ref) => {\r\n            innerRef.current = ref;\r\n          })\r\n        }\r\n        onFocus={this.props.onFocus}\r\n        rows={this.props.rows}\r\n        className=\"str-chat__textarea__textarea\"\r\n        containerClassName=\"str-chat__textarea\"\r\n        dropdownClassName=\"str-chat__emojisearch\"\r\n        listClassName=\"str-chat__emojisearch__list\"\r\n        itemClassName=\"str-chat__emojisearch__item\"\r\n        placeholder={this.props.placeholder}\r\n        onChange={this.props.onChange}\r\n        handleSubmit={this.props.handleSubmit}\r\n        onPaste={this.props.onPaste}\r\n        value={this.props.value}\r\n        grow={this.props.grow}\r\n        disabled={this.props.disabled}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ChatAutoComplete } from './ChatAutoComplete';\r\nimport { formatTypingArray } from '../utils';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n\r\nimport {\r\n  ImageDropzone,\r\n  ImagePreviewer,\r\n  FilePreviewer,\r\n  FileUploadButton,\r\n} from 'react-file-utils';\r\n\r\nimport { Picker } from 'emoji-mart';\r\n\r\n/**\r\n * MessageInputLarge - Large Message Input to be used for the MessageInput.\r\n * @example ./docs/MessageInputLarge.md\r\n */\r\nclass MessageInputLarge extends PureComponent {\r\n  static propTypes = {\r\n    /** Set focus to the text input if this is enabled */\r\n    focus: PropTypes.bool.isRequired,\r\n    /** Grow the textarea while you're typing */\r\n    grow: PropTypes.bool.isRequired,\r\n    /** Specify the max amount of rows the textarea is able to grow */\r\n    maxRows: PropTypes.number.isRequired,\r\n    /** Make the textarea disabled */\r\n    disabled: PropTypes.bool,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    imageOrder: PropTypes.array,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    imageUploads: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    removeImage: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadImage: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadNewFiles: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    numberOfUploads: PropTypes.number,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    fileOrder: PropTypes.array,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    fileUploads: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    removeFile: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadFile: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    emojiPickerIsOpen: PropTypes.bool,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    emojiPickerRef: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onSelectEmoji: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    getUsers: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    getCommands: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    textareaRef: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    handleSubmit: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    handleChange: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onSelectItem: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    text: PropTypes.string,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onPaste: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    openEmojiPicker: PropTypes.func,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    watcher_count: PropTypes.number,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    typing: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    multipleUploads: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    maxNumberOfFiles: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    acceptedFiles: PropTypes.object,\r\n  };\r\n\r\n  renderUploads = () => (\r\n    <>\r\n      {this.props.imageOrder.length > 0 && (\r\n        <ImagePreviewer\r\n          imageUploads={this.props.imageOrder.map(\r\n            (id) => this.props.imageUploads[id],\r\n          )}\r\n          handleRemove={this.props.removeImage}\r\n          handleRetry={this.props.uploadImage}\r\n          handleFiles={this.props.uploadNewFiles}\r\n          multiple={this.props.multipleUploads}\r\n          disabled={\r\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n              ? true\r\n              : false\r\n          }\r\n        />\r\n      )}\r\n      {this.props.fileOrder.length > 0 && (\r\n        <FilePreviewer\r\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\r\n          handleRemove={this.props.removeFile}\r\n          handleRetry={this.props.uploadFile}\r\n          handleFiles={this.props.uploadNewFiles}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n\r\n  renderEmojiPicker = () => {\r\n    if (this.props.emojiPickerIsOpen) {\r\n      return (\r\n        <div\r\n          className=\"str-chat__input--emojipicker\"\r\n          ref={this.props.emojiPickerRef}\r\n        >\r\n          <Picker\r\n            native\r\n            emoji=\"point_up\"\r\n            title=\"Pick your emoji\"\r\n            onSelect={this.props.onSelectEmoji}\r\n            color=\"#006CFF\"\r\n            showPreview={false}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { intl } = this.props;\r\n    const SendButton = this.props.SendButton;\r\n    return (\r\n      <div className=\"str-chat__input-large\">\r\n        <ImageDropzone\r\n          accept={this.props.acceptedFiles}\r\n          multiple={this.props.multipleUploads}\r\n          disabled={\r\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n              ? true\r\n              : false\r\n          }\r\n          handleFiles={this.props.uploadNewFiles}\r\n        >\r\n          <div className=\"str-chat__input\">\r\n            {this.renderUploads()}\r\n            {this.renderEmojiPicker()}\r\n            <div className=\"str-chat__input--textarea-wrapper\">\r\n              <ChatAutoComplete\r\n                users={this.props.getUsers()}\r\n                commands={this.props.getCommands()}\r\n                innerRef={this.props.textareaRef}\r\n                handleSubmit={(e) => this.props.handleSubmit(e)}\r\n                onChange={this.props.handleChange}\r\n                onSelectItem={this.props.onSelectItem}\r\n                value={this.props.text}\r\n                rows={1}\r\n                maxRows={this.props.maxRows}\r\n                placeholder={intl.formatMessage({\r\n                  id: 'message_input.placeholder',\r\n                  defaultMessage: 'Type your message',\r\n                })}\r\n                onPaste={this.props.onPaste}\r\n                grow={this.props.grow}\r\n                disabled={this.props.disabled}\r\n              />\r\n\r\n              <span\r\n                className=\"str-chat__input-emojiselect\"\r\n                onClick={this.props.openEmojiPicker}\r\n              >\r\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path\r\n                    d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\r\n                    fillRule=\"evenodd\"\r\n                  />\r\n                </svg>\r\n              </span>\r\n\r\n              <FileUploadButton\r\n                multiple={this.props.multipleUploads}\r\n                disabled={\r\n                  this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n                    ? true\r\n                    : false\r\n                }\r\n                accepts={this.props.acceptedFiles}\r\n                handleFiles={this.props.uploadNewFiles}\r\n              >\r\n                <span className=\"str-chat__input-fileupload\">\r\n                  <svg\r\n                    width=\"14\"\r\n                    height=\"14\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\r\n                      fillRule=\"nonzero\"\r\n                    />\r\n                  </svg>\r\n                </span>\r\n              </FileUploadButton>\r\n              {SendButton && (\r\n                <SendButton sendMessage={this.props.handleSubmit} />\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div className=\"str-chat__input-footer\">\r\n              <span\r\n                className={`str-chat__input-footer--count ${\r\n                  !this.props.watcher_count\r\n                    ? 'str-chat__input-footer--count--hidden'\r\n                    : ''\r\n                }`}\r\n              >\r\n                <FormattedMessage\r\n                  id=\"message_input.watching\"\r\n                  defaultMessage=\"{count} online\"\r\n                  values={{ count: this.props.watcher_count }}\r\n                />\r\n              </span>\r\n              <span className=\"str-chat__input-footer--typing\">\r\n                {formatTypingArray(intl, this.props.typing)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </ImageDropzone>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMessageInputLarge = injectIntl(MessageInputLarge);\r\nexport { MessageInputLarge };\r\n","import React from 'react';\r\nexport const SendButton = ({ sendMessage }) => (\r\n  <button className=\"str-chat__send-button\" onClick={sendMessage}>\r\n\r\n  </button>\r\n);\r\n","import React, { PureComponent } from 'react';\r\nimport { withChannelContext } from '../context';\r\nimport PropTypes from 'prop-types';\r\nimport { MessageInputLarge } from './MessageInputLarge';\r\nimport { SendButton } from './SendButton';\r\nimport Immutable from 'seamless-immutable';\r\nimport { generateRandomId } from '../utils';\r\nimport uniq from 'lodash/uniq';\r\nimport {\r\n  dataTransferItemsHaveFiles,\r\n  dataTransferItemsToFiles,\r\n} from 'react-file-utils';\r\nimport { logChatPromiseExecution } from 'stream-chat';\r\n\r\n// polyfill for IE11 to make MessageInput functional\r\nif (!Element.prototype.matches) {\r\n  Element.prototype.matches =\r\n    Element.prototype.msMatchesSelector ||\r\n    Element.prototype.webkitMatchesSelector;\r\n}\r\n\r\n/**\r\n * MessageInput - Input a new message, support for all the rich features such as image uploads, @mentions, emoticons etc.\r\n * @example ./docs/MessageInput.md\r\n * @extends PureComponent\r\n */\r\nclass MessageInput extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const imageOrder = [];\r\n    const imageUploads = {};\r\n    const fileOrder = [];\r\n    const fileUploads = {};\r\n    const attachments = [];\r\n    const mentioned_users = [];\r\n    let text = '';\r\n    if (props.message) {\r\n      text = props.message.text;\r\n      for (const attach of props.message.attachments) {\r\n        if (attach.type === 'image') {\r\n          const id = generateRandomId();\r\n          imageOrder.push(id);\r\n          imageUploads[id] = {\r\n            id,\r\n            url: attach.image_url,\r\n            state: 'finished',\r\n            file: { name: attach.fallback },\r\n          };\r\n        } else if (attach.type === 'file') {\r\n          const id = generateRandomId();\r\n          fileOrder.push(id);\r\n          fileUploads[id] = {\r\n            id,\r\n            url: attach.asset_url,\r\n            state: 'finished',\r\n            file: {\r\n              name: attach.title,\r\n              type: attach.mime_type,\r\n              size: attach.file_size,\r\n            },\r\n          };\r\n        } else {\r\n          attachments.push(attach);\r\n        }\r\n      }\r\n      for (const mention of props.message.mentioned_users) {\r\n        mentioned_users.push(mention.id);\r\n      }\r\n    }\r\n\r\n    this.state = {\r\n      text,\r\n      attachments,\r\n      imageOrder,\r\n      imageUploads: Immutable(imageUploads),\r\n      fileOrder,\r\n      fileUploads: Immutable(fileUploads),\r\n      emojiPickerIsOpen: false,\r\n      filePanelIsOpen: false,\r\n      mentioned_users,\r\n      numberOfUploads: 0,\r\n    };\r\n\r\n    this.textareaRef = React.createRef();\r\n    this.emojiPickerRef = React.createRef();\r\n    this.panelRef = React.createRef();\r\n  }\r\n\r\n  static propTypes = {\r\n    /** Set focus to the text input if this is enabled */\r\n    focus: PropTypes.bool.isRequired,\r\n    /** Disable input */\r\n    disabled: PropTypes.bool.isRequired,\r\n    /** Grow the textarea while you're typing */\r\n    grow: PropTypes.bool.isRequired,\r\n    /** Set the maximum number of rows */\r\n    maxRows: PropTypes.number.isRequired,\r\n    /** Via Context: the channel that we're sending the message to */\r\n    channel: PropTypes.object.isRequired,\r\n    /** Via Context: the users currently typing, passed from the Channel component */\r\n    typing: PropTypes.object.isRequired,\r\n\r\n    // /** Set textarea to be disabled */\r\n    // disabled: PropTypes.bool,\r\n\r\n    /** The parent message object when replying on a thread */\r\n    parent: PropTypes.object,\r\n\r\n    /**\r\n     * The component handling how the input is rendered\r\n     *\r\n     * Available built-in components (also accepts the same props as):\r\n     *\r\n     * 1. [MessageInputSmall](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInputSmall.js)\r\n     * 2. [MessageInputLarge](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInputLarge.js) (default)\r\n     * 3. [MessageInputFlat](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInputFlat.js)\r\n     *\r\n     * */\r\n    Input: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n\r\n    /** Override image upload request */\r\n    doImageUploadRequest: PropTypes.func,\r\n\r\n    /** Override file upload request */\r\n    doFileUploadRequest: PropTypes.func,\r\n    /**\r\n     * Custom UI component for send button.\r\n     *\r\n     * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\r\n     * */\r\n    SendButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n  };\r\n\r\n  static defaultProps = {\r\n    focus: false,\r\n    disabled: false,\r\n    grow: true,\r\n    maxRows: 10,\r\n    Input: MessageInputLarge,\r\n    SendButton,\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.focus) {\r\n      this.textareaRef.current.focus();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('click', this.closeEmojiPicker, false);\r\n    document.removeEventListener('click', this.hideFilePanel, false);\r\n  }\r\n\r\n  openEmojiPicker = () => {\r\n    if (!this.state.showEmojiPicker) {\r\n      this.setState(\r\n        () => ({\r\n          emojiPickerIsOpen: true,\r\n        }),\r\n        () => {\r\n          document.addEventListener('click', this.closeEmojiPicker, false);\r\n        },\r\n      );\r\n    }\r\n  };\r\n\r\n  closeEmojiPicker = (e) => {\r\n    if (\r\n      this.emojiPickerRef.current &&\r\n      !this.emojiPickerRef.current.contains(e.target)\r\n    ) {\r\n      this.setState(\r\n        {\r\n          emojiPickerIsOpen: false,\r\n        },\r\n        () => {\r\n          document.removeEventListener('click', this.closeEmojiPicker, false);\r\n        },\r\n      );\r\n    }\r\n  };\r\n\r\n  onSelectEmoji = (emoji) => this.insertText(emoji.native);\r\n\r\n  insertText = async (textToInsert) => {\r\n    let newCursorPosition;\r\n\r\n    await this.setState((prevState) => {\r\n      const prevText = prevState.text;\r\n      const textareaElement = this.textareaRef.current;\r\n\r\n      if (!textareaElement) {\r\n        return { text: prevText + textToInsert };\r\n      }\r\n      // Insert emoji at previous cursor position\r\n      const { selectionStart, selectionEnd } = textareaElement;\r\n      newCursorPosition = selectionStart + textToInsert.length;\r\n      return {\r\n        text:\r\n          prevText.slice(0, selectionStart) +\r\n          textToInsert +\r\n          prevText.slice(selectionEnd),\r\n      };\r\n    });\r\n\r\n    const textareaElement = this.textareaRef.current;\r\n    if (!textareaElement || newCursorPosition == null) {\r\n      return;\r\n    }\r\n    // Update cursorPosition\r\n    textareaElement.selectionStart = newCursorPosition;\r\n    textareaElement.selectionEnd = newCursorPosition;\r\n  };\r\n\r\n  getCommands = () => this.props.channel.getConfig().commands;\r\n\r\n  getUsers = () => {\r\n    const users = [];\r\n\r\n    const members = this.props.channel.state.members;\r\n    const watchers = this.props.channel.state.watchers;\r\n\r\n    if (members && Object.values(members).length) {\r\n      Object.values(members).forEach((member) => users.push(member.user));\r\n    }\r\n\r\n    if (watchers && Object.values(watchers).length) {\r\n      users.push(...Object.values(watchers));\r\n    }\r\n\r\n    // make sure we don't list users twice\r\n    const userMap = {};\r\n    for (const user of users) {\r\n      if (user !== undefined && !userMap[user.id]) {\r\n        userMap[user.id] = user;\r\n      }\r\n    }\r\n    return Object.values(userMap);\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    event.preventDefault();\r\n    if (!event || !event.target) {\r\n      return '';\r\n    }\r\n\r\n    const text = event.target.value;\r\n    this.setState({ text });\r\n    if (text) {\r\n      logChatPromiseExecution(\r\n        this.props.channel.keystroke(),\r\n        'start typing event',\r\n      );\r\n    }\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const editing = !!this.props.message;\r\n    const trimmedMessage = this.state.text.trim();\r\n    const isEmptyMessage =\r\n      trimmedMessage === '' ||\r\n      trimmedMessage === '>' ||\r\n      trimmedMessage === '``````' ||\r\n      trimmedMessage === '``' ||\r\n      trimmedMessage === '**' ||\r\n      trimmedMessage === '____' ||\r\n      trimmedMessage === '__' ||\r\n      trimmedMessage === '****';\r\n    const hasFiles =\r\n      this.state.imageOrder.length > 0 || this.state.fileOrder.length > 0;\r\n    if (isEmptyMessage && !hasFiles) {\r\n      return;\r\n    }\r\n    const text = this.state.text;\r\n    // the channel component handles the actual sending of the message\r\n    const attachments = [...this.state.attachments];\r\n    for (const id of this.state.imageOrder) {\r\n      const image = this.state.imageUploads[id];\r\n      if (!image || image.state === 'failed') {\r\n        continue;\r\n      }\r\n      if (image.state === 'uploading') {\r\n        // TODO: show error to user that they should wait until image is uploaded\r\n        return;\r\n      }\r\n      attachments.push({\r\n        type: 'image',\r\n        image_url: image.url,\r\n        fallback: image.file.name,\r\n      });\r\n    }\r\n    for (const id of this.state.fileOrder) {\r\n      const upload = this.state.fileUploads[id];\r\n      if (!upload || upload.state === 'failed') {\r\n        continue;\r\n      }\r\n      if (upload.state === 'uploading') {\r\n        // TODO: show error to user that they should wait until image is uploaded\r\n        return;\r\n      }\r\n      attachments.push({\r\n        type: 'file',\r\n        asset_url: upload.url,\r\n        title: upload.file.name,\r\n        mime_type: upload.file.type,\r\n        file_size: upload.file.size,\r\n      });\r\n    }\r\n\r\n    if (editing) {\r\n      const { id } = this.props.message;\r\n      const updatedMessage = { id };\r\n      updatedMessage.text = text;\r\n      updatedMessage.attachments = attachments;\r\n      updatedMessage.mentioned_users = this.state.mentioned_users;\r\n      // TODO: Remove this line and show an error when submit fails\r\n      this.props.clearEditingState();\r\n\r\n      const updateMessagePromise = this.props\r\n        .editMessage(updatedMessage)\r\n        .then(this.props.clearEditingState);\r\n\r\n      logChatPromiseExecution(updateMessagePromise, 'update message');\r\n    } else {\r\n      const sendMessagePromise = this.props.sendMessage({\r\n        text,\r\n        attachments,\r\n        mentioned_users: uniq(this.state.mentioned_users),\r\n        parent: this.props.parent,\r\n      });\r\n      logChatPromiseExecution(sendMessagePromise, 'send message');\r\n      this.setState({\r\n        text: '',\r\n        mentioned_users: [],\r\n        imageUploads: Immutable({}),\r\n        imageOrder: [],\r\n        fileUploads: Immutable({}),\r\n        fileOrder: [],\r\n      });\r\n    }\r\n\r\n    logChatPromiseExecution(this.props.channel.stopTyping(), 'stop typing');\r\n  };\r\n\r\n  _uploadNewFiles = (files) => {\r\n    for (const file of files) {\r\n      if (file.type.startsWith('image/')) {\r\n        this._uploadNewImage(file);\r\n      } else if (file instanceof File && !this.props.noFiles) {\r\n        this._uploadNewFile(file);\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  _uploadNewImage = async (file) => {\r\n    const id = generateRandomId();\r\n\r\n    await this.setState((prevState) => ({\r\n      numberOfUploads: prevState.numberOfUploads + 1,\r\n      imageOrder: prevState.imageOrder.concat(id),\r\n      imageUploads: prevState.imageUploads.setIn([id], {\r\n        id,\r\n        file,\r\n        state: 'uploading',\r\n      }),\r\n    }));\r\n    if (FileReader) {\r\n      // TODO: Possibly use URL.createObjectURL instead. However, then we need\r\n      // to release the previews when not used anymore though.\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        this.setState((prevState) => ({\r\n          imageUploads: prevState.imageUploads.setIn(\r\n            [id, 'previewUri'],\r\n            event.target.result,\r\n          ),\r\n        }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n    return this._uploadImage(id);\r\n  };\r\n\r\n  _uploadNewFile = async (file) => {\r\n    const id = generateRandomId();\r\n\r\n    await this.setState((prevState) => ({\r\n      numberOfUploads: prevState.numberOfUploads + 1,\r\n      fileOrder: prevState.fileOrder.concat(id),\r\n      fileUploads: prevState.fileUploads.setIn([id], {\r\n        id,\r\n        file,\r\n        state: 'uploading',\r\n      }),\r\n    }));\r\n\r\n    return this._uploadFile(id);\r\n  };\r\n\r\n  _uploadImage = async (id) => {\r\n    const img = this.state.imageUploads[id];\r\n    if (!img) {\r\n      return;\r\n    }\r\n    const { file } = img;\r\n\r\n    await this.setState((prevState) => ({\r\n      imageUploads: prevState.imageUploads.setIn([id, 'state'], 'uploading'),\r\n    }));\r\n\r\n    let response = {};\r\n    response = {};\r\n    try {\r\n      if (this.props.doImageUploadRequest) {\r\n        response = await this.props.doImageUploadRequest(\r\n          file,\r\n          this.props.channel,\r\n        );\r\n      } else {\r\n        response = await this.props.channel.sendImage(file);\r\n      }\r\n    } catch (e) {\r\n      console.warn(e);\r\n      let alreadyRemoved = false;\r\n      await this.setState((prevState) => {\r\n        const image = prevState.imageUploads[id];\r\n        if (!image) {\r\n          alreadyRemoved = true;\r\n          return {\r\n            numberOfUploads: prevState.numberOfUploads - 1,\r\n          };\r\n        }\r\n        return {\r\n          imageUploads: prevState.imageUploads.setIn([id, 'state'], 'failed'),\r\n          numberOfUploads: prevState.numberOfUploads - 1,\r\n        };\r\n      });\r\n\r\n      if (!alreadyRemoved) {\r\n        this.props.errorHandler(e, 'upload-image', {\r\n          feedGroup: this.props.feedGroup,\r\n          userId: this.props.userId,\r\n        });\r\n      }\r\n      return;\r\n    }\r\n    this.setState((prevState) => ({\r\n      imageUploads: prevState.imageUploads\r\n        .setIn([id, 'state'], 'finished')\r\n        .setIn([id, 'url'], response.file),\r\n    }));\r\n  };\r\n\r\n  _uploadFile = async (id) => {\r\n    const upload = this.state.fileUploads[id];\r\n    if (!upload) {\r\n      return;\r\n    }\r\n    const { file } = upload;\r\n    await this.setState((prevState) => ({\r\n      imageUploads: prevState.imageUploads.setIn([id, 'state'], 'uploading'),\r\n    }));\r\n\r\n    let response = {};\r\n    response = {};\r\n    try {\r\n      if (this.props.doFileUploadRequest) {\r\n        response = await this.props.doFileUploadRequest(\r\n          file,\r\n          this.props.channel,\r\n        );\r\n      } else {\r\n        response = await this.props.channel.sendFile(file);\r\n      }\r\n    } catch (e) {\r\n      console.warn(e);\r\n      let alreadyRemoved = false;\r\n      await this.setState((prevState) => {\r\n        const image = prevState.imageUploads[id];\r\n        if (!image) {\r\n          alreadyRemoved = true;\r\n          return {\r\n            numberOfUploads: prevState.numberOfUploads - 1,\r\n          };\r\n        }\r\n        return {\r\n          numberOfUploads: prevState.numberOfUploads - 1,\r\n          fileUploads: prevState.fileUploads.setIn([id, 'state'], 'failed'),\r\n        };\r\n      });\r\n      if (!alreadyRemoved) {\r\n        this.props.errorHandler(e, 'upload-file', {\r\n          feedGroup: this.props.feedGroup,\r\n          userId: this.props.userId,\r\n        });\r\n      }\r\n    }\r\n    this.setState((prevState) => ({\r\n      fileUploads: prevState.fileUploads\r\n        .setIn([id, 'state'], 'finished')\r\n        .setIn([id, 'url'], response.file),\r\n    }));\r\n  };\r\n\r\n  _removeImage = (id) => {\r\n    // TODO: cancel upload if still uploading\r\n    this.setState((prevState) => {\r\n      const img = prevState.imageUploads[id];\r\n      if (!img) {\r\n        return {};\r\n      }\r\n      return {\r\n        numberOfUploads: prevState.numberOfUploads - 1,\r\n        imageUploads: prevState.imageUploads.set(id, undefined), // remove\r\n        imageOrder: prevState.imageOrder.filter((_id) => id !== _id),\r\n      };\r\n    });\r\n  };\r\n\r\n  _removeFile = (id) => {\r\n    // TODO: cancel upload if still uploading\r\n    this.setState((prevState) => {\r\n      const upload = prevState.fileUploads[id];\r\n      if (!upload) {\r\n        return {};\r\n      }\r\n      return {\r\n        numberOfUploads: prevState.numberOfUploads - 1,\r\n        fileUploads: prevState.fileUploads.set(id, undefined), // remove\r\n        fileOrder: prevState.fileOrder.filter((_id) => id !== _id),\r\n      };\r\n    });\r\n  };\r\n\r\n  _onPaste = async (event) => {\r\n    // TODO: Move this handler to package with ImageDropzone\r\n    const { items } = event.clipboardData;\r\n    if (!dataTransferItemsHaveFiles(items)) {\r\n      return;\r\n    }\r\n\r\n    event.preventDefault();\r\n    // Get a promise for the plain text in case no files are\r\n    // found. This needs to be done here because chrome cleans\r\n    // up the DataTransferItems after resolving of a promise.\r\n    let plainTextPromise;\r\n    for (const item of items) {\r\n      if (item.kind === 'string' && item.type === 'text/plain') {\r\n        plainTextPromise = new Promise((resolve) => {\r\n          item.getAsString((s) => {\r\n            resolve(s);\r\n          });\r\n        });\r\n        break;\r\n      }\r\n    }\r\n\r\n    const fileLikes = await dataTransferItemsToFiles(items);\r\n    if (fileLikes.length) {\r\n      this._uploadNewFiles(fileLikes);\r\n      return;\r\n    }\r\n    // fallback to regular text paste\r\n    if (plainTextPromise) {\r\n      const s = await plainTextPromise;\r\n      this.insertText(s);\r\n    }\r\n  };\r\n\r\n  _onSelectItem = (item) => {\r\n    this.setState((prevState) => ({\r\n      mentioned_users: [...prevState.mentioned_users, item.id],\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { Input } = this.props;\r\n    const handlers = {\r\n      uploadNewFiles: this._uploadNewFiles,\r\n      removeImage: this._removeImage,\r\n      uploadImage: this._uploadImage,\r\n      removeFile: this._removeFile,\r\n      uploadFile: this._uploadFile,\r\n      emojiPickerRef: this.emojiPickerRef,\r\n      panelRef: this.panelRef,\r\n      textareaRef: this.textareaRef,\r\n      onSelectEmoji: this.onSelectEmoji,\r\n      getUsers: this.getUsers,\r\n      getCommands: this.getCommands,\r\n      handleSubmit: this.handleSubmit,\r\n      handleChange: this.handleChange,\r\n      onPaste: this._onPaste,\r\n      onSelectItem: this._onSelectItem,\r\n      openEmojiPicker: this.openEmojiPicker,\r\n    };\r\n    return <Input {...this.props} {...this.state} {...handlers} />;\r\n  }\r\n}\r\n\r\nMessageInput = withChannelContext(MessageInput);\r\nexport { MessageInput };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { ChatAutoComplete } from './ChatAutoComplete';\r\nimport { Picker } from 'emoji-mart';\r\nimport {\r\n  ImageDropzone,\r\n  ImagePreviewer,\r\n  FilePreviewer,\r\n  FileUploadButton,\r\n} from 'react-file-utils';\r\n\r\n/**\r\n * @example ./docs/EditMessageForm.md\r\n */\r\nexport class EditMessageForm extends React.Component {\r\n  static propTypes = {\r\n    /** Set focus to the text input if this is enabled */\r\n    focus: PropTypes.bool,\r\n    /** Grow the textarea while you're typing */\r\n    grow: PropTypes.bool,\r\n    /** Specify the max amount of rows the textarea is able to grow */\r\n    maxRows: PropTypes.number.isRequired,\r\n    /** Disable the textarea */\r\n    disabled: PropTypes.bool,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    imageOrder: PropTypes.array,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    imageUploads: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    removeImage: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadImage: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadNewFiles: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    numberOfUploads: PropTypes.number,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    fileOrder: PropTypes.array,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    fileUploads: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    removeFile: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadFile: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    emojiPickerIsOpen: PropTypes.bool,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    emojiPickerRef: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onSelectEmoji: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    getUsers: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    getCommands: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    textareaRef: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    handleSubmit: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    handleChange: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onSelectItem: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    text: PropTypes.string,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onPaste: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    openEmojiPicker: PropTypes.func,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    watcher_count: PropTypes.number,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    typing: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    multipleUploads: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    maxNumberOfFiles: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    acceptedFiles: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    grow: true,\r\n    focus: false,\r\n    disabled: false,\r\n  };\r\n\r\n  renderUploads = () => (\r\n    <>\r\n      {this.props.imageOrder.length > 0 && (\r\n        <ImagePreviewer\r\n          imageUploads={this.props.imageOrder.map(\r\n            (id) => this.props.imageUploads[id],\r\n          )}\r\n          handleRemove={this.props.removeImage}\r\n          handleRetry={this.props.uploadImage}\r\n          handleFiles={this.props.uploadNewFiles}\r\n          multiple={this.props.multipleUploads}\r\n          disabled={\r\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n              ? true\r\n              : false\r\n          }\r\n        />\r\n      )}\r\n      {this.props.fileOrder.length > 0 && (\r\n        <FilePreviewer\r\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\r\n          handleRemove={this.props.removeFile}\r\n          handleRetry={this.props.uploadFile}\r\n          handleFiles={this.props.uploadNewFiles}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n\r\n  renderEmojiPicker = () => {\r\n    if (this.props.emojiPickerIsOpen) {\r\n      return (\r\n        <div\r\n          className=\"str-chat__small-message-input-emojipicker\"\r\n          ref={this.props.emojiPickerRef}\r\n        >\r\n          <Picker\r\n            native\r\n            emoji=\"point_up\"\r\n            title=\"Pick your emoji\"\r\n            onSelect={this.props.onSelectEmoji}\r\n            color=\"#006CFF\"\r\n            showPreview={false}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"str-chat__edit-message-form\">\r\n        <ImageDropzone\r\n          accept={this.props.acceptedFiles}\r\n          multiple={this.props.multipleUploads}\r\n          disabled={\r\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n              ? true\r\n              : false\r\n          }\r\n          handleFiles={this.props.uploadNewFiles}\r\n        >\r\n          <form onSubmit={this.props.handleSubmit}>\r\n            {this.renderEmojiPicker()}\r\n            {this.renderUploads()}\r\n            {this.props.emojiPickerIsOpen && (\r\n              <div\r\n                className=\"str-chat__input--emojipicker\"\r\n                ref={this.props.emojiPickerRef}\r\n              >\r\n                <Picker\r\n                  native\r\n                  emoji=\"point_up\"\r\n                  title=\"Pick your emoji\"\r\n                  onSelect={this.props.onSelectEmoji}\r\n                  color=\"#006CFF\"\r\n                />\r\n              </div>\r\n            )}\r\n            <ChatAutoComplete\r\n              users={this.props.getUsers()}\r\n              commands={this.props.getCommands()}\r\n              innerRef={this.props.textareaRef}\r\n              handleSubmit={this.props.handleSubmit}\r\n              onChange={this.props.handleChange}\r\n              onSelectItem={this.props.onSelectItem}\r\n              value={this.props.text}\r\n              rows={1}\r\n              maxRows={this.props.maxRows}\r\n              onPaste={this.props.onPaste}\r\n              grow={this.props.grow}\r\n            />\r\n            <div className=\"str-chat__message-team-form-footer\">\r\n              <div className=\"str-chat__edit-message-form-options\">\r\n                <span\r\n                  className=\"str-chat__input-emojiselect\"\r\n                  onClick={this.props.openEmojiPicker}\r\n                >\r\n                  <svg\r\n                    width=\"14\"\r\n                    height=\"14\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\r\n                      fillRule=\"evenodd\"\r\n                    />\r\n                  </svg>\r\n                </span>\r\n                <FileUploadButton\r\n                  multiple={this.props.multipleUploads}\r\n                  disabled={\r\n                    this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n                      ? true\r\n                      : false\r\n                  }\r\n                  accepts={this.props.acceptedFiles}\r\n                  handleFiles={this.props.uploadNewFiles}\r\n                >\r\n                  <span className=\"str-chat__input-fileupload\">\r\n                    <svg\r\n                      width=\"14\"\r\n                      height=\"14\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path\r\n                        d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\r\n                        fillRule=\"nonzero\"\r\n                      />\r\n                    </svg>\r\n                  </span>\r\n                </FileUploadButton>\r\n              </div>\r\n              <div>\r\n                <button onClick={this.props.clearEditingState}>\r\n                  <FormattedMessage\r\n                    id=\"edit_message.cancel\"\r\n                    defaultMessage=\"Cancel\"\r\n                  />\r\n                </button>\r\n                <button type=\"submit\">\r\n                  <FormattedMessage\r\n                    id=\"edit_message.submit\"\r\n                    defaultMessage=\"Send\"\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </ImageDropzone>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { Attachment } from './Attachment';\r\nimport { MessageActionsBox } from './MessageActionsBox';\r\nimport { ReactionsList } from './ReactionsList';\r\nimport { Avatar } from './Avatar';\r\nimport { Tooltip } from './Tooltip';\r\nimport { LoadingIndicator } from './LoadingIndicator';\r\nimport { Gallery } from './Gallery';\r\nimport { ReactionSelector } from './ReactionSelector';\r\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\r\nimport { Modal } from './Modal';\r\nimport { MessageInput } from './MessageInput';\r\nimport { EditMessageForm } from './EditMessageForm';\r\n\r\nimport {\r\n  formatStatusArray,\r\n  isOnlyEmojis,\r\n  renderText,\r\n  languageChangedEventName,\r\n} from '../utils';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport 'moment/locale/de';\r\n\r\n/**\r\n * MessageSimple - Render component, should be used together with the Message component\r\n *\r\n * @example ./docs/MessageSimple.md\r\n * @extends PureComponent\r\n */\r\nclass MessageSimple extends PureComponent {\r\n  // constructor() {\r\n  //   super();\r\n  //   window.addEventListener(languageChangedEventName, this.onLanguageChanged);\r\n  // }\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n    window.addEventListener(languageChangedEventName, this.onLanguageChanged);\r\n  }\r\n\r\n  static propTypes = {\r\n    /** The [message object](https://getstream.io/chat/docs/#message_format) */\r\n    message: PropTypes.object,\r\n    /**\r\n     * The attachment UI component.\r\n     * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\r\n     * */\r\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\r\n     *\r\n     * The higher order message component, most logic is delegated to this component\r\n     * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\r\n     *\r\n     * */\r\n    Message: PropTypes.oneOfType([\r\n      PropTypes.node,\r\n      PropTypes.func,\r\n      PropTypes.object,\r\n    ]).isRequired,\r\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\r\n    unsafeHTML: PropTypes.bool,\r\n    /** Client object */\r\n    client: PropTypes.object,\r\n    /** If its parent message in thread. */\r\n    initialMessage: PropTypes.bool,\r\n    /** Channel config object */\r\n    channelConfig: PropTypes.object,\r\n    /** If component is in thread list */\r\n    threadList: PropTypes.bool,\r\n    /** Function to open thread on current messxage */\r\n    handleOpenThread: PropTypes.func,\r\n    /** If the message is in edit state */\r\n    editing: PropTypes.bool,\r\n    /** Function to exit edit state */\r\n    clearEditingState: PropTypes.func,\r\n    /** Returns true if message belongs to current user */\r\n    isMyMessage: PropTypes.func,\r\n    /** Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute] */\r\n    getMessageActions: PropTypes.func,\r\n    /**\r\n     * Function to publish updates on message to channel\r\n     *\r\n     * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\r\n     * */\r\n    updateMessage: PropTypes.func,\r\n    /**\r\n     * Reattempt sending a message\r\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\r\n     */\r\n    handleRetry: PropTypes.func,\r\n    /**\r\n     * Add or remove reaction on message\r\n     *\r\n     * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\r\n     * @param event Dom event which triggered this function\r\n     */\r\n    handleReaction: PropTypes.func,\r\n    /** If actions such as edit, delete, flag, mute are enabled on message */\r\n    actionsEnabled: PropTypes.bool,\r\n    /** DOMRect object for parent MessageList component */\r\n    messageListRect: PropTypes.object,\r\n    /**\r\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\r\n     *\r\n     * @param name {string} Name of action\r\n     * @param value {string} Value of action\r\n     * @param event Dom event that triggered this handler\r\n     */\r\n    handleAction: PropTypes.func,\r\n    /**\r\n     * The handler for hover event on @mention in message\r\n     *\r\n     * @param event Dom hover event which triggered handler.\r\n     * @param user Target user object\r\n     */\r\n    onMentionsHoverMessage: PropTypes.func,\r\n    /**\r\n     * The handler for click event on @mention in message\r\n     *\r\n     * @param event Dom click event which triggered handler.\r\n     * @param user Target user object\r\n     */\r\n    onMentionsClickMessage: PropTypes.func,\r\n    /**\r\n     * Additional props for underlying MessageInput component.\r\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\r\n     * */\r\n    additionalMessageInputProps: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    Attachment,\r\n  };\r\n  _isMounted = false;\r\n  state = {\r\n    isFocused: false,\r\n    language: window.dplChatConfig.language,\r\n    actionsBoxOpen: false,\r\n    showDetailedReactions: false,\r\n  };\r\n\r\n  onLanguageChanged = () => {\r\n    if (this._isMounted) {\r\n      this.setState({\r\n        state: {\r\n          ...this.state,\r\n          ...{\r\n            language: window.dplChatConfig.language,\r\n          },\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  messageActionsRef = React.createRef();\r\n  reactionSelectorRef = React.createRef();\r\n\r\n  _onClickOptionsAction = () => {\r\n    this.setState(\r\n      {\r\n        actionsBoxOpen: true,\r\n      },\r\n      () => document.addEventListener('click', this.hideOptions, false),\r\n    );\r\n  };\r\n\r\n  _hideOptions = () => {\r\n    this.setState({\r\n      actionsBoxOpen: false,\r\n    });\r\n    document.removeEventListener('click', this.hideOptions, false);\r\n  };\r\n\r\n  _clickReactionList = () => {\r\n    this.setState(\r\n      () => ({\r\n        showDetailedReactions: true,\r\n      }),\r\n      () => {\r\n        document.addEventListener('click', this._closeDetailedReactions);\r\n        document.addEventListener('touchend', this._closeDetailedReactions);\r\n      },\r\n    );\r\n  };\r\n\r\n  _closeDetailedReactions = (e) => {\r\n    if (\r\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\r\n        e.target,\r\n      )\r\n    ) {\r\n      this.setState(\r\n        () => ({\r\n          showDetailedReactions: false,\r\n        }),\r\n        () => {\r\n          document.removeEventListener('click', this._closeDetailedReactions);\r\n          document.removeEventListener(\r\n            'touchend',\r\n            this._closeDetailedReactions,\r\n          );\r\n        },\r\n      );\r\n    } else {\r\n      return {};\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n    if (!this.props.message.deleted_at) {\r\n      document.removeEventListener('click', this._closeDetailedReactions);\r\n      document.removeEventListener('touchend', this._closeDetailedReactions);\r\n    }\r\n    document.removeEventListener(\r\n      languageChangedEventName,\r\n      this.onLanguageChanged,\r\n    );\r\n  }\r\n\r\n  isMine() {\r\n    return this.props.isMyMessage(this.props.message);\r\n  }\r\n\r\n  // formatArray = (arr) => {\r\n  //   let outStr = '';\r\n  //   const slicedArr = arr\r\n  //     .filter((item) => item.id !== this.props.client.user.id)\r\n  //     .map((item) => item.name || item.id)\r\n  //     .slice(0, 5);\r\n  //   const restLength = arr.length - slicedArr.length;\r\n  //   const lastStr = restLength > 0 ? ' and ' + restLength + ' more' : '';\r\n\r\n  //   if (slicedArr.length === 1) {\r\n  //     outStr = slicedArr[0] + ' ';\r\n  //   } else if (slicedArr.length === 2) {\r\n  //     //joins all with \"and\" but =no commas\r\n  //     //example: \"bob and sam\"\r\n  //     outStr = slicedArr.join(' and ') + ' ';\r\n  //   } else if (slicedArr.length > 2) {\r\n  //     //joins all with commas, but last one gets \", and\" (oxford comma!)\r\n  //     //example: \"bob, joe, and sam\"\r\n  //     outStr = slicedArr.join(', ') + lastStr;\r\n  //   }\r\n\r\n  //   return outStr;\r\n  // };\r\n\r\n  renderStatus = () => {\r\n    const {\r\n      readBy,\r\n      client,\r\n      message,\r\n      threadList,\r\n      lastReceivedId,\r\n      intl,\r\n    } = this.props;\r\n    if (!this.isMine() || message.type === 'error') {\r\n      return null;\r\n    }\r\n    const justReadByMe = readBy.length === 1 && readBy[0].id === client.user.id;\r\n    if (message.status === 'sending') {\r\n      return (\r\n        <span className=\"str-chat__message-simple-status\">\r\n          <Tooltip>\r\n            <FormattedMessage\r\n              id=\"message.status.sending\"\r\n              defaultMessage=\"Sending...\"\r\n            />\r\n          </Tooltip>\r\n          <LoadingIndicator />\r\n        </span>\r\n      );\r\n    } else if (readBy.length !== 0 && !threadList && !justReadByMe) {\r\n      const readByOthers = readBy.filter((item) => item.id !== client.user.id);\r\n      const lastReadUser = readByOthers[0];\r\n      return (\r\n        <span className=\"str-chat__message-simple-status\">\r\n          <Tooltip>{formatStatusArray(intl, readByOthers)}</Tooltip>\r\n          <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n              d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\r\n              fill=\"#3f51b5\"\r\n              fillRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n          {readBy.length - 1 > 1 && (\r\n            <span className=\"str-chat__message-simple-status-number\">\r\n              {readBy.length - 1}\r\n            </span>\r\n          )}\r\n        </span>\r\n      );\r\n    } else if (\r\n      message.status === 'received' &&\r\n      message.id === lastReceivedId &&\r\n      !threadList\r\n    ) {\r\n      return (\r\n        <span className=\"str-chat__message-simple-status\">\r\n          <Tooltip>\r\n            <FormattedMessage\r\n              id=\"message.status.delivered\"\r\n              defaultMessage=\"Delivered\"\r\n            />\r\n          </Tooltip>\r\n          <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n              d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\r\n              fill=\"grey\"\r\n              fillRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        </span>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  renderMessageActions = () => {\r\n    const {\r\n      Message,\r\n      getMessageActions,\r\n      messageListRect,\r\n      handleFlag,\r\n      handleMute,\r\n      handleEdit,\r\n      handleDelete,\r\n    } = this.props;\r\n    const messageActions = getMessageActions();\r\n\r\n    if (messageActions.length === 0) {\r\n      return;\r\n    }\r\n\r\n    return <div></div>;\r\n  };\r\n  renderOptions() {\r\n    const {\r\n      message,\r\n      initialMessage,\r\n      channelConfig,\r\n      threadList,\r\n      handleOpenThread,\r\n    } = this.props;\r\n    if (\r\n      message.type === 'error' ||\r\n      message.type === 'system' ||\r\n      message.type === 'ephemeral' ||\r\n      message.status === 'failed' ||\r\n      message.status === 'sending' ||\r\n      initialMessage\r\n    ) {\r\n      return;\r\n    }\r\n    if (this.isMine()) {\r\n      return (\r\n        <div className=\"str-chat__message-simple__actions\">\r\n          {this.renderMessageActions()}\r\n          {!threadList && channelConfig && channelConfig.replies && (\r\n            <div\r\n              onClick={handleOpenThread}\r\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--thread\"\r\n            >\r\n              <svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\"\r\n                  fillRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          )}\r\n          {channelConfig && channelConfig.reactions && (\r\n            <div\r\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--reactions\"\r\n              onClick={this._clickReactionList}\r\n            >\r\n              <svg\r\n                width=\"16\"\r\n                height=\"14\"\r\n                viewBox=\"0 0 16 14\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\r\n                  fillRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"str-chat__message-simple__actions\">\r\n          {channelConfig && channelConfig.reactions && (\r\n            <div\r\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--reactions\"\r\n              onClick={this._clickReactionList}\r\n            >\r\n              <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\r\n                  fillRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          )}\r\n          {!threadList && channelConfig && channelConfig.replies && (\r\n            <div\r\n              onClick={handleOpenThread}\r\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--thread\"\r\n            >\r\n              <svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path\r\n                  d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\"\r\n                  fillRule=\"evenodd\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          )}\r\n          {this.renderMessageActions()}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  render() {\r\n    const {\r\n      message,\r\n      Attachment,\r\n      editing,\r\n      clearEditingState,\r\n      handleRetry,\r\n      updateMessage,\r\n      handleReaction,\r\n      actionsEnabled,\r\n      messageListRect,\r\n      handleAction,\r\n      onMentionsHoverMessage,\r\n      onMentionsClickMessage,\r\n      unsafeHTML,\r\n      threadList,\r\n      handleOpenThread,\r\n    } = this.props;\r\n   \r\n    const when = moment(message.created_at).calendar();\r\n\r\n    const messageClasses = this.isMine()\r\n      ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\r\n      : 'str-chat__message str-chat__message-simple';\r\n\r\n    const hasAttachment = Boolean(\r\n      message && message.attachments && message.attachments.length,\r\n    );\r\n    const images =\r\n      hasAttachment &&\r\n      message.attachments.filter((item) => item.type === 'image');\r\n    const hasReactions = Boolean(\r\n      message.latest_reactions && message.latest_reactions.length,\r\n    );\r\n\r\n    if (message.type === 'message.read' || message.type === 'message.date') {\r\n      return null;\r\n    }\r\n\r\n    if (message.deleted_at) {\r\n      return (\r\n        <React.Fragment>\r\n          <div\r\n            key={message.id}\r\n            className={`${messageClasses} str-chat__message--deleted ${message.type} `}\r\n          >\r\n            <div className=\"str-chat__message--deleted-inner\">\r\n              <FormattedMessage\r\n                id=\"message.deleted\"\r\n                defaultMessage=\"This message was deleted...\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {editing && (\r\n          <Modal open={editing} onClose={clearEditingState}>\r\n            <MessageInput\r\n              Input={EditMessageForm}\r\n              message={message}\r\n              clearEditingState={clearEditingState}\r\n              updateMessage={updateMessage}\r\n              {...this.props.additionalMessageInputProps}\r\n            />\r\n          </Modal>\r\n        )}\r\n        <div\r\n          key={message.id}\r\n          className={`\r\n\t\t\t\t\t\t${messageClasses}\r\n\t\t\t\t\t\tstr-chat__message--${message.type}\r\n\t\t\t\t\t\tstr-chat__message--${message.status}\r\n\t\t\t\t\t\t${message.text ? 'str-chat__message--has-text' : 'has-no-text'}\r\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message--has-attachment' : ''}\r\n\t\t\t\t\t\t${hasReactions ? 'str-chat__message--with-reactions' : ''}\r\n\t\t\t\t\t`.trim()}\r\n          onMouseLeave={this._hideOptions}\r\n          ref={this.messageRef}\r\n        >\r\n          {this.renderStatus()}\r\n\r\n          <Avatar\r\n            image={message.user.image}\r\n            name={message.user.name || message.user.id}\r\n          />\r\n          <div\r\n            className=\"str-chat__message-inner\"\r\n            onClick={\r\n              message.status === 'failed'\r\n                ? handleRetry.bind(this, message)\r\n                : null\r\n            }\r\n          >\r\n            {!message.text && (\r\n              <React.Fragment>\r\n                {this.renderOptions()}\r\n                {/* if reactions show them */}\r\n                {hasReactions && !this.state.showDetailedReactions && (\r\n                  <ReactionsList\r\n                    reactions={message.latest_reactions}\r\n                    reaction_counts={message.reaction_counts}\r\n                    onClick={this._clickReactionList}\r\n                    reverse={true}\r\n                  />\r\n                )}\r\n                {this.state.showDetailedReactions && (\r\n                  <ReactionSelector\r\n                    handleReaction={handleReaction}\r\n                    detailedView\r\n                    reaction_counts={message.reaction_counts}\r\n                    latest_reactions={message.latest_reactions}\r\n                    messageList={messageListRect}\r\n                    ref={this.reactionSelectorRef}\r\n                  />\r\n                )}\r\n              </React.Fragment>\r\n            )}\r\n\r\n            <div className=\"str-chat__message-attachment-container\">\r\n              {hasAttachment &&\r\n                message.attachments.map((attachment, index) => {\r\n                  if (attachment.type === 'image' && images.length > 1)\r\n                    return null;\r\n\r\n                  return (\r\n                    <Attachment\r\n                      key={`${message.id}-${index}`}\r\n                      attachment={attachment}\r\n                      actionHandler={handleAction}\r\n                    />\r\n                  );\r\n                })}\r\n            </div>\r\n            {images.length > 1 && <Gallery images={images} />}\r\n\r\n            {message.text && (\r\n              <div className=\"str-chat__message-text\">\r\n                <div\r\n                  className={`\r\n\t\t\t\t\t\t\t\t\tstr-chat__message-text-inner str-chat__message-simple-text-inner\r\n\t\t\t\t\t\t\t\t\t${this.state.isFocused ? 'str-chat__message-text-inner--focused' : ''}\r\n\t\t\t\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-text-inner--has-attachment' : ''}\r\n\t\t\t\t\t\t\t\t\t${\r\n                    isOnlyEmojis(message.text)\r\n                      ? 'str-chat__message-simple-text-inner--is-emoji'\r\n                      : ''\r\n                  }\r\n                `.trim()}\r\n                  onMouseOver={onMentionsHoverMessage}\r\n                  onClick={onMentionsClickMessage}\r\n                >\r\n                  {message.type === 'error' && (\r\n                    <div className=\"str-chat__simple-message--error-message\">\r\n                      <FormattedMessage\r\n                        id=\"message.error\"\r\n                        defaultMessage=\"Error  Unsent\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  {message.status === 'failed' && (\r\n                    <div className=\"str-chat__simple-message--error-message\">\r\n                      <FormattedMessage\r\n                        id=\"message.failed\"\r\n                        defaultMessage=\"Message Failed  Click to try again\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {unsafeHTML ? (\r\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\r\n                  ) : (\r\n                    renderText(message)\r\n                  )}\r\n\r\n                  {/* if reactions show them */}\r\n                  {hasReactions && !this.state.showDetailedReactions && (\r\n                    <ReactionsList\r\n                      reactions={message.latest_reactions}\r\n                      reaction_counts={message.reaction_counts}\r\n                      onClick={this._clickReactionList}\r\n                      reverse={true}\r\n                    />\r\n                  )}\r\n                  {this.state.showDetailedReactions && (\r\n                    <ReactionSelector\r\n                      mine={this.isMine()}\r\n                      handleReaction={handleReaction}\r\n                      actionsEnabled={actionsEnabled}\r\n                      detailedView\r\n                      reaction_counts={message.reaction_counts}\r\n                      latest_reactions={message.latest_reactions}\r\n                      messageList={messageListRect}\r\n                      ref={this.reactionSelectorRef}\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {message.text && this.renderOptions()}\r\n              </div>\r\n            )}\r\n            {!threadList && message.reply_count !== 0 && (\r\n              <div className=\"str-chat__message-simple-reply-button\">\r\n                <MessageRepliesCountButton\r\n                  onClick={handleOpenThread}\r\n                  reply_count={message.reply_count}\r\n                />\r\n              </div>\r\n            )}\r\n            <div\r\n              className={`str-chat__message-data str-chat__message-simple-data`}\r\n            >\r\n              {!this.isMine() ? (\r\n                <span className=\"str-chat__message-simple-name\">\r\n                  {message.user.name || message.user.id}\r\n                </span>\r\n              ) : null}\r\n              <span className=\"str-chat__message-simple-timestamp\">{when}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nMessageSimple = injectIntl(MessageSimple);\r\nexport { MessageSimple };\r\n","import React, { Component } from 'react';\r\n\r\nimport { MessageSimple } from './MessageSimple';\r\nimport PropTypes from 'prop-types';\r\nimport { Attachment } from './Attachment';\r\nimport { injectIntl } from 'react-intl';\r\nimport deepequal from 'deep-equal';\r\nimport { MESSAGE_ACTIONS } from '../utils';\r\n\r\n/**\r\n * Message - A high level component which implements all the logic required for a message.\r\n * The actual rendering of the message is delegated via the \"Message\" property\r\n *\r\n * @example ./docs/Message.md\r\n * @extends Component\r\n */\r\nclass Message extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: false,\r\n    };\r\n  }\r\n\r\n  static propTypes = {\r\n    /** The message object */\r\n    message: PropTypes.object.isRequired,\r\n    /** The client connection object for connecting to Stream */\r\n    client: PropTypes.object.isRequired,\r\n    /** The current channel this message is displayed in */\r\n    channel: PropTypes.object.isRequired,\r\n    /** A list of users that have read this message **/\r\n    readBy: PropTypes.array,\r\n    /** groupStyles, a list of styles to apply to this message. ie. top, bottom, single etc */\r\n    groupStyles: PropTypes.array,\r\n    /** Editing, if the message is currently being edited */\r\n    editing: PropTypes.bool,\r\n    /**\r\n     * Message UI component to display a message in message list.\r\n     * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\r\n     * */\r\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Attachment UI component to display attachment in individual message.\r\n     * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\r\n     * */\r\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\r\n    unsafeHTML: PropTypes.bool,\r\n    /**\r\n     * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\r\n     * If all the actions need to be disabled, empty array or false should be provided as value of prop.\r\n     * */\r\n    messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\r\n    /**\r\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\r\n     *\r\n     * This function should accept following params:\r\n     *\r\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\r\n     *\r\n     * */\r\n    getFlagMessageSuccessNotification: PropTypes.func,\r\n    /**\r\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\r\n     *\r\n     * This function should accept following params:\r\n     *\r\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\r\n     *\r\n     * */\r\n    getFlagMessageErrorNotification: PropTypes.func,\r\n    /**\r\n     * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\r\n     *\r\n     * This function should accept following params:\r\n     *\r\n     * @param user A user object which is being muted\r\n     *\r\n     * */\r\n    getMuteUserSuccessNotification: PropTypes.func,\r\n    /**\r\n     * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\r\n     *\r\n     * This function should accept following params:\r\n     *\r\n     * @param user A user object which is being muted\r\n     *\r\n     * */\r\n    getMuteUserErrorNotification: PropTypes.func,\r\n    /** Latest message id on current channel */\r\n    lastReceivedId: PropTypes.string,\r\n    /** DOMRect object for parent MessageList component */\r\n    messageListRect: PropTypes.object,\r\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\r\n    members: PropTypes.object,\r\n    /**\r\n     * Function to add custom notification on messagelist\r\n     *\r\n     * @param text Notification text to display\r\n     * @param type Type of notification. 'success' | 'error'\r\n     * */\r\n    addNotification: PropTypes.func,\r\n    /** Sets the editing state */\r\n    setEditingState: PropTypes.func,\r\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\r\n    updateMessage: PropTypes.func,\r\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\r\n    removeMessage: PropTypes.func,\r\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\r\n    retrySendMessage: PropTypes.func,\r\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\r\n    onMentionsClick: PropTypes.func,\r\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\r\n    onMentionsHover: PropTypes.func,\r\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\r\n    openThread: PropTypes.func,\r\n    /**\r\n     * Additional props for underlying MessageInput component.\r\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\r\n     * */\r\n    additionalMessageInputProps: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    Message: MessageSimple,\r\n    readBy: [],\r\n    groupStyles: [],\r\n    Attachment,\r\n    editing: false,\r\n    messageActions: Object.keys(MESSAGE_ACTIONS),\r\n  };\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    // since there are many messages its important to only rerender messages when needed.\r\n    let shouldUpdate = nextProps.message !== this.props.message;\r\n    let reason = '';\r\n    if (shouldUpdate) {\r\n      reason = 'message';\r\n    }\r\n    // read state is the next most likely thing to change..\r\n    if (!shouldUpdate && !deepequal(nextProps.readBy, this.props.readBy)) {\r\n      shouldUpdate = true;\r\n      reason = 'readBy';\r\n    }\r\n    // group style often changes for the last 3 messages...\r\n    if (\r\n      !shouldUpdate &&\r\n      !deepequal(nextProps.groupStyles, this.props.groupStyles)\r\n    ) {\r\n      shouldUpdate = true;\r\n      reason = 'groupStyles';\r\n    }\r\n\r\n    // if lastreceivedId changesm, message should update.\r\n    if (\r\n      !shouldUpdate &&\r\n      !deepequal(nextProps.lastReceivedId, this.props.lastReceivedId)\r\n    ) {\r\n      shouldUpdate = true;\r\n      reason = 'lastReceivedId';\r\n    }\r\n\r\n    // editing is the last one which can trigger a change..\r\n    if (!shouldUpdate && nextProps.editing !== this.props.editing) {\r\n      shouldUpdate = true;\r\n      reason = 'editing';\r\n    }\r\n\r\n    // editing is the last one which can trigger a change..\r\n    if (\r\n      !shouldUpdate &&\r\n      nextProps.messageListRect !== this.props.messageListRect\r\n    ) {\r\n      shouldUpdate = true;\r\n      reason = 'messageListRect';\r\n    }\r\n\r\n    if (shouldUpdate && reason) {\r\n      // console.log(\r\n      //   'message',\r\n      //   nextProps.message.id,\r\n      //   'shouldUpdate',\r\n      //   shouldUpdate,\r\n      //   reason,\r\n      // );\r\n      // console.log(reason, diff(this.props, nextProps));\r\n    }\r\n\r\n    return shouldUpdate;\r\n  }\r\n\r\n  isMyMessage = (message) => this.props.client.user.id === message.user.id;\r\n  isAdmin = () =>\r\n    this.props.client.user.role === 'admin' ||\r\n    (this.props.members &&\r\n      this.props.members[this.props.client.user.id] &&\r\n      this.props.members[this.props.client.user.id].role === 'admin');\r\n  isOwner = () =>\r\n    this.props.members &&\r\n    this.props.members[this.props.client.user.id] &&\r\n    this.props.members[this.props.client.user.id].role === 'owner';\r\n  isModerator = () =>\r\n    this.props.members &&\r\n    this.props.members[this.props.client.user.id] &&\r\n    this.props.members[this.props.client.user.id].role === 'moderator';\r\n\r\n  canEditMessage = (message) =>\r\n    this.isMyMessage(message) ||\r\n    this.isModerator() ||\r\n    this.isOwner() ||\r\n    this.isAdmin();\r\n\r\n  canDeleteMessage = (message) => this.canEditMessage(message);\r\n\r\n  /**\r\n   * Following function validates a function which returns notification message.\r\n   * It validates if the first parameter is function and also if return value of function is string or no.\r\n   *\r\n   * @param func {Function}\r\n   * @param args {Array} Arguments to be provided to func while executing.\r\n   */\r\n  validateAndGetNotificationMessage = (func, args) => {\r\n    if (!func || typeof func !== 'function') return false;\r\n\r\n    const returnValue = func.apply(null, args);\r\n\r\n    if (typeof returnValue !== 'string') return false;\r\n\r\n    return returnValue;\r\n  };\r\n\r\n  handleFlag = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const {\r\n      getFlagMessageSuccessNotification,\r\n      getFlagMessageErrorNotification,\r\n      intl,\r\n    } = this.props;\r\n    const message = this.props.message;\r\n\r\n    try {\r\n      await this.props.client.flagMessage(message.id);\r\n      const successMessage = this.validateAndGetNotificationMessage(\r\n        getFlagMessageSuccessNotification,\r\n        [message],\r\n      );\r\n      this.props.addNotification(\r\n        successMessage\r\n          ? successMessage\r\n          : intl.formatMessage({\r\n              id: 'message.flag.success',\r\n              defaultMessage: 'Message has been successfully flagged',\r\n            }),\r\n        'success',\r\n      );\r\n    } catch (e) {\r\n      const errorMessage = this.validateAndGetNotificationMessage(\r\n        getFlagMessageErrorNotification,\r\n        [message],\r\n      );\r\n      this.props.addNotification(\r\n        errorMessage\r\n          ? errorMessage\r\n          : intl.formatMessage({\r\n              id: 'message.flag.error',\r\n              defaultMessage:\r\n                'Error adding flag: Either the flag already exist or there is issue with network connection ...',\r\n            }),\r\n        'error',\r\n      );\r\n    }\r\n  };\r\n\r\n  handleMute = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const {\r\n      getMuteUserSuccessNotification,\r\n      getMuteUserErrorNotification,\r\n      intl,\r\n    } = this.props;\r\n    const message = this.props.message;\r\n\r\n    try {\r\n      await this.props.client.muteUser(message.user.id);\r\n      const successMessage = this.validateAndGetNotificationMessage(\r\n        getMuteUserSuccessNotification,\r\n        [message.user],\r\n      );\r\n\r\n      this.props.addNotification(\r\n        successMessage\r\n          ? successMessage\r\n          : intl.formatMessage(\r\n              {\r\n                id: 'message.mute.success',\r\n                defaultMessage: 'User with id {id} has been muted',\r\n              },\r\n              {\r\n                id: message.user.id,\r\n              },\r\n            ),\r\n        'success',\r\n      );\r\n    } catch (e) {\r\n      const errorMessage = this.validateAndGetNotificationMessage(\r\n        getMuteUserErrorNotification,\r\n        [message.user],\r\n      );\r\n\r\n      this.props.addNotification(\r\n        errorMessage\r\n          ? errorMessage\r\n          : intl.formatMessage({\r\n              id: 'message.mute.error',\r\n              defaultMessage: 'Error muting a user ...',\r\n            }),\r\n        'error',\r\n      );\r\n    }\r\n  };\r\n\r\n  handleEdit = (event) => {\r\n    if (event !== undefined && event.preventDefault) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    this.props.setEditingState(this.props.message);\r\n  };\r\n\r\n  handleDelete = async (event) => {\r\n    event.preventDefault();\r\n    const message = this.props.message;\r\n    const data = await this.props.client.deleteMessage(message.id);\r\n    this.props.updateMessage(data.message);\r\n  };\r\n\r\n  handleReaction = async (reactionType, event) => {\r\n    if (event !== undefined && event.preventDefault) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    let userExistingReaction = null;\r\n\r\n    const currentUser = this.props.client.userID;\r\n\r\n    for (const reaction of this.props.message.own_reactions) {\r\n      // own user should only ever contain the current user id\r\n      // just in case we check to prevent bugs with message updates from breaking reactions\r\n      if (currentUser === reaction.user.id && reaction.type === reactionType) {\r\n        userExistingReaction = reaction;\r\n      } else if (currentUser !== reaction.user.id) {\r\n        console.warn(\r\n          `message.own_reactions contained reactions from a different user, this indicates a bug`,\r\n        );\r\n      }\r\n    }\r\n\r\n    const originalMessage = this.props.message;\r\n    let reactionChangePromise;\r\n\r\n    /*\r\n    - Add the reaction to the local state\r\n    - Make the API call in the background\r\n    - If it fails, revert to the old message...\r\n     */\r\n    if (userExistingReaction) {\r\n      // this.props.channel.state.removeReaction(userExistingReaction);\r\n\r\n      reactionChangePromise = this.props.channel.deleteReaction(\r\n        this.props.message.id,\r\n        userExistingReaction.type,\r\n      );\r\n    } else {\r\n      // add the reaction\r\n      const messageID = this.props.message.id;\r\n\r\n      const reaction = { type: reactionType };\r\n\r\n      // this.props.channel.state.addReaction(tmpReaction, this.props.message);\r\n      reactionChangePromise = this.props.channel.sendReaction(\r\n        messageID,\r\n        reaction,\r\n      );\r\n    }\r\n\r\n    try {\r\n      // only wait for the API call after the state is updated\r\n      await reactionChangePromise;\r\n    } catch (e) {\r\n      // revert to the original message if the API call fails\r\n      this.props.updateMessage(originalMessage);\r\n    }\r\n  };\r\n\r\n  handleAction = async (name, value, event) => {\r\n    event.preventDefault();\r\n    const messageID = this.props.message.id;\r\n    const formData = {};\r\n    formData[name] = value;\r\n\r\n    const data = await this.props.channel.sendAction(messageID, formData);\r\n\r\n    if (data && data.message) {\r\n      this.props.updateMessage(data.message);\r\n    } else {\r\n      this.props.removeMessage(this.props.message);\r\n    }\r\n  };\r\n\r\n  handleRetry = async (message) => {\r\n    await this.props.retrySendMessage(message);\r\n  };\r\n\r\n  onMentionsClick = (e) => {\r\n    if (typeof this.props.onMentionsClick !== 'function') {\r\n      return;\r\n    }\r\n    this.props.onMentionsClick(e, this.props.message.mentioned_users);\r\n  };\r\n\r\n  onMentionsHover = (e) => {\r\n    if (typeof this.props.onMentionsHover !== 'function') {\r\n      return;\r\n    }\r\n    this.props.onMentionsHover(e, this.props.message.mentioned_users);\r\n  };\r\n\r\n  getMessageActions = () => {\r\n    const { message, messageActions: messageActionsProps } = this.props;\r\n    const messageActionsAfterPermission = [];\r\n    let messageActions = [];\r\n\r\n    if (messageActionsProps && typeof messageActionsProps === 'boolean') {\r\n      // If value of messageActionsProps is true, then populate all the possible values\r\n      messageActions = Object.keys(MESSAGE_ACTIONS);\r\n    } else if (messageActionsProps && messageActionsProps.length > 0) {\r\n      messageActions = [...messageActionsProps];\r\n    } else {\r\n      return [];\r\n    }\r\n\r\n    if (\r\n      this.canEditMessage(message) &&\r\n      messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1\r\n    ) {\r\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\r\n    }\r\n\r\n    if (\r\n      this.canDeleteMessage(message) &&\r\n      messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1\r\n    ) {\r\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\r\n    }\r\n\r\n    if (\r\n      !this.isMyMessage(message) &&\r\n      messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1\r\n    ) {\r\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\r\n    }\r\n\r\n    if (\r\n      !this.isMyMessage(message) &&\r\n      messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1\r\n    ) {\r\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\r\n    }\r\n\r\n    return messageActionsAfterPermission;\r\n  };\r\n\r\n  render() {\r\n    const config = this.props.channel.getConfig();\r\n    const message = this.props.message;\r\n\r\n    const actionsEnabled =\r\n      message.type === 'regular' && message.status === 'received';\r\n\r\n    const Component = this.props.Message;\r\n    return (\r\n      //Give all Messages a id to scroll to\r\n      <div id={this.props.message.id}>\r\n        <Component\r\n          {...this.props}\r\n          actionsEnabled={actionsEnabled}\r\n          Message={this}\r\n          handleReaction={this.handleReaction}\r\n          getMessageActions={this.getMessageActions}\r\n          handleFlag={this.handleFlag}\r\n          handleMute={this.handleMute}\r\n          handleAction={this.handleAction}\r\n          handleDelete={this.handleDelete}\r\n          handleEdit={this.handleEdit}\r\n          handleRetry={this.handleRetry}\r\n          handleOpenThread={\r\n            this.props.openThread && this.props.openThread.bind(this, message)\r\n          }\r\n          isMyMessage={this.isMyMessage}\r\n          channelConfig={config}\r\n          onMentionsClickMessage={this.onMentionsClick}\r\n          onMentionsHoverMessage={this.onMentionsHover}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMessage = injectIntl(Message);\r\nexport { Message };","import React from 'react';\r\n\r\nexport const EmptyStateIndicator = ({ listType }) => {\r\n  let Indicator;\r\n  switch (listType) {\r\n    case 'channel':\r\n      Indicator = <p>You have no channels currently</p>;\r\n      break;\r\n    case 'message':\r\n      Indicator = null;\r\n      break;\r\n    default:\r\n      Indicator = <p>No items exist</p>;\r\n      break;\r\n  }\r\n\r\n  return Indicator;\r\n};\r\n","/* eslint-disable */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class ReverseInfiniteScroll extends Component {\r\n  static propTypes = {\r\n    children: PropTypes.node.isRequired,\r\n    element: PropTypes.node,\r\n    /** Weather there are more elements to be loaded or not */\r\n    hasMore: PropTypes.bool,\r\n    initialLoad: PropTypes.bool,\r\n    isReverse: PropTypes.bool,\r\n    loader: PropTypes.node,\r\n    loadMore: PropTypes.func.isRequired,\r\n    pageStart: PropTypes.number,\r\n    ref: PropTypes.func,\r\n    threshold: PropTypes.number,\r\n    useCapture: PropTypes.bool,\r\n    useWindow: PropTypes.bool,\r\n    className: PropTypes.string,\r\n    /** The function is called when the list scrolls */\r\n    listenToScroll: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    element: 'div',\r\n    hasMore: false,\r\n    initialLoad: true,\r\n    pageStart: 0,\r\n    ref: null,\r\n    threshold: 250,\r\n    useWindow: true,\r\n    isReverse: true,\r\n    useCapture: false,\r\n    loader: null,\r\n    className: 'str-chat__reverse-infinite-scroll',\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.scrollListener = this.scrollListener.bind(this);\r\n    this.scrollEventCount = 0;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.pageLoaded = this.props.pageStart;\r\n    this.attachScrollListener();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.detachScrollListener();\r\n    this.detachMousewheelListener();\r\n  }\r\n\r\n  // Set a defaut loader for all your `InfiniteScroll` components\r\n  setDefaultLoader(loader) {\r\n    this.defaultLoader = loader;\r\n  }\r\n\r\n  detachMousewheelListener() {\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = this.scrollComponent.parentNode;\r\n    }\r\n\r\n    scrollEl.removeEventListener(\r\n      'mousewheel',\r\n      this.mousewheelListener,\r\n      this.props.useCapture,\r\n    );\r\n  }\r\n\r\n  detachScrollListener() {\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = this.getParentElement(this.scrollComponent);\r\n    }\r\n\r\n    scrollEl.removeEventListener(\r\n      'scroll',\r\n      this.scrollListener,\r\n      this.props.useCapture,\r\n    );\r\n    scrollEl.removeEventListener(\r\n      'resize',\r\n      this.scrollListener,\r\n      this.props.useCapture,\r\n    );\r\n  }\r\n\r\n  getParentElement(el) {\r\n    return el && el.parentNode;\r\n  }\r\n\r\n  filterProps(props) {\r\n    return props;\r\n  }\r\n\r\n  attachScrollListener() {\r\n    if (\r\n      !this.props.hasMore ||\r\n      this.props.isLoading ||\r\n      !this.getParentElement(this.scrollComponent)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = this.getParentElement(this.scrollComponent);\r\n    }\r\n\r\n    scrollEl.addEventListener(\r\n      'mousewheel',\r\n      this.mousewheelListener,\r\n      this.props.useCapture,\r\n    );\r\n    scrollEl.addEventListener(\r\n      'scroll',\r\n      this.scrollListener,\r\n      this.props.useCapture,\r\n    );\r\n    scrollEl.addEventListener(\r\n      'resize',\r\n      this.scrollListener,\r\n      this.props.useCapture,\r\n    );\r\n\r\n    if (this.props.initialLoad) {\r\n      this.scrollListener();\r\n    }\r\n  }\r\n\r\n  mousewheelListener(e) {\r\n    // Prevents Chrome hangups\r\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\r\n    if (e.deltaY === 1) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  scrollListener() {\r\n    const el = this.scrollComponent;\r\n    const scrollEl = window;\r\n    const parentNode = this.getParentElement(el);\r\n    this.scrollEventCount += 1;\r\n\r\n    let offset;\r\n    const reverseOffset = parentNode.scrollTop;\r\n    const standardOffset =\r\n      el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\r\n    if (this.props.isReverse) {\r\n      offset = reverseOffset;\r\n    } else {\r\n      offset = standardOffset;\r\n    }\r\n    if (this.props.listenToScroll) {\r\n      this.props.listenToScroll(standardOffset, reverseOffset);\r\n    }\r\n\r\n    // a reverse infinite scroll element always starts out at position 0\r\n    // this counter prevent you from loading content before the user even scrolled\r\n    if (this.scrollEventCount < 2) {\r\n      return;\r\n    }\r\n\r\n    // prevent crazy repeat requests in case you don't have more\r\n    if (!this.props.hasMore || this.props.isLoading) {\r\n      return;\r\n    }\r\n\r\n    // Here we make sure the element is visible as well as checking the offset\r\n    if (\r\n      offset < Number(this.props.threshold) &&\r\n      el &&\r\n      el.offsetParent !== null\r\n    ) {\r\n      //this.detachScrollListener();\r\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\r\n      if (typeof this.props.loadMore === 'function') {\r\n        this.props.loadMore((this.pageLoaded += 1));\r\n      }\r\n    }\r\n  }\r\n\r\n  calculateOffset(el, scrollTop) {\r\n    if (!el) {\r\n      return 0;\r\n    }\r\n\r\n    return (\r\n      this.calculateTopPosition(el) +\r\n      (el.offsetHeight - scrollTop - window.innerHeight)\r\n    );\r\n  }\r\n\r\n  calculateTopPosition(el) {\r\n    if (!el) {\r\n      return 0;\r\n    }\r\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\r\n  }\r\n\r\n  render() {\r\n    const renderProps = this.filterProps(this.props);\r\n    const {\r\n      children,\r\n      element,\r\n      hasMore,\r\n      initialLoad,\r\n      isReverse,\r\n      loader,\r\n      loadMore,\r\n      pageStart,\r\n      ref,\r\n      threshold,\r\n      useCapture,\r\n      useWindow,\r\n      listenToScroll,\r\n      isLoading,\r\n      ...props\r\n    } = renderProps;\r\n\r\n    props.ref = (node) => {\r\n      this.scrollComponent = node;\r\n      if (ref) {\r\n        ref(node);\r\n      }\r\n    };\r\n\r\n    const childrenArray = [children];\r\n    if (isLoading) {\r\n      if (loader) {\r\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\r\n      } else if (this.defaultLoader) {\r\n        isReverse\r\n          ? childrenArray.unshift(this.defaultLoader)\r\n          : childrenArray.push(this.defaultLoader);\r\n      }\r\n    }\r\n    return React.createElement(element, props, childrenArray);\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class MessageNotification extends PureComponent {\r\n  static propTypes = {\r\n    /** If we should show the notification or not */\r\n    showNotification: PropTypes.bool,\r\n    /** Onclick handler */\r\n    onClick: PropTypes.func.isRequired,\r\n  };\r\n\r\n  static defaultProps = {\r\n    showNotification: true,\r\n  };\r\n\r\n  render() {\r\n    if (!this.props.showNotification) {\r\n      return null;\r\n    } else {\r\n      return (\r\n        <button\r\n          className=\"str-chat__message-notification\"\r\n          onClick={this.props.onClick}\r\n        >\r\n          {this.props.children}\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Moment from 'moment';\r\nimport 'moment/locale/de';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl } from 'react-intl';\r\n\r\n/**\r\n * DateSeparator - A simple date separator\r\n *\r\n * @example ./docs/DateSeparator.md\r\n * @extends PureComponent\r\n */\r\nclass DateSeparator extends React.PureComponent {\r\n  static propTypes = {\r\n    /** The date to format */\r\n    date: PropTypes.instanceOf(Date),\r\n    /** Set the position of the date in the separator */\r\n    position: PropTypes.oneOf(['left', 'center', 'right']),\r\n    /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\r\n    formatDate: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    position: 'right',\r\n  };\r\n\r\n  render() {\r\n    const { intl, position } = this.props;\r\n    if (!Date.parse(this.props.date)) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"str-chat__date-separator\">\r\n        {(position === 'right' || position === 'center') && (\r\n          <hr className=\"str-chat__date-separator-line\" />\r\n        )}\r\n        <div className=\"str-chat__date-separator-date\">\r\n          {this.props.formatDate\r\n            ? this.props.formatDate(this.props.date)\r\n            : Moment(this.props.date.toISOString()).calendar(null, {\r\n                nextWeek: intl.formatMessage({\r\n                  id: 'date_separator.next_week',\r\n                  defaultMessage: 'dddd',\r\n                }),\r\n                nextDay: intl.formatMessage({\r\n                  id: 'date_separator.tomorrow',\r\n                  defaultMessage: '[Tomorrow]',\r\n                }),\r\n                sameDay: intl.formatMessage({\r\n                  id: 'date_separator.today',\r\n                  defaultMessage: '[Today]',\r\n                }),\r\n                lastDay: intl.formatMessage({\r\n                  id: 'date_separator.yesterday',\r\n                  defaultMessage: '[Yesterday]',\r\n                }),\r\n                lastWeek: intl.formatMessage({\r\n                  id: 'date_separator.last_week',\r\n                  defaultMessage: '[Last] dddd',\r\n                }),\r\n                sameElse: intl.formatMessage({\r\n                  id: 'date_separator.else',\r\n                  defaultMessage: 'L',\r\n                }),\r\n              })}\r\n        </div>\r\n        {(position === 'left' || position === 'center') && (\r\n          <hr className=\"str-chat__date-separator-line\" />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDateSeparator = injectIntl(DateSeparator);\r\nexport { DateSeparator };\r\n","import React from 'react';\r\nimport moment from 'moment';\r\nimport 'moment/locale/de';\r\nimport { Avatar } from './Avatar';\r\nimport { injectIntl } from 'react-intl';\r\n\r\nclass EventComponent extends React.PureComponent {\r\n  render() {\r\n    const { message, intl } = this.props;\r\n    if (message.type === 'system') {\r\n      return (\r\n        <div className={this.props.message.id}>\r\n          <div className=\"str-chat__message--system\">\r\n            <div className=\"str-chat__message--system__text\">\r\n              <div className=\"str-chat__message--system__line\" />\r\n              <p>{message.text}</p>\r\n              <div className=\"str-chat__message--system__line\" />\r\n            </div>\r\n            <div className=\"str-chat__message--system__date\">\r\n              <strong>{moment(message.created_at).format('dddd')} </strong>\r\n              <strong>{moment(message.created_at).format('L')} </strong>\r\n              {intl.formatMessage({\r\n                id: 'event_at_label',\r\n                defaultMessage: 'at',\r\n              })}{' '}\r\n              {moment(message.created_at).format('HH:mm')}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (\r\n      message.type === 'channel.event' &&\r\n      (message.event.type === 'member.removed' ||\r\n        message.event.type === 'member.added')\r\n    ) {\r\n      let sentence;\r\n\r\n      switch (message.event.type) {\r\n        case 'member.removed':\r\n          sentence = intl.formatMessage(\r\n            {\r\n              id: 'event_component.member_removed',\r\n              defaultMessage: '{user} was removed from the chat',\r\n            },\r\n            {\r\n              user: message.event.user.name || message.event.user.id,\r\n            },\r\n          );\r\n          break;\r\n        case 'member.added':\r\n          sentence = intl.formatMessage(\r\n            {\r\n              id: 'event_component.member_added',\r\n              defaultMessage: '{user} has joined the chat',\r\n            },\r\n            {\r\n              user: message.event.user.name || message.event.user.id,\r\n            },\r\n          );\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      return (\r\n        <div className=\"str-chat__event-component__channel-event\">\r\n          <Avatar\r\n            image={message.event.user.image}\r\n            name={message.event.user.name || message.event.user.id}\r\n          />\r\n          <div className=\"str-chat__event-component__channel-event__content\">\r\n            <em className=\"str-chat__event-component__channel-event__sentence\">\r\n              {sentence}\r\n            </em>\r\n            <div className=\"str-chat__event-component__channel-event__date\">\r\n              {moment(message.created_at).format('HH:mm')}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nEventComponent = injectIntl(EventComponent);\r\nexport { EventComponent };\r\n","import React, { PureComponent } from 'react';\r\nimport { Message } from './Message';\r\nimport { withChannelContext } from '../context';\r\nimport PropTypes from 'prop-types';\r\nimport { EmptyStateIndicator } from './EmptyStateIndicator';\r\nimport { ReverseInfiniteScroll } from './ReverseInfiniteScroll';\r\nimport { MessageNotification } from './MessageNotification';\r\nimport { MessageSimple } from './MessageSimple';\r\nimport { Attachment } from './Attachment';\r\nimport { LoadingIndicator } from './LoadingIndicator';\r\nimport { DateSeparator } from './DateSeparator';\r\nimport { EventComponent } from './EventComponent';\r\nimport { KEY_CODES } from './AutoCompleteTextarea';\r\nimport deepequal from 'deep-equal';\r\nimport { MESSAGE_ACTIONS, languageChangedEventName } from '../utils';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n/* eslint sonarjs/no-duplicate-string: 0 */\r\n\r\n/**\r\n * MessageList - The message list components renders a list of messages. Its a consumer of [Channel Context](https://getstream.github.io/stream-chat-react/#channel)\r\n *\r\n * @example ./docs/MessageList.md\r\n * @extends PureComponent\r\n */\r\nclass MessageList extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      newMessagesNotification: false,\r\n      editing: '',\r\n      online: true,\r\n      notifications: [],\r\n      searchInput: '',\r\n      searchResultId: [],\r\n      activeSearchResultCount: -1,\r\n      activeSearchResultId: undefined,\r\n      open: false,\r\n      updatedComponent: false,\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.bottomRef = React.createRef();\r\n    this.messageList = React.createRef();\r\n    this.messageRefs = {};\r\n    this.notificationTimeouts = [];\r\n  }\r\n  static propTypes = {\r\n    /**\r\n     * Typing indicator UI component to render\r\n     *\r\n     * Defaults to and accepts same props as: [TypingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/TypingIndicator.js)\r\n     * */\r\n    TypingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Date separator UI component to render\r\n     *\r\n     * Defaults to and accepts same props as: [DateSeparator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/DateSeparator.js)\r\n     * */\r\n    dateSeparator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /** Turn off grouping of messages by user */\r\n    noGroupByUser: PropTypes.bool,\r\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\r\n    unsafeHTML: PropTypes.bool,\r\n    /** Set the limit to use when paginating messages */\r\n    messageLimit: PropTypes.number,\r\n    /**\r\n     * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\r\n     * If all the actions need to be disabled, empty array or false should be provided as value of prop.\r\n     * */\r\n    messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\r\n    /**\r\n     * Boolean weather current message list is a thread.\r\n     */\r\n    threadList: PropTypes.bool,\r\n    /**\r\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\r\n     *\r\n     * This function should accept following params:\r\n     *\r\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\r\n     *\r\n     * */\r\n    getFlagMessageSuccessNotification: PropTypes.func,\r\n    /**\r\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\r\n     *\r\n     * This function should accept following params:\r\n     *\r\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\r\n     *\r\n     * */\r\n    getFlagMessageErrorNotification: PropTypes.func,\r\n    /**\r\n     * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\r\n     *\r\n     * This function should accept following params:\r\n     *\r\n     * @param user A user object which is being muted\r\n     *\r\n     * */\r\n    getMuteUserSuccessNotification: PropTypes.func,\r\n    /**\r\n     * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\r\n     *\r\n     * This function should accept following params:\r\n     *\r\n     * @param user A user object which is being muted\r\n     *\r\n     * */\r\n    getMuteUserErrorNotification: PropTypes.func,\r\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    client: PropTypes.object,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Custom UI component to display system messages.\r\n     *\r\n     * Defaults to and accepts same props as: [EventComponent](https://github.com/GetStream/stream-chat-react/blob/master/src/components/EventComponent.js)\r\n     */\r\n    MessageSystem: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * The UI Indicator to use when MessagerList or ChannelList is empty\r\n     * */\r\n    EmptyStateIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Component to render at the top of the MessageList\r\n     * */\r\n    HeaderComponent: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    messages: PropTypes.array.isRequired,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    channel: PropTypes.object.isRequired,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    updateMessage: PropTypes.func.isRequired,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    retrySendMessage: PropTypes.func,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    removeMessage: PropTypes.func,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    onMentionsClick: PropTypes.func,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    onMentionsHover: PropTypes.func,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    openThread: PropTypes.func,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    members: PropTypes.object,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    watchers: PropTypes.object,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    read: PropTypes.object,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    typing: PropTypes.object,\r\n    /**\r\n     * Additional props for underlying MessageInput component.\r\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\r\n     * */\r\n    additionalMessageInputProps: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    Message: MessageSimple,\r\n    MessageSystem: EventComponent,\r\n    threadList: false,\r\n    Attachment,\r\n    dateSeparator: DateSeparator,\r\n    EmptyStateIndicator,\r\n    unsafeHTML: false,\r\n    noGroupByUser: false,\r\n    messageActions: Object.keys(MESSAGE_ACTIONS),\r\n  };\r\n\r\n  connectionChanged = (event) => {\r\n    if (this.state.online !== event.online) {\r\n      this.setState({ online: event.online });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(languageChangedEventName, this.onLanguageChanged);\r\n\r\n    const messageListRect = this.messageList.current.getBoundingClientRect();\r\n\r\n    this.setState({\r\n      messageListRect,\r\n    });\r\n\r\n    if (this.props.search) {\r\n      this.setState(\r\n        { searchInput: this.props.search, open: true, updatedComponent: false },\r\n        () => {},\r\n      );\r\n      this.search(this.props.search, this.props.channel);\r\n    } else {\r\n      this.scrollToBottom();\r\n    }\r\n\r\n    this.props.client.on('connection.changed', this.connectionChanged);\r\n\r\n    document.addEventListener('keydown', this.keypress);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.client.off('connection.changed', this.connectionChanged);\r\n\r\n    document.removeEventListener('keydown', this.keypress);\r\n    this.notificationTimeouts.forEach((ct) => {\r\n      clearTimeout(ct);\r\n    });\r\n  }\r\n\r\n  getSnapshotBeforeUpdate(prevProps) {\r\n    if (this.props.threadList) {\r\n      return null;\r\n    }\r\n    // Are we adding new items to the list?\r\n    // Capture the scroll position so we can adjust scroll later.\r\n\r\n    if (\r\n      prevProps.messages.length < this.props.messages.length ||\r\n      !deepequal(this.props.eventHistory, prevProps.eventHistory)\r\n    ) {\r\n      const list = this.messageList.current;\r\n      return {\r\n        offsetTop: list.scrollTop,\r\n        offsetBottom: list.scrollHeight - list.scrollTop,\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    // If we have a snapshot value, we've just added new items.\r\n    // Adjust scroll so these new items don't push the old ones out of view.\r\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\r\n    const userScrolledUp = this.userScrolledUp();\r\n    const currentLastMessage = this.props.messages[\r\n      this.props.messages.length - 1\r\n    ];\r\n    const previousLastMessage =\r\n      prevProps.messages[prevProps.messages.length - 1];\r\n    if (!previousLastMessage || !currentLastMessage) {\r\n      return;\r\n    }\r\n\r\n    const hasNewMessage = currentLastMessage.id !== previousLastMessage.id;\r\n    const isOwner = currentLastMessage.user.id === this.props.client.userID;\r\n\r\n    const list = this.messageList.current;\r\n\r\n    // always scroll down when it's your own message that you added...\r\n    const scrollToBottom = hasNewMessage && (isOwner || !userScrolledUp);\r\n\r\n    if (this.state.searchInput === '') {\r\n      if (scrollToBottom) {\r\n        this.scrollToBottom();\r\n        // Scroll further once attachments are laoded.\r\n        setTimeout(this.scrollToBottom, 100);\r\n\r\n        // remove the scroll notification if we already scrolled down...\r\n        this.state.newMessagesNotification &&\r\n          this.setState({ newMessagesNotification: false });\r\n\r\n        return;\r\n      }\r\n      if (snapshot !== null) {\r\n        // Maintain the offsetTop of scroll so that content in viewport doesn't move.\r\n        // This is for the case where user has scroll up significantly and a new message arrives from someone.\r\n        if (hasNewMessage) {\r\n          this.scrollToTarget(snapshot.offsetTop, this.messageList.current);\r\n        } else {\r\n          // Maintain the bottomOffset of scroll.\r\n          // This is for the case of pagination, when more messages get loaded.\r\n          this.scrollToTarget(\r\n            list.scrollHeight - snapshot.offsetBottom,\r\n            this.messageList.current,\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!this.state.activeSearchResultId && !this.state.updatedComponent) {\r\n      this.search(this.state.searchInput, this.props.channel);\r\n      this.setState({ updatedComponent: true });\r\n    }\r\n\r\n    if (this.state.activeSearchResultId) {\r\n      this.messageRefs[this.state.activeSearchResultId].current.classList.add(\r\n        'search-result',\r\n      );\r\n\r\n      this._scrollToRef(\r\n        this.messageRefs[this.state.activeSearchResultId],\r\n        this.messageList,\r\n      );\r\n    }\r\n\r\n    // Check the scroll position... if you're scrolled up show a little notification\r\n    if (hasNewMessage && !this.state.newMessagesNotification) {\r\n      this.setState({ newMessagesNotification: true });\r\n    }\r\n  }\r\n\r\n  keypress = (event) => {\r\n    if (event.keyCode === KEY_CODES.ESC && this.state.editing) {\r\n      this.clearEditingState();\r\n    }\r\n  };\r\n\r\n  scrollToBottom = () => {\r\n    this._scrollToRef(this.bottomRef, this.messageList);\r\n  };\r\n\r\n  _scrollToRef = (el, parent) => {\r\n    function scrollDown() {\r\n      if (el && el.current && parent && parent.current) {\r\n        this.scrollToTarget(el.current, parent.current);\r\n      }\r\n    }\r\n    scrollDown.call(this);\r\n    // scroll down after images load again\r\n    setTimeout(scrollDown.bind(this), 200);\r\n  };\r\n\r\n  /**\r\n   * target - target to scroll to (DOM element, scrollTop Number, 'top', or 'bottom'\r\n   * containerEl - DOM element for the container with scrollbars\r\n   * source: https://stackoverflow.com/a/48429314\r\n   */\r\n  scrollToTarget = (target, containerEl) => {\r\n    // Moved up here for readability:\r\n    const isElement = target && target.nodeType === 1,\r\n      isNumber = Object.prototype.toString.call(target) === '[object Number]';\r\n\r\n    if (isElement) {\r\n      containerEl.scrollTop = target.offsetTop - 600; // here you can fix the offset problem\r\n    } else if (isNumber) {\r\n      containerEl.scrollTop = target;\r\n    } else if (target === 'bottom') {\r\n      containerEl.scrollTop =\r\n        containerEl.scrollHeight - containerEl.offsetHeight;\r\n    } else if (target === 'top') {\r\n      containerEl.scrollTop = 0;\r\n    }\r\n  };\r\n\r\n  setEditingState = (message) => {\r\n    this.setState({\r\n      editing: message.id,\r\n    });\r\n  };\r\n\r\n  clearEditingState = (e) => {\r\n    if (e && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    this.setState({\r\n      editing: '',\r\n    });\r\n  };\r\n\r\n  insertDates = (messages) => {\r\n    const newMessages = [];\r\n    for (const [i, message] of messages.entries()) {\r\n      if (message.type === 'message.read' || message.deleted_at) {\r\n        newMessages.push(message);\r\n        continue;\r\n      }\r\n      const messageDate = message.created_at.getDay();\r\n      let prevMessageDate = messageDate;\r\n      if (i > 0) {\r\n        prevMessageDate = messages[i - 1].created_at.getDay();\r\n      }\r\n\r\n      if (i === 0 || messageDate !== prevMessageDate) {\r\n        newMessages.push(\r\n          { type: 'message.date', date: message.created_at },\r\n          message,\r\n        );\r\n      } else {\r\n        newMessages.push(message);\r\n      }\r\n\r\n      const eventsNextToMessage = this.props.eventHistory[\r\n        message.id || 'first'\r\n      ];\r\n      if (eventsNextToMessage && eventsNextToMessage.length > 0) {\r\n        eventsNextToMessage.forEach((e) => {\r\n          newMessages.push({\r\n            type: 'channel.event',\r\n            event: e,\r\n          });\r\n        });\r\n      }\r\n    }\r\n\r\n    return newMessages;\r\n  };\r\n\r\n  insertIntro = (messages) => {\r\n    const newMessages = messages || [];\r\n    // if no headerPosition is set, HeaderComponent will go at the top\r\n    if (!this.props.headerPosition) {\r\n      newMessages.unshift({\r\n        type: 'channel.intro',\r\n        // created_at: new Date(0),\r\n      });\r\n      return newMessages;\r\n    }\r\n\r\n    // if no messages, intro get's inserted\r\n    if (!newMessages.length) {\r\n      newMessages.unshift({\r\n        type: 'channel.intro',\r\n      });\r\n      return newMessages;\r\n    }\r\n\r\n    // else loop over the messages\r\n    for (const [i, message] of messages.entries()) {\r\n      const messageTime = message.created_at\r\n        ? message.created_at.getTime()\r\n        : null;\r\n      const nextMessageTime =\r\n        messages[i + 1] && messages[i + 1].created_at\r\n          ? messages[i + 1].created_at.getTime()\r\n          : null;\r\n      const { headerPosition } = this.props;\r\n\r\n      // headerposition is smaller than message time so comes after;\r\n      if (messageTime < headerPosition) {\r\n        // if header position is also smaller than message time continue;\r\n        if (nextMessageTime < headerPosition) {\r\n          if (messages[i + 1] && messages[i + 1].type === 'message.date')\r\n            continue;\r\n          if (!nextMessageTime) {\r\n            newMessages.push({ type: 'channel.intro' });\r\n            return newMessages;\r\n          }\r\n          continue;\r\n        } else {\r\n          newMessages.splice(i + 1, 0, { type: 'channel.intro' });\r\n          return newMessages;\r\n        }\r\n      }\r\n    }\r\n\r\n    return newMessages;\r\n  };\r\n\r\n  goToNewMessages = async () => {\r\n    await this.scrollToBottom();\r\n    this.setState({\r\n      newMessagesNotification: false,\r\n    });\r\n  };\r\n\r\n  getReadStates = (messages) => {\r\n    // create object with empty array for each message id\r\n    const readData = {};\r\n    for (const message of messages) {\r\n      readData[message.id] = [];\r\n    }\r\n\r\n    for (const readState of Object.values(this.props.read)) {\r\n      if (readState.last_read == null) {\r\n        break;\r\n      }\r\n      let userLastReadMsgId;\r\n      for (const msg of messages) {\r\n        if (msg.updated_at < readState.last_read) {\r\n          userLastReadMsgId = msg.id;\r\n        }\r\n      }\r\n      if (userLastReadMsgId != null) {\r\n        readData[userLastReadMsgId] = [\r\n          ...readData[userLastReadMsgId],\r\n          readState.user,\r\n        ];\r\n      }\r\n    }\r\n    return readData;\r\n  };\r\n\r\n  userScrolledUp = () => this.scrollOffset > 310;\r\n\r\n  listenToScroll = (offset) => {\r\n    this.scrollOffset = offset;\r\n    if (this.state.newMessagesNotification && !this.userScrolledUp()) {\r\n      this.setState({\r\n        newMessagesNotification: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  getLastReceived = (messages) => {\r\n    const l = messages.length;\r\n    let lastReceivedId = null;\r\n    for (let i = l; i > 0; i--) {\r\n      if (\r\n        messages[i] !== undefined &&\r\n        messages[i].status !== undefined &&\r\n        messages[i].status === 'received'\r\n      ) {\r\n        lastReceivedId = messages[i].id;\r\n        break;\r\n      }\r\n    }\r\n    return lastReceivedId;\r\n  };\r\n\r\n  getGroupStyles = (m) => {\r\n    const l = m.length;\r\n    const messageGroupStyles = {};\r\n\r\n    const messages = [...m];\r\n\r\n    for (let i = 0; i < l; i++) {\r\n      const previousMessage = messages[i - 1];\r\n      const message = messages[i];\r\n      const nextMessage = messages[i + 1];\r\n      const groupStyles = [];\r\n\r\n      if (message.type === 'message.date') {\r\n        continue;\r\n      }\r\n\r\n      if (message.type === 'channel.event') {\r\n        continue;\r\n      }\r\n\r\n      if (message.type === 'channel.intro') {\r\n        continue;\r\n      }\r\n\r\n      const userId = message.user.id;\r\n\r\n      const isTopMessage =\r\n        !previousMessage ||\r\n        previousMessage.type === 'channel.intro' ||\r\n        previousMessage.type === 'message.date' ||\r\n        previousMessage.type === 'system' ||\r\n        previousMessage.type === 'channel.event' ||\r\n        previousMessage.attachments.length !== 0 ||\r\n        userId !== previousMessage.user.id ||\r\n        previousMessage.type === 'error' ||\r\n        previousMessage.deleted_at;\r\n\r\n      const isBottomMessage =\r\n        !nextMessage ||\r\n        nextMessage.type === 'message.date' ||\r\n        nextMessage.type === 'system' ||\r\n        nextMessage.type === 'channel.event' ||\r\n        nextMessage.type === 'channel.intro' ||\r\n        nextMessage.attachments.length !== 0 ||\r\n        userId !== nextMessage.user.id ||\r\n        nextMessage.type === 'error' ||\r\n        nextMessage.deleted_at;\r\n\r\n      if (isTopMessage) {\r\n        groupStyles.push('top');\r\n      }\r\n\r\n      if (isBottomMessage) {\r\n        if (isTopMessage || message.deleted_at || message.type === 'error') {\r\n          groupStyles.splice(0, groupStyles.length);\r\n          groupStyles.push('single');\r\n        } else {\r\n          groupStyles.push('bottom');\r\n        }\r\n      }\r\n\r\n      if (!isTopMessage && !isBottomMessage) {\r\n        if (message.deleted_at || message.type === 'error') {\r\n          groupStyles.splice(0, groupStyles.length);\r\n          groupStyles.push('single');\r\n        } else {\r\n          groupStyles.splice(0, groupStyles.length);\r\n          groupStyles.push('middle');\r\n        }\r\n      }\r\n\r\n      if (message.attachments.length !== 0) {\r\n        groupStyles.splice(0, groupStyles.length);\r\n        groupStyles.push('single');\r\n      }\r\n\r\n      if (this.props.noGroupByUser) {\r\n        groupStyles.splice(0, groupStyles.length);\r\n        groupStyles.push('single');\r\n      }\r\n\r\n      messageGroupStyles[message.id] = groupStyles;\r\n    }\r\n\r\n    return messageGroupStyles;\r\n  };\r\n\r\n  _onMentionsHoverOrClick = (e, mentioned_users) => {\r\n    if (!this.props.onMentionsHover || !this.props.onMentionsClick) return;\r\n\r\n    const tagName = e.target.tagName.toLowerCase();\r\n    const textContent = e.target.innerHTML.replace('*', '');\r\n    if (tagName === 'strong' && textContent[0] === '@') {\r\n      const userName = textContent.replace('@', '');\r\n      const user = mentioned_users.find(\r\n        (user) => user.name === userName || user.id === userName,\r\n      );\r\n      if (this.props.onMentionsHover && e.type === 'mouseover') {\r\n        this.props.onMentionsHover(e, user);\r\n      }\r\n      if (this.props.onMentionsClick && e.type === 'click') {\r\n        this.props.onMentionsHover(e, user);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds a temporary notification to message list.\r\n   * Notification will be removed after 5 seconds.\r\n   *\r\n   * @param notificationText  Text of notification to be added\r\n   * @param type              Type of notification. success | error\r\n   */\r\n  addNotification = (notificationText, type) => {\r\n    if (typeof notificationText !== 'string') return;\r\n    if (type !== 'success' && type !== 'error') return;\r\n\r\n    const nextIndex = new Date();\r\n\r\n    const newNotifications = [...this.state.notifications];\r\n    newNotifications.push({\r\n      id: nextIndex,\r\n      text: notificationText,\r\n      type,\r\n    });\r\n    this.setState({\r\n      notifications: newNotifications,\r\n    });\r\n\r\n    // remove the notification after 5000 ms\r\n    const ct = setTimeout(() => {\r\n      const index = this.state.notifications.findIndex((notification) => {\r\n        if (notification.id === nextIndex) return true;\r\n        return false;\r\n      });\r\n      const newNotifications = [...this.state.notifications];\r\n      newNotifications.splice(index, 1);\r\n      this.setState({\r\n        notifications: newNotifications,\r\n      });\r\n    }, 5000);\r\n\r\n    this.notificationTimeouts.push(ct);\r\n  };\r\n\r\n  _loadMore = () =>\r\n    this.props.messageLimit\r\n      ? this.props.loadMore(this.props.messageLimit)\r\n      : this.props.loadMore();\r\n\r\n  // eslint-disable-next-line\r\n  render() {\r\n    let allMessages = [...this.props.messages];\r\n    const MessageSystem = this.props.MessageSystem;\r\n    allMessages = this.insertDates(allMessages);\r\n    if (this.props.HeaderComponent) {\r\n      allMessages = this.insertIntro(allMessages);\r\n    }\r\n    const messageGroupStyles = this.getGroupStyles(allMessages);\r\n\r\n    const {\r\n      TypingIndicator,\r\n      dateSeparator: DateSeparator,\r\n      HeaderComponent,\r\n      EmptyStateIndicator,\r\n    } = this.props;\r\n\r\n    // sort by date\r\n    allMessages.sort((a, b) => a.created_at - b.created_at);\r\n\r\n    // get the readData\r\n    const readData = this.getReadStates(allMessages);\r\n\r\n    const lastReceivedId = this.getLastReceived(allMessages);\r\n    const elements = [];\r\n    // let sytemMessageRefID = 0;\r\n    // loop over the messages\r\n    for (const message of allMessages) {\r\n      if (message.id) {\r\n        this.messageRefs[message.id] = React.createRef();\r\n      }\r\n      //  else {\r\n      //   sytemMessageRefID = sytemMessageRefID + 1;\r\n      //   this.messageRefs[sytemMessageRefID] = React.createRef();\r\n      // }\r\n\r\n      if (message.type === 'message.date') {\r\n        if (this.props.threadList) {\r\n          continue;\r\n        }\r\n        elements.push(\r\n          <li key={message.date.toISOString() + '-i'}>\r\n            <DateSeparator date={message.date} />\r\n          </li>,\r\n        );\r\n      } else if (message.type === 'channel.intro') {\r\n        elements.push(\r\n          <li key=\"intro\">\r\n            <HeaderComponent />\r\n          </li>,\r\n        );\r\n      } else if (\r\n        message.type === 'channel.event' ||\r\n        message.type === 'system'\r\n      ) {\r\n        MessageSystem &&\r\n          elements.push(\r\n            <li\r\n              className=\"systemmessage\"\r\n              key={ message.id ||\r\n                message.type === 'system'\r\n                  ? message.created_at\r\n                  : message.type === 'channel.event'\r\n                  ? message.event.created_at\r\n                  : ''\r\n              }\r\n              ref={this.messageRefs[message.id]}\r\n            >\r\n              <MessageSystem message={message} />\r\n            </li>,\r\n          );\r\n      } else if (message.type !== 'message.read') {\r\n        let groupStyles = messageGroupStyles[message.id];\r\n        if (!groupStyles) {\r\n          groupStyles = [];\r\n        }\r\n        const readBy = readData[message.id] || [];\r\n\r\n        elements.push(\r\n          <li\r\n            className={`str-chat__li str-chat__li--${groupStyles}`}\r\n            key={message.id || message.created_at}\r\n            ref={this.messageRefs[message.id]}\r\n          >\r\n            <Message\r\n              client={this.props.client}\r\n              openThread={this.props.openThread}\r\n              members={this.props.members}\r\n              watchers={this.props.watchers}\r\n              message={message}\r\n              groupStyles={groupStyles}\r\n              readBy={readBy}\r\n              lastReceivedId={\r\n                lastReceivedId === message.id ? lastReceivedId : null\r\n              }\r\n              editing={\r\n                !!(this.state.editing && this.state.editing === message.id)\r\n              }\r\n              clearEditingState={this.clearEditingState}\r\n              setEditingState={this.setEditingState}\r\n              messageListRect={this.state.messageListRect}\r\n              channel={this.props.channel}\r\n              threadList={this.props.threadList}\r\n              retrySendMessage={this.props.retrySendMessage}\r\n              addNotification={this.addNotification}\r\n              updateMessage={this.props.updateMessage}\r\n              removeMessage={this.props.removeMessage}\r\n              Message={this.props.Message}\r\n              unsafeHTML={this.props.unsafeHTML}\r\n              Attachment={this.props.Attachment}\r\n              onMentionsClick={this.props.onMentionsClick}\r\n              onMentionsHover={this.props.onMentionsHover}\r\n              messageActions={this.props.messageActions}\r\n              additionalMessageInputProps={\r\n                this.props.additionalMessageInputProps\r\n              }\r\n              getFlagMessageSuccessNotification={\r\n                this.props.getFlagMessageSuccessNotification\r\n              }\r\n              getFlagMessageErrorNotification={\r\n                this.props.getFlagMessageErrorNotification\r\n              }\r\n              getMuteUserSuccessNotification={\r\n                this.props.getMuteUserSuccessNotification\r\n              }\r\n              getMuteUserErrorNotification={\r\n                this.props.getMuteUserErrorNotification\r\n              }\r\n            />\r\n          </li>,\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n        <div style={{ background: 'white' }}>\r\n          <div className={'str-chat__header'}>\r\n            <div id=\"search\">\r\n              <this.SearchBar></this.SearchBar>\r\n            </div>\r\n            <this.Button onClick={this.toggleSearch} open={this.state.open} />\r\n            {this.state.open ? (\r\n              <div id=\"style-lastResult-button-right\">\r\n                <button\r\n                  disabled={\r\n                    this.state.activeSearchResultCount >=\r\n                      this.state.searchResultId.length - 1 ||\r\n                    this.state.open === false\r\n                  }\r\n                  onClick={this.nextSearchResult.bind(this)}\r\n                  id=\"style-lastResult-button-left\"\r\n                >\r\n                  <svg\r\n                    id=\"style-channel-search-arrows\"\r\n                    className=\"search-arrow-left\"\r\n                    width=\"18\"\r\n                    height=\"18\"\r\n                    viewBox=\"0 0 448 512\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      stroke=\"black\"\r\n                      d=\"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z\"\r\n                    ></path>\r\n                  </svg>\r\n                </button>\r\n                <button\r\n                  disabled={\r\n                    this.state.activeSearchResultCount <= 0 ||\r\n                    this.state.open === false\r\n                  }\r\n                  onClick={this.previousSearchResult.bind(this)}\r\n                  id=\"style-lastResult-button-right\"\r\n                >\r\n                  <svg\r\n                    id=\"style-channel-search-arrows\"\r\n                    className=\"search-arrow-right\"\r\n                    width=\"18\"\r\n                    height=\"18\"\r\n                    viewBox=\"0 0 448 512\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      stroke=\"black\"\r\n                      d=\"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z\"\r\n                    ></path>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <></>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div\r\n          className={`str-chat__list ${\r\n            this.props.threadList ? 'str-chat__list--thread' : ''\r\n          }`}\r\n          ref={this.messageList}\r\n        >\r\n          {!elements.length ? (\r\n            <EmptyStateIndicator listType=\"message\" />\r\n          ) : (\r\n            <ReverseInfiniteScroll\r\n              loadMore={this._loadMore}\r\n              hasMore={this.props.hasMore}\r\n              isLoading={this.props.loadingMore}\r\n              listenToScroll={this.listenToScroll}\r\n              useWindow={false}\r\n              loader={\r\n                <Center key=\"loadingindicator\">\r\n                  <LoadingIndicator size={20} />\r\n                </Center>\r\n              }\r\n            >\r\n              <ul className=\"str-chat__ul\">{elements}</ul>\r\n              {this.props.TypingIndicator && (\r\n                <TypingIndicator\r\n                  typing={this.props.typing}\r\n                  client={this.props.client}\r\n                />\r\n              )}\r\n              <div key=\"bottom\" ref={this.bottomRef} />\r\n            </ReverseInfiniteScroll>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"str-chat__list-notifications\">\r\n          {this.state.notifications.map((notification) => (\r\n            <Notification\r\n              active={true}\r\n              key={notification.id}\r\n              type={notification.type}\r\n            >\r\n              {notification.text}\r\n            </Notification>\r\n          ))}\r\n          <Notification active={!this.state.online} type=\"error\">\r\n            Connection failure, reconnecting now...\r\n          </Notification>\r\n\r\n          <MessageNotification\r\n            showNotification={this.state.newMessagesNotification}\r\n            onClick={() => this.goToNewMessages()}\r\n          >\r\n            New Messages!\r\n          </MessageNotification>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  hide = {\r\n    display: 'none',\r\n  };\r\n\r\n  async nextSearchResult() {\r\n    if (\r\n      this.state.activeSearchResultCount <\r\n      this.state.searchResultId.length - 1\r\n    ) {\r\n      await this.setState(\r\n        {\r\n          activeSearchResultCount: this.state.activeSearchResultCount + 1,\r\n        },\r\n        () => {},\r\n      );\r\n      await this.setState(\r\n        {\r\n          activeSearchResultId: this.state.searchResultId[\r\n            this.state.activeSearchResultCount\r\n          ],\r\n        },\r\n        () => {},\r\n      );\r\n      this._scrollToRef(\r\n        this.messageRefs[this.state.activeSearchResultId],\r\n        this.messageList,\r\n      );\r\n      if (\r\n        this.messageRefs[\r\n          this.state.searchResultId[this.state.activeSearchResultCount - 1]\r\n        ].current !== null\r\n      ) {\r\n        this.messageRefs[\r\n          this.state.searchResultId[this.state.activeSearchResultCount - 1]\r\n        ].current.classList.remove('search-result');\r\n      }\r\n\r\n      this.messageRefs[this.state.activeSearchResultId].current.classList.add(\r\n        'search-result',\r\n      );\r\n    }\r\n  }\r\n\r\n  async previousSearchResult() {\r\n    if (this.state.activeSearchResultCount > 0) {\r\n      await this.setState({\r\n        activeSearchResultCount: this.state.activeSearchResultCount - 1,\r\n      });\r\n      await this.setState(\r\n        {\r\n          activeSearchResultId: this.state.searchResultId[\r\n            this.state.activeSearchResultCount\r\n          ],\r\n        },\r\n        () => {},\r\n      );\r\n      this._scrollToRef(\r\n        this.messageRefs[this.state.activeSearchResultId],\r\n        this.messageList,\r\n      );\r\n      if (\r\n        this.messageRefs[\r\n          this.state.searchResultId[this.state.activeSearchResultCount + 1]\r\n        ].current !== null\r\n      ) {\r\n        this.messageRefs[\r\n          this.state.searchResultId[this.state.activeSearchResultCount + 1]\r\n        ].current.classList.remove('search-result');\r\n      }\r\n\r\n      this.messageRefs[this.state.activeSearchResultId].current.classList.add(\r\n        'search-result',\r\n      );\r\n    }\r\n  }\r\n\r\n  SearchBar = () => {\r\n    const { intl } = this.props;\r\n    return (\r\n      <div id=\"style-search-bar\">\r\n        <div className=\"str-chat__channel-search\" id=\"style-channel-search\">\r\n          <div id=\"style-channel-search-input\">\r\n            <input\r\n              id=\"searchInput\"\r\n              className=\"searchInput\"\r\n              placeholder={intl.formatMessage({\r\n                id: 'channel_search.placeholder',\r\n                defaultMessage: 'Search',\r\n              })}\r\n              value={this.state.searchInput || ''}\r\n              type=\"text\"\r\n              name=\"inputSearch\"\r\n              onChange={this.handleChange}\r\n              onKeyPress={this.handleSearch.bind(this)}\r\n              onKeyDown={this.handleSearch.bind(this)}\r\n            ></input>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  toggleSearch = () => {\r\n    if (!this.state.open && this.state.searchInput) {\r\n      this.setState({ open: true });\r\n      this.search(this.state.searchInput, this.props.channel);\r\n    } else {\r\n      if (!this.messageRefs[this.state.activeSearchResultId]) {\r\n        this.setState((state) => ({\r\n          open: false,\r\n          searchInput: null,\r\n          activeSearchResultId: undefined,\r\n          searchResultId: [],\r\n        }));\r\n      } else {\r\n        if (this.state.activeSearchResultId !== undefined) {\r\n          if (\r\n            this.messageRefs[this.state.activeSearchResultId].current !== null\r\n          ) {\r\n            this.messageRefs[\r\n              this.state.activeSearchResultId\r\n            ].current.classList.remove('search-result');\r\n          }\r\n        }\r\n        this.setState(() => ({\r\n          open: false,\r\n          searchInput: null,\r\n          activeSearchResultId: undefined,\r\n          searchResultId: [],\r\n        }));\r\n      }\r\n      this.scrollToBottom();\r\n    }\r\n  };\r\n\r\n  async handleChange(event) {\r\n    this.cleanSearchResult();\r\n    await this.setState({ searchInput: event.target.value }, () => {});\r\n  }\r\n\r\n  async cleanSearchResult() {\r\n    // console.log(this.messageRefs);\r\n    await this.setState({\r\n      open: false,\r\n      activeSearchResultCount: undefined,\r\n      activeSearchResultId: undefined,\r\n    });\r\n    for (var ref in this.messageRefs) {\r\n      if (this.messageRefs[ref].current !== null) {\r\n        this.messageRefs[ref].current.classList.remove('search-result');\r\n      } else {\r\n        // console.log(this.messageRefs);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleSearch(event) {\r\n    this.cleanSearchResult();\r\n    this.setState({\r\n      activeSearchResultCount: undefined | null,\r\n      open: true,\r\n    });\r\n    const code = event.keyCode || event.which;\r\n\r\n    if (code === 13) {\r\n      this.setState({ open: true });\r\n      this.search(this.state.searchInput, this.props.channel);\r\n    }\r\n  }\r\n\r\n  async search(searchValue, channel) {\r\n    if ((searchValue === '') | null | undefined) {\r\n      return;\r\n    }\r\n    const language = window.dplChatConfig.language;\r\n    if ((this.state.searchInput === '') | null | undefined) {\r\n      return;\r\n    }\r\n    const resultIdArray = await channel.state.messages\r\n      .filter((element) => {\r\n        if (!language && searchValue) {\r\n          return element.text.toLowerCase().includes(searchValue.toLowerCase());\r\n        }\r\n\r\n        if (!element.translations) {\r\n          return false;\r\n        }\r\n\r\n        const text = element.translations[language];\r\n        if (searchValue) {\r\n          if (!text.toLowerCase().includes(searchValue.toLowerCase())) {\r\n            return false;\r\n          }\r\n          return true;\r\n        }\r\n        return false;\r\n      })\r\n      .map((element) => element.id);\r\n\r\n    await this.setState(\r\n      {\r\n        searchResultId: resultIdArray,\r\n      },\r\n      () => {},\r\n    );\r\n\r\n    if (resultIdArray.length < 1) {\r\n      this.setState({\r\n        resultIdArray: undefined,\r\n        activeSearchResultCount: undefined,\r\n      });\r\n      this.scrollToBottom();\r\n    }\r\n    await this.setState(\r\n      {\r\n        activeSearchResultId: resultIdArray[resultIdArray.length - 1],\r\n        activeSearchResultCount: resultIdArray.length - 1,\r\n      },\r\n      () => {},\r\n    );\r\n  }\r\n  Button = ({ open, onClick }) => (\r\n    <div onClick={onClick} style={{ display: 'flex' }}>\r\n      {open ? (\r\n        <div>\r\n          <svg\r\n            id=\"style-channel-search-icon\"\r\n            width=\"18\"\r\n            height=\"18\"\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              stroke=\"black\"\r\n              d=\"M 19.333 2.547 l -1.88 -1.88 L 10 8.12 L 2.547 0.667 l -1.88 1.88 L 8.12 10 L 0.667 17.453 l 1.88 1.88 L 10 11.88 l 7.453 7.453 l 1.88 -1.88 L 11.88 10 Z\"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <svg\r\n            id=\"style-channel-search-icon\"\r\n            width=\"18\"\r\n            height=\"17\"\r\n            viewBox=\"0 0 18 17\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              stroke=\"black\"\r\n              d=\"M18.125,15.804l-4.038-4.037c0.675-1.079,1.012-2.308,1.01-3.534C15.089,4.62,12.199,1.75,8.584,1.75C4.815,1.75,1.982,4.726,2,8.286c0.021,3.577,2.908,6.549,6.578,6.549c1.241,0,2.417-0.347,3.44-0.985l4.032,4.026c0.167,0.166,0.43,0.166,0.596,0l1.479-1.478C18.292,16.234,18.292,15.968,18.125,15.804 M8.578,13.99c-3.198,0-5.716-2.593-5.733-5.71c-0.017-3.084,2.438-5.686,5.74-5.686c3.197,0,5.625,2.493,5.64,5.624C14.242,11.548,11.621,13.99,8.578,13.99 M16.349,16.981l-3.637-3.635c0.131-0.11,0.721-0.695,0.876-0.884l3.642,3.639L16.349,16.981z\"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nMessageList = withChannelContext(injectIntl(MessageList));\r\nexport { MessageList };\r\n\r\nconst Center = ({ children }) => (\r\n  <div className=\"str-chat__list__center\">{children}</div>\r\n);\r\n\r\nconst Notification = ({ children, active, type }) => {\r\n  if (active) {\r\n    return (\r\n      <div className={`str-chat__custom-notification notification-${type}`}>\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ChatContext } from '../context';\r\nimport { IntlProvider } from 'react-intl';\r\nimport messages_en from '../translations/en.json';\r\nimport messages_de from '../translations/de.json';\r\nimport messages_es from '../translations/es.json';\r\nimport messages_it from '../translations/it.json';\r\nimport messages_pl from '../translations/pl.json';\r\nimport messages_cs from '../translations/cs.json';\r\nimport messages_da from '../translations/da.json';\r\nimport messages_fr from '../translations/fr.json';\r\nimport messages_nl from '../translations/nl.json';\r\nimport messages_pt from '../translations/pt.json';\r\nimport messages_ru from '../translations/ru.json';\r\nimport messages_zh from '../translations/zh.json';\r\n\r\nconst messages = {\r\n  'en': messages_en,\r\n  'de': messages_de,\r\n  'es': messages_es,\r\n  'it': messages_it,\r\n  'pl': messages_pl,\r\n  'cs': messages_cs,\r\n  'da': messages_da,\r\n  'fr': messages_fr,\r\n  'nl': messages_nl,\r\n  'pt': messages_pt,\r\n  'ru': messages_ru,\r\n  'zh': messages_zh\r\n};\r\n/**\r\n * Chat - Wrapper component for Chat. The needs to be placed around any other chat components.\r\n * This Chat component provides the ChatContext to all other components.\r\n *\r\n * The ChatContext provides the following props:\r\n *\r\n * - client (the client connection)\r\n * - channels (the list of channels)\r\n * - setActiveChannel (a function to set the currently active channel)\r\n * - channel (the currently active channel)\r\n *\r\n * It also exposes the withChatContext HOC which you can use to consume the ChatContext\r\n *\r\n * @example ./docs/Chat.md\r\n * @extends PureComponent\r\n */\r\nexport class Chat extends PureComponent {\r\n  static propTypes = {\r\n    /** The StreamChat client object */\r\n    client: PropTypes.object.isRequired,\r\n    /**\r\n     *\r\n     * Theme could be used for custom styling of the components.\r\n     *\r\n     * You can override the classes used in our components under parent theme class.\r\n     *\r\n     * e.g. If you want to build a theme where background of message is black\r\n     *\r\n     * ```\r\n     *  <Chat client={client} theme={demo}>\r\n     *    <Channel>\r\n     *      <MessageList />\r\n     *    </Channel>\r\n     *  </Chat>\r\n     * ```\r\n     *\r\n     * ```scss\r\n     *  .demo.str-chat {\r\n     *    .str-chat__message-simple {\r\n     *      &-text-inner {\r\n     *        background-color: black;\r\n     *      }\r\n     *    }\r\n     *  }\r\n     * ```\r\n     *\r\n     * Built in available themes:\r\n     *\r\n     *  - `messaging light`\r\n     *  - `messaging dark`\r\n     *  - `team light`\r\n     *  - `team dark`\r\n     *  - `commerce light`\r\n     *  - `commerce dark`\r\n     *  - `gaming light`\r\n     *  - `gaming dark`\r\n     *  - `livestream light`\r\n     *  - `livestream dark`\r\n     */\r\n    theme: PropTypes.string,\r\n    locale: PropTypes.string,\r\n    messages: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    theme: 'messaging light',\r\n    locale: 'de',\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      // currently active channel\r\n      channel: {},\r\n      search: undefined,\r\n      error: false,\r\n    };\r\n  }\r\n\r\n  setActiveChannel = async (channel, watchers = {}, e) => {\r\n    if (e !== undefined && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    if (Object.keys(watchers).length) {\r\n      await channel.query({ watch: true, watchers });\r\n    }\r\n    if (this.state.channel === channel) {\r\n      this.setState(() => ({\r\n        channel: {},\r\n      }));\r\n    }\r\n    this.setState(() => ({\r\n      channel,\r\n    }));\r\n  };\r\n\r\n  setActiveSearch = async (search, e) => {\r\n    if (e !== undefined && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    if (search) {\r\n      this.setState(() => ({\r\n        search,\r\n      }));\r\n    } else {\r\n      this.setState(() => ({\r\n        search: undefined,\r\n      }));\r\n    }\r\n  };\r\n\r\n  getContext = () => ({\r\n    client: this.props.client,\r\n    channel: this.state.channel,\r\n    search: this.state.search,\r\n    setActiveChannel: this.setActiveChannel,\r\n    setActiveSearch: this.setActiveSearch,\r\n    theme: this.props.theme,\r\n  });\r\n\r\n  render() {\r\n    return (\r\n      <IntlProvider\r\n        locale={this.props.locale}\r\n        messages={messages[this.props.locale]}\r\n      >\r\n        <ChatContext.Provider value={this.getContext()}>\r\n          {this.props.children}\r\n        </ChatContext.Provider>\r\n      </IntlProvider>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * LoadingErrorIndicator - UI component for error indicator in Channel.\r\n *\r\n * @example ./docs/LoadingErrorIndicator.md\r\n * @extends PureComponent\r\n */\r\nexport class LoadingErrorIndicator extends React.PureComponent {\r\n  static propTypes = {\r\n    /** Error object */\r\n    error: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\r\n  };\r\n  static defaultProps = {\r\n    error: false,\r\n  };\r\n\r\n  render() {\r\n    if (!this.props.error) return null;\r\n\r\n    return <div>Error: {this.props.error.message}</div>;\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { withChatContext, ChannelContext } from '../context';\r\n\r\nimport { LoadingIndicator } from './LoadingIndicator';\r\nimport { LoadingErrorIndicator } from './LoadingErrorIndicator';\r\n\r\nimport uuidv4 from 'uuid/v4';\r\nimport PropTypes from 'prop-types';\r\nimport Immutable from 'seamless-immutable';\r\nimport Visibility from 'visibilityjs';\r\nimport { logChatPromiseExecution } from 'stream-chat';\r\nimport { MessageSimple } from './MessageSimple';\r\nimport { Attachment } from './Attachment';\r\nimport debounce from 'lodash/debounce';\r\nimport throttle from 'lodash/throttle';\r\n/**\r\n * Channel - Wrapper component for a channel. It needs to be place inside of the Chat component.\r\n * ChannelHeader, MessageList, Thread and MessageInput should be used as children of the Channel component.\r\n *\r\n * @example ./docs/Channel.md\r\n * @extends PureComponent\r\n */\r\nclass Channel extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { error: false };\r\n  }\r\n  static propTypes = {\r\n    /** Which channel to connect to, will initialize the channel if it's not initialized yet */\r\n    channel: PropTypes.shape({\r\n      watch: PropTypes.func,\r\n    }).isRequired,\r\n    /** Client is passed automatically via the Chat Context */\r\n    client: PropTypes.object.isRequired,\r\n    /**\r\n     * Error indicator UI component. This will be shown on the screen if channel query fails.\r\n     *\r\n     * Defaults to and accepts same props as: [LoadingErrorIndicator](https://getstream.github.io/stream-chat-react/#loadingerrorindicator)\r\n     *\r\n     * */\r\n    LoadingErrorIndicator: PropTypes.oneOfType([\r\n      PropTypes.node,\r\n      PropTypes.func,\r\n    ]),\r\n    /**\r\n     * Loading indicator UI component. This will be shown on the screen until the messages are\r\n     * being queried from channel. Once the messages are loaded, loading indicator is removed from the screen\r\n     * and replaced with children of the Channel component.\r\n     *\r\n     * Defaults to and accepts same props as: [LoadingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingIndicator.js)\r\n     */\r\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Message UI component to display a message in message list.\r\n     *\r\n     * Available built-in components (also accepts the same props as):\r\n     *\r\n     * 1. [MessageSimple](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageSimple.js) (default)\r\n     * 2. [MessageTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageTeam.js)\r\n     * 3. [MessageLivestream](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageLivestream.js)\r\n     * 3. [MessageCommerce](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageCommerce.js)\r\n     *\r\n     * */\r\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Attachment UI component to display attachment in individual message.\r\n     *\r\n     * Defaults to and accepts same props as: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\r\n     * */\r\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Handle for click on @mention in message\r\n     *\r\n     * @param {Event} event DOM Click event\r\n     * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is clicked\r\n     */\r\n    onMentionsClick: PropTypes.func,\r\n    /**\r\n     * Handle for hover on @mention in message\r\n     *\r\n     * @param {Event} event DOM hover event\r\n     * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is hovered\r\n     */\r\n    onMentionsHover: PropTypes.func,\r\n    /** Weather to allow multiple attachment uploads */\r\n    multipleUploads: PropTypes.bool,\r\n    /** List of accepted file types */\r\n    acceptedFiles: PropTypes.array,\r\n    /** Maximum number of attachments allowed per message */\r\n    maxNumberOfFiles: PropTypes.number,\r\n    /** Override send message request (Advanced usage only)\r\n     *\r\n     * @param {String} channelId full channel ID in format of `type:id`\r\n     * @param {Object} message\r\n     */\r\n    doSendMessageRequest: PropTypes.func,\r\n    /** Override update(edit) message request (Advanced usage only)\r\n     *\r\n     * @param {String} channelId full channel ID in format of `type:id`\r\n     * @param {Object} updatedMessage\r\n     */\r\n    doUpdateMessageRequest: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    LoadingIndicator,\r\n    LoadingErrorIndicator,\r\n    Message: MessageSimple,\r\n    Attachment,\r\n  };\r\n\r\n  render() {\r\n    if(this.props.channel=== undefined){\r\n      return null;\r\n    }\r\n    if (!this.props.channel.cid) {\r\n      return null; // <div>Select a channel</div>;\r\n    }\r\n    // We use a wrapper to make sure the key variable is set.\r\n    // this ensures that if you switch channel the component is recreated\r\n    return <ChannelInner {...this.props} key={this.props.channel.cid} />;\r\n  }\r\n}\r\n\r\nclass ChannelInner extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: false,\r\n      // Loading the initial content of the channel\r\n      loading: true,\r\n      // Loading more messages\r\n      loadingMore: false,\r\n      hasMore: true,\r\n      messages: Immutable([]),\r\n      online: true,\r\n      typing: Immutable({}),\r\n      watchers: Immutable({}),\r\n      members: Immutable({}),\r\n      read: Immutable({}),\r\n      eventHistory: {},\r\n      thread: false,\r\n      threadMessages: [],\r\n      threadLoadingMore: false,\r\n      threadHasMore: true,\r\n    };\r\n\r\n    // hard limit to prevent you from scrolling faster than 1 page per 2 seconds\r\n    this._loadMoreFinishedDebounced = debounce(this.loadMoreFinished, 2000, {\r\n      leading: true,\r\n      trailing: true,\r\n    });\r\n\r\n    // hard limit to prevent you from scrolling faster than 1 page per 2 seconds\r\n    this._loadMoreThreadFinishedDebounced = debounce(\r\n      this.loadMoreThreadFinished,\r\n      2000,\r\n      {\r\n        leading: true,\r\n        trailing: true,\r\n      },\r\n    );\r\n\r\n    this._markReadThrottled = throttle(this.markRead, 500, {\r\n      leading: true,\r\n      trailing: true,\r\n    });\r\n    this._setStateThrottled = throttle(this.setState, 500, {\r\n      leading: true,\r\n      trailing: true,\r\n    });\r\n  }\r\n\r\n  static propTypes = {\r\n    /** Which channel to connect to */\r\n    channel: PropTypes.shape({\r\n      watch: PropTypes.func,\r\n    }).isRequired,\r\n    /** Client is passed via the Chat Context */\r\n    client: PropTypes.object.isRequired,\r\n    /** The loading indicator to use */\r\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    LoadingErrorIndicator: PropTypes.oneOfType([\r\n      PropTypes.node,\r\n      PropTypes.func,\r\n    ]),\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const channel = this.props.channel;\r\n    let errored = false;\r\n    if (!channel.initialized) {\r\n      try {\r\n        await channel.watch();\r\n      } catch (e) {\r\n        this.setState({ error: e });\r\n        errored = true;\r\n      }\r\n    }\r\n    this.originalTitle = document.title;\r\n    this.lastRead = new Date();\r\n    if (!errored) {\r\n      this.copyChannelState();\r\n      this.listenToChanges();\r\n      // get all Messages for in memory search\r\n      await this.loadMore();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // If there is an active thread, then in that case we should sync\r\n    // it with updated state of channel.\r\n    if (this.state.thread) {\r\n      for (let i = this.state.messages.length - 1; i >= 0; i--) {\r\n        if (this.state.messages[i].id === this.state.thread.id) {\r\n          this.setState({\r\n            thread: this.state.messages[i],\r\n          });\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.client.off('connection.recovered', this.handleEvent);\r\n    this.props.channel.off(this.handleEvent);\r\n    this._loadMoreFinishedDebounced.cancel();\r\n    this._loadMoreThreadFinishedDebounced.cancel();\r\n\r\n    if (this.visibilityListener || this.visibilityListener === 0) {\r\n      Visibility.unbind(this.visibilityListener);\r\n    }\r\n  }\r\n\r\n  openThread = (message, e) => {\r\n    if (e && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    const channel = this.props.channel;\r\n    const threadMessages = channel.state.threads[message.id] || [];\r\n\r\n    this.setState({\r\n      thread: message,\r\n      threadMessages,\r\n    });\r\n  };\r\n\r\n  loadMoreThread = async () => {\r\n    // prevent duplicate loading events...\r\n    if (this.state.threadLoadingMore) return;\r\n    this.setState({\r\n      threadLoadingMore: true,\r\n    });\r\n    const channel = this.props.channel;\r\n    const parentID = this.state.thread.id;\r\n    const oldMessages = channel.state.threads[parentID] || [];\r\n    const oldestMessageID = oldMessages[0] ? oldMessages[0].id : null;\r\n    const limit = 50;\r\n    const queryResponse = await channel.getReplies(parentID, {\r\n      limit,\r\n      id_lt: oldestMessageID,\r\n    });\r\n\r\n    const hasMore = queryResponse.messages.length === limit;\r\n\r\n    const threadMessages = channel.state.threads[parentID] || [];\r\n\r\n    // next set loadingMore to false so we can start asking for more data...\r\n    this._loadMoreThreadFinishedDebounced(hasMore, threadMessages);\r\n  };\r\n\r\n  loadMoreThreadFinished = (threadHasMore, threadMessages) => {\r\n    this.setState({\r\n      threadLoadingMore: false,\r\n      threadHasMore,\r\n      threadMessages,\r\n    });\r\n  };\r\n\r\n  closeThread = (e) => {\r\n    if (e && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    this.setState({\r\n      thread: null,\r\n      threadMessages: [],\r\n    });\r\n  };\r\n\r\n  copyChannelState() {\r\n    const channel = this.props.channel;\r\n\r\n    this.setState({\r\n      messages: channel.state.messages,\r\n      read: channel.state.read,\r\n      watchers: channel.state.watchers,\r\n      members: channel.state.members,\r\n      watcher_count: channel.state.watcher_count,\r\n      loading: false,\r\n      typing: Immutable({}),\r\n    });\r\n\r\n    if (channel.countUnread() > 0) channel.markRead();\r\n  }\r\n\r\n  updateMessage = (updatedMessage, extraState) => {\r\n    const channel = this.props.channel;\r\n\r\n    extraState = extraState || {};\r\n\r\n    // adds the message to the local channel state..\r\n    // this adds to both the main channel state as well as any reply threads\r\n    channel.state.addMessageSorted(updatedMessage);\r\n\r\n    // update the Channel component state\r\n    if (this.state.thread && updatedMessage.parent_id) {\r\n      extraState.threadMessages =\r\n        channel.state.threads[updatedMessage.parent_id] || [];\r\n    }\r\n    this.setState({ messages: channel.state.messages, ...extraState });\r\n  };\r\n\r\n  removeMessage = (message) => {\r\n    const channel = this.props.channel;\r\n    channel.state.removeMessage(message);\r\n    this.setState({ messages: channel.state.messages });\r\n  };\r\n\r\n  removeEphemeralMessages() {\r\n    const c = this.props.channel;\r\n    c.state.selectRegularMessages();\r\n    this.setState({ messages: c.state.messages });\r\n  }\r\n\r\n  createMessagePreview = (text, attachments, parent, mentioned_users) => {\r\n    // create a preview of the message\r\n    const clientSideID = `${this.props.client.userID}-` + uuidv4();\r\n    const message = {\r\n      text,\r\n      html: text,\r\n      __html: text,\r\n      //id: tmpID,\r\n      id: clientSideID,\r\n      type: 'regular',\r\n      status: 'sending',\r\n      user: {\r\n        id: this.props.client.userID,\r\n        ...this.props.client.user,\r\n      },\r\n      created_at: new Date(),\r\n      attachments,\r\n      mentioned_users,\r\n      reactions: [],\r\n    };\r\n\r\n    if (parent && parent.id) {\r\n      message.parent_id = parent.id;\r\n    }\r\n    return message;\r\n  };\r\n\r\n  editMessage = (updatedMessage) => {\r\n    if (this.props.doUpdateMessageRequest) {\r\n      return Promise.resolve(\r\n        this.props.doUpdateMessageRequest(\r\n          this.props.channel.cid,\r\n          updatedMessage,\r\n        ),\r\n      );\r\n    }\r\n\r\n    return this.props.client.updateMessage(updatedMessage);\r\n  };\r\n\r\n  _sendMessage = async (message) => {\r\n    const { text, attachments, id, parent_id, mentioned_users } = message;\r\n    const messageData = {\r\n      text,\r\n      attachments,\r\n      mentioned_users,\r\n      id,\r\n      parent_id,\r\n    };\r\n\r\n    try {\r\n      let messageResponse;\r\n      if (this.props.doSendMessageRequest) {\r\n        messageResponse = await this.props.doSendMessageRequest(\r\n          this.props.channel.cid,\r\n          messageData,\r\n        );\r\n      } else {\r\n        messageResponse = await this.props.channel.sendMessage(messageData);\r\n      }\r\n\r\n      // replace it after send is completed\r\n      if (messageResponse.message) {\r\n        messageResponse.message.status = 'received';\r\n        this.updateMessage(messageResponse.message);\r\n      }\r\n    } catch (error) {\r\n      // set the message to failed..\r\n      message.status = 'failed';\r\n      this.updateMessage(message);\r\n    }\r\n  };\r\n\r\n  sendMessage = async ({\r\n    text,\r\n    attachments = [],\r\n    mentioned_users = [],\r\n    parent,\r\n  }) => {\r\n    // remove error messages upon submit\r\n    this.props.channel.state.filterErrorMessages();\r\n\r\n    // create a local preview message to show in the UI\r\n    const messagePreview = this.createMessagePreview(\r\n      text,\r\n      attachments,\r\n      parent,\r\n      mentioned_users,\r\n    );\r\n\r\n    // first we add the message to the UI\r\n    this.updateMessage(messagePreview, {\r\n      messageInput: '',\r\n      commands: [],\r\n      userAutocomplete: [],\r\n    });\r\n\r\n    await this._sendMessage(messagePreview);\r\n  };\r\n\r\n  retrySendMessage = async (message) => {\r\n    // set the message status to sending\r\n    message = message.asMutable();\r\n    message.status = 'sending';\r\n    this.updateMessage(message);\r\n    // actually try to send the message...\r\n    await this._sendMessage(message);\r\n  };\r\n\r\n  handleEvent = (e) => {\r\n    const { channel } = this.props;\r\n    let threadMessages = [];\r\n    const threadState = {};\r\n    if (this.state.thread) {\r\n      threadMessages = channel.state.threads[this.state.thread.id] || [];\r\n      threadState['threadMessages'] = threadMessages;\r\n    }\r\n\r\n    if (\r\n      this.state.thread &&\r\n      e.message &&\r\n      e.message.id === this.state.thread.id\r\n    ) {\r\n      threadState['thread'] = channel.state.messageToImmutable(e.message);\r\n    }\r\n\r\n    if (Object.keys(threadState).length > 0) {\r\n      // TODO: in theory we should do 1 setState call not 2,\r\n      // However the setStateThrottled doesn't support this\r\n      this.setState(threadState);\r\n    }\r\n\r\n    if (e.type === 'message.new') {\r\n      let mainChannelUpdated = true;\r\n      if (e.message.parent_id && !e.message.show_in_channel) {\r\n        mainChannelUpdated = false;\r\n      }\r\n\r\n      if (\r\n        mainChannelUpdated &&\r\n        e.message.user.id !== this.props.client.userID\r\n      ) {\r\n        if (Visibility.state() === 'visible') {\r\n          this._markReadThrottled(channel);\r\n        } else {\r\n          const unread = channel.countUnread(this.lastRead);\r\n          document.title = `(${unread}) ${this.originalTitle}`;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (e.type === 'member.added') {\r\n      this.addToEventHistory(e);\r\n    }\r\n\r\n    if (e.type === 'member.removed') {\r\n      this.addToEventHistory(e);\r\n    }\r\n\r\n    this._setStateThrottled({\r\n      messages: channel.state.messages,\r\n      watchers: channel.state.watchers,\r\n      read: channel.state.read,\r\n      typing: channel.state.typing,\r\n      watcher_count: channel.state.watcher_count,\r\n    });\r\n  };\r\n\r\n  addToEventHistory = (e) => {\r\n    this.setState((prevState) => {\r\n      if (!prevState.message || !prevState.message.length) {\r\n        return;\r\n      }\r\n      const lastMessageId =\r\n        prevState.messages[prevState.messages.length - 1].id;\r\n      if (!prevState.eventHistory[lastMessageId])\r\n        return {\r\n          ...prevState,\r\n          eventHistory: {\r\n            ...prevState.eventHistory,\r\n            [lastMessageId]: [e],\r\n          },\r\n        };\r\n\r\n      return {\r\n        ...prevState,\r\n        eventHistory: {\r\n          ...prevState.eventHistory,\r\n          [lastMessageId]: [...prevState.eventHistory[lastMessageId], e],\r\n        },\r\n      };\r\n    });\r\n  };\r\n\r\n  markRead = (channel) => {\r\n    if (!channel.getConfig().read_events) {\r\n      return;\r\n    }\r\n    this.lastRead = new Date();\r\n\r\n    logChatPromiseExecution(channel.markRead(), 'mark read');\r\n\r\n    if (this.originalTitle) {\r\n      document.title = this.originalTitle;\r\n    }\r\n  };\r\n\r\n  listenToChanges() {\r\n    // The more complex sync logic is done in chat.js\r\n    // listen to client.connection.recovered and all channel events\r\n    this.props.client.on('connection.recovered', this.handleEvent);\r\n    const channel = this.props.channel;\r\n    channel.on(this.handleEvent);\r\n    this.boundMarkRead = this.markRead.bind(this, channel);\r\n    this.visibilityListener = Visibility.change((e, state) => {\r\n      if (state === 'visible') {\r\n        this.boundMarkRead();\r\n      }\r\n    });\r\n  }\r\n\r\n  loadMore = async (limit = 100) => {\r\n    // prevent duplicate loading events...\r\n    if (this.state.loadingMore) return;\r\n    this.setState({ loadingMore: true });\r\n\r\n    const oldestMessage = this.state.messages[0];\r\n\r\n    if (oldestMessage && oldestMessage.status !== 'received') {\r\n      this.setState({\r\n        loadingMore: false,\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    const oldestID = oldestMessage ? oldestMessage.id : null;\r\n\r\n    const perPage = limit;\r\n    let queryResponse;\r\n    try {\r\n      queryResponse = await this.props.channel.query({\r\n        messages: { limit: perPage, id_lt: oldestID },\r\n      });\r\n    } catch (e) {\r\n      console.warn('message pagination request failed with error', e);\r\n      this.setState({ loadingMore: false });\r\n      return;\r\n    }\r\n    const hasMore = queryResponse.messages.length === perPage;\r\n\r\n\t// recursive call load more untill all messagens loaded\r\n    if (hasMore) {\r\n      this.setState({\r\n        loadingMore: false,\r\n        hasMore,\r\n        messages: this.props.channel.state.messages,\r\n      });\r\n      await this.loadMore();\r\n    } else {\r\n      this._loadMoreFinishedDebounced(\r\n        hasMore,\r\n        this.props.channel.state.messages,\r\n      );\r\n    }\r\n  };\r\n\r\n  _onMentionsHoverOrClick = (e, mentioned_users) => {\r\n    if (!this.props.onMentionsHover && !this.props.onMentionsClick) return;\r\n\r\n    const tagName = e.target.tagName.toLowerCase();\r\n    const textContent = e.target.innerHTML.replace('*', '');\r\n    if (tagName === 'strong' && textContent[0] === '@') {\r\n      const userName = textContent.replace('@', '');\r\n      const user = mentioned_users.find(\r\n        (user) => user.name === userName || user.id === userName,\r\n      );\r\n      if (\r\n        this.props.onMentionsHover &&\r\n        typeof this.props.onMentionsHover === 'function' &&\r\n        e.type === 'mouseover'\r\n      ) {\r\n        this.props.onMentionsHover(e, user);\r\n      }\r\n      if (\r\n        this.props.onMentionsClick &&\r\n        e.type === 'click' &&\r\n        typeof this.props.onMentionsClick === 'function'\r\n      ) {\r\n        this.props.onMentionsClick(e, user);\r\n      }\r\n    }\r\n  };\r\n\r\n  loadMoreFinished = (hasMore, messages) => {\r\n    this.setState({\r\n      loadingMore: false,\r\n      hasMore,\r\n      messages,\r\n    });\r\n  };\r\n\r\n  getContext = () => ({\r\n    ...this.state,\r\n    client: this.props.client,\r\n    channel: this.props.channel,\r\n    search: this.props.search,\r\n    Message: this.props.Message,\r\n    Attachment: this.props.Attachment,\r\n    multipleUploads: this.props.multipleUploads,\r\n    acceptedFiles: this.props.acceptedFiles,\r\n    maxNumberOfFiles: this.props.maxNumberOfFiles,\r\n    updateMessage: this.updateMessage,\r\n    removeMessage: this.removeMessage,\r\n    sendMessage: this.sendMessage,\r\n    editMessage: this.editMessage,\r\n    retrySendMessage: this.retrySendMessage,\r\n    loadMore: this.loadMore,\r\n\r\n    // thread related\r\n    openThread: this.openThread,\r\n    closeThread: this.closeThread,\r\n    loadMoreThread: this.loadMoreThread,\r\n    onMentionsClick: this._onMentionsHoverOrClick,\r\n    onMentionsHover: this._onMentionsHoverOrClick,\r\n  });\r\n\r\n  renderComponent = () => this.props.children;\r\n\r\n  render() {\r\n    let core;\r\n    const LoadingIndicator = this.props.LoadingIndicator;\r\n    const LoadingErrorIndicator = this.props.LoadingErrorIndicator;\r\n\r\n    if (this.state.error) {\r\n      core = (\r\n        <LoadingErrorIndicator error={this.state.error}></LoadingErrorIndicator>\r\n      );\r\n    } else if (this.state.loading) {\r\n      core = <LoadingIndicator size={25} isLoading={true} />;\r\n    } else if (!this.props.channel || !this.props.channel.watch) {\r\n      core = <div>Channel Missing</div>;\r\n    } else {\r\n      core = (\r\n        <ChannelContext.Provider value={this.getContext()}>\r\n          <div className=\"str-chat__container\">{this.renderComponent()}</div>\r\n        </ChannelContext.Provider>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className={`str-chat str-chat-channel ${this.props.theme}`}>\r\n        {core}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChannel = withChatContext(Channel);\r\n\r\nexport { Channel };\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Avatar } from './Avatar';\r\nimport { withChannelContext } from '../context';\r\nimport { languageChangedEvent } from '../utils';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n// import chevrondown from '../assets/str-chat__icon-chevron-down.svg';\r\n/**\r\n * ChannelHeader - Render some basic information about this channel\r\n *\r\n * @example ./docs/ChannelHeader.md\r\n * @extends PureComponent\r\n */\r\nclass ChannelHeader extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n    };\r\n  }\r\n  static propTypes = {\r\n    /** Set title manually */\r\n    title: PropTypes.string,\r\n    /** Show a little indicator that the channel is live right now */\r\n    live: PropTypes.bool,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    channel: PropTypes.object.isRequired,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    watcher_count: PropTypes.number,\r\n    language: PropTypes.string,\r\n  };\r\n  static defaultProps = {\r\n    language: localStorage.getItem('language'),\r\n  };\r\n\r\n  render() {\r\n    const { intl } = this.props;\r\n    return (\r\n      <div className=\"str-chat__header-livestream\">\r\n        {this.props.channel.data.image && (\r\n          <Avatar\r\n            image={this.props.channel.data.image}\r\n            shape=\"rounded\"\r\n            size={this.props.channel.type === 'commerce' ? 60 : 40}\r\n          />\r\n        )}\r\n        <div className=\"str-chat__header-livestream-left\">\r\n          <p className=\"str-chat__header-livestream-left--title\">\r\n            <a className=\"channel-header-link\" onClick={() => this.jumpTo()}>\r\n              {this.props.title || this.props.channel.data.name}{' '}\r\n            </a>\r\n            {this.props.live && (\r\n              <span className=\"str-chat__header-livestream-left--livelabel\">\r\n                <FormattedMessage\r\n                  id=\"channel_header.live\"\r\n                  defaultMessage=\"live\"\r\n                />\r\n              </span>\r\n            )}\r\n          </p>\r\n          {this.props.channel.data.subtitle && (\r\n            <p className=\"str-chat__header-livestream-left--subtitle\">\r\n              {this.props.channel.data.subtitle}\r\n            </p>\r\n          )}\r\n          <p className=\"str-chat__header-livestream-left--members\">\r\n            {!this.props.live && this.props.channel.data.member_count > 0 && (\r\n              <>\r\n                <FormattedMessage\r\n                  id=\"channel_header.members\"\r\n                  defaultMessage=\"{count} members\"\r\n                  values={{ count: this.props.channel.data.member_count }}\r\n                />\r\n                ,{' '}\r\n              </>\r\n            )}\r\n            <FormattedMessage\r\n              id=\"channel_header.watchers\"\r\n              defaultMessage=\"{count} online\"\r\n              values={{ count: this.props.watcher_count }}\r\n            />\r\n          </p>\r\n          <div className=\"str-chat__channel_header_responsive_member-label--all\">\r\n            <label>\r\n              {this.props.channel.data.responsiveMember\r\n                ? 'In Bearbeitung' + '  (dies sehen alle)'\r\n                : ''}\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div id=\"channel_header_responsive_member\">\r\n          {this.props.client.user.role === 'admin' &&\r\n          this.props.client.user.name !==\r\n            this.props.channel.data.responsiveMember &&\r\n          !this.state.isLoading ? (\r\n            <>\r\n              <button onClick={this.SetResponsive}>\r\n                {this.props.channel.data.responsiveMember\r\n                  ? 'bernehme Bearbeitung'\r\n                  : 'Starte Bearbeitung'}\r\n              </button>\r\n              {/* <label>\r\n                {this.props.channel.data.responsiveMember\r\n                  ? 'Aktuell in Bearbeitung von ' +\r\n                    this.props.channel.data.responsiveMember\r\n                  : ''}\r\n              </label> */}\r\n            </>\r\n          ) : (\r\n            <label></label>\r\n          )}\r\n        </div>\r\n        <div id=\"channel_header_left_panel\">\r\n          <this.LanguageSelect></this.LanguageSelect>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  // deleteChannel = async () => {\r\n  //   const response = await this.channel.delete();\r\n  //   console.log('channel is deleted', response);\r\n  // };\r\n  SetResponsive = async () => {\r\n    await this.setState({ isLoading: true });\r\n    await this.props.channel.update(\r\n      {\r\n        name: this.props.channel.data.name,\r\n        extraType: this.props.channel.data.extraType,\r\n        referenceId: this.props.channel.data.referenceId,\r\n        assignFlag: true,\r\n        languages: this.props.channel.data.languages,\r\n        responsiveMember: this.props.client.user.name,\r\n      },\r\n      {\r\n        text: this.props.client.user.name + ' ist jetzt der neue Bearbeiter',\r\n        user_id: this.props.client.user.id,\r\n      },\r\n    );\r\n    await this.setState({ isLoading: false });\r\n  };\r\n\r\n  LanguageSelect = () => (\r\n    <select\r\n      id=\"select\"\r\n      className=\"str-chat__channel-list-team__header--button\"\r\n      onChange={this.onLanguageChange}\r\n      defaultValue={this.props.language}\r\n    >\r\n      {this.languageOptions}\r\n    </select>\r\n  );\r\n\r\n  jumpTo = () => {\r\n    const { extraType, referenceId } = this.props.channel.data;\r\n    window.dplChatConfig.goToDetails(extraType, referenceId);\r\n  };\r\n\r\n  onLanguageChange(event) {\r\n    window.dplChatConfig.language = event.target.value;\r\n    window.dispatchEvent(languageChangedEvent);\r\n    localStorage.setItem('language', window.dplChatConfig.language);\r\n  }\r\n\r\n  languageOptions = window.dplChatConfig.languages.map((option, j) => {\r\n    if (option.value === '') {\r\n      return (\r\n        <option key={j} value={option.value}>\r\n          {option.label}\r\n        </option>\r\n      );\r\n    }\r\n    if (this.props.channel.data.languages !== null) {\r\n      if (\r\n        this.props.channel.data.languages.find(\r\n          (element) => element === option.value,\r\n        )\r\n      ) {\r\n        return (\r\n          <option key={j} value={option.value}>\r\n            {option.label}\r\n          </option>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  });\r\n}\r\n\r\nChannelHeader = withChannelContext(ChannelHeader);\r\nexport { ChannelHeader };\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ChatAutoComplete } from './ChatAutoComplete';\r\nimport { injectIntl } from 'react-intl';\r\nimport {\r\n  ImageDropzone,\r\n  ImagePreviewer,\r\n  FilePreviewer,\r\n  FileUploadButton,\r\n} from 'react-file-utils';\r\n\r\nimport { Picker } from 'emoji-mart';\r\n\r\n/**\r\n * MessageInputFlat - Large Message Input to be used for the MessageInput.\r\n * @example ./docs/MessageInputFlat.md\r\n */\r\nclass MessageInputFlat extends PureComponent {\r\n  static propTypes = {\r\n    /** Set focus to the text input if this is enabled */\r\n    focus: PropTypes.bool,\r\n    /** Grow the textarea while you're typing */\r\n    grow: PropTypes.bool,\r\n    /** Disable the textarea */\r\n    disabled: PropTypes.bool,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    imageOrder: PropTypes.array,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    imageUploads: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    removeImage: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadImage: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadNewFiles: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    numberOfUploads: PropTypes.number,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    fileOrder: PropTypes.array,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    fileUploads: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    removeFile: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadFile: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    emojiPickerIsOpen: PropTypes.bool,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    emojiPickerRef: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onSelectEmoji: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    getUsers: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    getCommands: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    textareaRef: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    handleSubmit: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    handleChange: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onSelectItem: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    text: PropTypes.string,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onPaste: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    openEmojiPicker: PropTypes.func,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    watcher_count: PropTypes.number,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    typing: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    multipleUploads: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    maxNumberOfFiles: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    acceptedFiles: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    grow: true,\r\n    disabled: false,\r\n  };\r\n\r\n  renderUploads = () => (\r\n    <>\r\n      {this.props.imageOrder.length > 0 && (\r\n        <ImagePreviewer\r\n          imageUploads={this.props.imageOrder.map(\r\n            (id) => this.props.imageUploads[id],\r\n          )}\r\n          handleRemove={this.props.removeImage}\r\n          handleRetry={this.props.uploadImage}\r\n          handleFiles={this.props.uploadNewFiles}\r\n          multiple={this.props.multipleUploads}\r\n          disabled={this.props.numberOfUploads >= this.props.maxNumberOfFiles}\r\n        />\r\n      )}\r\n      {this.props.fileOrder.length > 0 && (\r\n        <div className=\"str-chat__file-uploads\">\r\n          <FilePreviewer\r\n            uploads={this.props.fileOrder.map(\r\n              (id) => this.props.fileUploads[id],\r\n            )}\r\n            handleRemove={this.props.removeFile}\r\n            handleRetry={this.props.uploadFile}\r\n            handleFiles={this.props.uploadNewFiles}\r\n          />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  renderEmojiPicker = () => {\r\n    if (this.props.emojiPickerIsOpen) {\r\n      return (\r\n        <div\r\n          className=\"str-chat__input-flat--emojipicker\"\r\n          ref={this.props.emojiPickerRef}\r\n        >\r\n          <Picker\r\n            native\r\n            emoji=\"point_up\"\r\n            title=\"Pick your emoji\"\r\n            onSelect={this.props.onSelectEmoji}\r\n            color=\"#006CFF\"\r\n            showPreview={false}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { intl } = this.props;\r\n    const SendButton = this.props.SendButton;\r\n    return (\r\n      <div\r\n        className={`str-chat__input-flat ${\r\n          SendButton ? 'str-chat__input-flat--send-button-active' : null\r\n        }`}\r\n      >\r\n        <ImageDropzone\r\n          accept={this.props.acceptedFiles}\r\n          multiple={this.props.multipleUploads}\r\n          disabled={this.props.numberOfUploads >= this.props.maxNumberOfFiles}\r\n          handleFiles={this.props.uploadNewFiles}\r\n        >\r\n          <div className=\"str-chat__input-flat-wrapper\">\r\n            {this.renderUploads()}\r\n            {this.renderEmojiPicker()}\r\n\r\n            <div className=\"str-chat__input-flat--textarea-wrapper\">\r\n              <ChatAutoComplete\r\n                users={this.props.getUsers()}\r\n                commands={this.props.getCommands()}\r\n                innerRef={this.props.textareaRef}\r\n                handleSubmit={(e) => this.props.handleSubmit(e)}\r\n                onSelectItem={this.props.onSelectItem}\r\n                onChange={this.props.handleChange}\r\n                value={this.props.text}\r\n                rows={1}\r\n                maxRows={this.props.maxRows}\r\n                placeholder={intl.formatMessage({\r\n                  id: 'message_input.placeholder',\r\n                  defaultMessage: 'Type your message',\r\n                })}\r\n                onPaste={this.props.onPaste}\r\n                grow={this.props.grow}\r\n                onFocus={this.props.onFocus}\r\n                disabled={this.props.disabled}\r\n              />\r\n\r\n              <span\r\n                className=\"str-chat__input-flat-emojiselect\"\r\n                onClick={this.props.openEmojiPicker}\r\n              >\r\n                <svg width=\"28\" height=\"28\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path\r\n                    d=\"M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z\"\r\n                    fillRule=\"evenodd\"\r\n                  />\r\n                </svg>\r\n              </span>\r\n              <FileUploadButton\r\n                multiple={this.props.multipleUploads}\r\n                disabled={\r\n                  this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n                }\r\n                accepts={this.props.acceptedFiles}\r\n                handleFiles={this.props.uploadNewFiles}\r\n              >\r\n                <span className=\"str-chat__input-flat-fileupload\">\r\n                  <svg\r\n                    width=\"14\"\r\n                    height=\"14\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z\"\r\n                      fillRule=\"nonzero\"\r\n                    />\r\n                  </svg>\r\n                </span>\r\n              </FileUploadButton>\r\n              {SendButton && (\r\n                <SendButton sendMessage={this.props.handleSubmit} />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </ImageDropzone>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMessageInputFlat = injectIntl(MessageInputFlat);\r\nexport { MessageInputFlat };\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { ChatAutoComplete } from './ChatAutoComplete';\r\nimport { Picker } from 'emoji-mart';\r\nimport { injectIntl } from 'react-intl';\r\nimport {\r\n  ImageDropzone,\r\n  ImagePreviewer,\r\n  FilePreviewer,\r\n  FileUploadButton,\r\n} from 'react-file-utils';\r\n\r\n/**\r\n * MessageInputSmall - compact design to be used for the MessageInput. It has all the features of MessageInput minus the typing indicator.\r\n * @example ./docs/MessageInputSmall.md\r\n */\r\nclass MessageInputSmall extends PureComponent {\r\n  static propTypes = {\r\n    /** Set focus to the text input if this is enabled */\r\n    focus: PropTypes.bool.isRequired,\r\n    /** Grow the textarea while you're typing */\r\n    grow: PropTypes.bool.isRequired,\r\n    /** Specify the max amount of rows the textarea is able to grow */\r\n    maxRows: PropTypes.number.isRequired,\r\n    /** Make the textarea disabled */\r\n    disabled: PropTypes.bool,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    imageOrder: PropTypes.array,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    imageUploads: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    removeImage: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadImage: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadNewFiles: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    numberOfUploads: PropTypes.number,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    fileOrder: PropTypes.array,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    fileUploads: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    removeFile: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    uploadFile: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    emojiPickerIsOpen: PropTypes.bool,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    emojiPickerRef: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onSelectEmoji: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    getUsers: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    getCommands: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    textareaRef: PropTypes.object,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    handleSubmit: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    handleChange: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onSelectItem: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    text: PropTypes.string,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    onPaste: PropTypes.func,\r\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\r\n    openEmojiPicker: PropTypes.func,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    watcher_count: PropTypes.number,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    typing: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    multipleUploads: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    maxNumberOfFiles: PropTypes.object,\r\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\r\n    acceptedFiles: PropTypes.object,\r\n  };\r\n\r\n  renderUploads = () => (\r\n    <>\r\n      {this.props.imageOrder.length > 0 && (\r\n        <ImagePreviewer\r\n          imageUploads={this.props.imageOrder.map(\r\n            (id) => this.props.imageUploads[id],\r\n          )}\r\n          handleRemove={this.props.removeImage}\r\n          handleRetry={this.props.uploadImage}\r\n          handleFiles={this.props.uploadNewFiles}\r\n          multiple={this.props.multipleUploads}\r\n          disabled={\r\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n              ? true\r\n              : false\r\n          }\r\n        />\r\n      )}\r\n      {this.props.fileOrder.length > 0 && (\r\n        <FilePreviewer\r\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\r\n          handleRemove={this.props.removeFile}\r\n          handleRetry={this.props.uploadFile}\r\n          handleFiles={this.props.uploadNewFiles}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n\r\n  renderEmojiPicker = () => {\r\n    if (this.props.emojiPickerIsOpen) {\r\n      return (\r\n        <div\r\n          className=\"str-chat__small-message-input-emojipicker\"\r\n          ref={this.props.emojiPickerRef}\r\n        >\r\n          <Picker\r\n            native\r\n            emoji=\"point_up\"\r\n            title=\"Pick your emoji\"\r\n            onSelect={this.props.onSelectEmoji}\r\n            color=\"#006CFF\"\r\n            showPreview={false}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { intl } = this.props;\r\n    const SendButton = this.props.SendButton;\r\n    return (\r\n      <div className=\"str-chat__small-message-input__wrapper\">\r\n        <ImageDropzone\r\n          accept={this.props.acceptedFiles}\r\n          multiple={this.props.multipleUploads}\r\n          disabled={\r\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n              ? true\r\n              : false\r\n          }\r\n          handleFiles={this.props.uploadNewFiles}\r\n        >\r\n          <div\r\n            className={`str-chat__small-message-input ${\r\n              SendButton\r\n                ? 'str-chat__small-message-input--send-button-active'\r\n                : null\r\n            }`}\r\n          >\r\n            {this.renderUploads()}\r\n            {this.renderEmojiPicker()}\r\n            <div className=\"str-chat__small-message-input--textarea-wrapper\">\r\n              <ChatAutoComplete\r\n                users={this.props.getUsers()}\r\n                commands={this.props.getCommands()}\r\n                innerRef={this.props.textareaRef}\r\n                handleSubmit={this.props.handleSubmit}\r\n                onChange={this.props.handleChange}\r\n                value={this.props.text}\r\n                rows={1}\r\n                maxRows={this.props.maxRows}\r\n                onSelectItem={this.props.onSelectItem}\r\n                placeholder={intl.formatMessage({\r\n                  id: 'message_input.placeholder',\r\n                  defaultMessage: 'Type your message',\r\n                })}\r\n                onPaste={this.props.onPaste}\r\n                grow={this.props.grow}\r\n                disabled={this.props.disabled}\r\n              />\r\n\r\n              <span\r\n                className=\"str-chat__small-message-input-emojiselect\"\r\n                onClick={this.props.openEmojiPicker}\r\n              >\r\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path\r\n                    d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\r\n                    fillRule=\"evenodd\"\r\n                  />\r\n                </svg>\r\n              </span>\r\n              <FileUploadButton\r\n                multiple={this.props.multipleUploads}\r\n                disabled={\r\n                  this.props.numberOfUploads >= this.props.maxNumberOfFiles\r\n                    ? true\r\n                    : false\r\n                }\r\n                accepts={this.props.acceptedFiles}\r\n                handleFiles={this.props.uploadNewFiles}\r\n              >\r\n                <span\r\n                  className=\"str-chat__small-message-input-fileupload\"\r\n                  onClick={this.props.openFilePanel}\r\n                >\r\n                  <svg\r\n                    width=\"14\"\r\n                    height=\"14\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\r\n                      fillRule=\"nonzero\"\r\n                    />\r\n                  </svg>\r\n                </span>\r\n              </FileUploadButton>\r\n              {SendButton && (\r\n                <SendButton sendMessage={this.props.handleSubmit} />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </ImageDropzone>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMessageInputSmall = injectIntl(MessageInputSmall);\r\nexport { MessageInputSmall };","import React from 'react';\r\nimport { injectIntl } from 'react-intl';\r\nimport { withChatContext } from '../context';\r\n// import PropTypes from 'prop-types';\r\n\r\nclass ChannelSearch extends React.PureComponent {\r\n  render() {\r\n    return (\r\n      <div className=\"str-chat__channel-search\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder={intl.formatMessage({\r\n            id: 'channel_search.placeholder',\r\n            defaultMessage: 'Search',\r\n          })}\r\n        />\r\n        <button type=\"submit\">\r\n          <svg\r\n            width=\"18\"\r\n            height=\"17\"\r\n            viewBox=\"0 0 18 17\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              d=\"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\"\r\n              fillRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChannelSearch = injectIntl(ChannelSearch);\r\nexport { ChannelSearch };\r\n","import React, { PureComponent } from 'react';\r\nimport { Avatar } from './Avatar';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl } from 'react-intl';\r\n// import Badge from '@material-ui/core/Badge';\r\n\r\n/**\r\n * Used as preview component for channel item in [ChannelList](#channellist) component.\r\n *\r\n * @example ./docs/ChannelPreviewLastMessage.md\r\n * @extends PureComponent\r\n */\r\n\r\nclass ChannelPreviewLastMessage extends PureComponent {\r\n  static propTypes = {\r\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    setActiveChannel: PropTypes.func,\r\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    channel: PropTypes.object,\r\n    closeMenu: PropTypes.func,\r\n    unread_count: PropTypes.number,\r\n    /** If channel of component is active (selected) channel */\r\n    active: PropTypes.bool,\r\n    latestMessage: PropTypes.string,\r\n  };\r\n\r\n  channelPreviewButton = React.createRef();\r\n\r\n  onSelectChannel = () => {\r\n    this.props.setActiveChannel(this.props.channel, this.props.watchers);\r\n    this.channelPreviewButton.current.blur();\r\n  };\r\n\r\n  render() {\r\n    const { intl } = this.props;\r\n    const unreadClass =\r\n      this.props.unread_count >= 1 ? 'str-chat__channel-preview--unread' : '';\r\n    const activeClass = this.props.active\r\n      ? 'str-chat__channel-preview--active'\r\n      : '';\r\n    const name = this.props.channel.data.name || this.props.channel.cid;\r\n    return (\r\n      <div\r\n        className={`str-chat__channel-preview ${unreadClass} ${activeClass}`}\r\n      >\r\n        <button onClick={this.onSelectChannel} ref={this.channelPreviewButton}>\r\n          {this.props.unread_count >= 1 && (\r\n            <div className=\"str-chat__channel-preview--dot\" />\r\n          )}\r\n          <Avatar image={this.props.channel.data.image} />\r\n          <div className=\"str-chat__channel-preview-info\">\r\n            <span className=\"str-chat__channel-preview-title\">{name}</span>\r\n            <span className=\"str-chat__channel-preview-last-message\">\r\n              {!this.props.channel.state.messages[0]\r\n                ? intl.formatMessage({\r\n                    id: 'channel_preview.latest_message.none',\r\n                    defaultMessage: 'Nothing yet...',\r\n                  })\r\n                : this.props.latestMessage}\r\n            </span>\r\n            {this.props.unread_count >= 1 && (\r\n              <span className=\"str-chat__channel-preview-unread-count\">\r\n                {this.props.unread_count}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChannelPreviewLastMessage = injectIntl(ChannelPreviewLastMessage);\r\nexport { ChannelPreviewLastMessage };\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class ChannelPreviewCountOnly extends PureComponent {\r\n  static propTypes = {\r\n    /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chat) for doc */\r\n    setActiveChannel: PropTypes.func,\r\n    /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chat) for doc */\r\n    channel: PropTypes.object,\r\n    unread: PropTypes.number,\r\n  };\r\n\r\n  render() {\r\n    const unreadClass = this.props.unread >= 1 ? 'unread' : '';\r\n    const name = this.props.channel.data.name || this.props.channel.cid;\r\n\r\n    return (\r\n      <div className={unreadClass}>\r\n        <button\r\n          onClick={this.props.setActiveChannel.bind(this, this.props.channel)}\r\n        >\r\n          {' '}\r\n          {name} <span>{this.props.unread}</span>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl } from 'react-intl';\r\nimport { ChannelPreviewCountOnly } from './ChannelPreviewCountOnly';\r\n\r\nclass ChannelPreview extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      lastMessage: {},\r\n      unread: 0,\r\n      lastRead: new Date(),\r\n    };\r\n  }\r\n\r\n  static propTypes = {\r\n    channel: PropTypes.object.isRequired,\r\n    activeChannel: PropTypes.object.isRequired,\r\n    setActiveChannel: PropTypes.func.isRequired,\r\n    Preview: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    watchers: PropTypes.object,\r\n  };\r\n\r\n  static defaultProps = {\r\n    Preview: ChannelPreviewCountOnly,\r\n  };\r\n\r\n  componentDidMount() {\r\n    // listen to change...\r\n    const channel = this.props.channel;\r\n    const unread = channel.countUnread();\r\n\r\n    this.setState({ unread });\r\n    channel.on('message.new', this.handleEvent);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const channel = this.props.channel;\r\n    channel.off('message.new', this.handleEvent);\r\n  }\r\n\r\n  handleEvent = (event) => {\r\n    const channel = this.props.channel;\r\n    const isActive = this.props.activeChannel.cid === channel.cid;\r\n    if (!isActive) {\r\n      const unread = channel.countUnread(this.state.lastRead);\r\n      this.setState({ lastMessage: event.message, unread });\r\n    } else {\r\n      this.setState({ lastMessage: event.message, unread: 0 });\r\n    }\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.activeChannel.cid !== prevProps.activeChannel.cid) {\r\n      const isActive = this.props.activeChannel.cid === this.props.channel.cid;\r\n      if (isActive) {\r\n        this.setState({ unread: 0, lastRead: new Date() });\r\n      }\r\n    }\r\n  }\r\n\r\n  getLatestMessage = () => {\r\n    const { channel, intl } = this.props;\r\n\r\n    const latestMessage =\r\n      channel.state.messages[channel.state.messages.length - 1];\r\n\r\n    if (!latestMessage) {\r\n      return intl.formatMessage({\r\n        id: 'channel_preview.latest_message.none',\r\n        defaultMessage: 'Nothing yet...',\r\n      });\r\n    }\r\n    if (latestMessage.deleted_at) {\r\n      return intl.formatMessage({\r\n        id: 'channel_preview.latest_message.deleted',\r\n        defaultMessage: 'Message deleted...',\r\n      });\r\n    }\r\n    if (latestMessage.text) {\r\n      return latestMessage.text.slice(0, 20);\r\n    } else {\r\n      if (latestMessage.command) {\r\n        return intl.formatMessage(\r\n          {\r\n            id: 'channel_preview.latest_message.command',\r\n            defaultMessage: '/{command}',\r\n          },\r\n          {\r\n            command: latestMessage.command,\r\n          },\r\n        );\r\n      }\r\n      if (latestMessage.attachments.length) {\r\n        return intl.formatMessage({\r\n          id: 'channel_preview.latest_message.attachment',\r\n          defaultMessage: 'Attachment...',\r\n        });\r\n      }\r\n      return intl.formatMessage({\r\n        id: 'channel_preview.latest_message.empty',\r\n        defaultMessage: 'Empty message...',\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const props = { ...this.state, ...this.props };\r\n\r\n    const { Preview } = this.props;\r\n    return (\r\n      <Preview\r\n        {...props}\r\n        latestMessage={this.getLatestMessage()}\r\n        active={this.props.activeChannel.cid === this.props.channel.cid}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nChannelPreview = injectIntl(ChannelPreview);\r\nexport { ChannelPreview };","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { LoadingIndicator } from 'react-file-utils';\r\n\r\nexport class LoadMoreButton extends React.PureComponent {\r\n  static propTypes = {\r\n    onClick: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    children: 'Load more',\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"str-chat__load-more-button\">\r\n        <button\r\n          className=\"str-chat__load-more-button__button\"\r\n          onClick={this.props.onClick}\r\n          disabled={this.props.refreshing}\r\n        >\r\n          {this.props.refreshing ? <LoadingIndicator /> : this.props.children}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { LoadMoreButton } from './LoadMoreButton';\r\nimport PropTypes from 'prop-types';\r\nimport { smartRender } from '../utils';\r\n\r\nexport class LoadMorePaginator extends React.PureComponent {\r\n  static propTypes = {\r\n    LoadMoreButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /** callback to load the next page */\r\n    loadNextPage: PropTypes.func,\r\n    /** indicates if there is a next page to load */\r\n    hasNextPage: PropTypes.bool,\r\n    /** display the items in opposite order */\r\n    reverse: PropTypes.bool,\r\n  };\r\n  static defaultProps = {\r\n    LoadMoreButton,\r\n  };\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {!this.props.reverse && this.props.children}\r\n        {this.props.hasNextPage\r\n          ? smartRender(this.props.LoadMoreButton, {\r\n              refreshing: this.props.refreshing,\r\n              onClick: this.props.loadNextPage,\r\n            })\r\n          : null}\r\n        {this.props.reverse && this.props.children}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\n/**\r\n * LoadingChannels - Fancy loading indicator for the channel list\r\n *\r\n * @example ./docs/LoadingChannels.md\r\n */\r\nexport const LoadingChannels = () => (\r\n  <div className=\"str-chat__loading-channels\">\r\n    <div className=\"str-chat__loading-channels-item\">\r\n      <div className=\"str-chat__loading-channels-avatar\" />\r\n      <div className=\"str-chat__loading-channels-meta\">\r\n        <div className=\"str-chat__loading-channels-username\" />\r\n        <div className=\"str-chat__loading-channels-status\" />\r\n      </div>\r\n    </div>\r\n    <div className=\"str-chat__loading-channels-item\">\r\n      <div className=\"str-chat__loading-channels-avatar\" />\r\n      <div className=\"str-chat__loading-channels-meta\">\r\n        <div className=\"str-chat__loading-channels-username\" />\r\n        <div className=\"str-chat__loading-channels-status\" />\r\n      </div>\r\n    </div>\r\n    <div className=\"str-chat__loading-channels-item\">\r\n      <div className=\"str-chat__loading-channels-avatar\" />\r\n      <div className=\"str-chat__loading-channels-meta\">\r\n        <div className=\"str-chat__loading-channels-username\" />\r\n        <div className=\"str-chat__loading-channels-status\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n","export default \"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E\"","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { LoadingChannels } from './LoadingChannels';\r\n\r\nimport placeholder from '../assets/str-chat__connection-error.svg';\r\n\r\n/**\r\n * ChatDown - Indicator that chat is down or your network isn't working\r\n *\r\n * @example ./docs/ChatDown.md\r\n * @extends PureComponent\r\n */\r\nexport class ChatDown extends React.PureComponent {\r\n  static propTypes = {\r\n    /** The image url for this error */\r\n    image: PropTypes.string,\r\n  };\r\n\r\n  static defaultProps = {\r\n    image: placeholder,\r\n  };\r\n\r\n  render() {\r\n    const { image } = this.props;\r\n\r\n    return (\r\n      <div className=\"str-chat__down\">\r\n        <LoadingChannels />\r\n        <div className=\"str-chat__down-main\">\r\n          <img src={image} />\r\n          <h1>\r\n            <FormattedMessage\r\n              id=\"chat_down.connection_error\"\r\n              defaultMessage=\"Connection Error\"\r\n            />\r\n          </h1>\r\n          <h3>\r\n            <FormattedMessage\r\n              id=\"chat_down.connection_error_text\"\r\n              defaultMessage=\"Error connecting to chat, refresh the page to try again.\"\r\n            />\r\n          </h3>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { LoadingChannels } from './LoadingChannels';\r\nimport { Avatar } from './Avatar';\r\nimport { ChatDown } from './ChatDown';\r\nimport { withChatContext } from '../context';\r\nimport { languageChangedEvent } from '../utils';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n\r\n/**\r\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\r\n * @example ./examples/ChannelList.md\r\n */\r\nclass ChannelListTeam extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchOpen: false,\r\n      searchInput: '',\r\n      filter: { type: 'messaging' },\r\n      adminFilter: { members: { $in: [this.props.client.user.id] } },\r\n      sort: {},\r\n      inputMembers: [],\r\n      inputExtraTypes: [],\r\n      disableSort: 'false',\r\n      adminControlOpen: false,\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n  static propTypes = {\r\n    loading: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n    /** Stream chat client object */\r\n    client: PropTypes.object,\r\n    showSidebar: PropTypes.bool,\r\n    onSelectSort: PropTypes.func,\r\n    onSelectFilter: PropTypes.func,\r\n    onToggleSearchModus: PropTypes.func,\r\n    isOn: PropTypes.bool,\r\n    onChannelResult: PropTypes.func,\r\n    noResult: PropTypes.bool,\r\n    resetSearch: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    error: false,\r\n  };\r\n\r\n  async onAdminFilterChange(event) {\r\n    const value = event.target.value;\r\n    this.setState({ searchInput: '' });\r\n    this.props.setActiveSearch('', event);\r\n    let adminFilter = {};\r\n    switch (value) {\r\n      case 'all':\r\n        break;\r\n      case 'my':\r\n        adminFilter.members = { $in: [this.props.client.user.id] };\r\n        break;\r\n      case 'no':\r\n        adminFilter.assignFlag = false;\r\n        break;\r\n      case 'me':\r\n        adminFilter.responsiveMember = { $eq: this.props.client.user.name };\r\n        break;\r\n      case 'other':\r\n        adminFilter.assignFlag = true;\r\n        adminFilter.responsiveMember = { $ne: this.props.client.user.name };\r\n        break;\r\n      default:\r\n        adminFilter.members = { $in: [this.props.client.user.id] };\r\n        break;\r\n    }\r\n    let mergedFilter = {};\r\n    if (this.state.filter !== {}) {\r\n      await this.setState({ adminFilter });\r\n\r\n      mergedFilter = { ...this.state.filter, ...this.state.adminFilter };\r\n      // console.log(mergedFilter);\r\n    } else {\r\n      await this.setState({ ...adminFilter, filter: { type: 'messaging' } });\r\n\r\n      mergedFilter = { ...this.state.filter, ...this.state.adminFilter };\r\n      // console.log(mergedFilter);\r\n    }\r\n\r\n    // filter = extraType ? (filter.extraType = { $eq: event.target.value }) : {};\r\n    // // this.setState({ filter });\r\n    this.props.onSelectFilter(mergedFilter);\r\n  }\r\n\r\n  async onFilterChange(event) {\r\n    const filterType = event.target.value;\r\n    this.setState({ searchInput: '' });\r\n    this.props.setActiveSearch('', event);\r\n    let filter = {};\r\n    if (this.props.client.user.role !== 'admin') {\r\n      filter.members = { $in: [this.props.client.user.id] };\r\n      filterType ? (filter.extraType = { $eq: filterType }) : {};\r\n    } else {\r\n      filterType\r\n        ? (filter = {\r\n            // members: { $in: [this.props.client.user.id] },\r\n            extraType: { $eq: filterType },\r\n          })\r\n        : {};\r\n    }\r\n    // console.log(filter);\r\n    let mergedFilter = {};\r\n    if (this.state.adminFilter !== {}) {\r\n      await this.setState({\r\n        filter,\r\n      });\r\n      mergedFilter = { ...this.state.filter, ...this.state.adminFilter };\r\n      // console.log(mergedFilter);\r\n    } else {\r\n      await this.setState({\r\n        filter,\r\n        adminFilter: { members: { $in: [this.props.client.user.id] } },\r\n      });\r\n      mergedFilter = { ...this.state.filter, ...this.state.adminFilter };\r\n      // console.log(mergedFilter);\r\n    }\r\n\r\n    this.props.onSelectFilter(mergedFilter);\r\n  }\r\n\r\n  onSortChange(event) {\r\n    this.setState({ searchInput: '' });\r\n    this.props.setActiveSearch('', event);\r\n    const sort = {};\r\n    switch (event.target.value) {\r\n      case 'last_message_at--new':\r\n        sort['last_message_at'] = -1;\r\n        break;\r\n      case 'created_at--new':\r\n        sort['created_at'] = -1;\r\n        break;\r\n      case 'last_message_at--old':\r\n        sort['last_message_at'] = 1;\r\n        break;\r\n      case 'created_at--old':\r\n        sort['created_at'] = 1;\r\n        break;\r\n\r\n      default:\r\n        sort['last_message_at'] = -1;\r\n        break;\r\n    }\r\n    this.setState({ sort });\r\n    this.props.onSelectSort(sort);\r\n  }\r\n\r\n  SortingSelect = () => (\r\n    <div className=\"sortingSelect\">\r\n      <select\r\n        className=\"str-chat__channel-list-team__header--button\"\r\n        id=\"flexgrow\"\r\n        onChange={(e) => this.onSortChange(e)}\r\n      >\r\n        <option\r\n          value=\"last_message_at--new\"\r\n          label={this.props.intl.formatMessage({\r\n            id: 'channel_sort.last',\r\n            defaultMessage: 'newest',\r\n          })}\r\n        ></option>\r\n        <option\r\n          value=\"created_at--old\"\r\n          label={this.props.intl.formatMessage({\r\n            id: 'channel_sort.old',\r\n            defaultMessage: 'oldest',\r\n          })}\r\n        ></option>\r\n      </select>\r\n    </div>\r\n  );\r\n\r\n  filterOptions = window.dplChatConfig.channelTypes.map((option, i) => (\r\n    <option key={i} value={option.value}>\r\n      {option.label}\r\n    </option>\r\n  ));\r\n\r\n  FilterSelect = () => (\r\n    <div className=\"filterselect\">\r\n      <select\r\n        className=\"str-chat__channel-list-team__header--button\"\r\n        id=\"filterselect\"\r\n        onChange={(e) => this.onFilterChange(e)}\r\n      >\r\n        {this.filterOptions}\r\n      </select>\r\n    </div>\r\n  );\r\n\r\n  AdminFilterSelect = () => {\r\n    return (\r\n      <div className=\"filterselect\">\r\n        <select\r\n          className=\"str-chat__channel-list-team__header--button\"\r\n          id=\"adminfilterselect\"\r\n          onChange={(e) => this.onAdminFilterChange(e)}\r\n        >\r\n          <option\r\n            value=\"my\"\r\n            label={this.props.intl.formatMessage({\r\n              id: 'channel_filter.my',\r\n              defaultMessage: 'my',\r\n            })}\r\n          ></option>\r\n          <option\r\n            value=\"all\"\r\n            label={this.props.intl.formatMessage({\r\n              id: 'channel_filter.all',\r\n              defaultMessage: 'all',\r\n            })}\r\n          ></option>\r\n          <option\r\n            value=\"me\"\r\n            label={this.props.intl.formatMessage({\r\n              id: 'channel_filter.me',\r\n              defaultMessage: 'assgined to: me',\r\n            })}\r\n          ></option>\r\n          <option\r\n            value=\"no\"\r\n            label={this.props.intl.formatMessage({\r\n              id: 'channel_filter.no',\r\n              defaultMessage: 'assgined to: none',\r\n            })}\r\n          ></option>\r\n          <option\r\n            value=\"other\"\r\n            label={this.props.intl.formatMessage({\r\n              id: 'channel_filter.other',\r\n              defaultMessage: 'assgined to: others',\r\n            })}\r\n          ></option>\r\n        </select>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { showSidebar } = this.props;\r\n    if (this.props.error) {\r\n      return <ChatDown />;\r\n    } else if (this.props.loading) {\r\n      return <LoadingChannels />;\r\n    } else {\r\n      return (\r\n        <div className=\"str-chat__channel-list-team\">\r\n          {showSidebar && (\r\n            <div className=\"str-chat__channel-list-team__sidebar\">\r\n              <div className=\"str-chat__channel-list-team__sidebar--top\">\r\n                <Avatar\r\n                  image=\"https://cdn.dribbble.com/users/610788/screenshots/5157282/spacex.png\"\r\n                  size={50}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"str-chat__channel-list-team__main\">\r\n            <div className=\"str-chat__channel-list-team__header\">\r\n              <div className=\"str-chat__channel-list-team__header--left\">\r\n                <Avatar\r\n                  source={this.props.client.user.image}\r\n                  name={\r\n                    this.props.client.user.name || this.props.client.user.id\r\n                  }\r\n                  size={40}\r\n                />\r\n              </div>\r\n              <div className=\"str-chat__channel-list-team__header--middle\">\r\n                <div className=\"str-chat__channel-list-team__header--title\">\r\n                  {this.props.client.user.name || this.props.client.user.id}\r\n                </div>\r\n                <div\r\n                  className={`str-chat__channel-list-team__header--status ${this.props.client.user.status}`}\r\n                >\r\n                  {this.props.client.user.status}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div id=\"style-channellist-first-row\">\r\n              <div id=\"style-channel-selection\">\r\n                <this.SortingSelect></this.SortingSelect>\r\n                <this.FilterSelect></this.FilterSelect>\r\n              </div>\r\n              {this.props.client.user.role === 'admin' ? (\r\n                <div className=\"channel-list-admin-icons tooltip\">\r\n                  {this.state.adminControlOpen ? (\r\n                    <span className=\"tooltiptext\">\r\n                      Filter fr Mitarbeiter entfernen\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"tooltiptext\">\r\n                      Filter fr Mitarbeiter anzeigen\r\n                    </span>\r\n                  )}\r\n                  <this.ChevronButton\r\n                    onClick={this.toggleAdminControl}\r\n                    open={this.state.adminControlOpen}\r\n                  ></this.ChevronButton>\r\n                </div>\r\n              ) : (\r\n                <div></div>\r\n              )}\r\n            </div>\r\n            <div id=\"style-channellist-secound-row\">\r\n              {this.props.client.user.role === 'admin' &&\r\n              this.state.adminControlOpen ? (\r\n                <div className=\"channel-list-admin-filter\">\r\n                  <this.AdminFilterSelect></this.AdminFilterSelect>\r\n                  {/* <this.ClearButton\r\n                  onClick={this.clearFilterControl}\r\n                  open={true}\r\n                ></this.ClearButton> */}\r\n                </div>\r\n              ) : (\r\n                <div></div>\r\n              )}\r\n            </div>\r\n            <div id=\"style-channel-search-selection\">\r\n              <this.SearchBar></this.SearchBar>\r\n              <this.Button\r\n                onClick={this.toggleChannelSearch}\r\n                open={this.state.searchOpen}\r\n              />\r\n            </div>\r\n            <div\r\n              id=\"style-list\"\r\n              className=\".str-chat__channel-preview-messenger-list\"\r\n            >\r\n              {this.props.children}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  Button = ({ open, onClick }) => (\r\n    <div onClick={onClick}>\r\n      {open ? (\r\n        <div>\r\n          <svg\r\n            id=\"style-channel-search-icon\"\r\n            width=\"18\"\r\n            height=\"18\"\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              stroke=\"black\"\r\n              d=\"M 19.333 2.547 l -1.88 -1.88 L 10 8.12 L 2.547 0.667 l -1.88 1.88 L 8.12 10 L 0.667 17.453 l 1.88 1.88 L 10 11.88 l 7.453 7.453 l 1.88 -1.88 L 11.88 10 Z\"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <svg\r\n            id=\"style-channel-search-icon\"\r\n            width=\"18\"\r\n            height=\"17\"\r\n            viewBox=\"0 0 18 17\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              stroke=\"black\"\r\n              d=\"M18.125,15.804l-4.038-4.037c0.675-1.079,1.012-2.308,1.01-3.534C15.089,4.62,12.199,1.75,8.584,1.75C4.815,1.75,1.982,4.726,2,8.286c0.021,3.577,2.908,6.549,6.578,6.549c1.241,0,2.417-0.347,3.44-0.985l4.032,4.026c0.167,0.166,0.43,0.166,0.596,0l1.479-1.478C18.292,16.234,18.292,15.968,18.125,15.804 M8.578,13.99c-3.198,0-5.716-2.593-5.733-5.71c-0.017-3.084,2.438-5.686,5.74-5.686c3.197,0,5.625,2.493,5.64,5.624C14.242,11.548,11.621,13.99,8.578,13.99 M16.349,16.981l-3.637-3.635c0.131-0.11,0.721-0.695,0.876-0.884l3.642,3.639L16.349,16.981z\"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  ChevronButton = ({ open, onClick }) => (\r\n    <div onClick={onClick}>\r\n      {open ? (\r\n        <div>\r\n          <svg\r\n            id=\"style-channel-admin-control-toggle\"\r\n            width=\"16\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 448 512\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              stroke=\"black\"\r\n              d=\"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z\"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <svg\r\n            id=\"style-channel-admin-control-toggle\"\r\n            width=\"16\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 448 512\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              stroke=\"black\"\r\n              d=\"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  ClearButton = ({ open, onClick }) => (\r\n    <div onClick={onClick}>\r\n      {open ? (\r\n        <div>\r\n          <svg\r\n            id=\"style-channel-filter-clear-icon\"\r\n            width=\"18\"\r\n            height=\"18\"\r\n            viewBox=\"0 0 18 18\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <path\r\n              stroke=\"black\"\r\n              d=\"M 19.333 2.547 l -1.88 -1.88 L 10 8.12 L 2.547 0.667 l -1.88 1.88 L 8.12 10 L 0.667 17.453 l 1.88 1.88 L 10 11.88 l 7.453 7.453 l 1.88 -1.88 L 11.88 10 Z\"\r\n            ></path>\r\n          </svg>\r\n        </div>\r\n      ) : (\r\n        <div></div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  SearchBar = () => {\r\n    const { intl } = this.props;\r\n    return (\r\n      <div id=\"style-search-bar\">\r\n        <div className=\"str-chat__channel-search\" id=\"style-channel-search\">\r\n          <div id=\"style-channel-search-input\">\r\n            <input\r\n              id=\"searchbar\"\r\n              className=\"searchInput\"\r\n              placeholder={intl.formatMessage({\r\n                id: 'channel_search.placeholder',\r\n                defaultMessage: 'Search',\r\n              })}\r\n              value={this.state.searchInput || ''}\r\n              type=\"text\"\r\n              name=\"inputSearch\"\r\n              onChange={this.handleChange}\r\n              onKeyDown={this.handleSearch.bind(this)}\r\n            ></input>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  handleSearch(event) {\r\n    const code = event.keyCode || event.which;\r\n    if (code === 13) {\r\n      window.dplChatConfig.language = '';\r\n      window.dispatchEvent(languageChangedEvent);\r\n      localStorage.setItem('language', window.dplChatConfig.language);\r\n      if (this.state.searchInput.replace(/\\s/g, '')) {\r\n        this.setState({ disableSort: 'true', searchOpen: true });\r\n        this.props.setActiveSearch(\r\n          this.state.searchInput.replace(/( +)$/, ''),\r\n          event,\r\n        );\r\n        this.search(\r\n          this.state.searchInput.replace(/( +)$/, ''),\r\n          this.props.client,\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  async search(searchValue, client) {\r\n    const channelId = [];\r\n    if (!this.state.filter.hasOwnProperty('extraType')) {\r\n      await this.setState({ filter: { type: 'messaging' } });\r\n    }\r\n    let response = [];\r\n    const searchResultChannels = [];\r\n    if (searchValue) {\r\n      response = await client.search(this.state.filter, searchValue, {\r\n        limit: 1000,\r\n        offset: 0,\r\n      });\r\n    }\r\n    let resultChannelArray = [];\r\n    if (response) {\r\n      resultChannelArray = response.results\r\n        .filter((element) => !!element.message.channel.cid)\r\n        .map((element) => element.message.channel);\r\n    }\r\n\r\n    if (resultChannelArray.length > 0) {\r\n      channelId.push(resultChannelArray[0].cid);\r\n      searchResultChannels.push(resultChannelArray[0]);\r\n    }\r\n\r\n    await resultChannelArray.forEach((element) => {\r\n      if (!channelId.includes(element.cid)) {\r\n        channelId.push(element.cid);\r\n        searchResultChannels.push(element);\r\n      }\r\n    });\r\n\r\n    if (searchResultChannels.length > 0) {\r\n      this.props.onChannelResult(searchResultChannels);\r\n    } else {\r\n      this.props.onChannelResult(null);\r\n    }\r\n  }\r\n\r\n  async handleChange(event) {\r\n    await this.setState({ searchInput: event.target.value });\r\n  }\r\n\r\n  toggleAdminControl = async () => {\r\n    if (this.state.adminControlOpen) {\r\n      await this.setState({\r\n        adminControlOpen: false,\r\n        adminFilter: { members: { $in: [this.props.client.user.id] } },\r\n      });\r\n      let mergedFilter = { ...this.state.filter, ...this.state.adminFilter };\r\n      // console.log(mergedFilter);\r\n      this.props.onSelectFilter(mergedFilter);\r\n    } else {\r\n      this.setState({ adminControlOpen: true });\r\n    }\r\n  };\r\n\r\n  clearFilterControl = async () => {\r\n    if (this.props.client.user.role === 'admin') {\r\n      // close admin control\r\n      if (this.state.adminControlOpen) {\r\n        await this.setState({\r\n          adminControlOpen: false,\r\n          adminFilter: { members: { $in: [this.props.client.user.id] } },\r\n        });\r\n        let mergedFilter = {\r\n          ...this.state.filter,\r\n          ...this.state.adminFilter,\r\n        };\r\n        this.props.onSelectFilter(mergedFilter);\r\n      }\r\n    }\r\n\r\n    // default user filter: MY\r\n    const filter = {\r\n      members: { $in: [this.props.client.user.id] },\r\n    };\r\n    // Merge filter\r\n    let mergedFilter = { ...filter, ...this.state.filter };\r\n    // console.log(mergedFilter);\r\n    // Set Filter\r\n    this.props.onSelectFilter(mergedFilter);\r\n  };\r\n\r\n  toggleChannelSearch = (event) => {\r\n    if (this.state.searchOpen) {\r\n      this.props.setActiveSearch('', event);\r\n      this.props.resetSearch();\r\n      this.setState({\r\n        searchOpen: false,\r\n        searchInput: '',\r\n      });\r\n    } else {\r\n      this.setState({ searchOpen: true });\r\n      window.dplChatConfig.language = '';\r\n      window.dispatchEvent(languageChangedEvent);\r\n      localStorage.setItem('language', window.dplChatConfig.language);\r\n      this.setState({ disableSort: 'true', searchOpen: true });\r\n      this.search(this.state.searchInput, this.props.client);\r\n      this.props.setActiveSearch(this.state.searchInput, event);\r\n    }\r\n  };\r\n}\r\n\r\nChannelListTeam = withChatContext(injectIntl(ChannelListTeam));\r\nexport { ChannelListTeam };\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Immutable from 'seamless-immutable';\r\nimport { isPromise } from '../utils';\r\n\r\nimport { ChannelPreviewLastMessage } from './ChannelPreviewLastMessage';\r\nimport { ChannelPreview } from './ChannelPreview';\r\nimport { EmptyStateIndicator } from './EmptyStateIndicator';\r\nimport { LoadingIndicator } from './LoadingIndicator';\r\nimport { LoadMorePaginator } from './LoadMorePaginator';\r\nimport { withChatContext } from '../context';\r\nimport { ChannelListTeam } from './ChannelListTeam';\r\nimport { smartRender } from '../utils';\r\nimport uniqBy from 'lodash.uniqby';\r\n\r\n/**\r\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\r\n * @extends PureComponent\r\n * @example ./docs/ChannelList.md\r\n */\r\n\r\nclass ChannelList extends PureComponent {\r\n  static propTypes = {\r\n    /**\r\n     *\r\n     *\r\n     * Indicator for Empty State\r\n     * */\r\n    EmptyStateIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Available built-in options (also accepts the same props as):\r\n     *\r\n     * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\r\n     * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\r\n     * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\r\n     *\r\n     * The Preview to use, defaults to ChannelPreviewLastMessage\r\n     * */\r\n    Preview: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n\r\n    /**\r\n     * Loading indicator UI Component. It will be displayed until the channels are\r\n     * being queried from API. Once the channels are loaded/queried, loading indicator is removed\r\n     * and replaced with children of the Channel component.\r\n     *\r\n     * Defaults to and accepts same props as:\r\n     * [LoadingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingIndicator.js)\r\n     *\r\n     */\r\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Custom UI Component for container of list of channels. Note that, list (UI component) of channels is passed\r\n     * to this component as children. This component is for the purpose of adding header to channel list or styling container\r\n     * for list of channels.\r\n     *\r\n     * Available built-in options (also accepts the same props as):\r\n     *\r\n     * 1. [ChannelListTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListTeam.js) (default)\r\n     * 2. [ChannelListMessenger](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListMessenger.js)\r\n     *\r\n     * It has access to some additional props:\r\n     *\r\n     * - `setActiveChannel` {function} Check [chat context](https://getstream.github.io/stream-chat-react/#chat)\r\n     * - `activeChannel` Currently active channel object\r\n     * - `channels` {array} List of channels in channel list\r\n     */\r\n    List: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Paginator component for channels. It contains all the pagination logic such as\r\n     * - fetching next page of results when needed e.g., when scroll reaches the end of list\r\n     * - UI to display loading indicator when next page is being loaded\r\n     * - call to action button to trigger loading of next page.\r\n     *\r\n     * Available built-in options (also accepts the same props as):\r\n     *\r\n     * 1. [LoadMorePaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadMorePaginator.js)\r\n     * 2. [InfiniteScrollPaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/InfiniteScrollPaginator.js)\r\n     */\r\n    Paginator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * Function that overrides default behaviour when new message is received on channel that is not being watched\r\n     *\r\n     * @param {Component} thisArg Reference to ChannelList component\r\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `notification.message_new` event\r\n     * */\r\n    onMessageNew: PropTypes.func,\r\n    /**\r\n     * Function that overrides default behaviour when users gets added to a channel\r\n     *\r\n     * @param {Component} thisArg Reference to ChannelList component\r\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `notification.added_to_channel` event\r\n     * */\r\n    onAddedToChannel: PropTypes.func,\r\n    /**\r\n     * Function that overrides default behaviour when users gets removed from a channel\r\n     *\r\n     * @param {Component} thisArg Reference to ChannelList component\r\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `notification.removed_from_channel` event\r\n     * */\r\n    onRemovedFromChannel: PropTypes.func,\r\n    /**\r\n     * Function that overrides default behaviour when channel gets updated\r\n     *\r\n     * @param {Component} thisArg Reference to ChannelList component\r\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `notification.channel_updated` event\r\n     * */\r\n    onChannelUpdated: PropTypes.func,\r\n    /**\r\n     * Function to customize behaviour when channel gets truncated\r\n     *\r\n     * @param {Component} thisArg Reference to ChannelList component\r\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `channel.truncated` event\r\n     * */\r\n    onChannelTruncated: PropTypes.func,\r\n    /**\r\n     * Function that overrides default behaviour when channel gets deleted. In absence of this prop, channel will be removed from the list.\r\n     *\r\n     * @param {Component} thisArg Reference to ChannelList component\r\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `channel.deleted` event\r\n     * */\r\n    onChannelDeleted: PropTypes.func,\r\n    /**\r\n     * Object containing query filters\r\n     * @see See [Channel query documentation](https://getstream.io/chat/docs/#query_channels) for a list of available fields for filter.\r\n     * */\r\n    filters: PropTypes.object,\r\n    /**\r\n     * Object containing query options\r\n     * @see See [Channel query documentation](https://getstream.io/chat/docs/#query_channels) for a list of available fields for options.\r\n     * */\r\n    options: PropTypes.object,\r\n    /**\r\n     * Object containing sort parameters\r\n     * @see See [Channel query documentation](https://getstream.io/chat/docs/#query_channels) for a list of available fields for sort.\r\n     * */\r\n    sort: PropTypes.object,\r\n    /**\r\n     * Object containing watcher parameters\r\n     * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\r\n     * */\r\n    watchers: PropTypes.object,\r\n    /**\r\n     * Set a Channel to be active and move it to the top of the list of channels by ID.\r\n     * */\r\n    customAciveChannel: PropTypes.string,\r\n    /**\r\n     * If true, channels won't be dynamically sorted by most recent message.\r\n     */\r\n    lockChannelOrder: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    Preview: ChannelPreviewLastMessage,\r\n    LoadingIndicator,\r\n    List: ChannelListTeam,\r\n    Paginator: LoadMorePaginator,\r\n    EmptyStateIndicator,\r\n    filters: {},\r\n    options: {},\r\n    sort: {},\r\n    watchers: {},\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // list of channels\r\n      channels: Immutable([]),\r\n      oldChannels: undefined,\r\n      // loading channels\r\n      loadingChannels: true,\r\n      // error loading channels\r\n      refreshing: false,\r\n      hasNextPage: false,\r\n      offset: 0,\r\n      error: false,\r\n      connectionRecoveredCount: 0,\r\n      channelUpdateCount: 0,\r\n      sort: this.props.sort,\r\n      filters: this.props.filters,\r\n      searchModus: false,\r\n      noResults: false,\r\n    };\r\n    this.onSortChange = this.onSortChange.bind(this);\r\n    this.onResetSearch = this.onResetSearch.bind(this);\r\n    this.onFilterChange = this.onFilterChange.bind(this);\r\n    this.onChannelSearchResult = this.onChannelSearchResult.bind(this);\r\n    this.menuButton = React.createRef();\r\n  }\r\n\r\n  static getDerivedStateFromError() {\r\n    return { error: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    console.warn(error, info);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({ sort: this.props.sort });\r\n    this.setState({ filters: this.props.filters });\r\n    await this.queryChannels();\r\n    this.listenToChanges();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.client.off(this.handleEvent);\r\n  }\r\n\r\n  onSortChange(sort) {\r\n    this.setState(\r\n      {\r\n        sort,\r\n        offset: 0,\r\n        hasNextPage: true,\r\n        channels: [],\r\n        oldChannels: undefined,\r\n      },\r\n      async () => {\r\n        await this.queryChannels();\r\n      },\r\n    );\r\n  }\r\n\r\n  onFilterChange(filter) {\r\n    this.setState(\r\n      {\r\n        filters: filter,\r\n        offset: 0,\r\n        hasNextPage: true,\r\n        channels: [],\r\n        oldChannels: undefined,\r\n      },\r\n      async () => {\r\n        await this.queryChannels();\r\n      },\r\n    );\r\n  }\r\n\r\n  onResetSearch() {\r\n    this.setState(\r\n      {\r\n        offset: 0,\r\n        hasNextPage: true,\r\n        channels: [],\r\n        oldChannels: undefined,\r\n      },\r\n      async () => {\r\n        await this.queryChannels();\r\n      },\r\n    );\r\n    // this.props.setActiveSearch('');\r\n  }\r\n\r\n  queryChannels = async () => {\r\n    const { options } = this.props;\r\n    const { offset, sort, filters } = this.state;\r\n    this.setState({ refreshing: true });\r\n    const newOptions = {\r\n      ...options,\r\n    };\r\n    if (!options.limit) newOptions.limit = 30;\r\n\r\n    const channelPromise = this.props.client.queryChannels(filters, sort, {\r\n      ...newOptions,\r\n      offset,\r\n    });\r\n\r\n    try {\r\n      let channelQueryResponse = channelPromise;\r\n      if (isPromise(channelQueryResponse)) {\r\n        channelQueryResponse = await channelPromise;\r\n      }\r\n      this.setState((prevState) => {\r\n        const channels = [...prevState.channels, ...channelQueryResponse];\r\n\r\n        return {\r\n          channels, // not unique somehow needs more checking\r\n          loadingChannels: false,\r\n          offset: channels.length,\r\n          hasNextPage:\r\n            channelQueryResponse.length >= newOptions.limit ? true : false,\r\n          refreshing: false,\r\n        };\r\n      });\r\n\r\n      // Set a channel as active and move it to the top of the list.\r\n      if (this.props.customActiveChannel) {\r\n        const customActiveChannel = channelQueryResponse.filter(\r\n          (channel) => channel.id === this.props.customActiveChannel,\r\n        )[0];\r\n        if (customActiveChannel) {\r\n          this.props.setActiveChannel(customActiveChannel, this.props.watchers);\r\n          this.moveChannelUp(customActiveChannel.cid);\r\n        }\r\n      } else if (offset === 0 && this.state.channels.length >= 1) {\r\n        this.props.setActiveChannel(\r\n          this.state.channels[0],\r\n          this.props.watchers,\r\n        );\r\n      }\r\n    } catch (e) {\r\n      console.warn(e);\r\n      this.setState({ error: true, refreshing: false });\r\n    }\r\n  };\r\n\r\n  listenToChanges() {\r\n    this.props.client.on(this.handleEvent);\r\n  }\r\n\r\n  // eslint-disable-next-line sonarjs/cognitive-complexity\r\n  handleEvent = async (e) => {\r\n    if (e.type === 'user.presence.changed') {\r\n      let newChannels = this.state.channels;\r\n\r\n      newChannels = newChannels.map((channel) => {\r\n        if (!channel.state.members[e.user.id]) return channel;\r\n\r\n        channel.state.members.setIn([e.user.id, 'user'], e.user);\r\n\r\n        return channel;\r\n      });\r\n\r\n      this.setState({ channels: [...newChannels] });\r\n    }\r\n\r\n    if (e.type === 'message.new') {\r\n      !this.props.lockChannelOrder && this.moveChannelUp(e.cid);\r\n    }\r\n\r\n    // make sure to re-render the channel list after connection is recovered\r\n    if (e.type === 'connection.recovered') {\r\n      this.setState((prevState) => ({\r\n        connectionRecoveredCount: prevState.connectionRecoveredCount + 1,\r\n      }));\r\n    }\r\n\r\n    // move channel to start\r\n    if (e.type === 'notification.message_new') {\r\n      // if new message, put move channel up\r\n      // get channel if not in state currently\r\n      if (\r\n        this.props.onMessageNew &&\r\n        typeof this.props.onMessageNew === 'function'\r\n      ) {\r\n        this.props.onMessageNew(this, e);\r\n      } else {\r\n        const channel = await this.getChannel(e.channel.type, e.channel.id);\r\n        // move channel to starting position\r\n        this.setState((prevState) => ({\r\n          channels: uniqBy([channel, ...prevState.channels], 'cid'),\r\n        }));\r\n      }\r\n    }\r\n\r\n    // add to channel\r\n    if (e.type === 'notification.added_to_channel') {\r\n      if (\r\n        this.props.onAddedToChannel &&\r\n        typeof this.props.onAddedToChannel === 'function'\r\n      ) {\r\n        this.props.onAddedToChannel(this, e);\r\n      } else {\r\n        const channel = await this.getChannel(e.channel.type, e.channel.id);\r\n        this.setState((prevState) => ({\r\n          channels: uniqBy([channel, ...prevState.channels], 'cid'),\r\n        }));\r\n      }\r\n    }\r\n\r\n    // remove from channel\r\n    if (e.type === 'notification.removed_from_channel') {\r\n      if (\r\n        this.props.onRemovedFromChannel &&\r\n        typeof this.props.onRemovedFromChannel === 'function'\r\n      ) {\r\n        this.props.onRemovedFromChannel(this, e);\r\n      } else {\r\n        this.setState((prevState) => {\r\n          const channels = prevState.channels.filter(\r\n            (channel) => channel.cid !== e.channel.cid,\r\n          );\r\n          return {\r\n            channels,\r\n          };\r\n        });\r\n      }\r\n    }\r\n\r\n    // Update the channel with data\r\n    if (e.type === 'channel.updated') {\r\n      const channels = this.state.channels;\r\n      const channelIndex = channels.findIndex(\r\n        (channel) => channel.cid === e.channel.cid,\r\n      );\r\n      channels[channelIndex].data = Immutable(e.channel);\r\n      this.setState({\r\n        channels: [...channels],\r\n        channelUpdateCount: this.state.channelUpdateCount + 1,\r\n      });\r\n\r\n      if (\r\n        this.props.onChannelUpdated &&\r\n        typeof this.props.onChannelUpdated === 'function'\r\n      ) {\r\n        this.props.onChannelUpdated(this, e);\r\n      }\r\n    }\r\n\r\n    // Channel is deleted\r\n    if (e.type === 'channel.deleted') {\r\n      if (\r\n        this.props.onChannelDeleted &&\r\n        typeof this.props.onChannelDeleted === 'function'\r\n      ) {\r\n        this.props.onChannelDeleted(this, e);\r\n      } else {\r\n        const channels = this.state.channels;\r\n        const channelIndex = channels.findIndex(\r\n          (channel) => channel.cid === e.channel.cid,\r\n        );\r\n        // Remove the deleted channel from the list.s\r\n        channels.splice(channelIndex, 1);\r\n        this.setState({\r\n          channels: [...channels],\r\n          channelUpdateCount: this.state.channelUpdateCount + 1,\r\n        });\r\n      }\r\n    }\r\n\r\n    if (e.type === 'channel.truncated') {\r\n      this.setState((prevState) => ({\r\n        channels: [...prevState.channels],\r\n        channelUpdateCount: prevState.channelUpdateCount + 1,\r\n      }));\r\n\r\n      if (\r\n        this.props.onChannelTruncated &&\r\n        typeof this.props.onChannelTruncated === 'function'\r\n      )\r\n        this.props.onChannelTruncated(this, e);\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  getChannel = async (type, id) => {\r\n    const channel = this.props.client.channel(type, id);\r\n    await channel.watch();\r\n    return channel;\r\n  };\r\n\r\n  moveChannelUp = (cid) => {\r\n    const channels = this.state.channels;\r\n    // get channel index\r\n    const channelIndex = this.state.channels.findIndex(\r\n      (channel) => channel.cid === cid,\r\n    );\r\n    if (channelIndex <= 0) return;\r\n\r\n    // get channel from channels\r\n    const channel = channels[channelIndex];\r\n\r\n    //remove channel from current position\r\n    channels.splice(channelIndex, 1);\r\n    //add channel at the start\r\n    channels.unshift(channel);\r\n\r\n    // set new channel state\r\n    this.setState({\r\n      channels: [...channels],\r\n    });\r\n  };\r\n\r\n  loadNextPage = () => {\r\n    this.queryChannels();\r\n  };\r\n\r\n  closeMenu = () => {\r\n    this.menuButton.current.checked = false;\r\n  };\r\n\r\n  async onChannelSearchResult(searchResultChannels) {\r\n    if (this.state.oldChannels === undefined) {\r\n      this.setState({\r\n        oldChannels: this.state.channels,\r\n      });\r\n    }\r\n\r\n    if (this.state.oldChannels !== undefined) {\r\n      this.setState({\r\n        channels: this.state.oldChannels,\r\n      });\r\n    }\r\n\r\n    let result = [];\r\n    if (searchResultChannels) {\r\n      result = this.state.channels.filter((channel) => {\r\n        return searchResultChannels.find((i) => i.cid === channel.cid);\r\n      });\r\n    }\r\n\r\n    let lastChannels = {};\r\n    if (this.state.oldChannels !== undefined) {\r\n      lastChannels = this.state.oldChannels;\r\n    } else {\r\n      lastChannels = this.state.channels;\r\n    }\r\n    if (result.length > 0) {\r\n      await this.setState({\r\n        channels: result,\r\n      });\r\n    } else {\r\n      this.setState({ channels: [] }, () => {});\r\n    }\r\n\r\n    if (this.state.channels.length > 0) {\r\n      this.props.setActiveChannel(this.state.channels[0], this.props.watchers);\r\n    } else {\r\n      this.props.setActiveChannel(lastChannels[0], this.props.watchers);\r\n    }\r\n  }\r\n\r\n  // new channel list // *********************************\r\n  _renderChannel = (item) => {\r\n    const { Preview, setActiveChannel, channel, watchers } = this.props;\r\n    if (!item) return;\r\n    const props = {\r\n      channel: item,\r\n      activeChannel: channel,\r\n      closeMenu: this.closeMenu,\r\n      Preview,\r\n      setActiveChannel,\r\n      watchers,\r\n      key: item.id,\r\n      // To force the update of preview component upon channel update.\r\n      channelUpdateCount: this.state.channelUpdateCount,\r\n      connectionRecoveredCount: this.state.connectionRecoveredCount,\r\n    };\r\n    return smartRender(ChannelPreview, { ...props });\r\n  };\r\n\r\n  render() {\r\n    const { List, Paginator } = this.props;\r\n    const {\r\n      channels,\r\n      loadingChannels,\r\n      refreshing,\r\n      hasNextPage,\r\n      noResults,\r\n    } = this.state;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <input\r\n          type=\"checkbox\"\r\n          id=\"str-chat-channel-checkbox\"\r\n          ref={this.menuButton}\r\n          className=\"str-chat-channel-checkbox\"\r\n        />\r\n        <label\r\n          htmlFor=\"str-chat-channel-checkbox\"\r\n          className=\"str-chat-channel-list-burger\"\r\n        >\r\n          <div />\r\n        </label>\r\n        <div\r\n          className={`str-chat str-chat-channel-list ${this.props.theme} ${\r\n            this.props.open ? 'str-chat-channel-list--open' : ''\r\n          }`}\r\n          ref={this.channelList}\r\n        >\r\n          <List\r\n            loading={loadingChannels}\r\n            error={this.state.error}\r\n            channels={channels}\r\n            setActiveChannel={this.props.setActiveChannel}\r\n            setActiveSearch={this.props.setActiveSearch}\r\n            activeChannel={this.props.channel}\r\n            showSidebar={this.props.showSidebar}\r\n            onSelectSort={this.onSortChange}\r\n            onSelectFilter={this.onFilterChange}\r\n            onToggleSearchModus={this.onToggleSearchModus}\r\n            isOn={false}\r\n            onChannelResult={this.onChannelSearchResult}\r\n            noResult={noResults}\r\n            resetSearch={this.onResetSearch}\r\n          >\r\n            {!channels.length ? (\r\n              <EmptyStateIndicator listType=\"channel\" />\r\n            ) : (\r\n              smartRender(Paginator, {\r\n                loadNextPage: this.loadNextPage,\r\n                hasNextPage,\r\n                refreshing,\r\n                children: channels.map((item) => this._renderChannel(item)),\r\n              })\r\n            )}\r\n          </List>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nChannelList = withChatContext(ChannelList);\r\nexport { ChannelList };\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { LoadingChannels } from './LoadingChannels';\r\nimport { ChatDown } from './ChatDown';\r\nimport { withChatContext } from '../context';\r\n\r\n/**\r\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\r\n * @example ./examples/ChannelList.md\r\n */\r\nclass ChannelListMessenger extends PureComponent {\r\n  static propTypes = {\r\n    loading: PropTypes.bool,\r\n    error: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    error: false,\r\n  };\r\n\r\n  render() {\r\n    if (this.props.error) {\r\n      return <ChatDown />;\r\n    } else if (this.props.loading) {\r\n      return <LoadingChannels />;\r\n    } else {\r\n      return (\r\n        <div className=\"str-chat__channel-list-messenger\">\r\n          <div className=\"str-chat__channel-list-messenger__main\">\r\n            {this.props.children}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nChannelListMessenger = withChatContext(ChannelListMessenger);\r\nexport { ChannelListMessenger };\r\n","import React from 'react';\r\nimport { Avatar } from './Avatar';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n *\r\n * @example ./docs/ChannelPreviewCompact.md\r\n * @extends PureComponent\r\n *\r\n */\r\nexport class ChannelPreviewCompact extends React.PureComponent {\r\n  static propTypes = {\r\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    setActiveChannel: PropTypes.func,\r\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    channel: PropTypes.object,\r\n    closeMenu: PropTypes.func,\r\n    unread_count: PropTypes.number,\r\n    /** If channel of component is active (selected) channel */\r\n    active: PropTypes.bool,\r\n    latestMessage: PropTypes.string,\r\n  };\r\n\r\n  channelPreviewButton = React.createRef();\r\n\r\n  onSelectChannel = () => {\r\n    this.props.setActiveChannel(this.props.channel, this.props.watchers);\r\n    this.channelPreviewButton.current.blur();\r\n  };\r\n  render() {\r\n    const unreadClass =\r\n      this.props.unread_count >= 1\r\n        ? 'str-chat__channel-preview-compact--unread'\r\n        : '';\r\n    const activeClass = this.props.active\r\n      ? 'str-chat__channel-preview-compact--active'\r\n      : '';\r\n    const name = this.props.channel.data.name || this.props.channel.cid;\r\n    return (\r\n      <button\r\n        onClick={this.onSelectChannel}\r\n        ref={this.channelPreviewButton}\r\n        className={`str-chat__channel-preview-compact ${unreadClass} ${activeClass}`}\r\n      >\r\n        <div className=\"str-chat__channel-preview-compact--left\">\r\n          <Avatar image={this.props.channel.data.image} size={20} />\r\n        </div>\r\n        <div className=\"str-chat__channel-preview-compact--right\">{name}</div>\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl } from 'react-intl';\r\nimport { Avatar } from './Avatar';\r\n\r\nimport truncate from 'lodash/truncate';\r\n\r\n/**\r\n * Used as preview component for channel item in [ChannelList](#channellist) component.\r\n * Its best suited for messenger type chat.\r\n *\r\n * @example ./docs/ChannelPreviewMessenger.md\r\n * @extends PureComponent\r\n */\r\nclass ChannelPreviewMessenger extends PureComponent {\r\n  static propTypes = {\r\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    setActiveChannel: PropTypes.func,\r\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\r\n    channel: PropTypes.object,\r\n    closeMenu: PropTypes.func,\r\n    unread: PropTypes.number,\r\n    /** If channel of component is active (selected) channel */\r\n    active: PropTypes.bool,\r\n    latestMessage: PropTypes.string,\r\n  };\r\n\r\n  channelPreviewButton = React.createRef();\r\n\r\n  onSelectChannel = () => {\r\n    this.props.setActiveChannel(this.props.channel, this.props.watchers);\r\n    this.channelPreviewButton.current.blur();\r\n    this.props.closeMenu();\r\n  };\r\n\r\n  onDeleteChannel = async () => {\r\n    const removeChannel = await this.props.channel.delete();\r\n    // console.log(removeChannel);\r\n  };\r\n\r\n  render() {\r\n    const unreadClass =\r\n      this.props.unread >= 1\r\n        ? 'str-chat__channel-preview-messenger--unread'\r\n        : '';\r\n    const activeClass = this.props.active\r\n      ? 'str-chat__channel-preview-messenger--active'\r\n      : '';\r\n\r\n    const { channel, intl } = this.props;\r\n\r\n    return (\r\n      <div id=\"style-select-channel-list\">\r\n        <button\r\n          onClick={this.onSelectChannel}\r\n          ref={this.channelPreviewButton}\r\n          className={`str-chat__channel-preview-messenger ${unreadClass} ${activeClass}`}\r\n        >\r\n          {/* <div className=\"str-chat__channel-preview-messenger--left\">\r\n            <Avatar image={channel.data.image} size={40} />\r\n          </div> */}\r\n\r\n          <div className=\"str-chat__channel-preview-messenger--right\">\r\n            <div className=\"str-chat__channel-preview-messenger--name\">\r\n              <span>{truncate(channel.data.name, 29)}</span>\r\n            </div>\r\n            <div id=\"style-channel-preview\">\r\n              <div className=\"str-chat__channel-preview-messenger--last-message\">\r\n                {!channel.state.messages[0]\r\n                  ? intl.formatMessage({\r\n                      id: 'channel_preview.latest_message.none',\r\n                      defaultMessage: 'Nothing yet...',\r\n                    })\r\n                  : truncate(this.props.latestMessage, 14)}\r\n              </div>\r\n              {channel._client.user.role === 'admin' ? (\r\n                <div className=\"str-chat__channel-preview-messenger--responsive-member\">\r\n                  {channel.data.responsiveMember ? (\r\n                    <div className=\"channel-list-show-responsive-member\">\r\n                      <div className=\"str-chat__channel-preview-assigned-to\">\r\n                        {intl.formatMessage({\r\n                          id: 'channel_preview.responsiveMember.label',\r\n                          defaultMessage: 'assigned to',\r\n                        }) +\r\n                          ' ' +\r\n                          channel.data.responsiveMember}{' '}\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    intl.formatMessage({\r\n                      id: 'channel_preview.responsiveMember.none',\r\n                      defaultMessage: 'not assigned',\r\n                    })\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div></div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </button>\r\n        <div className=\"style-unread-icon-section\">\r\n          {channel._client.user.role === 'admin' ? (\r\n            <div className=\"channel-delete-tooltip\">\r\n              <span className=\"channel-delete-tooltiptext\">\r\n                Lschen des Channels\r\n              </span>\r\n              <div\r\n                className=\"str-chat__channel-preview-delete-channel-icon\"\r\n                onClick={this.onDeleteChannel}\r\n              >\r\n                <svg\r\n                  id=\"style-channel-delete-icon\"\r\n                  width=\"14\"\r\n                  height=\"14\"\r\n                  viewBox=\"0 0 18 18\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                >\r\n                  <path\r\n                    stroke=\"black\"\r\n                    d=\"M 19.333 2.547 l -1.88 -1.88 L 10 8.12 L 2.547 0.667 l -1.88 1.88 L 8.12 10 L 0.667 17.453 l 1.88 1.88 L 10 11.88 l 7.453 7.453 l 1.88 -1.88 L 11.88 10 Z\"\r\n                  ></path>\r\n                </svg>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div></div>\r\n          )}\r\n          {this.showUnread()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  showUnread() {\r\n    if (!this.props.unread) {\r\n      return;\r\n    } else {\r\n      return (\r\n        <label id=\"style-unread-message-button\">\r\n          {!this.props.unread ? '' : truncate(this.props.unread, 5)}\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nChannelPreviewMessenger = injectIntl(ChannelPreviewMessenger);\r\nexport { ChannelPreviewMessenger };\r\n","/* eslint-disable */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class InfiniteScroll extends Component {\r\n  static propTypes = {\r\n    children: PropTypes.node.isRequired,\r\n    element: PropTypes.node,\r\n    hasMore: PropTypes.bool,\r\n    initialLoad: PropTypes.bool,\r\n    isReverse: PropTypes.bool,\r\n    loader: PropTypes.node,\r\n    loadMore: PropTypes.func.isRequired,\r\n    pageStart: PropTypes.number,\r\n    isLoading: PropTypes.bool,\r\n    ref: PropTypes.func,\r\n    threshold: PropTypes.number,\r\n    useCapture: PropTypes.bool,\r\n    useWindow: PropTypes.bool,\r\n  };\r\n\r\n  static defaultProps = {\r\n    element: 'div',\r\n    hasMore: false,\r\n    initialLoad: true,\r\n    isLoading: false,\r\n    pageStart: 0,\r\n    ref: null,\r\n    threshold: 250,\r\n    useWindow: true,\r\n    isReverse: false,\r\n    useCapture: false,\r\n    loader: null,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.scrollListener = this.scrollListener.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.pageLoaded = this.props.pageStart;\r\n    this.attachScrollListener();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.attachScrollListener();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.detachScrollListener();\r\n    this.detachMousewheelListener();\r\n  }\r\n\r\n  // Set a defaut loader for all your `InfiniteScroll` components\r\n  setDefaultLoader(loader) {\r\n    this.defaultLoader = loader;\r\n  }\r\n\r\n  detachMousewheelListener() {\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = this.scrollComponent.parentNode;\r\n    }\r\n\r\n    scrollEl.removeEventListener(\r\n      'mousewheel',\r\n      this.mousewheelListener,\r\n      this.props.useCapture,\r\n    );\r\n  }\r\n\r\n  detachScrollListener() {\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = this.getParentElement(this.scrollComponent);\r\n    }\r\n\r\n    scrollEl.removeEventListener(\r\n      'scroll',\r\n      this.scrollListener,\r\n      this.props.useCapture,\r\n    );\r\n    scrollEl.removeEventListener(\r\n      'resize',\r\n      this.scrollListener,\r\n      this.props.useCapture,\r\n    );\r\n  }\r\n\r\n  getParentElement(el) {\r\n    return el && el.parentNode;\r\n  }\r\n\r\n  filterProps(props) {\r\n    return props;\r\n  }\r\n\r\n  attachScrollListener() {\r\n    if (\r\n      !this.props.hasMore ||\r\n      this.props.isLoading ||\r\n      !this.getParentElement(this.scrollComponent)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = this.getParentElement(this.scrollComponent);\r\n    }\r\n\r\n    scrollEl.addEventListener(\r\n      'mousewheel',\r\n      this.mousewheelListener,\r\n      this.props.useCapture,\r\n    );\r\n    scrollEl.addEventListener(\r\n      'scroll',\r\n      this.scrollListener,\r\n      this.props.useCapture,\r\n    );\r\n    scrollEl.addEventListener(\r\n      'resize',\r\n      this.scrollListener,\r\n      this.props.useCapture,\r\n    );\r\n\r\n    if (this.props.initialLoad) {\r\n      this.scrollListener();\r\n    }\r\n  }\r\n\r\n  mousewheelListener(e) {\r\n    // Prevents Chrome hangups\r\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\r\n    if (e.deltaY === 1) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  scrollListener() {\r\n    const el = this.scrollComponent;\r\n    const scrollEl = window;\r\n    const parentNode = this.getParentElement(el);\r\n\r\n    let offset;\r\n    if (this.props.useWindow) {\r\n      const doc =\r\n        document.documentElement || document.body.parentNode || document.body;\r\n      const scrollTop =\r\n        scrollEl.pageYOffset !== undefined\r\n          ? scrollEl.pageYOffset\r\n          : doc.scrollTop;\r\n      if (this.props.isReverse) {\r\n        offset = scrollTop;\r\n      } else {\r\n        offset = this.calculateOffset(el, scrollTop);\r\n      }\r\n    } else if (this.props.isReverse) {\r\n      offset = parentNode.scrollTop;\r\n    } else {\r\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\r\n    }\r\n\r\n    // Here we make sure the element is visible as well as checking the offset\r\n    if (\r\n      offset < Number(this.props.threshold) &&\r\n      el &&\r\n      el.offsetParent !== null\r\n    ) {\r\n      this.detachScrollListener();\r\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\r\n      if (typeof this.props.loadMore === 'function') {\r\n        this.props.loadMore((this.pageLoaded += 1));\r\n      }\r\n    }\r\n  }\r\n\r\n  calculateOffset(el, scrollTop) {\r\n    if (!el) {\r\n      return 0;\r\n    }\r\n\r\n    return (\r\n      this.calculateTopPosition(el) +\r\n      (el.offsetHeight - scrollTop - window.innerHeight)\r\n    );\r\n  }\r\n\r\n  calculateTopPosition(el) {\r\n    if (!el) {\r\n      return 0;\r\n    }\r\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\r\n  }\r\n\r\n  render() {\r\n    const renderProps = this.filterProps(this.props);\r\n    const {\r\n      children,\r\n      element,\r\n      hasMore,\r\n      initialLoad,\r\n      isReverse,\r\n      loader,\r\n      loadMore,\r\n      pageStart,\r\n      ref,\r\n      threshold,\r\n      useCapture,\r\n      useWindow,\r\n      isLoading,\r\n      ...props\r\n    } = renderProps;\r\n\r\n    props.ref = (node) => {\r\n      this.scrollComponent = node;\r\n      if (ref) {\r\n        ref(node);\r\n      }\r\n    };\r\n\r\n    const childrenArray = [children];\r\n    if (isLoading) {\r\n      if (loader) {\r\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\r\n      } else if (this.defaultLoader) {\r\n        isReverse\r\n          ? childrenArray.unshift(this.defaultLoader)\r\n          : childrenArray.push(this.defaultLoader);\r\n      }\r\n    }\r\n    return React.createElement(element, props, childrenArray);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { LoadingIndicator } from 'react-file-utils';\r\n\r\nimport InfiniteScroll from './InfiniteScroll';\r\n\r\nexport class InfiniteScrollPaginator extends React.Component {\r\n  static propTypes = {\r\n    /** callback to load the next page */\r\n    loadNextPage: PropTypes.func,\r\n    /** indicates if there is a next page to load */\r\n    hasNextPage: PropTypes.bool,\r\n    /** indicates if there there's currently any refreshing taking place */\r\n    refreshing: PropTypes.bool,\r\n    /** display the items in opposite order */\r\n    reverse: PropTypes.bool,\r\n    /** Offset from when to start the loadNextPage call */\r\n    threshold: PropTypes.number,\r\n    /** The loading indicator to use */\r\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n  };\r\n\r\n  static defaultProps = {\r\n    LoadingIndicator: <LoadingIndicator />,\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <InfiniteScroll\r\n        loadMore={this.props.loadNextPage}\r\n        hasMore={this.props.hasNextPage}\r\n        isLoading={this.props.refreshing}\r\n        isReverse={this.props.reverse}\r\n        threshold={this.props.threshold}\r\n        useWindow={false}\r\n        loader={\r\n          <div\r\n            className=\"str-chat__infinite-scroll-paginator\"\r\n            key=\"loadingindicator\"\r\n          >\r\n            <LoadingIndicator />\r\n          </div>\r\n        }\r\n      >\r\n        {this.props.children}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { Attachment } from './Attachment';\r\nimport { ReactionsList } from './ReactionsList';\r\nimport { Avatar } from './Avatar';\r\nimport { Gallery } from './Gallery';\r\nimport { ReactionSelector } from './ReactionSelector';\r\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport 'moment/locale/de';\r\n\r\nimport { isOnlyEmojis, renderText } from '../utils';\r\n\r\n/**\r\n * MessageCommerce - Render component, should be used together with the Message component\r\n *\r\n * @example ./docs/MessageSimple.md\r\n * @extends PureComponent\r\n */\r\nexport class MessageCommerce extends PureComponent {\r\n  static propTypes = {\r\n    /** The [message object](https://getstream.io/chat/docs/#message_format) */\r\n    message: PropTypes.object,\r\n    /**\r\n     * The attachment UI component.\r\n     * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\r\n     * */\r\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     *\r\n     * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\r\n     *\r\n     * The higher order message component, most logic is delegated to this component\r\n     * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\r\n     *\r\n     * */\r\n    Message: PropTypes.oneOfType([\r\n      PropTypes.node,\r\n      PropTypes.func,\r\n      PropTypes.object,\r\n    ]).isRequired,\r\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\r\n    unsafeHTML: PropTypes.bool,\r\n    /** If its parent message in thread. */\r\n    initialMessage: PropTypes.bool,\r\n    /** Channel config object */\r\n    channelConfig: PropTypes.object,\r\n    /** If component is in thread list */\r\n    threadList: PropTypes.bool,\r\n    /** Function to open thread on current messxage */\r\n    handleOpenThread: PropTypes.func,\r\n    /** Returns true if message belongs to current user */\r\n    isMyMessage: PropTypes.func,\r\n    /** Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute] */\r\n    getMessageActions: PropTypes.func,\r\n    /**\r\n     * Add or remove reaction on message\r\n     *\r\n     * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\r\n     * @param event Dom event which triggered this function\r\n     */\r\n    handleReaction: PropTypes.func,\r\n    /** If actions such as edit, delete, flag, mute are enabled on message */\r\n    actionsEnabled: PropTypes.bool,\r\n    /**\r\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\r\n     *\r\n     * @param name {string} Name of action\r\n     * @param value {string} Value of action\r\n     * @param event Dom event that triggered this handler\r\n     */\r\n    handleAction: PropTypes.func,\r\n    /**\r\n     * The handler for hover event on @mention in message\r\n     *\r\n     * @param event Dom hover event which triggered handler.\r\n     * @param user Target user object\r\n     */\r\n    onMentionsHoverMessage: PropTypes.func,\r\n    /**\r\n     * The handler for click event on @mention in message\r\n     *\r\n     * @param event Dom click event which triggered handler.\r\n     * @param user Target user object\r\n     */\r\n    onMentionsClickMessage: PropTypes.func,\r\n    /** Position of message in group. Possible values: top, bottom, middle, single */\r\n    groupStyles: PropTypes.array,\r\n  };\r\n\r\n  static defaultProps = {\r\n    Attachment,\r\n  };\r\n\r\n  state = {\r\n    isFocused: false,\r\n    actionsBoxOpen: false,\r\n    showDetailedReactions: false,\r\n  };\r\n\r\n  messageActionsRef = React.createRef();\r\n  reactionSelectorRef = React.createRef();\r\n\r\n  _onClickOptionsAction = () => {\r\n    this.setState(\r\n      {\r\n        actionsBoxOpen: true,\r\n      },\r\n      () => document.addEventListener('click', this.hideOptions, false),\r\n    );\r\n  };\r\n\r\n  _hideOptions = () => {\r\n    this.setState({\r\n      actionsBoxOpen: false,\r\n    });\r\n    document.removeEventListener('click', this.hideOptions, false);\r\n  };\r\n\r\n  _clickReactionList = () => {\r\n    this.setState(\r\n      () => ({\r\n        showDetailedReactions: true,\r\n      }),\r\n      () => {\r\n        document.addEventListener('click', this._closeDetailedReactions);\r\n      },\r\n    );\r\n  };\r\n\r\n  _closeDetailedReactions = (e) => {\r\n    if (\r\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\r\n        e.target,\r\n      )\r\n    ) {\r\n      this.setState(\r\n        () => ({\r\n          showDetailedReactions: false,\r\n        }),\r\n        () => {\r\n          document.removeEventListener('click', this._closeDetailedReactions);\r\n        },\r\n      );\r\n    } else {\r\n      return {};\r\n    }\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    if (!this.props.message.deleted_at) {\r\n      document.removeEventListener('click', this._closeDetailedReactions);\r\n    }\r\n  }\r\n\r\n  isMine() {\r\n    return !this.props.isMyMessage(this.props.message);\r\n  }\r\n\r\n  renderOptions() {\r\n    if (\r\n      this.props.message.type === 'error' ||\r\n      this.props.message.type === 'system' ||\r\n      this.props.message.type === 'ephemeral' ||\r\n      this.props.message.status === 'sending' ||\r\n      this.props.message.status === 'failed' ||\r\n      !this.props.channelConfig.reactions ||\r\n      this.props.initialMessage\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    return (\r\n      <div className=\"str-chat__message-commerce__actions\">\r\n        <div\r\n          className=\"str-chat__message-commerce__actions__action str-chat__message-commerce__actions__action--reactions\"\r\n          onClick={this._clickReactionList}\r\n        >\r\n          <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n              d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\r\n              fillRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      message,\r\n      groupStyles,\r\n      Attachment,\r\n      handleReaction,\r\n      handleAction,\r\n      actionsEnabled,\r\n      onMentionsHoverMessage,\r\n      onMentionsClickMessage,\r\n      unsafeHTML,\r\n      threadList,\r\n      handleOpenThread,\r\n    } = this.props;\r\n    const when = moment(message.created_at).format('LT');\r\n\r\n    const messageClasses = this.isMine()\r\n      ? 'str-chat__message-commerce str-chat__message-commerce--left'\r\n      : 'str-chat__message-commerce str-chat__message-commerce--right';\r\n\r\n    const hasAttachment = Boolean(\r\n      message.attachments && message.attachments.length,\r\n    );\r\n    const images =\r\n      hasAttachment &&\r\n      message.attachments.filter((item) => item.type === 'image');\r\n    const hasReactions = Boolean(\r\n      message.latest_reactions && message.latest_reactions.length,\r\n    );\r\n\r\n    if (\r\n      message.type === 'message.read' ||\r\n      message.deleted_at ||\r\n      message.type === 'message.date'\r\n    ) {\r\n      return null;\r\n    }\r\n\r\n    if (message.deleted_at) {\r\n      return (\r\n        <React.Fragment>\r\n          <span\r\n            key={message.id}\r\n            className={`${messageClasses} str-chat__message--deleted`}\r\n          >\r\n            <FormattedMessage\r\n              id=\"message.deleted\"\r\n              defaultMessage=\"This message was deleted...\"\r\n            />\r\n          </span>\r\n          <div className=\"clearfix\" />\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n        <div\r\n          key={message.id}\r\n          className={`\r\n\t\t\t\t\t\t${messageClasses}\r\n\t\t\t\t\t\tstr-chat__message-commerce--${message.type}\r\n\t\t\t\t\t\t${\r\n              message.text\r\n                ? 'str-chat__message-commerce--has-text'\r\n                : 'str-chat__message-commerce--has-no-text'\r\n            }\r\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce--has-attachment' : ''}\r\n\t\t\t\t\t\t${hasReactions ? 'str-chat__message-commerce--with-reactions' : ''}\r\n\t\t\t\t\t\t${`str-chat__message-commerce--${groupStyles[0]}`}\r\n\t\t\t\t\t`.trim()}\r\n          onMouseLeave={this._hideOptions}\r\n          ref={this.messageRef}\r\n        >\r\n          {(groupStyles[0] === 'bottom' || groupStyles[0] === 'single') && (\r\n            <Avatar\r\n              image={message.user.image}\r\n              size={32}\r\n              name={message.user.name || message.user.id}\r\n            />\r\n          )}\r\n          <div className=\"str-chat__message-commerce-inner\">\r\n            {!message.text && (\r\n              <React.Fragment>\r\n                {this.renderOptions()}\r\n                {/* if reactions show them */}\r\n                {hasReactions && !this.state.showDetailedReactions && (\r\n                  <ReactionsList\r\n                    reactions={message.latest_reactions}\r\n                    reaction_counts={message.reaction_counts}\r\n                    onClick={this._clickReactionList}\r\n                  />\r\n                )}\r\n                {this.state.showDetailedReactions && (\r\n                  <ReactionSelector\r\n                    reverse={false}\r\n                    handleReaction={handleReaction}\r\n                    actionsEnabled={actionsEnabled}\r\n                    detailedView\r\n                    reaction_counts={message.reaction_counts}\r\n                    latest_reactions={message.latest_reactions}\r\n                    ref={this.reactionSelectorRef}\r\n                  />\r\n                )}\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {hasAttachment &&\r\n              images.length <= 1 &&\r\n              message.attachments.map((attachment, index) => (\r\n                <Attachment\r\n                  key={`${message.id}-${index}`}\r\n                  attachment={attachment}\r\n                  actionHandler={handleAction}\r\n                />\r\n              ))}\r\n            {images.length > 1 && <Gallery images={images} />}\r\n\r\n            {message.text && (\r\n              <div className=\"str-chat__message-commerce-text\">\r\n                <div\r\n                  className={`str-chat__message-commerce-text-inner\r\n\t\t\t\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce-text-inner--has-attachment' : ''}\r\n\t\t\t\t\t\t\t\t\t${\r\n                    isOnlyEmojis(message.text)\r\n                      ? 'str-chat__message-commerce-text-inner--is-emoji'\r\n                      : ''\r\n                  }\r\n                `.trim()}\r\n                  onMouseOver={onMentionsHoverMessage}\r\n                  onClick={onMentionsClickMessage}\r\n                >\r\n                  {message.type === 'error' && (\r\n                    <div className=\"str-chat__commerce-message--error-message\">\r\n                      <FormattedMessage\r\n                        id=\"message.error\"\r\n                        defaultMessage=\"Error  Unsent\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {unsafeHTML ? (\r\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\r\n                  ) : (\r\n                    renderText(message)\r\n                  )}\r\n\r\n                  {/* if reactions show them */}\r\n                  {hasReactions && !this.state.showDetailedReactions && (\r\n                    <ReactionsList\r\n                      reverse\r\n                      reactions={message.latest_reactions}\r\n                      reaction_counts={message.reaction_counts}\r\n                      onClick={this._clickReactionList}\r\n                    />\r\n                  )}\r\n                  {this.state.showDetailedReactions && (\r\n                    <ReactionSelector\r\n                      reverse={false}\r\n                      handleReaction={handleReaction}\r\n                      actionsEnabled={actionsEnabled}\r\n                      detailedView\r\n                      reaction_counts={message.reaction_counts}\r\n                      latest_reactions={message.latest_reactions}\r\n                      ref={this.reactionSelectorRef}\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {message.text && this.renderOptions()}\r\n              </div>\r\n            )}\r\n            {!threadList && (\r\n              <div className=\"str-chat__message-commerce-reply-button\">\r\n                <MessageRepliesCountButton\r\n                  onClick={handleOpenThread}\r\n                  reply_count={message.reply_count}\r\n                />\r\n              </div>\r\n            )}\r\n            <div className={`str-chat__message-commerce-data`}>\r\n              {this.isMine() ? (\r\n                <span className=\"str-chat__message-commerce-name\">\r\n                  {message.user.name || message.user.id}\r\n                </span>\r\n              ) : null}\r\n              <span className=\"str-chat__message-commerce-timestamp\">\r\n                {when}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { NimbleEmoji } from 'emoji-mart';\r\n\r\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\r\n\r\nexport class SimpleReactionsList extends React.PureComponent {\r\n  static propTypes = {\r\n    reactions: PropTypes.array,\r\n    reaction_coutns: PropTypes.object,\r\n    renderReactions: PropTypes.func,\r\n    showTooltip: PropTypes.bool,\r\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\r\n    reactionOptions: PropTypes.array,\r\n  };\r\n\r\n  static defaultProps = {\r\n    showTooltip: true,\r\n    reactionOptions: defaultMinimalEmojis,\r\n    emojiSetDef,\r\n  };\r\n\r\n  state = {\r\n    showTooltip: false,\r\n    users: [],\r\n  };\r\n\r\n  showTooltip = () => {\r\n    this.setState({\r\n      showTooltip: true,\r\n    });\r\n  };\r\n\r\n  hideTooltip = () => {\r\n    this.setState({\r\n      showTooltip: false,\r\n    });\r\n  };\r\n\r\n  handleReaction = (e, type) => {\r\n    if (e !== undefined && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    this.props.handleReaction(type);\r\n    this.setUsernames(type);\r\n  };\r\n\r\n  getReactionCount = () => {\r\n    const reaction_counts = this.props.reaction_counts;\r\n    let count = null;\r\n    if (\r\n      reaction_counts !== null &&\r\n      reaction_counts !== undefined &&\r\n      Object.keys(reaction_counts).length > 0\r\n    ) {\r\n      count = 0;\r\n      Object.keys(reaction_counts).map(\r\n        (key) => (count += reaction_counts[key]),\r\n      );\r\n    }\r\n    return count;\r\n  };\r\n\r\n  renderUsers = (users) =>\r\n    users.map((user, i) => {\r\n      let text = user;\r\n      if (i + 1 < users.length) {\r\n        text += ', ';\r\n      }\r\n      return (\r\n        <span className=\"latest-user-username\" key={`key-${i}-${user}`}>\r\n          {text}\r\n        </span>\r\n      );\r\n    });\r\n\r\n  getReactionsByType = (reactions) => {\r\n    const reactionsByType = {};\r\n    reactions.map((item) => {\r\n      if (reactionsByType[item.type] === undefined) {\r\n        return (reactionsByType[item.type] = [item]);\r\n      } else {\r\n        return (reactionsByType[item.type] = [\r\n          ...reactionsByType[item.type],\r\n          item,\r\n        ]);\r\n      }\r\n    });\r\n    return reactionsByType;\r\n  };\r\n\r\n  renderReactions = (reactions) => {\r\n    const reactionsByType = this.getReactionsByType(reactions);\r\n    const reactionsEmojis = this.props.reactionOptions.reduce(\r\n      (acc, cur) => ({ ...acc, [cur.id]: cur }),\r\n      {},\r\n    );\r\n    return Object.keys(reactionsByType).map((type, i) => (\r\n      <li\r\n        className=\"str-chat__simple-reactions-list-item\"\r\n        key={`${reactionsByType[type][0].id}-${i}`}\r\n        onClick={(e) => this.handleReaction(e, type)}\r\n      >\r\n        <span onMouseEnter={() => this.setUsernames(type)}>\r\n          <NimbleEmoji\r\n            emoji={reactionsEmojis[type]}\r\n            {...emojiSetDef}\r\n            size={13}\r\n            data={emojiData}\r\n          />\r\n          &nbsp;\r\n        </span>\r\n      </li>\r\n    ));\r\n  };\r\n\r\n  getUsernames = (reactions) =>\r\n    reactions.map((item) =>\r\n      item.user !== null ? item.user.name || item.user.id : 'null',\r\n    );\r\n\r\n  setUsernames = (type) => {\r\n    const reactionsByType = this.getReactionsByType(this.props.reactions);\r\n\r\n    const reactions = reactionsByType[type];\r\n    const users = this.getUsernames(reactions);\r\n\r\n    this.setState(\r\n      {\r\n        users,\r\n      },\r\n      () => this.showTooltip(),\r\n    );\r\n  };\r\n\r\n  renderUsernames = (users) => users.join(', ');\r\n\r\n  render() {\r\n    const { reactions } = this.props;\r\n    if (!reactions || reactions.length === 0) {\r\n      return null;\r\n    }\r\n    return (\r\n      <ul\r\n        className=\"str-chat__simple-reactions-list\"\r\n        onMouseLeave={this.hideTooltip}\r\n      >\r\n        {this.state.showTooltip && (\r\n          <div\r\n            className=\"str-chat__simple-reactions-list-tooltip\"\r\n            ref={this.reactionSelectorTooltip}\r\n          >\r\n            <div className=\"arrow\" />\r\n            {this.renderUsernames(this.state.users)}\r\n          </div>\r\n        )}\r\n        {this.renderReactions(reactions)}\r\n        {reactions.length !== 0 && (\r\n          <li className=\"str-chat__simple-reactions-list-item--last-number\">\r\n            {this.getReactionCount()}\r\n          </li>\r\n        )}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport 'moment/locale/de';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport { Avatar } from './Avatar';\r\nimport { Attachment } from './Attachment';\r\nimport { MessageActionsBox } from './MessageActionsBox';\r\nimport { ReactionSelector } from './ReactionSelector';\r\nimport { SimpleReactionsList } from './SimpleReactionsList';\r\nimport { MessageInput } from './MessageInput';\r\nimport { EditMessageForm } from './EditMessageForm';\r\nimport { Gallery } from './Gallery';\r\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\r\n\r\nimport { isOnlyEmojis, renderText } from '../utils';\r\n\r\nconst reactionSvg =\r\n  '<svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\" fillRule=\"evenodd\"/></svg>';\r\nconst threadSvg =\r\n  '<svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\" fillRule=\"evenodd\" /></svg>';\r\nconst optionsSvg =\r\n  '<svg width=\"11\" height=\"3\" viewBox=\"0 0 11 3\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\" fillRule=\"nonzero\" /></svg>';\r\n\r\n/**\r\n * MessageLivestream - Render component, should be used together with the Message component\r\n * Implements the look and feel for a livestream use case.\r\n *\r\n * @example ./docs/MessageLivestream.md\r\n * @extends PureComponent\r\n */\r\nexport class MessageLivestream extends React.PureComponent {\r\n  static propTypes = {\r\n    /** The [message object](https://getstream.io/chat/docs/#message_format) */\r\n    message: PropTypes.object,\r\n    /**\r\n     * The attachment UI component.\r\n     * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\r\n     * */\r\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     *\r\n     * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\r\n     *\r\n     * The higher order message component, most logic is delegated to this component\r\n     * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\r\n     *\r\n     * */\r\n    Message: PropTypes.oneOfType([\r\n      PropTypes.node,\r\n      PropTypes.func,\r\n      PropTypes.object,\r\n    ]).isRequired,\r\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\r\n    unsafeHTML: PropTypes.bool,\r\n    /** If its parent message in thread. */\r\n    initialMessage: PropTypes.bool,\r\n    /** Channel config object */\r\n    channelConfig: PropTypes.object,\r\n    /** If component is in thread list */\r\n    threadList: PropTypes.bool,\r\n    /** Function to open thread on current messxage */\r\n    handleOpenThread: PropTypes.func,\r\n    /** If the message is in edit state */\r\n    editing: PropTypes.bool,\r\n    /** Function to exit edit state */\r\n    clearEditingState: PropTypes.func,\r\n    /** Returns true if message belongs to current user */\r\n    isMyMessage: PropTypes.func,\r\n    /** Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute] */\r\n    getMessageActions: PropTypes.func,\r\n    /**\r\n     * Function to publish updates on message to channel\r\n     *\r\n     * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\r\n     * */\r\n    updateMessage: PropTypes.func,\r\n    /**\r\n     * Reattempt sending a message\r\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\r\n     */\r\n    handleRetry: PropTypes.func,\r\n    /**\r\n     * Add or remove reaction on message\r\n     *\r\n     * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\r\n     * @param event Dom event which triggered this function\r\n     */\r\n    handleReaction: PropTypes.func,\r\n    /** If actions such as edit, delete, flag, mute are enabled on message */\r\n    actionsEnabled: PropTypes.bool,\r\n    /** DOMRect object for parent MessageList component */\r\n    messageListRect: PropTypes.object,\r\n    /**\r\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\r\n     *\r\n     * @param name {string} Name of action\r\n     * @param value {string} Value of action\r\n     * @param event Dom event that triggered this handler\r\n     */\r\n    handleAction: PropTypes.func,\r\n    /**\r\n     * The handler for hover event on @mention in message\r\n     *\r\n     * @param event Dom hover event which triggered handler.\r\n     * @param user Target user object\r\n     */\r\n    onMentionsHoverMessage: PropTypes.func,\r\n    /**\r\n     * The handler for click event on @mention in message\r\n     *\r\n     * @param event Dom click event which triggered handler.\r\n     * @param user Target user object\r\n     */\r\n    onMentionsClickMessage: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    Attachment,\r\n  };\r\n\r\n  state = {\r\n    actionsBoxOpen: false,\r\n    reactionSelectorOpen: false,\r\n  };\r\n\r\n  reactionSelectorRef = React.createRef();\r\n  editMessageFormRef = React.createRef();\r\n\r\n  isMine() {\r\n    return this.props.isMyMessage(this.props.message);\r\n  }\r\n\r\n  onClickReactionsAction = () => {\r\n    this.setState(\r\n      {\r\n        reactionSelectorOpen: true,\r\n      },\r\n      () => document.addEventListener('click', this.hideReactions, false),\r\n    );\r\n  };\r\n\r\n  onClickOptionsAction = () => {\r\n    this.setState(\r\n      {\r\n        actionsBoxOpen: true,\r\n      },\r\n      () => document.addEventListener('click', this.hideOptions, false),\r\n    );\r\n  };\r\n\r\n  hideOptions = () => {\r\n    this.setState({\r\n      actionsBoxOpen: false,\r\n    });\r\n    document.removeEventListener('click', this.hideOptions, false);\r\n  };\r\n\r\n  hideReactions = (e) => {\r\n    if (\r\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\r\n        e.target,\r\n      )\r\n    ) {\r\n      this.setState({\r\n        reactionSelectorOpen: false,\r\n      });\r\n      document.removeEventListener('click', this.hideReactions, false);\r\n    }\r\n  };\r\n\r\n  onMouseLeaveMessage = () => {\r\n    this.hideOptions();\r\n    this.setState(\r\n      {\r\n        reactionSelectorOpen: false,\r\n      },\r\n      () => document.removeEventListener('click', this.hideReactions, false),\r\n    );\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('click', this.hideOptions, false);\r\n    document.removeEventListener('click', this.hideReactions, false);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      Attachment,\r\n      message,\r\n      groupStyles,\r\n      editing,\r\n      clearEditingState,\r\n      updateMessage,\r\n      initialMessage,\r\n      handleReaction,\r\n      actionsEnabled,\r\n      messageListRect,\r\n      channelConfig,\r\n      threadList,\r\n      handleOpenThread,\r\n      Message,\r\n      onMentionsHoverMessage,\r\n      onMentionsClickMessage,\r\n      unsafeHTML,\r\n      handleRetry,\r\n      handleAction,\r\n      getMessageActions,\r\n      isMyMessage,\r\n      handleFlag,\r\n      handleMute,\r\n      handleEdit,\r\n      handleDelete,\r\n    } = this.props;\r\n    const hasAttachment = Boolean(\r\n      message.attachments && message.attachments.length,\r\n    );\r\n\r\n    let galleryImages = message.attachments.filter(\r\n      (item) => item.type === 'image',\r\n    );\r\n    let attachments = message.attachments;\r\n    if (galleryImages.length > 1) {\r\n      attachments = message.attachments.filter((item) => item.type !== 'image');\r\n    } else {\r\n      galleryImages = [];\r\n    }\r\n\r\n    if (message.type === 'message.read') {\r\n      return null;\r\n    }\r\n\r\n    if (message.type === 'message.date') {\r\n      return null;\r\n    }\r\n\r\n    if (message.deleted_at) {\r\n      return null;\r\n    }\r\n\r\n    if (editing) {\r\n      return (\r\n        <div\r\n          className={`str-chat__message-team str-chat__message-team--${\r\n            groupStyles[0]\r\n          } str-chat__message-team--editing`}\r\n          onMouseLeave={this.onMouseLeaveMessage}\r\n        >\r\n          {(groupStyles[0] === 'top' || groupStyles[0] === 'single') && (\r\n            <div className=\"str-chat__message-team-meta\">\r\n              <Avatar\r\n                image={message.user.image}\r\n                name={message.user.name || message.user.id}\r\n                size={40}\r\n              />\r\n            </div>\r\n          )}\r\n          <MessageInput\r\n            Input={EditMessageForm}\r\n            message={message}\r\n            clearEditingState={clearEditingState}\r\n            updateMessage={updateMessage}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n        <div\r\n          className={`str-chat__message-livestream str-chat__message-livestream--${\r\n            groupStyles[0]\r\n          } str-chat__message-livestream--${\r\n            message.type\r\n          } str-chat__message-livestream--${message.status} ${\r\n            initialMessage\r\n              ? 'str-chat__message-livestream--initial-message'\r\n              : ''\r\n          }`}\r\n          onMouseLeave={this.onMouseLeaveMessage}\r\n        >\r\n          {this.state.reactionSelectorOpen && (\r\n            <ReactionSelector\r\n              reverse={false}\r\n              handleReaction={handleReaction}\r\n              actionsEnabled={actionsEnabled}\r\n              detailedView\r\n              latest_reactions={message.latest_reactions}\r\n              reaction_counts={message.reaction_counts}\r\n              messageList={messageListRect}\r\n              ref={this.reactionSelectorRef}\r\n            />\r\n          )}\r\n          {!initialMessage &&\r\n            message.type !== 'error' &&\r\n            message.type !== 'system' &&\r\n            message.type !== 'ephemeral' &&\r\n            message.status !== 'failed' &&\r\n            message.status !== 'sending' && (\r\n              <div className={`str-chat__message-livestream-actions`}>\r\n                <span className={`str-chat__message-livestream-time`}>\r\n                  {moment(message.created_at).format('h:mmA')}\r\n                </span>\r\n                {channelConfig && channelConfig.reactions && (\r\n                  <span onClick={this.onClickReactionsAction}>\r\n                    <span\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: reactionSvg,\r\n                      }}\r\n                    />\r\n                  </span>\r\n                )}\r\n                {!threadList && channelConfig && channelConfig.replies && (\r\n                  <span\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: threadSvg,\r\n                    }}\r\n                    onClick={(e) => handleOpenThread(e, message)}\r\n                  />\r\n                )}\r\n                {getMessageActions().length > 0 && (\r\n                  <span onClick={this.onClickOptionsAction}>\r\n                    <span\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: optionsSvg,\r\n                      }}\r\n                    />\r\n                    <MessageActionsBox\r\n                      getMessageActions={getMessageActions}\r\n                      open={this.state.actionsBoxOpen}\r\n                      Message={Message}\r\n                      message={message}\r\n                      messageListRect={messageListRect}\r\n                      mine={isMyMessage(message)}\r\n                      handleFlag={handleFlag}\r\n                      handleMute={handleMute}\r\n                      handleEdit={handleEdit}\r\n                      handleDelete={handleDelete}\r\n                    />\r\n                  </span>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n          <div className={`str-chat__message-livestream-left`}>\r\n            <Avatar\r\n              image={message.user.image}\r\n              name={message.user.name || message.user.id}\r\n              size={30}\r\n            />\r\n          </div>\r\n          <div className={`str-chat__message-livestream-right`}>\r\n            <div className={`str-chat__message-livestream-content`}>\r\n              <div className=\"str-chat__message-livestream-author\">\r\n                <strong>{message.user.name || message.user.id}</strong>\r\n                {message.type === 'error' && (\r\n                  <div className=\"str-chat__message-team-error-header\">\r\n                    O\r\n                    <FormattedMessage\r\n                      id=\"message.error_header\"\r\n                      defaultMessage=\"Only visible to you\"\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div\r\n                className={\r\n                  isOnlyEmojis(message.text)\r\n                    ? 'str-chat__message-livestream-text--is-emoji'\r\n                    : ''\r\n                }\r\n                onMouseOver={onMentionsHoverMessage}\r\n                onClick={onMentionsClickMessage}\r\n              >\r\n                {message.type !== 'error' &&\r\n                  message.status !== 'failed' &&\r\n                  !unsafeHTML &&\r\n                  renderText(message)}\r\n\r\n                {message.type !== 'error' &&\r\n                  message.status !== 'failed' &&\r\n                  unsafeHTML && (\r\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\r\n                  )}\r\n\r\n                {message.type === 'error' && !message.command && (\r\n                  <p>\r\n                    <svg\r\n                      width=\"14\"\r\n                      height=\"14\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path\r\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\r\n                        fill=\"#EA152F\"\r\n                        fillRule=\"evenodd\"\r\n                      />\r\n                    </svg>\r\n                    {message.text}\r\n                  </p>\r\n                )}\r\n\r\n                {message.type === 'error' && message.command && (\r\n                  <p>\r\n                    <svg\r\n                      width=\"14\"\r\n                      height=\"14\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path\r\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\r\n                        fill=\"#EA152F\"\r\n                        fillRule=\"evenodd\"\r\n                      />\r\n                    </svg>\r\n                    <FormattedMessage\r\n                      id=\"command.error\"\r\n                      defaultMessage=\"<strong>/{command}</strong> is not a valid command\"\r\n                      values={{\r\n                        command: message.command,\r\n                        strong: (...chunks) => <strong>{chunks}</strong>,\r\n                      }}\r\n                    />\r\n                  </p>\r\n                )}\r\n                {message.status === 'failed' && (\r\n                  <p onClick={handleRetry.bind(this, message)}>\r\n                    <svg\r\n                      width=\"14\"\r\n                      height=\"14\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path\r\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\r\n                        fill=\"#EA152F\"\r\n                        fillRule=\"evenodd\"\r\n                      />\r\n                    </svg>\r\n                    <FormattedMessage\r\n                      id=\"message.failed\"\r\n                      defaultMessage=\"Message Failed  Click to try again\"\r\n                    />\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {hasAttachment &&\r\n                attachments.map((attachment, index) => (\r\n                  <Attachment\r\n                    key={`${message.id}-${index}`}\r\n                    attachment={attachment}\r\n                    actionHandler={handleAction}\r\n                  />\r\n                ))}\r\n\r\n              {galleryImages.length !== 0 && <Gallery images={galleryImages} />}\r\n\r\n              <SimpleReactionsList\r\n                reaction_counts={message.reaction_counts}\r\n                reactions={message.latest_reactions}\r\n                handleReaction={handleReaction}\r\n              />\r\n\r\n              {!initialMessage && (\r\n                <MessageRepliesCountButton\r\n                  onClick={handleOpenThread}\r\n                  reply_count={message.reply_count}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport { Attachment } from './Attachment';\r\nimport { Avatar } from './Avatar';\r\nimport { MessageActionsBox } from './MessageActionsBox';\r\nimport { ReactionSelector } from './ReactionSelector';\r\nimport { EditMessageForm } from './EditMessageForm';\r\nimport { SimpleReactionsList } from './SimpleReactionsList';\r\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\r\nimport { LoadingIndicator } from './LoadingIndicator';\r\nimport { Tooltip } from './Tooltip';\r\nimport { Gallery } from './Gallery';\r\nimport { MessageInput } from './MessageInput';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport 'moment/locale/de';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n\r\nimport { formatStatusArray, isOnlyEmojis, renderText } from '../utils';\r\n\r\nconst reactionSvg =\r\n  '<svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\" fillRule=\"evenodd\"/></svg>';\r\nconst threadSvg =\r\n  '<svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\" fillRule=\"evenodd\" /></svg>';\r\nconst optionsSvg =\r\n  '<svg width=\"11\" height=\"3\" viewBox=\"0 0 11 3\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\" fillRule=\"nonzero\" /></svg>';\r\n\r\n/**\r\n * MessageTeam - Render component, should be used together with the Message component\r\n * Implements the look and feel for a team style collaboration environment\r\n *\r\n * @example ./docs/MessageTeam.md\r\n * @extends PureComponent\r\n */\r\nclass MessageTeam extends PureComponent {\r\n  static propTypes = {\r\n    /** The [message object](https://getstream.io/chat/docs/#message_format) */\r\n    message: PropTypes.object,\r\n    /**\r\n     * The attachment UI component.\r\n     * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\r\n     * */\r\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     *\r\n     * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\r\n     *\r\n     * The higher order message component, most logic is delegated to this component\r\n     * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\r\n     * */\r\n    Message: PropTypes.oneOfType([\r\n      PropTypes.node,\r\n      PropTypes.func,\r\n      PropTypes.object,\r\n    ]).isRequired,\r\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\r\n    unsafeHTML: PropTypes.bool,\r\n    /** Client object */\r\n    client: PropTypes.object,\r\n    /** If its parent message in thread. */\r\n    initialMessage: PropTypes.bool,\r\n    /** Channel config object */\r\n    channelConfig: PropTypes.object,\r\n    /** If component is in thread list */\r\n    threadList: PropTypes.bool,\r\n    /** Function to open thread on current messxage */\r\n    handleOpenThread: PropTypes.func,\r\n    /** If the message is in edit state */\r\n    editing: PropTypes.bool,\r\n    /** Function to exit edit state */\r\n    clearEditingState: PropTypes.func,\r\n    /** Returns true if message belongs to current user */\r\n    isMyMessage: PropTypes.func,\r\n    /** Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute] */\r\n    getMessageActions: PropTypes.func,\r\n    /**\r\n     * Function to publish updates on message to channel\r\n     *\r\n     * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\r\n     * */\r\n    updateMessage: PropTypes.func,\r\n    /**\r\n     * Reattempt sending a message\r\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\r\n     */\r\n    handleRetry: PropTypes.func,\r\n    /**\r\n     * Add or remove reaction on message\r\n     *\r\n     * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\r\n     * @param event Dom event which triggered this function\r\n     */\r\n    handleReaction: PropTypes.func,\r\n    /** DOMRect object for parent MessageList component */\r\n    messageListRect: PropTypes.object,\r\n    /**\r\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\r\n     *\r\n     * @param name {string} Name of action\r\n     * @param value {string} Value of action\r\n     * @param event Dom event that triggered this handler\r\n     */\r\n    handleAction: PropTypes.func,\r\n    /**\r\n     * The handler for hover event on @mention in message\r\n     *\r\n     * @param event Dom hover event which triggered handler.\r\n     * @param user Target user object\r\n     */\r\n    onMentionsHoverMessage: PropTypes.func,\r\n    /**\r\n     * The handler for click event on @mention in message\r\n     *\r\n     * @param event Dom click event which triggered handler.\r\n     * @param user Target user object\r\n     */\r\n    onMentionsClickMessage: PropTypes.func,\r\n    /** Position of message in group. Possible values: top, bottom, middle, single */\r\n    groupStyles: PropTypes.array,\r\n  };\r\n\r\n  static defaultProps = {\r\n    Attachment,\r\n    groupStyles: ['single'],\r\n  };\r\n\r\n  state = {\r\n    actionsBoxOpen: false,\r\n    reactionSelectorOpen: false,\r\n  };\r\n\r\n  reactionSelectorRef = React.createRef();\r\n  editMessageFormRef = React.createRef();\r\n\r\n  onClickReactionsAction = () => {\r\n    this.setState(\r\n      {\r\n        reactionSelectorOpen: true,\r\n      },\r\n      () => document.addEventListener('click', this.hideReactions, false),\r\n    );\r\n  };\r\n\r\n  onClickOptionsAction = () => {\r\n    this.setState(\r\n      {\r\n        actionsBoxOpen: true,\r\n      },\r\n      () => document.addEventListener('click', this.hideOptions, false),\r\n    );\r\n  };\r\n\r\n  hideOptions = () => {\r\n    this.setState({\r\n      actionsBoxOpen: false,\r\n    });\r\n    document.removeEventListener('click', this.hideOptions, false);\r\n  };\r\n\r\n  hideReactions = (e) => {\r\n    if (\r\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\r\n        e.target,\r\n      )\r\n    ) {\r\n      this.setState({\r\n        reactionSelectorOpen: false,\r\n      });\r\n      document.removeEventListener('click', this.hideReactions, false);\r\n    }\r\n  };\r\n\r\n  onMouseLeaveMessage = () => {\r\n    this.hideOptions();\r\n    this.setState(\r\n      {\r\n        reactionSelectorOpen: false,\r\n      },\r\n      () => document.removeEventListener('click', this.hideReactions, false),\r\n    );\r\n  };\r\n\r\n  isMine() {\r\n    return this.props.isMyMessage(this.props.message);\r\n  }\r\n\r\n  renderStatus = () => {\r\n    \r\n    const {\r\n      readBy,\r\n      message,\r\n      threadList,\r\n      client,\r\n      lastReceivedId,\r\n      intl,\r\n    } = this.props;\r\n    if (!this.isMine() || message.type === 'error') {\r\n      return null;\r\n    }\r\n    const justReadByMe = readBy.length === 1 && readBy[0].id === client.user.id;\r\n    if (message.status === 'sending') {\r\n      return (\r\n        <span className=\"str-chat__message-team-status\">\r\n          <Tooltip>\r\n            <FormattedMessage\r\n              id=\"message.status.sending\"\r\n              defaultMessage=\"Sending...\"\r\n            />\r\n          </Tooltip>\r\n          <LoadingIndicator isLoading />\r\n        </span>\r\n      );\r\n    } else if (readBy.length !== 0 && !threadList && !justReadByMe) {\r\n      const readByOthers = readBy.filter((item) => item.id !== client.user.id);\r\n      const lastReadUser = readByOthers[0];\r\n      return (\r\n        <span className=\"str-chat__message-team-status\">\r\n          <Tooltip>{formatStatusArray(intl, readByOthers)}</Tooltip>\r\n          <Avatar\r\n            name={lastReadUser.name || lastReadUser.id}\r\n            image={lastReadUser.image}\r\n            size={15}\r\n          />\r\n          {readBy.length - 1 > 1 && (\r\n            <span className=\"str-chat__message-team-status-number\">\r\n              {readBy.length - 1}\r\n            </span>\r\n          )}\r\n        </span>\r\n      );\r\n    } else if (\r\n      message.status === 'received' &&\r\n      message.id === lastReceivedId &&\r\n      !threadList\r\n    ) {\r\n      return (\r\n        <span className=\"str-chat__message-team-status\">\r\n          <Tooltip>\r\n            <FormattedMessage\r\n              id=\"message.status.delivered\"\r\n              defaultMessage=\"Delivered\"\r\n            />\r\n          </Tooltip>\r\n          <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n              d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\r\n              fill=\"#006CFF\"\r\n              fillRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        </span>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n  componentWillUnmount() {\r\n    document.removeEventListener('click', this.hideOptions, false);\r\n    document.removeEventListener('click', this.hideReactions, false);\r\n  }\r\n\r\n  renderAttachments(attachments) {\r\n    const { Attachment, message, handleAction } = this.props;\r\n    return attachments.map((attachment, index) => (\r\n      <Attachment\r\n        key={`${message.id}-${index}`}\r\n        attachment={attachment}\r\n        actionHandler={handleAction}\r\n      />\r\n    ));\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  render() {\r\n    const {\r\n      message,\r\n      groupStyles,\r\n      editing,\r\n      clearEditingState,\r\n      updateMessage,\r\n      threadList,\r\n      initialMessage,\r\n      handleReaction,\r\n      channelConfig,\r\n      handleOpenThread,\r\n      Message,\r\n      messageListRect,\r\n      onMentionsHoverMessage,\r\n      onMentionsClickMessage,\r\n      unsafeHTML,\r\n      handleRetry,\r\n      getMessageActions,\r\n      isMyMessage,\r\n      handleFlag,\r\n      handleMute,\r\n      handleEdit,\r\n      handleDelete,\r\n      intl,\r\n    } = this.props;\r\n    if (message.type === 'message.read') {\r\n      return null;\r\n    }\r\n    const hasAttachment = Boolean(\r\n      message.attachments && message.attachments.length,\r\n    );\r\n\r\n    if (message.deleted_at) {\r\n      return null;\r\n    }\r\n\r\n    let galleryImages =\r\n      message.attachments &&\r\n      message.attachments.filter((item) => item.type === 'image');\r\n    let attachments = message.attachments;\r\n    if (galleryImages && galleryImages.length > 1) {\r\n      attachments = message.attachments.filter((item) => item.type !== 'image');\r\n    } else {\r\n      galleryImages = [];\r\n    }\r\n\r\n    // determine reaction selector alignment\r\n    const reactionDirection = 'left';\r\n\r\n    if (editing) {\r\n      return (\r\n        <div\r\n          className={`str-chat__message-team str-chat__message-team--${\r\n            groupStyles[0]\r\n          } str-chat__message-team--editing`}\r\n          onMouseLeave={this.onMouseLeaveMessage}\r\n        >\r\n          {(groupStyles[0] === 'top' || groupStyles[0] === 'single') && (\r\n            <div className=\"str-chat__message-team-meta\">\r\n              <Avatar\r\n                image={message.user.image}\r\n                name={message.user.name || message.user.id}\r\n                size={40}\r\n              />\r\n            </div>\r\n          )}\r\n          <MessageInput\r\n            Input={EditMessageForm}\r\n            message={message}\r\n            clearEditingState={clearEditingState}\r\n            updateMessage={updateMessage}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n   \r\n    return (\r\n      <React.Fragment>\r\n        <div\r\n          className={`str-chat__message-team str-chat__message-team--${\r\n            groupStyles[0]\r\n          } str-chat__message-team--${message.type} ${\r\n            threadList ? 'thread-list' : ''\r\n          } str-chat__message-team--${message.status}`}\r\n          onMouseLeave={this.onMouseLeaveMessage}\r\n        >\r\n          <div className=\"str-chat__message-team-meta\">\r\n            {groupStyles[0] === 'top' ||\r\n            groupStyles[0] === 'single' ||\r\n            initialMessage ? (\r\n              <div>\r\n                <Avatar\r\n                  image={message.user.image}\r\n                  name={message.user.name || message.user.id}\r\n                  size={40}\r\n                />\r\n              </div>\r\n            ) : (\r\n              <div style={{ width: 40, marginRight: 0 }} />\r\n            )}\r\n\r\n            <time dateTime={message.created_at} title={message.created_at}>\r\n              {Boolean(Date.parse(message.created_at)) &&\r\n                moment(message.created_at).format('h:mmA')}\r\n            </time>\r\n          </div>\r\n\r\n          <div className=\"str-chat__message-team-group\">\r\n            {(groupStyles[0] === 'top' ||\r\n              groupStyles[0] === 'single' ||\r\n              initialMessage) && (\r\n              <div className=\"str-chat__message-team-author\">\r\n                <strong>{message.user.name || message.user.id}</strong>\r\n                {message.type === 'error' && (\r\n                  <div className=\"str-chat__message-team-error-header\">\r\n                    Only visible to you\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n            <div\r\n              className={`str-chat__message-team-content str-chat__message-team-content--${\r\n                groupStyles[0]\r\n              } str-chat__message-team-content--${\r\n                message.text === '' ? 'image' : 'text'\r\n              }`}\r\n            >\r\n              {!initialMessage &&\r\n                message.status !== 'sending' &&\r\n                message.status !== 'failed' &&\r\n                message.type !== 'system' &&\r\n                message.type !== 'ephemeral' &&\r\n                message.type !== 'error' && (\r\n                  <div className={`str-chat__message-team-actions`}>\r\n                    {this.state.reactionSelectorOpen && (\r\n                      <ReactionSelector\r\n                        handleReaction={handleReaction}\r\n                        latest_reactions={message.latest_reactions}\r\n                        reaction_counts={message.reaction_counts}\r\n                        detailedView={true}\r\n                        direction={reactionDirection}\r\n                        ref={this.reactionSelectorRef}\r\n                      />\r\n                    )}\r\n\r\n                    {channelConfig && channelConfig.reactions && (\r\n                      <span\r\n                        title={intl.formatMessage({\r\n                          id: 'message.title.reactions',\r\n                          defaultMessage: 'Reactions',\r\n                        })}\r\n                        dangerouslySetInnerHTML={{\r\n                          __html: reactionSvg,\r\n                        }}\r\n                        onClick={this.onClickReactionsAction}\r\n                      />\r\n                    )}\r\n                    {!threadList && channelConfig && channelConfig.replies && (\r\n                      <span\r\n                        title={intl.formatMessage({\r\n                          id: 'message.title.open_thread',\r\n                          defaultMessage: 'Start a thread',\r\n                        })}\r\n                        dangerouslySetInnerHTML={{\r\n                          __html: threadSvg,\r\n                        }}\r\n                        onClick={(e) => handleOpenThread(e, message)}\r\n                      />\r\n                    )}\r\n                    {getMessageActions().length > 0 && (\r\n                      <span onClick={this.onClickOptionsAction}>\r\n                        <span\r\n                          title={intl.formatMessage({\r\n                            id: 'message.title.message_actions',\r\n                            defaultMessage: 'Message actions',\r\n                          })}\r\n                          dangerouslySetInnerHTML={{\r\n                            __html: optionsSvg,\r\n                          }}\r\n                        />\r\n                        <MessageActionsBox\r\n                          getMessageActions={getMessageActions}\r\n                          Message={Message}\r\n                          open={this.state.actionsBoxOpen}\r\n                          message={message}\r\n                          messageListRect={messageListRect}\r\n                          mine={isMyMessage(message)}\r\n                          handleFlag={handleFlag}\r\n                          handleMute={handleMute}\r\n                          handleEdit={handleEdit}\r\n                          handleDelete={handleDelete}\r\n                        />\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              <span\r\n                className={\r\n                  isOnlyEmojis(message.text)\r\n                    ? 'str-chat__message-team-text--is-emoji'\r\n                    : ''\r\n                }\r\n                onMouseOver={onMentionsHoverMessage}\r\n                onClick={onMentionsClickMessage}\r\n              >\r\n                {unsafeHTML ? (\r\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\r\n                ) : (\r\n                  renderText(message)\r\n                )}\r\n              </span>\r\n\r\n              {galleryImages.length !== 0 && <Gallery images={galleryImages} />}\r\n\r\n              {message.text === '' && this.renderAttachments(attachments)}\r\n\r\n              {message.latest_reactions &&\r\n                message.latest_reactions.length !== 0 &&\r\n                message.text !== '' && (\r\n                  <SimpleReactionsList\r\n                    reaction_counts={message.reaction_counts}\r\n                    handleReaction={handleReaction}\r\n                    reactions={message.latest_reactions}\r\n                  />\r\n                )}\r\n              {message.status === 'failed' && (\r\n                <button\r\n                  className=\"str-chat__message-team-failed\"\r\n                  onClick={handleRetry.bind(this, message)}\r\n                >\r\n                  <svg\r\n                    width=\"14\"\r\n                    height=\"14\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\r\n                      fill=\"#EA152F\"\r\n                      fillRule=\"evenodd\"\r\n                    />\r\n                  </svg>\r\n                  <FormattedMessage\r\n                    id=\"message.failed\"\r\n                    defaultMessage=\"Message Failed  Click to try again\"\r\n                  />\r\n                </button>\r\n              )}\r\n            </div>\r\n            {this.renderStatus()}\r\n            {message.text !== '' &&\r\n              hasAttachment &&\r\n              this.renderAttachments(attachments)}\r\n            {message.latest_reactions &&\r\n              message.latest_reactions.length !== 0 &&\r\n              message.text === '' && (\r\n                <SimpleReactionsList\r\n                  reaction_counts={message.reaction_counts}\r\n                  handleReaction={handleReaction}\r\n                  reactions={message.latest_reactions}\r\n                />\r\n              )}\r\n            {!threadList && (\r\n              <MessageRepliesCountButton\r\n                onClick={handleOpenThread}\r\n                reply_count={message.reply_count}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nMessageTeam = injectIntl(MessageTeam);\r\nexport { MessageTeam };\r\n","import React from 'react';\r\n\r\nimport { withChannelContext } from '../context';\r\nimport { MessageList } from './MessageList';\r\nimport { MessageInput } from './MessageInput';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Message } from './Message';\r\nimport { MessageInputSmall } from './MessageInputSmall';\r\nimport { smartRender } from '../utils';\r\n\r\n/**\r\n * Thread - The Thread renders a parent message with a list of replies. Use the standard message list of the main channel's messages.\r\n * The thread is only used for the list of replies to a message.\r\n * Underlying MessageList, MessageInput and Message components can be customized using props:\r\n * - additionalParentMessageProps\r\n * - additionalMessageListProps\r\n * - additionalMessageInputProps\r\n *\r\n * @example ./docs/Thread.md\r\n * @extends Component\r\n */\r\nclass Thread extends React.PureComponent {\r\n  static propTypes = {\r\n    /** Display the thread on 100% width of it's container. Useful for mobile style view */\r\n    fullWidth: PropTypes.bool,\r\n    /** Make input focus on mounting thread */\r\n    autoFocus: PropTypes.bool,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    channel: PropTypes.object.isRequired,\r\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\r\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n    /**\r\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\r\n     * The thread (the parent [message object](https://getstream.io/chat/docs/#message_format)) */\r\n    thread: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\r\n    /**\r\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\r\n     * The array of immutable messages to render. By default they are provided by parent Channel component */\r\n    threadMessages: PropTypes.array.isRequired,\r\n    /**\r\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\r\n     *\r\n     * Function which provides next page of thread messages.\r\n     * loadMoreThread is called when infinite scroll wants to load more messages\r\n     * */\r\n    loadMoreThread: PropTypes.func.isRequired,\r\n    /**\r\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\r\n     * If there are more messages available, set to false when the end of pagination is reached.\r\n     * */\r\n    threadHasMore: PropTypes.bool,\r\n    /**\r\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\r\n     * If the thread is currently loading more messages. This is helpful to display a loading indicator on threadlist */\r\n    threadLoadingMore: PropTypes.bool,\r\n    /**\r\n     * Additional props for underlying Message component of parent message at the top.\r\n     * Available props - https://getstream.github.io/stream-chat-react/#message\r\n     * */\r\n    additionalParentMessageProps: PropTypes.object,\r\n    /**\r\n     * Additional props for underlying MessageList component.\r\n     * Available props - https://getstream.github.io/stream-chat-react/#messagelist\r\n     * */\r\n    additionalMessageListProps: PropTypes.object,\r\n    /**\r\n     * Additional props for underlying MessageInput component.\r\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\r\n     * */\r\n    additionalMessageInputProps: PropTypes.object,\r\n    /** Customized MessageInput component to used within Thread instead of default MessageInput */\r\n    MessageInput: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\r\n  };\r\n\r\n  static defaultProps = {\r\n    threadHasMore: true,\r\n    threadLoadingMore: true,\r\n    fullWidth: false,\r\n    autoFocus: true,\r\n    MessageInput,\r\n  };\r\n\r\n  render() {\r\n    if (!this.props.thread) {\r\n      return null;\r\n    }\r\n    const parentID = this.props.thread.id;\r\n    const cid = this.props.channel.cid;\r\n\r\n    const key = `thread-${parentID}-${cid}`;\r\n    // We use a wrapper to make sure the key variable is set.\r\n    // this ensures that if you switch thread the component is recreated\r\n    return <ThreadInner {...this.props} key={key} />;\r\n  }\r\n}\r\n\r\nclass ThreadInner extends React.PureComponent {\r\n  static propTypes = {\r\n    /** Channel is passed via the Channel Context */\r\n    channel: PropTypes.object.isRequired,\r\n    /** the thread (just a message) that we're rendering */\r\n    thread: PropTypes.object.isRequired,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.messageList = React.createRef();\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const parentID = this.props.thread.id;\r\n    if (parentID && this.props.thread.reply_count) {\r\n      await this.props.loadMoreThread();\r\n    }\r\n  }\r\n  getSnapshotBeforeUpdate(prevProps) {\r\n    // Are we adding new items to the list?\r\n    // Capture the scroll position so we can adjust scroll later.\r\n    if (prevProps.threadMessages.length < this.props.threadMessages.length) {\r\n      const list = this.messageList.current;\r\n      return list.scrollHeight - list.scrollTop;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  async componentDidUpdate(prevProps, prevState, snapshot) {\r\n    const parentID = this.props.thread.id;\r\n    if (\r\n      parentID &&\r\n      this.props.thread.reply_count > 0 &&\r\n      this.props.threadMessages.length === 0\r\n    ) {\r\n      await this.props.loadMoreThread();\r\n    }\r\n\r\n    // If we have a snapshot value, we've just added new items.\r\n    // Adjust scroll so these new items don't push the old ones out of view.\r\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\r\n    if (snapshot !== null) {\r\n      const list = this.messageList.current;\r\n\r\n      const scrollDown = () => {\r\n        list.scrollTop = list.scrollHeight - snapshot;\r\n      };\r\n      scrollDown();\r\n      // scroll down after images load again\r\n      setTimeout(scrollDown, 100);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.thread) {\r\n      return null;\r\n    }\r\n\r\n    const read = {};\r\n    return (\r\n      <div\r\n        className={`str-chat__thread ${\r\n          this.props.fullWidth ? 'str-chat__thread--full' : ''\r\n        }`}\r\n      >\r\n        <div className=\"str-chat__thread-header\">\r\n          <div className=\"str-chat__thread-header-details\">\r\n            <strong>Thread</strong>\r\n            <small>{this.props.thread.reply_count} replies</small>\r\n          </div>\r\n          <button\r\n            onClick={(e) => this.props.closeThread(e)}\r\n            className=\"str-chat__square-button\"\r\n          >\r\n            <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path\r\n                d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\r\n                fillRule=\"evenodd\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        <div className=\"str-chat__thread-list\" ref={this.messageList}>\r\n          <Message\r\n            message={this.props.thread}\r\n            initialMessage\r\n            threadList\r\n            Message={this.props.Message}\r\n            // TODO: remove the following line in next release, since we already have additionalParentMessageProps now.\r\n            {...this.props}\r\n            {...this.props.additionalParentMessageProps}\r\n          />\r\n          <div className=\"str-chat__thread-start\">Start of a new thread</div>\r\n          <MessageList\r\n            messages={this.props.threadMessages}\r\n            read={read}\r\n            threadList\r\n            loadMore={this.props.loadMoreThread}\r\n            hasMore={this.props.threadHasMore}\r\n            loadingMore={this.props.threadLoadingMore}\r\n            Message={this.props.Message}\r\n            {...this.props.additionalMessageListProps}\r\n          />\r\n          {smartRender(this.props.MessageInput, {\r\n            MessageInputSmall,\r\n            parent: this.props.thread,\r\n            focus: this.props.autoFocus,\r\n            ...this.props.additionalMessageInputProps,\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nThread = withChannelContext(Thread);\r\nexport { Thread };\r\n","import React from 'react';\r\n\r\nimport { Avatar } from './Avatar';\r\n\r\nexport class TypingIndicator extends React.PureComponent {\r\n  render() {\r\n    // if (Object.keys(this.props.typing).length <= 0) {\r\n    //   return null;\r\n    // }\r\n\r\n    const typing = Object.values(this.props.typing);\r\n    let show;\r\n    if (\r\n      typing.length === 0 ||\r\n      (typing.length === 1 && typing[0].user.id === this.props.client.user.id)\r\n    ) {\r\n      show = false;\r\n    } else {\r\n      show = true;\r\n    }\r\n    return (\r\n      <div\r\n        className={`str-chat__typing-indicator ${\r\n          show ? 'str-chat__typing-indicator--typing' : ''\r\n        }`}\r\n      >\r\n        <div className=\"str-chat__typing-indicator__avatars\">\r\n          {typing\r\n            .filter(({ user }) => user.id !== this.props.client.user.id)\r\n            .map(({ user }) => (\r\n              <Avatar\r\n                image={user.image}\r\n                size={32}\r\n                name={user.name || user.id}\r\n                key={user.id}\r\n              />\r\n            ))}\r\n        </div>\r\n        <div className=\"str-chat__typing-indicator__dots\">\r\n          <span className=\"str-chat__typing-indicator__dot\" />\r\n          <span className=\"str-chat__typing-indicator__dot\" />\r\n          <span className=\"str-chat__typing-indicator__dot\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withChannelContext } from '../context';\r\n\r\n/**\r\n * Window - A UI component for conditionally displaying thread or channel.\r\n *\r\n * @example ./docs/Window.md\r\n * @extends PureComponent\r\n */\r\nclass Window extends React.PureComponent {\r\n  static propTypes = {\r\n    /** show or hide the window when a thread is active */\r\n    hideOnThread: PropTypes.bool,\r\n    /** Flag if thread is open or not */\r\n    thread: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\r\n  };\r\n\r\n  static defaultProps = {\r\n    hideOnThread: false,\r\n  };\r\n\r\n  render() {\r\n    // If thread is active and window should hide on thread. Return null\r\n    if (this.props.thread && this.props.hideOnThread) {\r\n      return null;\r\n    }\r\n    return <div className={`str-chat__main-panel`}>{this.props.children}</div>;\r\n  }\r\n}\r\n\r\nWindow = withChannelContext(Window);\r\nexport { Window };\r\n","// Setup\r\nimport './styles/_variables.scss';\r\nimport './styles/_base.scss';\r\n\r\n// Components\r\n\r\nimport './styles/vendor/react-file-utils.scss';\r\nimport './styles/vendor/emoji-mart.scss';\r\n\r\nimport './styles/ActionsBox.scss';\r\nimport './styles/AttachmentActions.scss';\r\nimport './styles/Attachment.scss';\r\nimport './styles/Avatar.scss';\r\nimport './styles/Audio.scss';\r\nimport './styles/Card.scss';\r\nimport './styles/ChannelHeader.scss';\r\nimport './styles/ChannelList.scss';\r\nimport './styles/ChannelListMessenger.scss';\r\nimport './styles/ChannelListTeam.scss';\r\nimport './styles/ChannelPreview.scss';\r\nimport './styles/ChannelSearch.scss';\r\nimport './styles/ChatDown.scss';\r\nimport './styles/EventComponent.scss';\r\nimport './styles/DateSeparator.scss';\r\nimport './styles/EditMessageForm.scss';\r\nimport './styles/Gallery.scss';\r\nimport './styles/InfiniteScrollPaginator.scss';\r\nimport './styles/LoadingChannels.scss';\r\nimport './styles/LoadingIndicator.scss';\r\nimport './styles/LoadMoreButton.scss';\r\nimport './styles/Message.scss';\r\nimport './styles/MessageActions.scss';\r\nimport './styles/MessageCommerce.scss';\r\nimport './styles/MessageInput.scss';\r\nimport './styles/MessageInputFlat.scss';\r\nimport './styles/MessageNotification.scss';\r\nimport './styles/MessageList.scss';\r\nimport './styles/MessageTeam.scss';\r\nimport './styles/MessageLivestream.scss';\r\nimport './styles/MessageRepliesCountButton.scss';\r\nimport './styles/Modal.scss';\r\nimport './styles/NewChannel.scss';\r\nimport './styles/ReactionList.scss';\r\nimport './styles/ReactionSelector.scss';\r\nimport './styles/ReadState.scss';\r\nimport './styles/SendButton.scss';\r\nimport './styles/SimpleReactionsList.scss';\r\nimport './styles/SmallMessageInput.scss';\r\nimport './styles/Thread.scss';\r\nimport './styles/TypingIndicator.scss';\r\nimport './styles/Tooltip.scss';\r\n\r\n//\r\nexport * from './components';\r\n"],"names":["Avatar","errored","loaded","name","split","slice","map","charAt","setState","prevProps","image","props","size","shape","initials","getInitials","React","width","height","flexBasis","lineHeight","fontSize","state","objectFit","onLoad","onError","PureComponent","PropTypes","string","oneOf","number","SafeAnchor","href","sanitizeUrl","children","Card","url","trimmedUrl","undefined","replace","title","title_link","text","type","image_url","thumb_url","og_scrape_url","trimUrl","giphyLogo","isRequired","Image","modalIsOpen","currentIndex","fallback","formattedArray","src","toggleModal","AttachmentActions","id","actions","actionHandler","action","style","value","bind","array","func","Audio","audioRef","current","pause","updateProgress","playing","setInterval","play","window","clearInterval","position","currentTime","duration","progress","pauseAudio","e","handleClose","open","og","asset_url","React.createElement","playAudio","description","Attachment","createRef","a","renderAttachmentActions","extra","length","attachment","attachmentType","results","push","mime_type","file_size","prettybytes","renderAttachment","attachmentRef","object","propTypes","emojiSetDef","spriteUrl","sheetColumns","sheetRows","sheetSize","commonEmoji","emoticons","short_names","custom","defaultMinimalEmojis","colons","sheet_x","sheet_y","d","Object","assign","data","emojis","emojiData","isOnlyEmojis","noEmojis","emojiRegex","noSpace","isPromise","thing","then","byDate","b","created_at","formatTypingArray","intl","dict","arr2","keys","arr3","forEach","item","i","user","and","formatMessage","defaultMessage","typing","count","outStr","join","formatStatusArray","arr","slicedArr","restLength","more","lastStr","renderText","message","language","dplChatConfig","translations","en","de","it","es","pl","fr","mentioned_users","allowed","urls","anchorme","list","urlInfo","displayLink","truncate","encoded","omission","mkdown","protocol","raw","newText","username","re","RegExp","generateRandomId","S4","Math","random","toString","substring","smartRender","ElementOrComponentOrLiteral","isValidElement","element","ComponentOrLiteral","MESSAGE_ACTIONS","edit","delete","flag","mute","languageChangedEventName","languageChangedEvent","Event","MessageActionsBox","reverse","rect","actionsBoxRef","getBoundingClientRect","ml","messageListRect","mine","left","right","handleFlag","handleMute","handleEdit","handleDelete","getMessageActions","messageActions","indexOf","Component","bool","Message","oneOfType","node","ReactionsList","reactions","reactionsByType","reactionsEmojis","reactionOptions","reduce","acc","cur","reaction_counts","key","onClick","reactionList","_renderReactions","_getReactionCount","Tooltip","LoadingIndicator","color","stopRef","stopColor","Gallery","index","images","backgroundImage","ReactionSelector","users","target","showTooltip","setTooltipPosition","setArrowPosition","arrowPosition","positionCaculated","filter","filtered","getUsersPerReaction","reactionSelector","reactionSelectorTooltip","getContainerDimensions","container","getToolTipDimensions","tooltip","x","latest_reactions","reaction","getUserNames","latestUser","getLatestUser","handleReaction","Boolean","detailedView","hideTooltip","positionCalculated","reactionSelectorInner","visibility","opacity","renderUsers","renderReactionItems","MessageRepliesCountButton","reply_count","Modal","innerRef","contains","onClose","document","removeEventListener","handleEscKey","addEventListener","keyCode","openClasses","handleClick","ChatContext","createContext","client","withChatContext","OriginalComponent","ContextAwareComponent","ContextComponent","context","mergedProps","displayName","ChannelContext","withChannelContext","channelContext","KEY_CODES","ESC","UP","DOWN","ENTER","TAB","SPACE","Listener","refCount","f","keyCodes","fn","listeners","code","which","values","includes","Item","onSelectHandler","component","onClickHandler","selected","className","selectItem","List","selectedItem","preventDefault","modifyText","getPositionInList","findIndex","getId","textToReplace","getTextToReplace","onSelect","getSelectedItem","keyboard","dropdownScroll","itemsRef","oldPosition","newPosition","Listeners","add","scroll","onPressEnter","newValues","val","cachedValues","listener","pop","remove","itemClassName","itemStyle","__html","renderHeader","ref","isSelected","defaultScrollToItem","itemHeight","parseInt","getComputedStyle","getPropertyValue","containerHight","itemOffsetTop","offsetTop","actualScrollTop","scrollTop","DEFAULT_CARET_POSITION","errorMessage","console","error","ReactTextareaAutocomplete","textareaRef","selectionStart","selectionEnd","substr","focus","setSelectionRange","event","trigger","currentTrigger","hasFocus","matches","shiftKey","_replaceWord","handleSubmit","replaceWord","lastWordRegex","match","exec","getCaretPosition","lastWord","spaces","newWord","textBeforeWord","textAfterCaret","CustomEvent","bubbles","dispatchEvent","onChange","newToken","textareaValue","computeCaretPosition","token","startToken","Number","isInteger","Error","textToModify","startOfTokenPosition","search","allowWhitespace","newTokenString","caretPosition","newCaretPosition","modifiedText","dataLoading","setCaretPosition","_closeAutocomplete","triggerSettings","_getCurrentTriggerSettings","callback","actualToken","output","String","dataProvider","providedData","Promise","resolve","Array","isArray","catch","tokenRegExp","top","notSafe","prop","minChar","onCaretPositionChange","movePopupAsYouType","textarea","persist","tokenMatch","lastToken","find","afterWhitespace","getCaretCoordinates","newTop","newLeft","_getValuesFromProvider","err","closeOnClickOutside","onBlur","el","relatedTarget","dropdownRef","Node","scrollToItem","loadingComponent","_createRegExp","listenerIndex","_onSpace","_onEnter","startListen","nextProps","_update","stopListen","oldValue","oldTrigger","Loader","listClassName","dropdownClassName","dropdownStyle","containerStyle","containerClassName","loaderStyle","loaderClassName","suggestionData","_getSuggestions","_getTextToReplace","_getItemOnSelect","maxRows","grow","_onSelect","_dropdownScroll","_cleanUpProps","_changeHandler","_selectHandler","_onScrollHandler","_onClickAndBlurHandler","onFocus","triggerPropsCheck","triggers","entries","triggerChar","settings","triggerSetting","listStyle","EmoticonItem","entity","native","char","UserItem","u","CommandItem","c","args","ChatAutoComplete","q","emojiIndex","matchingUsers","toLowerCase","onSelectItem","selectedCommands","commands","sort","nameA","nameB","word","found","emoji","AutoCompleteTextarea","getTriggers","emojiReplace","rows","placeholder","onPaste","disabled","MessageInputLarge","imageOrder","imageUploads","removeImage","uploadImage","uploadNewFiles","multipleUploads","numberOfUploads","maxNumberOfFiles","fileOrder","fileUploads","removeFile","uploadFile","emojiPickerIsOpen","emojiPickerRef","onSelectEmoji","SendButton","acceptedFiles","renderUploads","renderEmojiPicker","getUsers","getCommands","handleChange","openEmojiPicker","watcher_count","injectIntl","sendMessage","Element","prototype","msMatchesSelector","webkitMatchesSelector","MessageInput","showEmojiPicker","closeEmojiPicker","insertText","textToInsert","prevState","prevText","textareaElement","newCursorPosition","channel","getConfig","members","watchers","member","userMap","logChatPromiseExecution","keystroke","editing","trimmedMessage","trim","isEmptyMessage","hasFiles","attachments","file","upload","updatedMessage","clearEditingState","updateMessagePromise","editMessage","sendMessagePromise","uniq","parent","Immutable","stopTyping","files","startsWith","_uploadNewImage","File","noFiles","_uploadNewFile","concat","setIn","FileReader","reader","onload","result","readAsDataURL","_uploadImage","_uploadFile","img","response","doImageUploadRequest","sendImage","warn","alreadyRemoved","errorHandler","feedGroup","userId","doFileUploadRequest","sendFile","set","_id","items","clipboardData","dataTransferItemsHaveFiles","kind","plainTextPromise","getAsString","s","dataTransferItemsToFiles","fileLikes","_uploadNewFiles","attach","mention","filePanelIsOpen","panelRef","hideFilePanel","Input","handlers","_removeImage","_removeFile","_onPaste","_onSelectItem","EditMessageForm","MessageSimple","isFocused","actionsBoxOpen","showDetailedReactions","_isMounted","hideOptions","_closeDetailedReactions","reactionSelectorRef","readBy","threadList","lastReceivedId","isMine","justReadByMe","status","readByOthers","lastReadUser","onLanguageChanged","deleted_at","isMyMessage","initialMessage","channelConfig","handleOpenThread","renderMessageActions","replies","_clickReactionList","handleRetry","updateMessage","actionsEnabled","handleAction","onMentionsHoverMessage","onMentionsClickMessage","unsafeHTML","when","moment","calendar","messageClasses","hasAttachment","hasReactions","additionalMessageInputProps","_hideOptions","messageRef","renderStatus","renderOptions","html","role","isModerator","isOwner","isAdmin","canEditMessage","returnValue","apply","getFlagMessageSuccessNotification","getFlagMessageErrorNotification","flagMessage","successMessage","validateAndGetNotificationMessage","addNotification","getMuteUserSuccessNotification","getMuteUserErrorNotification","muteUser","setEditingState","deleteMessage","reactionType","userExistingReaction","currentUser","userID","own_reactions","originalMessage","reactionChangePromise","deleteReaction","messageID","sendReaction","formData","sendAction","removeMessage","retrySendMessage","onMentionsClick","onMentionsHover","messageActionsProps","messageActionsAfterPermission","canDeleteMessage","loading","shouldUpdate","deepequal","reason","groupStyles","config","openThread","EmptyStateIndicator","listType","Indicator","ReverseInfiniteScroll","scrollListener","scrollEventCount","pageLoaded","pageStart","attachScrollListener","detachScrollListener","detachMousewheelListener","loader","defaultLoader","scrollEl","useWindow","scrollComponent","parentNode","mousewheelListener","useCapture","getParentElement","hasMore","isLoading","initialLoad","deltaY","offset","reverseOffset","standardOffset","scrollHeight","clientHeight","isReverse","listenToScroll","threshold","offsetParent","loadMore","calculateTopPosition","offsetHeight","innerHeight","renderProps","filterProps","childrenArray","unshift","createElement","MessageNotification","showNotification","DateSeparator","Date","parse","date","formatDate","Moment","toISOString","nextWeek","nextDay","sameDay","lastDay","lastWeek","sameElse","instanceOf","EventComponent","format","sentence","MessageList","online","_scrollToRef","bottomRef","messageList","scrollDown","scrollToTarget","call","setTimeout","containerEl","isElement","nodeType","isNumber","messages","newMessages","messageDate","getDay","prevMessageDate","eventsNextToMessage","eventHistory","headerPosition","messageTime","getTime","nextMessageTime","splice","scrollToBottom","newMessagesNotification","readData","read","readState","last_read","userLastReadMsgId","msg","updated_at","scrollOffset","userScrolledUp","l","m","messageGroupStyles","previousMessage","nextMessage","isTopMessage","isBottomMessage","noGroupByUser","tagName","textContent","innerHTML","userName","notificationText","nextIndex","newNotifications","notifications","ct","notification","notificationTimeouts","messageLimit","display","searchInput","handleSearch","messageRefs","activeSearchResultId","searchResultId","classList","activeSearchResultCount","updatedComponent","on","connectionChanged","keypress","off","clearTimeout","offsetBottom","snapshot","currentLastMessage","previousLastMessage","hasNewMessage","allMessages","MessageSystem","insertDates","HeaderComponent","insertIntro","getGroupStyles","TypingIndicator","dateSeparator","getReadStates","getLastReceived","elements","background","toggleSearch","nextSearchResult","previousSearchResult","_loadMore","loadingMore","goToNewMessages","cleanSearchResult","searchValue","resultIdArray","Center","Notification","active","messages_en","messages_de","messages_es","messages_it","messages_pl","messages_cs","messages_da","messages_fr","messages_nl","messages_pt","messages_ru","messages_zh","Chat","query","watch","setActiveChannel","setActiveSearch","theme","locale","getContext","LoadingErrorIndicator","Channel","cid","doSendMessageRequest","doUpdateMessageRequest","ChannelInner","threadMessages","threads","thread","threadLoadingMore","parentID","oldMessages","oldestMessageID","limit","getReplies","id_lt","queryResponse","_loadMoreThreadFinishedDebounced","threadHasMore","extraState","addMessageSorted","parent_id","clientSideID","uuidv4","messageData","messageResponse","filterErrorMessages","messagePreview","createMessagePreview","messageInput","userAutocomplete","_sendMessage","asMutable","threadState","messageToImmutable","mainChannelUpdated","show_in_channel","Visibility","_markReadThrottled","unread","countUnread","lastRead","originalTitle","addToEventHistory","_setStateThrottled","lastMessageId","read_events","markRead","oldestMessage","oldestID","perPage","_loadMoreFinishedDebounced","closeThread","loadMoreThread","_onMentionsHoverOrClick","debounce","loadMoreFinished","leading","trailing","loadMoreThreadFinished","throttle","initialized","copyChannelState","listenToChanges","handleEvent","cancel","visibilityListener","unbind","selectRegularMessages","boundMarkRead","change","core","renderComponent","ChannelHeader","update","extraType","referenceId","assignFlag","languages","responsiveMember","user_id","onLanguageChange","languageOptions","goToDetails","option","j","label","jumpTo","live","subtitle","member_count","SetResponsive","localStorage","setItem","getItem","MessageInputFlat","MessageInputSmall","openFilePanel","ChannelSearch","ChannelPreviewLastMessage","channelPreviewButton","blur","unreadClass","unread_count","activeClass","onSelectChannel","latestMessage","closeMenu","ChannelPreviewCountOnly","ChannelPreview","isActive","activeChannel","lastMessage","command","Preview","getLatestMessage","LoadMoreButton","refreshing","LoadMorePaginator","React.Fragment","hasNextPage","loadNextPage","LoadingChannels","ChatDown","ChannelListTeam","onSortChange","channelTypes","onFilterChange","filterOptions","onAdminFilterChange","adminControlOpen","adminFilter","$in","mergedFilter","onSelectFilter","searchOpen","resetSearch","disableSort","inputMembers","inputExtraTypes","$eq","$ne","filterType","onSelectSort","showSidebar","toggleAdminControl","toggleChannelSearch","channelId","hasOwnProperty","searchResultChannels","resultChannelArray","onChannelResult","onToggleSearchModus","isOn","noResult","ChannelList","options","filters","newOptions","channelPromise","queryChannels","channelQueryResponse","channels","loadingChannels","customActiveChannel","moveChannelUp","newChannels","lockChannelOrder","connectionRecoveredCount","onMessageNew","getChannel","uniqBy","onAddedToChannel","onRemovedFromChannel","channelIndex","channelUpdateCount","onChannelUpdated","onChannelDeleted","onChannelTruncated","menuButton","checked","oldChannels","searchModus","noResults","onResetSearch","onChannelSearchResult","info","lastChannels","Paginator","channelList","_renderChannel","customAciveChannel","ChannelListMessenger","ChannelPreviewCompact","ChannelPreviewMessenger","removeChannel","_client","onDeleteChannel","showUnread","InfiniteScroll","doc","documentElement","body","pageYOffset","calculateOffset","InfiniteScrollPaginator","MessageCommerce","SimpleReactionsList","setUsernames","getReactionsByType","getUsernames","renderUsernames","renderReactions","getReactionCount","reaction_coutns","reactionSvg","threadSvg","optionsSvg","MessageLivestream","reactionSelectorOpen","hideReactions","galleryImages","onMouseLeaveMessage","onClickReactionsAction","onClickOptionsAction","strong","chunks","MessageTeam","reactionDirection","marginRight","renderAttachments","Thread","fullWidth","autoFocus","additionalParentMessageProps","additionalMessageListProps","ThreadInner","show","Window","hideOnThread"],"mappings":"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"}